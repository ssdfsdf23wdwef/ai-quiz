var rV=Object.defineProperty;var AR=i=>{throw TypeError(i)};var sV=(i,e,t)=>e in i?rV(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var ht=(i,e,t)=>sV(i,typeof e!="symbol"?e+"":e,t),US=(i,e,t)=>e.has(i)||AR("Cannot "+t);var g=(i,e,t)=>(US(i,e,"read from private field"),t?t.call(i):e.get(i)),te=(i,e,t)=>e.has(i)?AR("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),G=(i,e,t,n)=>(US(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),ne=(i,e,t)=>(US(i,e,"access private method"),t);var Oa=(i,e,t,n)=>({set _(r){G(i,e,r,t)},get _(){return g(i,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var kse=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function BP(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var zS={exports:{}},b1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SR;function aV(){if(SR)return b1;SR=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var l in r)l!=="key"&&(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:i,type:n,key:a,ref:r!==void 0?r:null,props:s}}return b1.Fragment=e,b1.jsx=t,b1.jsxs=t,b1}var TR;function oV(){return TR||(TR=1,zS.exports=aV()),zS.exports}var T=oV(),jS={exports:{}},Sn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ER;function lV(){if(ER)return Sn;ER=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(re){return re===null||typeof re!="object"?null:(re=p&&re[p]||re["@@iterator"],typeof re=="function"?re:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,E={};function R(re,xe,q){this.props=re,this.context=xe,this.refs=E,this.updater=q||v}R.prototype.isReactComponent={},R.prototype.setState=function(re,xe){if(typeof re!="object"&&typeof re!="function"&&re!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,re,xe,"setState")},R.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")};function I(){}I.prototype=R.prototype;function D(re,xe,q){this.props=re,this.context=xe,this.refs=E,this.updater=q||v}var j=D.prototype=new I;j.constructor=D,C(j,R.prototype),j.isPureReactComponent=!0;var X=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},ue=Object.prototype.hasOwnProperty;function U(re,xe,q,ee,he,me){return q=me.ref,{$$typeof:i,type:re,key:xe,ref:q!==void 0?q:null,props:me}}function P(re,xe){return U(re.type,xe,void 0,void 0,void 0,re.props)}function V(re){return typeof re=="object"&&re!==null&&re.$$typeof===i}function Y(re){var xe={"=":"=0",":":"=2"};return"$"+re.replace(/[=:]/g,function(q){return xe[q]})}var O=/\/+/g;function F(re,xe){return typeof re=="object"&&re!==null&&re.key!=null?Y(""+re.key):xe.toString(36)}function B(){}function H(re){switch(re.status){case"fulfilled":return re.value;case"rejected":throw re.reason;default:switch(typeof re.status=="string"?re.then(B,B):(re.status="pending",re.then(function(xe){re.status==="pending"&&(re.status="fulfilled",re.value=xe)},function(xe){re.status==="pending"&&(re.status="rejected",re.reason=xe)})),re.status){case"fulfilled":return re.value;case"rejected":throw re.reason}}throw re}function fe(re,xe,q,ee,he){var me=typeof re;(me==="undefined"||me==="boolean")&&(re=null);var ye=!1;if(re===null)ye=!0;else switch(me){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(re.$$typeof){case i:case e:ye=!0;break;case f:return ye=re._init,fe(ye(re._payload),xe,q,ee,he)}}if(ye)return he=he(re),ye=ee===""?"."+F(re,0):ee,X(he)?(q="",ye!=null&&(q=ye.replace(O,"$&/")+"/"),fe(he,xe,q,"",function(Me){return Me})):he!=null&&(V(he)&&(he=P(he,q+(he.key==null||re&&re.key===he.key?"":(""+he.key).replace(O,"$&/")+"/")+ye)),xe.push(he)),1;ye=0;var Ae=ee===""?".":ee+":";if(X(re))for(var Ie=0;Ie<re.length;Ie++)ee=re[Ie],me=Ae+F(ee,Ie),ye+=fe(ee,xe,q,me,he);else if(Ie=y(re),typeof Ie=="function")for(re=Ie.call(re),Ie=0;!(ee=re.next()).done;)ee=ee.value,me=Ae+F(ee,Ie++),ye+=fe(ee,xe,q,me,he);else if(me==="object"){if(typeof re.then=="function")return fe(H(re),xe,q,ee,he);throw xe=String(re),Error("Objects are not valid as a React child (found: "+(xe==="[object Object]"?"object with keys {"+Object.keys(re).join(", ")+"}":xe)+"). If you meant to render a collection of children, use an array instead.")}return ye}function Q(re,xe,q){if(re==null)return re;var ee=[],he=0;return fe(re,ee,"","",function(me){return xe.call(q,me,he++)}),ee}function ce(re){if(re._status===-1){var xe=re._result;xe=xe(),xe.then(function(q){(re._status===0||re._status===-1)&&(re._status=1,re._result=q)},function(q){(re._status===0||re._status===-1)&&(re._status=2,re._result=q)}),re._status===-1&&(re._status=0,re._result=xe)}if(re._status===1)return re._result.default;throw re._result}var ge=typeof reportError=="function"?reportError:function(re){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof re=="object"&&re!==null&&typeof re.message=="string"?String(re.message):String(re),error:re});if(!window.dispatchEvent(xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",re);return}console.error(re)};function Te(){}return Sn.Children={map:Q,forEach:function(re,xe,q){Q(re,function(){xe.apply(this,arguments)},q)},count:function(re){var xe=0;return Q(re,function(){xe++}),xe},toArray:function(re){return Q(re,function(xe){return xe})||[]},only:function(re){if(!V(re))throw Error("React.Children.only expected to receive a single React element child.");return re}},Sn.Component=R,Sn.Fragment=t,Sn.Profiler=r,Sn.PureComponent=D,Sn.StrictMode=n,Sn.Suspense=u,Sn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Sn.__COMPILER_RUNTIME={__proto__:null,c:function(re){return W.H.useMemoCache(re)}},Sn.cache=function(re){return function(){return re.apply(null,arguments)}},Sn.cloneElement=function(re,xe,q){if(re==null)throw Error("The argument must be a React element, but you passed "+re+".");var ee=C({},re.props),he=re.key,me=void 0;if(xe!=null)for(ye in xe.ref!==void 0&&(me=void 0),xe.key!==void 0&&(he=""+xe.key),xe)!ue.call(xe,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&xe.ref===void 0||(ee[ye]=xe[ye]);var ye=arguments.length-2;if(ye===1)ee.children=q;else if(1<ye){for(var Ae=Array(ye),Ie=0;Ie<ye;Ie++)Ae[Ie]=arguments[Ie+2];ee.children=Ae}return U(re.type,he,void 0,void 0,me,ee)},Sn.createContext=function(re){return re={$$typeof:a,_currentValue:re,_currentValue2:re,_threadCount:0,Provider:null,Consumer:null},re.Provider=re,re.Consumer={$$typeof:s,_context:re},re},Sn.createElement=function(re,xe,q){var ee,he={},me=null;if(xe!=null)for(ee in xe.key!==void 0&&(me=""+xe.key),xe)ue.call(xe,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(he[ee]=xe[ee]);var ye=arguments.length-2;if(ye===1)he.children=q;else if(1<ye){for(var Ae=Array(ye),Ie=0;Ie<ye;Ie++)Ae[Ie]=arguments[Ie+2];he.children=Ae}if(re&&re.defaultProps)for(ee in ye=re.defaultProps,ye)he[ee]===void 0&&(he[ee]=ye[ee]);return U(re,me,void 0,void 0,null,he)},Sn.createRef=function(){return{current:null}},Sn.forwardRef=function(re){return{$$typeof:l,render:re}},Sn.isValidElement=V,Sn.lazy=function(re){return{$$typeof:f,_payload:{_status:-1,_result:re},_init:ce}},Sn.memo=function(re,xe){return{$$typeof:d,type:re,compare:xe===void 0?null:xe}},Sn.startTransition=function(re){var xe=W.T,q={};W.T=q;try{var ee=re(),he=W.S;he!==null&&he(q,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Te,ge)}catch(me){ge(me)}finally{W.T=xe}},Sn.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Sn.use=function(re){return W.H.use(re)},Sn.useActionState=function(re,xe,q){return W.H.useActionState(re,xe,q)},Sn.useCallback=function(re,xe){return W.H.useCallback(re,xe)},Sn.useContext=function(re){return W.H.useContext(re)},Sn.useDebugValue=function(){},Sn.useDeferredValue=function(re,xe){return W.H.useDeferredValue(re,xe)},Sn.useEffect=function(re,xe,q){var ee=W.H;if(typeof q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(re,xe)},Sn.useId=function(){return W.H.useId()},Sn.useImperativeHandle=function(re,xe,q){return W.H.useImperativeHandle(re,xe,q)},Sn.useInsertionEffect=function(re,xe){return W.H.useInsertionEffect(re,xe)},Sn.useLayoutEffect=function(re,xe){return W.H.useLayoutEffect(re,xe)},Sn.useMemo=function(re,xe){return W.H.useMemo(re,xe)},Sn.useOptimistic=function(re,xe){return W.H.useOptimistic(re,xe)},Sn.useReducer=function(re,xe,q){return W.H.useReducer(re,xe,q)},Sn.useRef=function(re){return W.H.useRef(re)},Sn.useState=function(re){return W.H.useState(re)},Sn.useSyncExternalStore=function(re,xe,q){return W.H.useSyncExternalStore(re,xe,q)},Sn.useTransition=function(){return W.H.useTransition()},Sn.version="19.1.0",Sn}var CR;function XC(){return CR||(CR=1,jS.exports=lV()),jS.exports}var qe=XC();const Oi=BP(qe);var qS={exports:{}},_1={},$S={exports:{}},HS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NR;function uV(){return NR||(NR=1,function(i){function e(Q,ce){var ge=Q.length;Q.push(ce);e:for(;0<ge;){var Te=ge-1>>>1,re=Q[Te];if(0<r(re,ce))Q[Te]=ce,Q[ge]=re,ge=Te;else break e}}function t(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var ce=Q[0],ge=Q.pop();if(ge!==ce){Q[0]=ge;e:for(var Te=0,re=Q.length,xe=re>>>1;Te<xe;){var q=2*(Te+1)-1,ee=Q[q],he=q+1,me=Q[he];if(0>r(ee,ge))he<re&&0>r(me,ee)?(Q[Te]=me,Q[he]=ge,Te=he):(Q[Te]=ee,Q[q]=ge,Te=q);else if(he<re&&0>r(me,ge))Q[Te]=me,Q[he]=ge,Te=he;else break e}}return ce}function r(Q,ce){var ge=Q.sortIndex-ce.sortIndex;return ge!==0?ge:Q.id-ce.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();i.unstable_now=function(){return a.now()-l}}var u=[],d=[],f=1,p=null,y=3,v=!1,C=!1,E=!1,R=!1,I=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function X(Q){for(var ce=t(d);ce!==null;){if(ce.callback===null)n(d);else if(ce.startTime<=Q)n(d),ce.sortIndex=ce.expirationTime,e(u,ce);else break;ce=t(d)}}function W(Q){if(E=!1,X(Q),!C)if(t(u)!==null)C=!0,ue||(ue=!0,F());else{var ce=t(d);ce!==null&&fe(W,ce.startTime-Q)}}var ue=!1,U=-1,P=5,V=-1;function Y(){return R?!0:!(i.unstable_now()-V<P)}function O(){if(R=!1,ue){var Q=i.unstable_now();V=Q;var ce=!0;try{e:{C=!1,E&&(E=!1,D(U),U=-1),v=!0;var ge=y;try{t:{for(X(Q),p=t(u);p!==null&&!(p.expirationTime>Q&&Y());){var Te=p.callback;if(typeof Te=="function"){p.callback=null,y=p.priorityLevel;var re=Te(p.expirationTime<=Q);if(Q=i.unstable_now(),typeof re=="function"){p.callback=re,X(Q),ce=!0;break t}p===t(u)&&n(u),X(Q)}else n(u);p=t(u)}if(p!==null)ce=!0;else{var xe=t(d);xe!==null&&fe(W,xe.startTime-Q),ce=!1}}break e}finally{p=null,y=ge,v=!1}ce=void 0}}finally{ce?F():ue=!1}}}var F;if(typeof j=="function")F=function(){j(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,H=B.port2;B.port1.onmessage=O,F=function(){H.postMessage(null)}}else F=function(){I(O,0)};function fe(Q,ce){U=I(function(){Q(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_next=function(Q){switch(y){case 1:case 2:case 3:var ce=3;break;default:ce=y}var ge=y;y=ce;try{return Q()}finally{y=ge}},i.unstable_requestPaint=function(){R=!0},i.unstable_runWithPriority=function(Q,ce){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ge=y;y=Q;try{return ce()}finally{y=ge}},i.unstable_scheduleCallback=function(Q,ce,ge){var Te=i.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Te+ge:Te):ge=Te,Q){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ge+re,Q={id:f++,callback:ce,priorityLevel:Q,startTime:ge,expirationTime:re,sortIndex:-1},ge>Te?(Q.sortIndex=ge,e(d,Q),t(u)===null&&Q===t(d)&&(E?(D(U),U=-1):E=!0,fe(W,ge-Te))):(Q.sortIndex=re,e(u,Q),C||v||(C=!0,ue||(ue=!0,F()))),Q},i.unstable_shouldYield=Y,i.unstable_wrapCallback=function(Q){var ce=y;return function(){var ge=y;y=ce;try{return Q.apply(this,arguments)}finally{y=ge}}}}(HS)),HS}var kR;function cV(){return kR||(kR=1,$S.exports=uV()),$S.exports}var GS={exports:{}},fa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IR;function dV(){if(IR)return fa;IR=1;var i=XC();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(u,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:u,containerInfo:d,implementation:f}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return fa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,fa.createPortal=function(u,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(u,d,null,f)},fa.flushSync=function(u){var d=a.T,f=n.p;try{if(a.T=null,n.p=2,u)return u()}finally{a.T=d,n.p=f,n.d.f()}},fa.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(u,d))},fa.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},fa.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?n.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:v}):f==="script"&&n.d.X(u,{crossOrigin:p,integrity:y,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},fa.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);n.d.M(u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(u)},fa.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);n.d.L(u,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},fa.preloadModule=function(u,d){if(typeof u=="string")if(d){var f=l(d.as,d.crossOrigin);n.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(u)},fa.requestFormReset=function(u){n.d.r(u)},fa.unstable_batchedUpdates=function(u,d){return u(d)},fa.useFormState=function(u,d,f){return a.H.useFormState(u,d,f)},fa.useFormStatus=function(){return a.H.useHostTransitionStatus()},fa.version="19.1.0",fa}var RR;function hV(){if(RR)return GS.exports;RR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),GS.exports=dV(),GS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LR;function fV(){if(LR)return _1;LR=1;var i=cV(),e=XC(),t=hV();function n(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(s(o)!==o)throw Error(n(188))}function u(o){var c=o.alternate;if(!c){if(c=s(o),c===null)throw Error(n(188));return c!==o?null:o}for(var h=o,m=c;;){var A=h.return;if(A===null)break;var N=A.alternate;if(N===null){if(m=A.return,m!==null){h=m;continue}break}if(A.child===N.child){for(N=A.child;N;){if(N===h)return l(A),o;if(N===m)return l(A),c;N=N.sibling}throw Error(n(188))}if(h.return!==m.return)h=A,m=N;else{for(var K=!1,le=A.child;le;){if(le===h){K=!0,h=A,m=N;break}if(le===m){K=!0,m=A,h=N;break}le=le.sibling}if(!K){for(le=N.child;le;){if(le===h){K=!0,h=N,m=A;break}if(le===m){K=!0,m=N,h=A;break}le=le.sibling}if(!K)throw Error(n(189))}}if(h.alternate!==m)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?o:c}function d(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=d(o),c!==null)return c;o=o.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),j=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function F(o){return o===null||typeof o!="object"?null:(o=O&&o[O]||o["@@iterator"],typeof o=="function"?o:null)}var B=Symbol.for("react.client.reference");function H(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===B?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case C:return"Fragment";case R:return"Profiler";case E:return"StrictMode";case W:return"Suspense";case ue:return"SuspenseList";case V:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case v:return"Portal";case j:return(o.displayName||"Context")+".Provider";case D:return(o._context.displayName||"Context")+".Consumer";case X:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case U:return c=o.displayName||null,c!==null?c:H(o.type)||"Memo";case P:c=o._payload,o=o._init;try{return H(o(c))}catch{}}return null}var fe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Te=[],re=-1;function xe(o){return{current:o}}function q(o){0>re||(o.current=Te[re],Te[re]=null,re--)}function ee(o,c){re++,Te[re]=o.current,o.current=c}var he=xe(null),me=xe(null),ye=xe(null),Ae=xe(null);function Ie(o,c){switch(ee(ye,c),ee(me,o),ee(he,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?XI(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=XI(c),o=JI(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}q(he),ee(he,o)}function Me(){q(he),q(me),q(ye)}function nt(o){o.memoizedState!==null&&ee(Ae,o);var c=he.current,h=JI(c,o.type);c!==h&&(ee(me,o),ee(he,h))}function He(o){me.current===o&&(q(he),q(me)),Ae.current===o&&(q(Ae),p1._currentValue=ge)}var Ye=Object.prototype.hasOwnProperty,Xe=i.unstable_scheduleCallback,pt=i.unstable_cancelCallback,Ve=i.unstable_shouldYield,ve=i.unstable_requestPaint,ct=i.unstable_now,mt=i.unstable_getCurrentPriorityLevel,it=i.unstable_ImmediatePriority,st=i.unstable_UserBlockingPriority,gt=i.unstable_NormalPriority,yt=i.unstable_LowPriority,It=i.unstable_IdlePriority,Gt=i.log,nn=i.unstable_setDisableYieldValue,Dt=null,dt=null;function pn(o){if(typeof Gt=="function"&&nn(o),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(Dt,o)}catch{}}var Ct=Math.clz32?Math.clz32:Fi,gn=Math.log,xt=Math.LN2;function Fi(o){return o>>>=0,o===0?32:31-(gn(o)/xt|0)|0}var ln=256,Sr=4194304;function un(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Wn(o,c,h){var m=o.pendingLanes;if(m===0)return 0;var A=0,N=o.suspendedLanes,K=o.pingedLanes;o=o.warmLanes;var le=m&134217727;return le!==0?(m=le&~N,m!==0?A=un(m):(K&=le,K!==0?A=un(K):h||(h=le&~o,h!==0&&(A=un(h))))):(le=m&~N,le!==0?A=un(le):K!==0?A=un(K):h||(h=m&~o,h!==0&&(A=un(h)))),A===0?0:c!==0&&c!==A&&(c&N)===0&&(N=A&-A,h=c&-c,N>=h||N===32&&(h&4194048)!==0)?c:A}function zr(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function In(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ta(){var o=ln;return ln<<=1,(ln&4194048)===0&&(ln=256),o}function di(){var o=Sr;return Sr<<=1,(Sr&62914560)===0&&(Sr=4194304),o}function qi(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function hr(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function hi(o,c,h,m,A,N){var K=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var le=o.entanglements,_e=o.expirationTimes,Ue=o.hiddenUpdates;for(h=K&~h;0<h;){var We=31-Ct(h),rt=1<<We;le[We]=0,_e[We]=-1;var ze=Ue[We];if(ze!==null)for(Ue[We]=null,We=0;We<ze.length;We++){var je=ze[We];je!==null&&(je.lane&=-536870913)}h&=~rt}m!==0&&ut(o,m,0),N!==0&&A===0&&o.tag!==0&&(o.suspendedLanes|=N&~(K&~c))}function ut(o,c,h){o.pendingLanes|=c,o.suspendedLanes&=~c;var m=31-Ct(c);o.entangledLanes|=c,o.entanglements[m]=o.entanglements[m]|1073741824|h&4194090}function on(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var m=31-Ct(h),A=1<<m;A&c|o[m]&c&&(o[m]|=c),h&=~A}}function Yt(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Fn(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Vt(){var o=ce.p;return o!==0?o:(o=window.event,o===void 0?32:yR(o.type))}function Li(o,c){var h=ce.p;try{return ce.p=o,c()}finally{ce.p=h}}var wt=Math.random().toString(36).slice(2),li="__reactFiber$"+wt,ui="__reactProps$"+wt,Pi="__reactContainer$"+wt,$i="__reactEvents$"+wt,Qi="__reactListeners$"+wt,fr="__reactHandles$"+wt,Kl="__reactResources$"+wt,Ls="__reactMarker$"+wt;function jr(o){delete o[li],delete o[ui],delete o[$i],delete o[Qi],delete o[fr]}function Tr(o){var c=o[li];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Pi]||h[li]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=nR(o);o!==null;){if(h=o[li])return h;o=nR(o)}return c}o=h,h=o.parentNode}return null}function pr(o){if(o=o[li]||o[Pi]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Er(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(n(33))}function Ai(o){var c=o[Kl];return c||(c=o[Kl]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Zn(o){o[Ls]=!0}var So=new Set,To={};function ms(o,c){na(o,c),na(o+"Capture",c)}function na(o,c){for(To[o]=c,o=0;o<c.length;o++)So.add(c[o])}var Wl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ld={},Ql={};function Vh(o){return Ye.call(Ql,o)?!0:Ye.call(ld,o)?!1:Wl.test(o)?Ql[o]=!0:(ld[o]=!0,!1)}function Ia(o,c,h){if(Vh(c))if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+h)}}function Ra(o,c,h){if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+h)}}function Cr(o,c,h,m){if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(c,h,""+m)}}var Eo,Bh;function Wa(o){if(Eo===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);Eo=c&&c[1]||"",Bh=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Eo+o+Bh}var Ku=!1;function Co(o,c){if(!o||Ku)return"";Ku=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(je){var ze=je}Reflect.construct(o,[],rt)}else{try{rt.call()}catch(je){ze=je}o.call(rt.prototype)}}else{try{throw Error()}catch(je){ze=je}(rt=o())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch(je){if(je&&ze&&typeof je.stack=="string")return[je.stack,ze.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=m.DetermineComponentFrameRoot(),K=N[0],le=N[1];if(K&&le){var _e=K.split(`
`),Ue=le.split(`
`);for(A=m=0;m<_e.length&&!_e[m].includes("DetermineComponentFrameRoot");)m++;for(;A<Ue.length&&!Ue[A].includes("DetermineComponentFrameRoot");)A++;if(m===_e.length||A===Ue.length)for(m=_e.length-1,A=Ue.length-1;1<=m&&0<=A&&_e[m]!==Ue[A];)A--;for(;1<=m&&0<=A;m--,A--)if(_e[m]!==Ue[A]){if(m!==1||A!==1)do if(m--,A--,0>A||_e[m]!==Ue[A]){var We=`
`+_e[m].replace(" at new "," at ");return o.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",o.displayName)),We}while(1<=m&&0<=A);break}}}finally{Ku=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Wa(h):""}function ud(o){switch(o.tag){case 26:case 27:case 5:return Wa(o.type);case 16:return Wa("Lazy");case 13:return Wa("Suspense");case 19:return Wa("SuspenseList");case 0:case 15:return Co(o.type,!1);case 11:return Co(o.type.render,!1);case 1:return Co(o.type,!0);case 31:return Wa("Activity");default:return""}}function Si(o){try{var c="";do c+=ud(o),o=o.return;while(o);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function qr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Wu(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Uh(o){var c=Wu(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),m=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var A=h.get,N=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return A.call(this)},set:function(K){m=""+K,N.call(this,K)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(K){m=""+K},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function fl(o){o._valueTracker||(o._valueTracker=Uh(o))}function cd(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),m="";return o&&(m=Wu(o)?o.checked?"true":"false":o.value),o=m,o!==h?(c.setValue(o),!0):!1}function rs(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Qu=/[\n"\\]/g;function Un(o){return o.replace(Qu,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function ss(o,c,h,m,A,N,K,le){o.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?o.type=K:o.removeAttribute("type"),c!=null?K==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+qr(c)):o.value!==""+qr(c)&&(o.value=""+qr(c)):K!=="submit"&&K!=="reset"||o.removeAttribute("value"),c!=null?ml(o,K,qr(c)):h!=null?ml(o,K,qr(h)):m!=null&&o.removeAttribute("value"),A==null&&N!=null&&(o.defaultChecked=!!N),A!=null&&(o.checked=A&&typeof A!="function"&&typeof A!="symbol"),le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?o.name=""+qr(le):o.removeAttribute("name")}function pl(o,c,h,m,A,N,K,le){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.type=N),c!=null||h!=null){if(!(N!=="submit"&&N!=="reset"||c!=null))return;h=h!=null?""+qr(h):"",c=c!=null?""+qr(c):h,le||c===o.value||(o.value=c),o.defaultValue=c}m=m??A,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=le?o.checked:!!m,o.defaultChecked=!!m,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(o.name=K)}function ml(o,c,h){c==="number"&&rs(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function Qa(o,c,h,m){if(o=o.options,c){c={};for(var A=0;A<h.length;A++)c["$"+h[A]]=!0;for(h=0;h<o.length;h++)A=c.hasOwnProperty("$"+o[h].value),o[h].selected!==A&&(o[h].selected=A),A&&m&&(o[h].defaultSelected=!0)}else{for(h=""+qr(h),c=null,A=0;A<o.length;A++){if(o[A].value===h){o[A].selected=!0,m&&(o[A].defaultSelected=!0);return}c!==null||o[A].disabled||(c=o[A])}c!==null&&(c.selected=!0)}}function ei(o,c,h){if(c!=null&&(c=""+qr(c),c!==o.value&&(o.value=c),h==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=h!=null?""+qr(h):""}function gl(o,c,h,m){if(c==null){if(m!=null){if(h!=null)throw Error(n(92));if(fe(m)){if(1<m.length)throw Error(n(93));m=m[0]}h=m}h==null&&(h=""),c=h}h=qr(c),o.defaultValue=h,m=o.textContent,m===h&&m!==""&&m!==null&&(o.value=m)}function ia(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var No=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zh(o,c,h){var m=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":m?o.setProperty(c,h):typeof h!="number"||h===0||No.has(c)?c==="float"?o.cssFloat=h:o[c]=(""+h).trim():o[c]=h+"px"}function dd(o,c,h){if(c!=null&&typeof c!="object")throw Error(n(62));if(o=o.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var A in c)m=c[A],c.hasOwnProperty(A)&&h[A]!==m&&zh(o,A,m)}else for(var N in c)c.hasOwnProperty(N)&&zh(o,N,c[N])}function hd(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ko=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Io(o){return Xu.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Xa=null;function gi(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ro=null,Ja=null;function Kt(o){var c=pr(o);if(c&&(o=c.stateNode)){var h=o[ui]||null;e:switch(o=c.stateNode,c.type){case"input":if(ss(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Un(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var m=h[c];if(m!==o&&m.form===o.form){var A=m[ui]||null;if(!A)throw Error(n(90));ss(m,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(c=0;c<h.length;c++)m=h[c],m.form===o.form&&cd(m)}break e;case"textarea":ei(o,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&Qa(o,!!h.multiple,c,!1)}}}var Za=!1;function jh(o,c,h){if(Za)return o(c,h);Za=!0;try{var m=o(c);return m}finally{if(Za=!1,(Ro!==null||Ja!==null)&&(lx(),Ro&&(c=Ro,o=Ja,Ja=Ro=null,Kt(c),o)))for(c=0;c<o.length;c++)Kt(o[c])}}function gs(o,c){var h=o.stateNode;if(h===null)return null;var m=h[ui]||null;if(m===null)return null;h=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(n(231,c,typeof h));return h}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(ra)try{var eo={};Object.defineProperty(eo,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",eo,eo),window.removeEventListener("test",eo,eo)}catch{Ps=!1}var sa=null,yl=null,Lo=null;function fd(){if(Lo)return Lo;var o,c=yl,h=c.length,m,A="value"in sa?sa.value:sa.textContent,N=A.length;for(o=0;o<h&&c[o]===A[o];o++);var K=h-o;for(m=1;m<=K&&c[h-m]===A[N-m];m++);return Lo=A.slice(o,1<m?1-m:void 0)}function aa(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function ys(){return!0}function to(){return!1}function mr(o){function c(h,m,A,N,K){this._reactName=h,this._targetInst=A,this.type=m,this.nativeEvent=N,this.target=K,this.currentTarget=null;for(var le in o)o.hasOwnProperty(le)&&(h=o[le],this[le]=h?h(N):N[le]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?ys:to,this.isPropagationStopped=to,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),c}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vl=mr(Rn),no=f({},Rn,{view:0,detail:0}),pd=mr(no),Xl,Jl,La,vs=f({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==La&&(La&&o.type==="mousemove"?(Xl=o.screenX-La.screenX,Jl=o.screenY-La.screenY):Jl=Xl=0,La=o),Xl)},movementY:function(o){return"movementY"in o?o.movementY:Jl}}),gr=mr(vs),qh=f({},vs,{dataTransfer:0}),bl=mr(qh),as=f({},no,{relatedTarget:0}),_l=mr(as),Po=f({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ju=mr(Po),Zl=f({},Rn,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Zu=mr(Zl),md=f({},Rn,{data:0}),eu=mr(md),xl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nu(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=ec[o])?!!c[o]:!1}function wl(){return nu}var $h=f({},no,{key:function(o){if(o.key){var c=xl[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=aa(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?tu[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wl,charCode:function(o){return o.type==="keypress"?aa(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?aa(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Mo=mr($h),Al=f({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iu=mr(Al),bs=f({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wl}),tc=mr(bs),k=f({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z=mr(k),be=f({},vs,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),we=mr(be),Re=f({},Rn,{newState:0,oldState:0}),Ge=mr(Re),at=[9,13,27,32],bt=ra&&"CompositionEvent"in window,w=null;ra&&"documentMode"in document&&(w=document.documentMode);var M=ra&&"TextEvent"in window&&!w,$=ra&&(!bt||w&&8<w&&11>=w),oe=" ",ke=!1;function Be(o,c){switch(o){case"keyup":return at.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ot(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Wt=!1;function Ln(o,c){switch(o){case"compositionend":return ot(c);case"keypress":return c.which!==32?null:(ke=!0,oe);case"textInput":return o=c.data,o===oe&&ke?null:o;default:return null}}function cn(o,c){if(Wt)return o==="compositionend"||!bt&&Be(o,c)?(o=fd(),Lo=yl=sa=null,Wt=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return $&&c.locale!=="ko"?null:c.data;default:return null}}var ti={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fi(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!ti[o.type]:c==="textarea"}function io(o,c,h,m){Ro?Ja?Ja.push(m):Ja=[m]:Ro=m,c=px(c,"onChange"),0<c.length&&(h=new vl("onChange","change",null,h,m),o.push({event:h,listeners:c}))}var rr=null,oa=null;function Sl(o){GI(o,0)}function nc(o){var c=Er(o);if(cd(c))return o}function Hh(o,c){if(o==="change")return c}var gd=!1;if(ra){var Nr;if(ra){var ic="oninput"in document;if(!ic){var yd=document.createElement("div");yd.setAttribute("oninput","return;"),ic=typeof yd.oninput=="function"}Nr=ic}else Nr=!1;gd=Nr&&(!document.documentMode||9<document.documentMode)}function vd(){rr&&(rr.detachEvent("onpropertychange",Gh),oa=rr=null)}function Gh(o){if(o.propertyName==="value"&&nc(oa)){var c=[];io(c,oa,o,gi(o)),jh(Sl,c)}}function la(o,c,h){o==="focusin"?(vd(),rr=c,oa=h,rr.attachEvent("onpropertychange",Gh)):o==="focusout"&&vd()}function Dv(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return nc(oa)}function Vp(o,c){if(o==="click")return nc(c)}function $g(o,c){if(o==="input"||o==="change")return nc(c)}function ro(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var $r=typeof Object.is=="function"?Object.is:ro;function rc(o,c){if($r(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),m=Object.keys(c);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var A=h[m];if(!Ye.call(c,A)||!$r(o[A],c[A]))return!1}return!0}function Bp(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function ru(o,c){var h=Bp(o);o=0;for(var m;h;){if(h.nodeType===3){if(m=o+h.textContent.length,o<=c&&m>=c)return{node:h,offset:c-o};o=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Bp(h)}}function sc(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?sc(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Ms(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=rs(o.document);c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=rs(o.document)}return c}function os(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var ac=ra&&"documentMode"in document&&11>=document.documentMode,ua=null,Do=null,Tl=null,Oo=!1;function Xi(o,c,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Oo||ua==null||ua!==rs(m)||(m=ua,"selectionStart"in m&&os(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Tl&&rc(Tl,m)||(Tl=m,m=px(Do,"onSelect"),0<m.length&&(c=new vl("onSelect","select",null,c,h),o.push({event:c,listeners:m}),c.target=ua)))}function Fo(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var yr={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionrun:Fo("Transition","TransitionRun"),transitionstart:Fo("Transition","TransitionStart"),transitioncancel:Fo("Transition","TransitionCancel"),transitionend:Fo("Transition","TransitionEnd")},ca={},bd={};ra&&(bd=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function El(o){if(ca[o])return ca[o];if(!yr[o])return o;var c=yr[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in bd)return ca[o]=c[h];return o}var Yh=El("animationend"),oc=El("animationiteration"),lc=El("animationstart"),uc=El("transitionrun"),_d=El("transitionstart"),Kh=El("transitioncancel"),cc=El("transitionend"),su=new Map,xd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xd.push("scrollEnd");function Ji(o,c){su.set(o,c),ms(c,[o])}var Pa=new WeakMap;function Nn(o,c){if(typeof o=="object"&&o!==null){var h=Pa.get(o);return h!==void 0?h:(c={value:o,source:c,stack:Si(c)},Pa.set(o,c),c)}return{value:o,source:c,stack:Si(c)}}var kn=[],Ti=0,sr=0;function so(){for(var o=Ti,c=sr=Ti=0;c<o;){var h=kn[c];kn[c++]=null;var m=kn[c];kn[c++]=null;var A=kn[c];kn[c++]=null;var N=kn[c];if(kn[c++]=null,m!==null&&A!==null){var K=m.pending;K===null?A.next=A:(A.next=K.next,K.next=A),m.pending=A}N!==0&&Hg(h,A,N)}}function dc(o,c,h,m){kn[Ti++]=o,kn[Ti++]=c,kn[Ti++]=h,kn[Ti++]=m,sr|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function hc(o,c,h,m){return dc(o,c,h,m),wd(o)}function au(o,c){return dc(o,null,null,c),wd(o)}function Hg(o,c,h){o.lanes|=h;var m=o.alternate;m!==null&&(m.lanes|=h);for(var A=!1,N=o.return;N!==null;)N.childLanes|=h,m=N.alternate,m!==null&&(m.childLanes|=h),N.tag===22&&(o=N.stateNode,o===null||o._visibility&1||(A=!0)),o=N,N=N.return;return o.tag===3?(N=o.stateNode,A&&c!==null&&(A=31-Ct(h),o=N.hiddenUpdates,m=o[A],m===null?o[A]=[c]:m.push(c),c.lane=h|536870912),N):null}function wd(o){if(50<a1)throw a1=0,cS=null,Error(n(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Hr={};function ao(o,c,h,m){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _s(o,c,h,m){return new ao(o,c,h,m)}function Wh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Cl(o,c){var h=o.alternate;return h===null?(h=_s(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function Up(o,c){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,c=h.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Ad(o,c,h,m,A,N){var K=0;if(m=o,typeof o=="function")Wh(o)&&(K=1);else if(typeof o=="string")K=H7(o,h,he.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case V:return o=_s(31,h,c,A),o.elementType=V,o.lanes=N,o;case C:return ou(h.children,A,N,c);case E:K=8,A|=24;break;case R:return o=_s(12,h,c,A|2),o.elementType=R,o.lanes=N,o;case W:return o=_s(13,h,c,A),o.elementType=W,o.lanes=N,o;case ue:return o=_s(19,h,c,A),o.elementType=ue,o.lanes=N,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case I:case j:K=10;break e;case D:K=9;break e;case X:K=11;break e;case U:K=14;break e;case P:K=16,m=null;break e}K=29,h=Error(n(130,o===null?"null":typeof o,"")),m=null}return c=_s(K,h,c,A),c.elementType=o,c.type=m,c.lanes=N,c}function ou(o,c,h,m){return o=_s(7,o,m,c),o.lanes=h,o}function Gg(o,c,h){return o=_s(6,o,null,c),o.lanes=h,o}function zp(o,c,h){return c=_s(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var fc=[],lu=0,Qh=null,Yg=0,oo=[],Ma=0,Sd=null,uu=1,cu="";function Td(o,c){fc[lu++]=Yg,fc[lu++]=Qh,Qh=o,Yg=c}function L2(o,c,h){oo[Ma++]=uu,oo[Ma++]=cu,oo[Ma++]=Sd,Sd=o;var m=uu;o=cu;var A=32-Ct(m)-1;m&=~(1<<A),h+=1;var N=32-Ct(c)+A;if(30<N){var K=A-A%5;N=(m&(1<<K)-1).toString(32),m>>=K,A-=K,uu=1<<32-Ct(c)+A|h<<A|m,cu=N+o}else uu=1<<N|h<<A|m,cu=o}function jp(o){o.return!==null&&(Td(o,1),L2(o,1,0))}function qp(o){for(;o===Qh;)Qh=fc[--lu],fc[lu]=null,Yg=fc[--lu],fc[lu]=null;for(;o===Sd;)Sd=oo[--Ma],oo[Ma]=null,cu=oo[--Ma],oo[Ma]=null,uu=oo[--Ma],oo[Ma]=null}var kr=null,Zi=null,Qn=!1,pc=null,Nl=!1,Ov=Error(n(519));function Ed(o){var c=Error(n(418,""));throw Xh(Nn(c,o)),Ov}function P2(o){var c=o.stateNode,h=o.type,m=o.memoizedProps;switch(c[li]=o,c[ui]=m,h){case"dialog":On("cancel",c),On("close",c);break;case"iframe":case"object":case"embed":On("load",c);break;case"video":case"audio":for(h=0;h<l1.length;h++)On(l1[h],c);break;case"source":On("error",c);break;case"img":case"image":case"link":On("error",c),On("load",c);break;case"details":On("toggle",c);break;case"input":On("invalid",c),pl(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),fl(c);break;case"select":On("invalid",c);break;case"textarea":On("invalid",c),gl(c,m.value,m.defaultValue,m.children),fl(c)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||m.suppressHydrationWarning===!0||QI(c.textContent,h)?(m.popover!=null&&(On("beforetoggle",c),On("toggle",c)),m.onScroll!=null&&On("scroll",c),m.onScrollEnd!=null&&On("scrollend",c),m.onClick!=null&&(c.onclick=mx),c=!0):c=!1,c||Ed(o)}function du(o){for(kr=o.return;kr;)switch(kr.tag){case 5:case 13:Nl=!1;return;case 27:case 3:Nl=!0;return;default:kr=kr.return}}function Ds(o){if(o!==kr)return!1;if(!Qn)return du(o),Qn=!0,!1;var c=o.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||ES(o.type,o.memoizedProps)),h=!h),h&&Zi&&Ed(o),du(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(h=o.data,h==="/$"){if(c===0){Zi=bu(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;o=o.nextSibling}Zi=null}}else c===27?(c=Zi,mf(o.type)?(o=IS,IS=null,Zi=o):Zi=c):Zi=kr?bu(o.stateNode.nextSibling):null;return!0}function Da(){Zi=kr=null,Qn=!1}function M2(){var o=pc;return o!==null&&(co===null?co=o:co.push.apply(co,o),pc=null),o}function Xh(o){pc===null?pc=[o]:pc.push(o)}var kl=xe(null),Gr=null,hu=null;function mc(o,c,h){ee(kl,c._currentValue),c._currentValue=h}function Il(o){o._currentValue=kl.current,q(kl)}function Kg(o,c,h){for(;o!==null;){var m=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),o===h)break;o=o.return}}function Wg(o,c,h,m){var A=o.child;for(A!==null&&(A.return=o);A!==null;){var N=A.dependencies;if(N!==null){var K=A.child;N=N.firstContext;e:for(;N!==null;){var le=N;N=A;for(var _e=0;_e<c.length;_e++)if(le.context===c[_e]){N.lanes|=h,le=N.alternate,le!==null&&(le.lanes|=h),Kg(N.return,h,o),m||(K=null);break e}N=le.next}}else if(A.tag===18){if(K=A.return,K===null)throw Error(n(341));K.lanes|=h,N=K.alternate,N!==null&&(N.lanes|=h),Kg(K,h,o),K=null}else K=A.child;if(K!==null)K.return=A;else for(K=A;K!==null;){if(K===o){K=null;break}if(A=K.sibling,A!==null){A.return=K.return,K=A;break}K=K.return}A=K}}function Jh(o,c,h,m){o=null;for(var A=c,N=!1;A!==null;){if(!N){if((A.flags&524288)!==0)N=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var K=A.alternate;if(K===null)throw Error(n(387));if(K=K.memoizedProps,K!==null){var le=A.type;$r(A.pendingProps.value,K.value)||(o!==null?o.push(le):o=[le])}}else if(A===Ae.current){if(K=A.alternate,K===null)throw Error(n(387));K.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(o!==null?o.push(p1):o=[p1])}A=A.return}o!==null&&Wg(c,o,h,m),c.flags|=262144}function Qg(o){for(o=o.firstContext;o!==null;){if(!$r(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Rl(o){Gr=o,hu=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ir(o){return Xg(Gr,o)}function gc(o,c){return Gr===null&&Rl(o),Xg(o,c)}function Xg(o,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},hu===null){if(o===null)throw Error(n(308));hu=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else hu=hu.next=c;return h}var D5=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(h,m){o.push(m)}};this.abort=function(){c.aborted=!0,o.forEach(function(h){return h()})}},D2=i.unstable_scheduleCallback,O5=i.unstable_NormalPriority,Rr={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fv(){return{controller:new D5,data:new Map,refCount:0}}function $p(o){o.refCount--,o.refCount===0&&D2(O5,function(){o.controller.abort()})}var Hp=null,Vv=0,Cd=0,fu=null;function F5(o,c){if(Hp===null){var h=Hp=[];Vv=0,Cd=yS(),fu={status:"pending",value:void 0,then:function(m){h.push(m)}}}return Vv++,c.then(O2,O2),c}function O2(){if(--Vv===0&&Hp!==null){fu!==null&&(fu.status="fulfilled");var o=Hp;Hp=null,Cd=0,fu=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function F2(o,c){var h=[],m={status:"pending",value:null,reason:null,then:function(A){h.push(A)}};return o.then(function(){m.status="fulfilled",m.value=c;for(var A=0;A<h.length;A++)(0,h[A])(c)},function(A){for(m.status="rejected",m.reason=A,A=0;A<h.length;A++)(0,h[A])(void 0)}),m}var x=Q.S;Q.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&F5(o,c),x!==null&&x(o,c)};var S=xe(null);function L(){var o=S.current;return o!==null?o:Bi.pooledCache}function z(o,c){c===null?ee(S,S.current):ee(S,c.pool)}function J(){var o=L();return o===null?null:{parent:Rr._currentValue,pool:o}}var ie=Error(n(460)),se=Error(n(474)),ae=Error(n(542)),de={then:function(){}};function pe(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Se(){}function Fe(o,c,h){switch(h=o[h],h===void 0?o.push(c):h!==c&&(c.then(Se,Se),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,Ze(o),o;default:if(typeof c.status=="string")c.then(Se,Se);else{if(o=Bi,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=c,o.status="pending",o.then(function(m){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=m}},function(m){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,Ze(o),o}throw De=c,ie}}var De=null;function Le(){if(De===null)throw Error(n(459));var o=De;return De=null,o}function Ze(o){if(o===ie||o===ae)throw Error(n(483))}var $e=!1;function Ee(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ne(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ke(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function et(o,c,h){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(vi&2)!==0){var A=m.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),m.pending=c,c=wd(o),Hg(o,null,h),c}return dc(o,m,c,h),wd(o)}function Qe(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var m=c.lanes;m&=o.pendingLanes,h|=m,c.lanes=h,on(o,h)}}function St(o,c){var h=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var A=null,N=null;if(h=h.firstBaseUpdate,h!==null){do{var K={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};N===null?A=N=K:N=N.next=K,h=h.next}while(h!==null);N===null?A=N=c:N=N.next=c}else A=N=c;h={baseState:m.baseState,firstBaseUpdate:A,lastBaseUpdate:N,shared:m.shared,callbacks:m.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}var vt=!1;function Bt(){if(vt){var o=fu;if(o!==null)throw o}}function _t(o,c,h,m){vt=!1;var A=o.updateQueue;$e=!1;var N=A.firstBaseUpdate,K=A.lastBaseUpdate,le=A.shared.pending;if(le!==null){A.shared.pending=null;var _e=le,Ue=_e.next;_e.next=null,K===null?N=Ue:K.next=Ue,K=_e;var We=o.alternate;We!==null&&(We=We.updateQueue,le=We.lastBaseUpdate,le!==K&&(le===null?We.firstBaseUpdate=Ue:le.next=Ue,We.lastBaseUpdate=_e))}if(N!==null){var rt=A.baseState;K=0,We=Ue=_e=null,le=N;do{var ze=le.lane&-536870913,je=ze!==le.lane;if(je?(Yn&ze)===ze:(m&ze)===ze){ze!==0&&ze===Cd&&(vt=!0),We!==null&&(We=We.next={lane:0,tag:le.tag,payload:le.payload,callback:null,next:null});e:{var rn=o,Qt=le;ze=c;var Ci=h;switch(Qt.tag){case 1:if(rn=Qt.payload,typeof rn=="function"){rt=rn.call(Ci,rt,ze);break e}rt=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=Qt.payload,ze=typeof rn=="function"?rn.call(Ci,rt,ze):rn,ze==null)break e;rt=f({},rt,ze);break e;case 2:$e=!0}}ze=le.callback,ze!==null&&(o.flags|=64,je&&(o.flags|=8192),je=A.callbacks,je===null?A.callbacks=[ze]:je.push(ze))}else je={lane:ze,tag:le.tag,payload:le.payload,callback:le.callback,next:null},We===null?(Ue=We=je,_e=rt):We=We.next=je,K|=ze;if(le=le.next,le===null){if(le=A.shared.pending,le===null)break;je=le,le=je.next,je.next=null,A.lastBaseUpdate=je,A.shared.pending=null}}while(!0);We===null&&(_e=rt),A.baseState=_e,A.firstBaseUpdate=Ue,A.lastBaseUpdate=We,N===null&&(A.shared.lanes=0),df|=K,o.lanes=K,o.memoizedState=rt}}function Hn(o,c){if(typeof o!="function")throw Error(n(191,o));o.call(c)}function ni(o,c){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)Hn(h[o],c)}var Tn=xe(null),An=xe(0);function pi(o,c){o=Fd,ee(An,o),ee(Tn,c),Fd=o|c.baseLanes}function ii(){ee(An,Fd),ee(Tn,Tn.current)}function dn(){Fd=An.current,q(Tn),q(An)}var yi=0,$t=null,en=null,zn=null,Gn=!1,Yr=!1,Lr=!1,ar=0,or=0,vr=null,lo=0;function ri(){throw Error(n(321))}function br(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!$r(o[h],c[h]))return!1;return!0}function Vo(o,c,h,m,A,N){return yi=N,$t=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Q.H=o===null||o.memoizedState===null?Ik:Rk,Lr=!1,N=h(m,A),Lr=!1,Yr&&(N=Nd(c,h,m,A)),yc(o),N}function yc(o){Q.H=W2;var c=en!==null&&en.next!==null;if(yi=0,zn=en=$t=null,Gn=!1,or=0,vr=null,c)throw Error(n(300));o===null||xs||(o=o.dependencies,o!==null&&Qg(o)&&(xs=!0))}function Nd(o,c,h,m){$t=o;var A=0;do{if(Yr&&(vr=null),or=0,Yr=!1,25<=A)throw Error(n(301));if(A+=1,zn=en=null,o.updateQueue!=null){var N=o.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Q.H=n7,N=c(h,m)}while(Yr);return N}function vc(){var o=Q.H,c=o.useState()[0];return c=typeof c.then=="function"?bc(c):c,o=o.useState()[0],(en!==null?en.memoizedState:null)!==o&&($t.flags|=1024),c}function Vi(){var o=ar!==0;return ar=0,o}function Gp(o,c,h){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~h}function Jg(o){if(Gn){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Gn=!1}yi=0,zn=en=$t=null,Yr=!1,or=ar=0,vr=null}function Os(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?$t.memoizedState=zn=o:zn=zn.next=o,zn}function Hi(){if(en===null){var o=$t.alternate;o=o!==null?o.memoizedState:null}else o=en.next;var c=zn===null?$t.memoizedState:zn.next;if(c!==null)zn=c,en=o;else{if(o===null)throw $t.alternate===null?Error(n(467)):Error(n(310));en=o,o={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},zn===null?$t.memoizedState=zn=o:zn=zn.next=o}return zn}function kd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bc(o){var c=or;return or+=1,vr===null&&(vr=[]),o=Fe(vr,o,c),c=$t,(zn===null?c.memoizedState:zn.next)===null&&(c=c.alternate,Q.H=c===null||c.memoizedState===null?Ik:Rk),o}function da(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return bc(o);if(o.$$typeof===j)return Ir(o)}throw Error(n(438,String(o)))}function _c(o){var c=null,h=$t.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var m=$t.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=kd(),$t.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(o),m=0;m<o;m++)h[m]=Y;return c.index++,h}function ha(o,c){return typeof c=="function"?c(o):c}function Yp(o){var c=Hi();return Zh(c,en,o)}function Zh(o,c,h){var m=o.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=h;var A=o.baseQueue,N=m.pending;if(N!==null){if(A!==null){var K=A.next;A.next=N.next,N.next=K}c.baseQueue=A=N,m.pending=null}if(N=o.baseState,A===null)o.memoizedState=N;else{c=A.next;var le=K=null,_e=null,Ue=c,We=!1;do{var rt=Ue.lane&-536870913;if(rt!==Ue.lane?(Yn&rt)===rt:(yi&rt)===rt){var ze=Ue.revertLane;if(ze===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),rt===Cd&&(We=!0);else if((yi&ze)===ze){Ue=Ue.next,ze===Cd&&(We=!0);continue}else rt={lane:0,revertLane:Ue.revertLane,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},_e===null?(le=_e=rt,K=N):_e=_e.next=rt,$t.lanes|=ze,df|=ze;rt=Ue.action,Lr&&h(N,rt),N=Ue.hasEagerState?Ue.eagerState:h(N,rt)}else ze={lane:rt,revertLane:Ue.revertLane,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},_e===null?(le=_e=ze,K=N):_e=_e.next=ze,$t.lanes|=rt,df|=rt;Ue=Ue.next}while(Ue!==null&&Ue!==c);if(_e===null?K=N:_e.next=le,!$r(N,o.memoizedState)&&(xs=!0,We&&(h=fu,h!==null)))throw h;o.memoizedState=N,o.baseState=K,o.baseQueue=_e,m.lastRenderedState=N}return A===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function Zg(o){var c=Hi(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var m=h.dispatch,A=h.pending,N=c.memoizedState;if(A!==null){h.pending=null;var K=A=A.next;do N=o(N,K.action),K=K.next;while(K!==A);$r(N,c.memoizedState)||(xs=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),h.lastRenderedState=N}return[N,m]}function Kp(o,c,h){var m=$t,A=Hi(),N=Qn;if(N){if(h===void 0)throw Error(n(407));h=h()}else h=c();var K=!$r((en||A).memoizedState,h);K&&(A.memoizedState=h,xs=!0),A=A.queue;var le=ef.bind(null,m,A,o);if(rf(2048,8,le,[o]),A.getSnapshot!==c||K||zn!==null&&zn.memoizedState.tag&1){if(m.flags|=2048,mu(9,Jp(),Wp.bind(null,m,A,h,c),null),Bi===null)throw Error(n(349));N||(yi&124)!==0||e0(m,c,h)}return h}function e0(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=$t.updateQueue,c===null?(c=kd(),$t.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function Wp(o,c,h,m){c.value=h,c.getSnapshot=m,V2(c)&&B2(o)}function ef(o,c,h){return h(function(){V2(c)&&B2(o)})}function V2(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!$r(o,h)}catch{return!0}}function B2(o){var c=au(o,2);c!==null&&$o(c,o,2)}function Qp(o){var c=Os();if(typeof o=="function"){var h=o;if(o=h(),Lr){pn(!0);try{h()}finally{pn(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:o},c}function pu(o,c,h,m){return o.baseState=h,Zh(o,en,typeof m=="function"?m:ha)}function V5(o,c,h,m,A){if(K2(o))throw Error(n(485));if(o=c.action,o!==null){var N={payload:A,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){N.listeners.push(K)}};Q.T!==null?h(!0):N.isTransition=!1,m(N),h=c.pending,h===null?(N.next=c.pending=N,U2(c,N)):(N.next=h.next,c.pending=h.next=N)}}function U2(o,c){var h=c.action,m=c.payload,A=o.state;if(c.isTransition){var N=Q.T,K={};Q.T=K;try{var le=h(A,m),_e=Q.S;_e!==null&&_e(K,le),z2(o,c,le)}catch(Ue){tf(o,c,Ue)}finally{Q.T=N}}else try{N=h(A,m),z2(o,c,N)}catch(Ue){tf(o,c,Ue)}}function z2(o,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){Bv(o,c,m)},function(m){return tf(o,c,m)}):Bv(o,c,h)}function Bv(o,c,h){c.status="fulfilled",c.value=h,Uv(c),o.state=h,c=o.pending,c!==null&&(h=c.next,h===c?o.pending=null:(h=h.next,c.next=h,U2(o,h)))}function tf(o,c,h){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=h,Uv(c),c=c.next;while(c!==m)}o.action=null}function Uv(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function zv(o,c){return c}function Xp(o,c){if(Qn){var h=Bi.formState;if(h!==null){e:{var m=$t;if(Qn){if(Zi){t:{for(var A=Zi,N=Nl;A.nodeType!==8;){if(!N){A=null;break t}if(A=bu(A.nextSibling),A===null){A=null;break t}}N=A.data,A=N==="F!"||N==="F"?A:null}if(A){Zi=bu(A.nextSibling),m=A.data==="F!";break e}}Ed(m)}m=!1}m&&(c=h[0])}}return h=Os(),h.memoizedState=h.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zv,lastRenderedState:c},h.queue=m,h=Ck.bind(null,$t,m),m.dispatch=h,m=Qp(!1),N=B5.bind(null,$t,!1,m.queue),m=Os(),A={state:c,dispatch:null,action:o,pending:null},m.queue=A,h=V5.bind(null,$t,A,N,h),A.dispatch=h,m.memoizedState=o,[c,h,!1]}function t0(o){var c=Hi();return nf(c,en,o)}function nf(o,c,h){if(c=Zh(o,c,zv)[0],o=Yp(ha)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=bc(c)}catch(K){throw K===ie?ae:K}else m=c;c=Hi();var A=c.queue,N=A.dispatch;return h!==c.memoizedState&&($t.flags|=2048,mu(9,Jp(),j2.bind(null,A,h),null)),[m,N,o]}function j2(o,c){o.action=c}function q2(o){var c=Hi(),h=en;if(h!==null)return nf(c,h,o);Hi(),c=c.memoizedState,h=Hi();var m=h.queue.dispatch;return h.memoizedState=o,[c,m,!1]}function mu(o,c,h,m){return o={tag:o,create:h,deps:m,inst:c,next:null},c=$t.updateQueue,c===null&&(c=kd(),$t.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=o.next=o:(m=h.next,h.next=o,o.next=m,c.lastEffect=o),o}function Jp(){return{destroy:void 0,resource:void 0}}function n0(){return Hi().memoizedState}function Bo(o,c,h,m){var A=Os();m=m===void 0?null:m,$t.flags|=o,A.memoizedState=mu(1|c,Jp(),h,m)}function rf(o,c,h,m){var A=Hi();m=m===void 0?null:m;var N=A.memoizedState.inst;en!==null&&m!==null&&br(m,en.memoizedState.deps)?A.memoizedState=mu(c,N,h,m):($t.flags|=o,A.memoizedState=mu(1|c,N,h,m))}function jv(o,c){Bo(8390656,8,o,c)}function $2(o,c){rf(2048,8,o,c)}function qv(o,c){return rf(4,2,o,c)}function Id(o,c){return rf(4,4,o,c)}function H2(o,c){if(typeof c=="function"){o=o();var h=c(o);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function $v(o,c,h){h=h!=null?h.concat([o]):null,rf(4,4,H2.bind(null,c,o),h)}function Hv(){}function Gv(o,c){var h=Hi();c=c===void 0?null:c;var m=h.memoizedState;return c!==null&&br(c,m[1])?m[0]:(h.memoizedState=[o,c],o)}function G2(o,c){var h=Hi();c=c===void 0?null:c;var m=h.memoizedState;if(c!==null&&br(c,m[1]))return m[0];if(m=o(),Lr){pn(!0);try{o()}finally{pn(!1)}}return h.memoizedState=[m,c],m}function Rd(o,c,h){return h===void 0||(yi&1073741824)!==0?o.memoizedState=c:(o.memoizedState=h,o=AI(),$t.lanes|=o,df|=o,h)}function i0(o,c,h,m){return $r(h,c)?h:Tn.current!==null?(o=Rd(o,h,m),$r(o,c)||(xs=!0),o):(yi&42)===0?(xs=!0,o.memoizedState=h):(o=AI(),$t.lanes|=o,df|=o,c)}function Zp(o,c,h,m,A){var N=ce.p;ce.p=N!==0&&8>N?N:8;var K=Q.T,le={};Q.T=le,B5(o,!1,c,h);try{var _e=A(),Ue=Q.S;if(Ue!==null&&Ue(le,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var We=F2(_e,m);Qv(o,c,We,qo(o))}else Qv(o,c,m,qo(o))}catch(rt){Qv(o,c,{then:function(){},status:"rejected",reason:rt},qo())}finally{ce.p=N,Q.T=K}}function gu(){}function Ll(o,c,h,m){if(o.tag!==5)throw Error(n(476));var A=yu(o).queue;Zp(o,A,c,ge,h===null?gu:function(){return em(o),h(m)})}function yu(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:ge},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:h},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function em(o){var c=yu(o).next.queue;Qv(o,c,{},qo())}function tm(){return Ir(p1)}function Yv(){return Hi().memoizedState}function Y2(){return Hi().memoizedState}function Kv(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var h=qo();o=Ke(h);var m=et(c,o,h);m!==null&&($o(m,c,h),Qe(m,c,h)),c={cache:Fv()},o.payload=c;return}c=c.return}}function Wv(o,c,h){var m=qo();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},K2(o)?Nk(c,h):(h=hc(o,c,h,m),h!==null&&($o(h,o,m),kk(h,c,m)))}function Ck(o,c,h){var m=qo();Qv(o,c,h,m)}function Qv(o,c,h,m){var A={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(K2(o))Nk(c,A);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var K=c.lastRenderedState,le=N(K,h);if(A.hasEagerState=!0,A.eagerState=le,$r(le,K))return dc(o,c,A,0),Bi===null&&so(),!1}catch{}finally{}if(h=hc(o,c,A,m),h!==null)return $o(h,o,m),kk(h,c,m),!0}return!1}function B5(o,c,h,m){if(m={lane:2,revertLane:yS(),action:m,hasEagerState:!1,eagerState:null,next:null},K2(o)){if(c)throw Error(n(479))}else c=hc(o,h,m,2),c!==null&&$o(c,o,2)}function K2(o){var c=o.alternate;return o===$t||c!==null&&c===$t}function Nk(o,c){Yr=Gn=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function kk(o,c,h){if((h&4194048)!==0){var m=c.lanes;m&=o.pendingLanes,h|=m,c.lanes=h,on(o,h)}}var W2={readContext:Ir,use:da,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useLayoutEffect:ri,useInsertionEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useSyncExternalStore:ri,useId:ri,useHostTransitionStatus:ri,useFormState:ri,useActionState:ri,useOptimistic:ri,useMemoCache:ri,useCacheRefresh:ri},Ik={readContext:Ir,use:da,useCallback:function(o,c){return Os().memoizedState=[o,c===void 0?null:c],o},useContext:Ir,useEffect:jv,useImperativeHandle:function(o,c,h){h=h!=null?h.concat([o]):null,Bo(4194308,4,H2.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Bo(4194308,4,o,c)},useInsertionEffect:function(o,c){Bo(4,2,o,c)},useMemo:function(o,c){var h=Os();c=c===void 0?null:c;var m=o();if(Lr){pn(!0);try{o()}finally{pn(!1)}}return h.memoizedState=[m,c],m},useReducer:function(o,c,h){var m=Os();if(h!==void 0){var A=h(c);if(Lr){pn(!0);try{h(c)}finally{pn(!1)}}}else A=c;return m.memoizedState=m.baseState=A,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:A},m.queue=o,o=o.dispatch=Wv.bind(null,$t,o),[m.memoizedState,o]},useRef:function(o){var c=Os();return o={current:o},c.memoizedState=o},useState:function(o){o=Qp(o);var c=o.queue,h=Ck.bind(null,$t,c);return c.dispatch=h,[o.memoizedState,h]},useDebugValue:Hv,useDeferredValue:function(o,c){var h=Os();return Rd(h,o,c)},useTransition:function(){var o=Qp(!1);return o=Zp.bind(null,$t,o.queue,!0,!1),Os().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,h){var m=$t,A=Os();if(Qn){if(h===void 0)throw Error(n(407));h=h()}else{if(h=c(),Bi===null)throw Error(n(349));(Yn&124)!==0||e0(m,c,h)}A.memoizedState=h;var N={value:h,getSnapshot:c};return A.queue=N,jv(ef.bind(null,m,N,o),[o]),m.flags|=2048,mu(9,Jp(),Wp.bind(null,m,N,h,c),null),h},useId:function(){var o=Os(),c=Bi.identifierPrefix;if(Qn){var h=cu,m=uu;h=(m&~(1<<32-Ct(m)-1)).toString(32)+h,c="«"+c+"R"+h,h=ar++,0<h&&(c+="H"+h.toString(32)),c+="»"}else h=lo++,c="«"+c+"r"+h.toString(32)+"»";return o.memoizedState=c},useHostTransitionStatus:tm,useFormState:Xp,useActionState:Xp,useOptimistic:function(o){var c=Os();c.memoizedState=c.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=B5.bind(null,$t,!0,h),h.dispatch=c,[o,c]},useMemoCache:_c,useCacheRefresh:function(){return Os().memoizedState=Kv.bind(null,$t)}},Rk={readContext:Ir,use:da,useCallback:Gv,useContext:Ir,useEffect:$2,useImperativeHandle:$v,useInsertionEffect:qv,useLayoutEffect:Id,useMemo:G2,useReducer:Yp,useRef:n0,useState:function(){return Yp(ha)},useDebugValue:Hv,useDeferredValue:function(o,c){var h=Hi();return i0(h,en.memoizedState,o,c)},useTransition:function(){var o=Yp(ha)[0],c=Hi().memoizedState;return[typeof o=="boolean"?o:bc(o),c]},useSyncExternalStore:Kp,useId:Yv,useHostTransitionStatus:tm,useFormState:t0,useActionState:t0,useOptimistic:function(o,c){var h=Hi();return pu(h,en,o,c)},useMemoCache:_c,useCacheRefresh:Y2},n7={readContext:Ir,use:da,useCallback:Gv,useContext:Ir,useEffect:$2,useImperativeHandle:$v,useInsertionEffect:qv,useLayoutEffect:Id,useMemo:G2,useReducer:Zg,useRef:n0,useState:function(){return Zg(ha)},useDebugValue:Hv,useDeferredValue:function(o,c){var h=Hi();return en===null?Rd(h,o,c):i0(h,en.memoizedState,o,c)},useTransition:function(){var o=Zg(ha)[0],c=Hi().memoizedState;return[typeof o=="boolean"?o:bc(o),c]},useSyncExternalStore:Kp,useId:Yv,useHostTransitionStatus:tm,useFormState:q2,useActionState:q2,useOptimistic:function(o,c){var h=Hi();return en!==null?pu(h,en,o,c):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:_c,useCacheRefresh:Y2},r0=null,Xv=0;function Q2(o){var c=Xv;return Xv+=1,r0===null&&(r0=[]),Fe(r0,o,c)}function Jv(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function X2(o,c){throw c.$$typeof===p?Error(n(525)):(o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function Lk(o){var c=o._init;return c(o._payload)}function Pk(o){function c(Pe,Ce){if(o){var Oe=Pe.deletions;Oe===null?(Pe.deletions=[Ce],Pe.flags|=16):Oe.push(Ce)}}function h(Pe,Ce){if(!o)return null;for(;Ce!==null;)c(Pe,Ce),Ce=Ce.sibling;return null}function m(Pe){for(var Ce=new Map;Pe!==null;)Pe.key!==null?Ce.set(Pe.key,Pe):Ce.set(Pe.index,Pe),Pe=Pe.sibling;return Ce}function A(Pe,Ce){return Pe=Cl(Pe,Ce),Pe.index=0,Pe.sibling=null,Pe}function N(Pe,Ce,Oe){return Pe.index=Oe,o?(Oe=Pe.alternate,Oe!==null?(Oe=Oe.index,Oe<Ce?(Pe.flags|=67108866,Ce):Oe):(Pe.flags|=67108866,Ce)):(Pe.flags|=1048576,Ce)}function K(Pe){return o&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function le(Pe,Ce,Oe,Je){return Ce===null||Ce.tag!==6?(Ce=Gg(Oe,Pe.mode,Je),Ce.return=Pe,Ce):(Ce=A(Ce,Oe),Ce.return=Pe,Ce)}function _e(Pe,Ce,Oe,Je){var Lt=Oe.type;return Lt===C?We(Pe,Ce,Oe.props.children,Je,Oe.key):Ce!==null&&(Ce.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===P&&Lk(Lt)===Ce.type)?(Ce=A(Ce,Oe.props),Jv(Ce,Oe),Ce.return=Pe,Ce):(Ce=Ad(Oe.type,Oe.key,Oe.props,null,Pe.mode,Je),Jv(Ce,Oe),Ce.return=Pe,Ce)}function Ue(Pe,Ce,Oe,Je){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Oe.containerInfo||Ce.stateNode.implementation!==Oe.implementation?(Ce=zp(Oe,Pe.mode,Je),Ce.return=Pe,Ce):(Ce=A(Ce,Oe.children||[]),Ce.return=Pe,Ce)}function We(Pe,Ce,Oe,Je,Lt){return Ce===null||Ce.tag!==7?(Ce=ou(Oe,Pe.mode,Je,Lt),Ce.return=Pe,Ce):(Ce=A(Ce,Oe),Ce.return=Pe,Ce)}function rt(Pe,Ce,Oe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=Gg(""+Ce,Pe.mode,Oe),Ce.return=Pe,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:return Oe=Ad(Ce.type,Ce.key,Ce.props,null,Pe.mode,Oe),Jv(Oe,Ce),Oe.return=Pe,Oe;case v:return Ce=zp(Ce,Pe.mode,Oe),Ce.return=Pe,Ce;case P:var Je=Ce._init;return Ce=Je(Ce._payload),rt(Pe,Ce,Oe)}if(fe(Ce)||F(Ce))return Ce=ou(Ce,Pe.mode,Oe,null),Ce.return=Pe,Ce;if(typeof Ce.then=="function")return rt(Pe,Q2(Ce),Oe);if(Ce.$$typeof===j)return rt(Pe,gc(Pe,Ce),Oe);X2(Pe,Ce)}return null}function ze(Pe,Ce,Oe,Je){var Lt=Ce!==null?Ce.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Lt!==null?null:le(Pe,Ce,""+Oe,Je);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case y:return Oe.key===Lt?_e(Pe,Ce,Oe,Je):null;case v:return Oe.key===Lt?Ue(Pe,Ce,Oe,Je):null;case P:return Lt=Oe._init,Oe=Lt(Oe._payload),ze(Pe,Ce,Oe,Je)}if(fe(Oe)||F(Oe))return Lt!==null?null:We(Pe,Ce,Oe,Je,null);if(typeof Oe.then=="function")return ze(Pe,Ce,Q2(Oe),Je);if(Oe.$$typeof===j)return ze(Pe,Ce,gc(Pe,Oe),Je);X2(Pe,Oe)}return null}function je(Pe,Ce,Oe,Je,Lt){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Pe=Pe.get(Oe)||null,le(Ce,Pe,""+Je,Lt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case y:return Pe=Pe.get(Je.key===null?Oe:Je.key)||null,_e(Ce,Pe,Je,Lt);case v:return Pe=Pe.get(Je.key===null?Oe:Je.key)||null,Ue(Ce,Pe,Je,Lt);case P:var Pn=Je._init;return Je=Pn(Je._payload),je(Pe,Ce,Oe,Je,Lt)}if(fe(Je)||F(Je))return Pe=Pe.get(Oe)||null,We(Ce,Pe,Je,Lt,null);if(typeof Je.then=="function")return je(Pe,Ce,Oe,Q2(Je),Lt);if(Je.$$typeof===j)return je(Pe,Ce,Oe,gc(Ce,Je),Lt);X2(Ce,Je)}return null}function rn(Pe,Ce,Oe,Je){for(var Lt=null,Pn=null,zt=Ce,Jt=Ce=0,As=null;zt!==null&&Jt<Oe.length;Jt++){zt.index>Jt?(As=zt,zt=null):As=zt.sibling;var si=ze(Pe,zt,Oe[Jt],Je);if(si===null){zt===null&&(zt=As);break}o&&zt&&si.alternate===null&&c(Pe,zt),Ce=N(si,Ce,Jt),Pn===null?Lt=si:Pn.sibling=si,Pn=si,zt=As}if(Jt===Oe.length)return h(Pe,zt),Qn&&Td(Pe,Jt),Lt;if(zt===null){for(;Jt<Oe.length;Jt++)zt=rt(Pe,Oe[Jt],Je),zt!==null&&(Ce=N(zt,Ce,Jt),Pn===null?Lt=zt:Pn.sibling=zt,Pn=zt);return Qn&&Td(Pe,Jt),Lt}for(zt=m(zt);Jt<Oe.length;Jt++)As=je(zt,Pe,Jt,Oe[Jt],Je),As!==null&&(o&&As.alternate!==null&&zt.delete(As.key===null?Jt:As.key),Ce=N(As,Ce,Jt),Pn===null?Lt=As:Pn.sibling=As,Pn=As);return o&&zt.forEach(function(_f){return c(Pe,_f)}),Qn&&Td(Pe,Jt),Lt}function Qt(Pe,Ce,Oe,Je){if(Oe==null)throw Error(n(151));for(var Lt=null,Pn=null,zt=Ce,Jt=Ce=0,As=null,si=Oe.next();zt!==null&&!si.done;Jt++,si=Oe.next()){zt.index>Jt?(As=zt,zt=null):As=zt.sibling;var _f=ze(Pe,zt,si.value,Je);if(_f===null){zt===null&&(zt=As);break}o&&zt&&_f.alternate===null&&c(Pe,zt),Ce=N(_f,Ce,Jt),Pn===null?Lt=_f:Pn.sibling=_f,Pn=_f,zt=As}if(si.done)return h(Pe,zt),Qn&&Td(Pe,Jt),Lt;if(zt===null){for(;!si.done;Jt++,si=Oe.next())si=rt(Pe,si.value,Je),si!==null&&(Ce=N(si,Ce,Jt),Pn===null?Lt=si:Pn.sibling=si,Pn=si);return Qn&&Td(Pe,Jt),Lt}for(zt=m(zt);!si.done;Jt++,si=Oe.next())si=je(zt,Pe,Jt,si.value,Je),si!==null&&(o&&si.alternate!==null&&zt.delete(si.key===null?Jt:si.key),Ce=N(si,Ce,Jt),Pn===null?Lt=si:Pn.sibling=si,Pn=si);return o&&zt.forEach(function(iV){return c(Pe,iV)}),Qn&&Td(Pe,Jt),Lt}function Ci(Pe,Ce,Oe,Je){if(typeof Oe=="object"&&Oe!==null&&Oe.type===C&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case y:e:{for(var Lt=Oe.key;Ce!==null;){if(Ce.key===Lt){if(Lt=Oe.type,Lt===C){if(Ce.tag===7){h(Pe,Ce.sibling),Je=A(Ce,Oe.props.children),Je.return=Pe,Pe=Je;break e}}else if(Ce.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===P&&Lk(Lt)===Ce.type){h(Pe,Ce.sibling),Je=A(Ce,Oe.props),Jv(Je,Oe),Je.return=Pe,Pe=Je;break e}h(Pe,Ce);break}else c(Pe,Ce);Ce=Ce.sibling}Oe.type===C?(Je=ou(Oe.props.children,Pe.mode,Je,Oe.key),Je.return=Pe,Pe=Je):(Je=Ad(Oe.type,Oe.key,Oe.props,null,Pe.mode,Je),Jv(Je,Oe),Je.return=Pe,Pe=Je)}return K(Pe);case v:e:{for(Lt=Oe.key;Ce!==null;){if(Ce.key===Lt)if(Ce.tag===4&&Ce.stateNode.containerInfo===Oe.containerInfo&&Ce.stateNode.implementation===Oe.implementation){h(Pe,Ce.sibling),Je=A(Ce,Oe.children||[]),Je.return=Pe,Pe=Je;break e}else{h(Pe,Ce);break}else c(Pe,Ce);Ce=Ce.sibling}Je=zp(Oe,Pe.mode,Je),Je.return=Pe,Pe=Je}return K(Pe);case P:return Lt=Oe._init,Oe=Lt(Oe._payload),Ci(Pe,Ce,Oe,Je)}if(fe(Oe))return rn(Pe,Ce,Oe,Je);if(F(Oe)){if(Lt=F(Oe),typeof Lt!="function")throw Error(n(150));return Oe=Lt.call(Oe),Qt(Pe,Ce,Oe,Je)}if(typeof Oe.then=="function")return Ci(Pe,Ce,Q2(Oe),Je);if(Oe.$$typeof===j)return Ci(Pe,Ce,gc(Pe,Oe),Je);X2(Pe,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,Ce!==null&&Ce.tag===6?(h(Pe,Ce.sibling),Je=A(Ce,Oe),Je.return=Pe,Pe=Je):(h(Pe,Ce),Je=Gg(Oe,Pe.mode,Je),Je.return=Pe,Pe=Je),K(Pe)):h(Pe,Ce)}return function(Pe,Ce,Oe,Je){try{Xv=0;var Lt=Ci(Pe,Ce,Oe,Je);return r0=null,Lt}catch(zt){if(zt===ie||zt===ae)throw zt;var Pn=_s(29,zt,null,Pe.mode);return Pn.lanes=Je,Pn.return=Pe,Pn}finally{}}}var s0=Pk(!0),Mk=Pk(!1),Pl=xe(null),xc=null;function sf(o){var c=o.alternate;ee(ls,ls.current&1),ee(Pl,o),xc===null&&(c===null||Tn.current!==null||c.memoizedState!==null)&&(xc=o)}function Dk(o){if(o.tag===22){if(ee(ls,ls.current),ee(Pl,o),xc===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(xc=o)}}else af()}function af(){ee(ls,ls.current),ee(Pl,Pl.current)}function Ld(o){q(Pl),xc===o&&(xc=null),q(ls)}var ls=xe(0);function J2(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||kS(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function U5(o,c,h,m){c=o.memoizedState,h=h(m,c),h=h==null?c:f({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var z5={enqueueSetState:function(o,c,h){o=o._reactInternals;var m=qo(),A=Ke(m);A.payload=c,h!=null&&(A.callback=h),c=et(o,A,m),c!==null&&($o(c,o,m),Qe(c,o,m))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var m=qo(),A=Ke(m);A.tag=1,A.payload=c,h!=null&&(A.callback=h),c=et(o,A,m),c!==null&&($o(c,o,m),Qe(c,o,m))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=qo(),m=Ke(h);m.tag=2,c!=null&&(m.callback=c),c=et(o,m,h),c!==null&&($o(c,o,h),Qe(c,o,h))}};function Ok(o,c,h,m,A,N,K){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,N,K):c.prototype&&c.prototype.isPureReactComponent?!rc(h,m)||!rc(A,N):!0}function Fk(o,c,h,m){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,m),c.state!==o&&z5.enqueueReplaceState(c,c.state,null)}function nm(o,c){var h=c;if("ref"in c){h={};for(var m in c)m!=="ref"&&(h[m]=c[m])}if(o=o.defaultProps){h===c&&(h=f({},h));for(var A in o)h[A]===void 0&&(h[A]=o[A])}return h}var Z2=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Vk(o){Z2(o)}function Bk(o){console.error(o)}function Uk(o){Z2(o)}function ex(o,c){try{var h=o.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function zk(o,c,h){try{var m=o.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function j5(o,c,h){return h=Ke(h),h.tag=3,h.payload={element:null},h.callback=function(){ex(o,c)},h}function jk(o){return o=Ke(o),o.tag=3,o}function qk(o,c,h,m){var A=h.type.getDerivedStateFromError;if(typeof A=="function"){var N=m.value;o.payload=function(){return A(N)},o.callback=function(){zk(c,h,m)}}var K=h.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(o.callback=function(){zk(c,h,m),typeof A!="function"&&(hf===null?hf=new Set([this]):hf.add(this));var le=m.stack;this.componentDidCatch(m.value,{componentStack:le!==null?le:""})})}function i7(o,c,h,m,A){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=h.alternate,c!==null&&Jh(c,h,A,!0),h=Pl.current,h!==null){switch(h.tag){case 13:return xc===null?hS():h.alternate===null&&_r===0&&(_r=3),h.flags&=-257,h.flags|=65536,h.lanes=A,m===de?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([m]):c.add(m),pS(o,m,A)),!1;case 22:return h.flags|=65536,m===de?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([m]):h.add(m)),pS(o,m,A)),!1}throw Error(n(435,h.tag))}return pS(o,m,A),hS(),!1}if(Qn)return c=Pl.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,m!==Ov&&(o=Error(n(422),{cause:m}),Xh(Nn(o,h)))):(m!==Ov&&(c=Error(n(423),{cause:m}),Xh(Nn(c,h))),o=o.current.alternate,o.flags|=65536,A&=-A,o.lanes|=A,m=Nn(m,h),A=j5(o.stateNode,m,A),St(o,A),_r!==4&&(_r=2)),!1;var N=Error(n(520),{cause:m});if(N=Nn(N,h),s1===null?s1=[N]:s1.push(N),_r!==4&&(_r=2),c===null)return!0;m=Nn(m,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,o=A&-A,h.lanes|=o,o=j5(h.stateNode,m,o),St(h,o),!1;case 1:if(c=h.type,N=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(hf===null||!hf.has(N))))return h.flags|=65536,A&=-A,h.lanes|=A,A=jk(A),qk(A,o,h,m),St(h,A),!1}h=h.return}while(h!==null);return!1}var $k=Error(n(461)),xs=!1;function Fs(o,c,h,m){c.child=o===null?Mk(c,null,h,m):s0(c,o.child,h,m)}function Hk(o,c,h,m,A){h=h.render;var N=c.ref;if("ref"in m){var K={};for(var le in m)le!=="ref"&&(K[le]=m[le])}else K=m;return Rl(c),m=Vo(o,c,h,K,N,A),le=Vi(),o!==null&&!xs?(Gp(o,c,A),Pd(o,c,A)):(Qn&&le&&jp(c),c.flags|=1,Fs(o,c,m,A),c.child)}function Gk(o,c,h,m,A){if(o===null){var N=h.type;return typeof N=="function"&&!Wh(N)&&N.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=N,Yk(o,c,N,m,A)):(o=Ad(h.type,null,m,c,c.mode,A),o.ref=c.ref,o.return=c,c.child=o)}if(N=o.child,!Q5(o,A)){var K=N.memoizedProps;if(h=h.compare,h=h!==null?h:rc,h(K,m)&&o.ref===c.ref)return Pd(o,c,A)}return c.flags|=1,o=Cl(N,m),o.ref=c.ref,o.return=c,c.child=o}function Yk(o,c,h,m,A){if(o!==null){var N=o.memoizedProps;if(rc(N,m)&&o.ref===c.ref)if(xs=!1,c.pendingProps=m=N,Q5(o,A))(o.flags&131072)!==0&&(xs=!0);else return c.lanes=o.lanes,Pd(o,c,A)}return q5(o,c,h,m,A)}function Kk(o,c,h){var m=c.pendingProps,A=m.children,N=o!==null?o.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=N!==null?N.baseLanes|h:h,o!==null){for(A=c.child=o.child,N=0;A!==null;)N=N|A.lanes|A.childLanes,A=A.sibling;c.childLanes=N&~m}else c.childLanes=0,c.child=null;return Wk(o,c,m,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&z(c,N!==null?N.cachePool:null),N!==null?pi(c,N):ii(),Dk(c);else return c.lanes=c.childLanes=536870912,Wk(o,c,N!==null?N.baseLanes|h:h,h)}else N!==null?(z(c,N.cachePool),pi(c,N),af(),c.memoizedState=null):(o!==null&&z(c,null),ii(),af());return Fs(o,c,A,h),c.child}function Wk(o,c,h,m){var A=L();return A=A===null?null:{parent:Rr._currentValue,pool:A},c.memoizedState={baseLanes:h,cachePool:A},o!==null&&z(c,null),ii(),Dk(c),o!==null&&Jh(o,c,m,!0),null}function tx(o,c){var h=c.ref;if(h===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(o===null||o.ref!==h)&&(c.flags|=4194816)}}function q5(o,c,h,m,A){return Rl(c),h=Vo(o,c,h,m,void 0,A),m=Vi(),o!==null&&!xs?(Gp(o,c,A),Pd(o,c,A)):(Qn&&m&&jp(c),c.flags|=1,Fs(o,c,h,A),c.child)}function Qk(o,c,h,m,A,N){return Rl(c),c.updateQueue=null,h=Nd(c,m,h,A),yc(o),m=Vi(),o!==null&&!xs?(Gp(o,c,N),Pd(o,c,N)):(Qn&&m&&jp(c),c.flags|=1,Fs(o,c,h,N),c.child)}function Xk(o,c,h,m,A){if(Rl(c),c.stateNode===null){var N=Hr,K=h.contextType;typeof K=="object"&&K!==null&&(N=Ir(K)),N=new h(m,N),c.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=z5,c.stateNode=N,N._reactInternals=c,N=c.stateNode,N.props=m,N.state=c.memoizedState,N.refs={},Ee(c),K=h.contextType,N.context=typeof K=="object"&&K!==null?Ir(K):Hr,N.state=c.memoizedState,K=h.getDerivedStateFromProps,typeof K=="function"&&(U5(c,h,K,m),N.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(K=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),K!==N.state&&z5.enqueueReplaceState(N,N.state,null),_t(c,m,N,A),Bt(),N.state=c.memoizedState),typeof N.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(o===null){N=c.stateNode;var le=c.memoizedProps,_e=nm(h,le);N.props=_e;var Ue=N.context,We=h.contextType;K=Hr,typeof We=="object"&&We!==null&&(K=Ir(We));var rt=h.getDerivedStateFromProps;We=typeof rt=="function"||typeof N.getSnapshotBeforeUpdate=="function",le=c.pendingProps!==le,We||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(le||Ue!==K)&&Fk(c,N,m,K),$e=!1;var ze=c.memoizedState;N.state=ze,_t(c,m,N,A),Bt(),Ue=c.memoizedState,le||ze!==Ue||$e?(typeof rt=="function"&&(U5(c,h,rt,m),Ue=c.memoizedState),(_e=$e||Ok(c,h,_e,m,ze,Ue,K))?(We||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(c.flags|=4194308)):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=Ue),N.props=m,N.state=Ue,N.context=K,m=_e):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{N=c.stateNode,Ne(o,c),K=c.memoizedProps,We=nm(h,K),N.props=We,rt=c.pendingProps,ze=N.context,Ue=h.contextType,_e=Hr,typeof Ue=="object"&&Ue!==null&&(_e=Ir(Ue)),le=h.getDerivedStateFromProps,(Ue=typeof le=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(K!==rt||ze!==_e)&&Fk(c,N,m,_e),$e=!1,ze=c.memoizedState,N.state=ze,_t(c,m,N,A),Bt();var je=c.memoizedState;K!==rt||ze!==je||$e||o!==null&&o.dependencies!==null&&Qg(o.dependencies)?(typeof le=="function"&&(U5(c,h,le,m),je=c.memoizedState),(We=$e||Ok(c,h,We,m,ze,je,_e)||o!==null&&o.dependencies!==null&&Qg(o.dependencies))?(Ue||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(m,je,_e),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(m,je,_e)),typeof N.componentDidUpdate=="function"&&(c.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof N.componentDidUpdate!="function"||K===o.memoizedProps&&ze===o.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&ze===o.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=je),N.props=m,N.state=je,N.context=_e,m=We):(typeof N.componentDidUpdate!="function"||K===o.memoizedProps&&ze===o.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&ze===o.memoizedState||(c.flags|=1024),m=!1)}return N=m,tx(o,c),m=(c.flags&128)!==0,N||m?(N=c.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:N.render(),c.flags|=1,o!==null&&m?(c.child=s0(c,o.child,null,A),c.child=s0(c,null,h,A)):Fs(o,c,h,A),c.memoizedState=N.state,o=c.child):o=Pd(o,c,A),o}function Jk(o,c,h,m){return Da(),c.flags|=256,Fs(o,c,h,m),c.child}var $5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function H5(o){return{baseLanes:o,cachePool:J()}}function G5(o,c,h){return o=o!==null?o.childLanes&~h:0,c&&(o|=Ml),o}function Zk(o,c,h){var m=c.pendingProps,A=!1,N=(c.flags&128)!==0,K;if((K=N)||(K=o!==null&&o.memoizedState===null?!1:(ls.current&2)!==0),K&&(A=!0,c.flags&=-129),K=(c.flags&32)!==0,c.flags&=-33,o===null){if(Qn){if(A?sf(c):af(),Qn){var le=Zi,_e;if(_e=le){e:{for(_e=le,le=Nl;_e.nodeType!==8;){if(!le){le=null;break e}if(_e=bu(_e.nextSibling),_e===null){le=null;break e}}le=_e}le!==null?(c.memoizedState={dehydrated:le,treeContext:Sd!==null?{id:uu,overflow:cu}:null,retryLane:536870912,hydrationErrors:null},_e=_s(18,null,null,0),_e.stateNode=le,_e.return=c,c.child=_e,kr=c,Zi=null,_e=!0):_e=!1}_e||Ed(c)}if(le=c.memoizedState,le!==null&&(le=le.dehydrated,le!==null))return kS(le)?c.lanes=32:c.lanes=536870912,null;Ld(c)}return le=m.children,m=m.fallback,A?(af(),A=c.mode,le=nx({mode:"hidden",children:le},A),m=ou(m,A,h,null),le.return=c,m.return=c,le.sibling=m,c.child=le,A=c.child,A.memoizedState=H5(h),A.childLanes=G5(o,K,h),c.memoizedState=$5,m):(sf(c),Y5(c,le))}if(_e=o.memoizedState,_e!==null&&(le=_e.dehydrated,le!==null)){if(N)c.flags&256?(sf(c),c.flags&=-257,c=K5(o,c,h)):c.memoizedState!==null?(af(),c.child=o.child,c.flags|=128,c=null):(af(),A=m.fallback,le=c.mode,m=nx({mode:"visible",children:m.children},le),A=ou(A,le,h,null),A.flags|=2,m.return=c,A.return=c,m.sibling=A,c.child=m,s0(c,o.child,null,h),m=c.child,m.memoizedState=H5(h),m.childLanes=G5(o,K,h),c.memoizedState=$5,c=A);else if(sf(c),kS(le)){if(K=le.nextSibling&&le.nextSibling.dataset,K)var Ue=K.dgst;K=Ue,m=Error(n(419)),m.stack="",m.digest=K,Xh({value:m,source:null,stack:null}),c=K5(o,c,h)}else if(xs||Jh(o,c,h,!1),K=(h&o.childLanes)!==0,xs||K){if(K=Bi,K!==null&&(m=h&-h,m=(m&42)!==0?1:Yt(m),m=(m&(K.suspendedLanes|h))!==0?0:m,m!==0&&m!==_e.retryLane))throw _e.retryLane=m,au(o,m),$o(K,o,m),$k;le.data==="$?"||hS(),c=K5(o,c,h)}else le.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=_e.treeContext,Zi=bu(le.nextSibling),kr=c,Qn=!0,pc=null,Nl=!1,o!==null&&(oo[Ma++]=uu,oo[Ma++]=cu,oo[Ma++]=Sd,uu=o.id,cu=o.overflow,Sd=c),c=Y5(c,m.children),c.flags|=4096);return c}return A?(af(),A=m.fallback,le=c.mode,_e=o.child,Ue=_e.sibling,m=Cl(_e,{mode:"hidden",children:m.children}),m.subtreeFlags=_e.subtreeFlags&65011712,Ue!==null?A=Cl(Ue,A):(A=ou(A,le,h,null),A.flags|=2),A.return=c,m.return=c,m.sibling=A,c.child=m,m=A,A=c.child,le=o.child.memoizedState,le===null?le=H5(h):(_e=le.cachePool,_e!==null?(Ue=Rr._currentValue,_e=_e.parent!==Ue?{parent:Ue,pool:Ue}:_e):_e=J(),le={baseLanes:le.baseLanes|h,cachePool:_e}),A.memoizedState=le,A.childLanes=G5(o,K,h),c.memoizedState=$5,m):(sf(c),h=o.child,o=h.sibling,h=Cl(h,{mode:"visible",children:m.children}),h.return=c,h.sibling=null,o!==null&&(K=c.deletions,K===null?(c.deletions=[o],c.flags|=16):K.push(o)),c.child=h,c.memoizedState=null,h)}function Y5(o,c){return c=nx({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function nx(o,c){return o=_s(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function K5(o,c,h){return s0(c,o.child,null,h),o=Y5(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function eI(o,c,h){o.lanes|=c;var m=o.alternate;m!==null&&(m.lanes|=c),Kg(o.return,c,h)}function W5(o,c,h,m,A){var N=o.memoizedState;N===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:A}:(N.isBackwards=c,N.rendering=null,N.renderingStartTime=0,N.last=m,N.tail=h,N.tailMode=A)}function tI(o,c,h){var m=c.pendingProps,A=m.revealOrder,N=m.tail;if(Fs(o,c,m.children,h),m=ls.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&eI(o,h,c);else if(o.tag===19)eI(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}switch(ee(ls,m),A){case"forwards":for(h=c.child,A=null;h!==null;)o=h.alternate,o!==null&&J2(o)===null&&(A=h),h=h.sibling;h=A,h===null?(A=c.child,c.child=null):(A=h.sibling,h.sibling=null),W5(c,!1,A,h,N);break;case"backwards":for(h=null,A=c.child,c.child=null;A!==null;){if(o=A.alternate,o!==null&&J2(o)===null){c.child=A;break}o=A.sibling,A.sibling=h,h=A,A=o}W5(c,!0,h,null,N);break;case"together":W5(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Pd(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),df|=c.lanes,(h&c.childLanes)===0)if(o!==null){if(Jh(o,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,h=Cl(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=Cl(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function Q5(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Qg(o)))}function r7(o,c,h){switch(c.tag){case 3:Ie(c,c.stateNode.containerInfo),mc(c,Rr,o.memoizedState.cache),Da();break;case 27:case 5:nt(c);break;case 4:Ie(c,c.stateNode.containerInfo);break;case 10:mc(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(sf(c),c.flags|=128,null):(h&c.child.childLanes)!==0?Zk(o,c,h):(sf(c),o=Pd(o,c,h),o!==null?o.sibling:null);sf(c);break;case 19:var A=(o.flags&128)!==0;if(m=(h&c.childLanes)!==0,m||(Jh(o,c,h,!1),m=(h&c.childLanes)!==0),A){if(m)return tI(o,c,h);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ee(ls,ls.current),m)break;return null;case 22:case 23:return c.lanes=0,Kk(o,c,h);case 24:mc(c,Rr,o.memoizedState.cache)}return Pd(o,c,h)}function nI(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps)xs=!0;else{if(!Q5(o,h)&&(c.flags&128)===0)return xs=!1,r7(o,c,h);xs=(o.flags&131072)!==0}else xs=!1,Qn&&(c.flags&1048576)!==0&&L2(c,Yg,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var m=c.elementType,A=m._init;if(m=A(m._payload),c.type=m,typeof m=="function")Wh(m)?(o=nm(m,o),c.tag=1,c=Xk(null,c,m,o,h)):(c.tag=0,c=q5(null,c,m,o,h));else{if(m!=null){if(A=m.$$typeof,A===X){c.tag=11,c=Hk(null,c,m,o,h);break e}else if(A===U){c.tag=14,c=Gk(null,c,m,o,h);break e}}throw c=H(m)||m,Error(n(306,c,""))}}return c;case 0:return q5(o,c,c.type,c.pendingProps,h);case 1:return m=c.type,A=nm(m,c.pendingProps),Xk(o,c,m,A,h);case 3:e:{if(Ie(c,c.stateNode.containerInfo),o===null)throw Error(n(387));m=c.pendingProps;var N=c.memoizedState;A=N.element,Ne(o,c),_t(c,m,null,h);var K=c.memoizedState;if(m=K.cache,mc(c,Rr,m),m!==N.cache&&Wg(c,[Rr],h,!0),Bt(),m=K.element,N.isDehydrated)if(N={element:m,isDehydrated:!1,cache:K.cache},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){c=Jk(o,c,m,h);break e}else if(m!==A){A=Nn(Error(n(424)),c),Xh(A),c=Jk(o,c,m,h);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Zi=bu(o.firstChild),kr=c,Qn=!0,pc=null,Nl=!0,h=Mk(c,null,m,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Da(),m===A){c=Pd(o,c,h);break e}Fs(o,c,m,h)}c=c.child}return c;case 26:return tx(o,c),o===null?(h=aR(c.type,null,c.pendingProps,null))?c.memoizedState=h:Qn||(h=c.type,o=c.pendingProps,m=gx(ye.current).createElement(h),m[li]=c,m[ui]=o,Bs(m,h,o),Zn(m),c.stateNode=m):c.memoizedState=aR(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return nt(c),o===null&&Qn&&(m=c.stateNode=iR(c.type,c.pendingProps,ye.current),kr=c,Nl=!0,A=Zi,mf(c.type)?(IS=A,Zi=bu(m.firstChild)):Zi=A),Fs(o,c,c.pendingProps.children,h),tx(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Qn&&((A=m=Zi)&&(m=L7(m,c.type,c.pendingProps,Nl),m!==null?(c.stateNode=m,kr=c,Zi=bu(m.firstChild),Nl=!1,A=!0):A=!1),A||Ed(c)),nt(c),A=c.type,N=c.pendingProps,K=o!==null?o.memoizedProps:null,m=N.children,ES(A,N)?m=null:K!==null&&ES(A,K)&&(c.flags|=32),c.memoizedState!==null&&(A=Vo(o,c,vc,null,null,h),p1._currentValue=A),tx(o,c),Fs(o,c,m,h),c.child;case 6:return o===null&&Qn&&((o=h=Zi)&&(h=P7(h,c.pendingProps,Nl),h!==null?(c.stateNode=h,kr=c,Zi=null,o=!0):o=!1),o||Ed(c)),null;case 13:return Zk(o,c,h);case 4:return Ie(c,c.stateNode.containerInfo),m=c.pendingProps,o===null?c.child=s0(c,null,m,h):Fs(o,c,m,h),c.child;case 11:return Hk(o,c,c.type,c.pendingProps,h);case 7:return Fs(o,c,c.pendingProps,h),c.child;case 8:return Fs(o,c,c.pendingProps.children,h),c.child;case 12:return Fs(o,c,c.pendingProps.children,h),c.child;case 10:return m=c.pendingProps,mc(c,c.type,m.value),Fs(o,c,m.children,h),c.child;case 9:return A=c.type._context,m=c.pendingProps.children,Rl(c),A=Ir(A),m=m(A),c.flags|=1,Fs(o,c,m,h),c.child;case 14:return Gk(o,c,c.type,c.pendingProps,h);case 15:return Yk(o,c,c.type,c.pendingProps,h);case 19:return tI(o,c,h);case 31:return m=c.pendingProps,h=c.mode,m={mode:m.mode,children:m.children},o===null?(h=nx(m,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=Cl(o.child,m),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return Kk(o,c,h);case 24:return Rl(c),m=Ir(Rr),o===null?(A=L(),A===null&&(A=Bi,N=Fv(),A.pooledCache=N,N.refCount++,N!==null&&(A.pooledCacheLanes|=h),A=N),c.memoizedState={parent:m,cache:A},Ee(c),mc(c,Rr,A)):((o.lanes&h)!==0&&(Ne(o,c),_t(c,null,null,h),Bt()),A=o.memoizedState,N=c.memoizedState,A.parent!==m?(A={parent:m,cache:m},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),mc(c,Rr,m)):(m=N.cache,mc(c,Rr,m),m!==A.cache&&Wg(c,[Rr],h,!0))),Fs(o,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function Md(o){o.flags|=4}function iI(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!dR(c)){if(c=Pl.current,c!==null&&((Yn&4194048)===Yn?xc!==null:(Yn&62914560)!==Yn&&(Yn&536870912)===0||c!==xc))throw De=de,se;o.flags|=8192}}function ix(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?di():536870912,o.lanes|=c,u0|=c)}function Zv(o,c){if(!Qn)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function lr(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,m=0;if(c)for(var A=o.child;A!==null;)h|=A.lanes|A.childLanes,m|=A.subtreeFlags&65011712,m|=A.flags&65011712,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)h|=A.lanes|A.childLanes,m|=A.subtreeFlags,m|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=m,o.childLanes=h,c}function s7(o,c,h){var m=c.pendingProps;switch(qp(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(c),null;case 1:return lr(c),null;case 3:return h=c.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),Il(Rr),Me(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Ds(c)?Md(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,M2())),lr(c),null;case 26:return h=c.memoizedState,o===null?(Md(c),h!==null?(lr(c),iI(c,h)):(lr(c),c.flags&=-16777217)):h?h!==o.memoizedState?(Md(c),lr(c),iI(c,h)):(lr(c),c.flags&=-16777217):(o.memoizedProps!==m&&Md(c),lr(c),c.flags&=-16777217),null;case 27:He(c),h=ye.current;var A=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==m&&Md(c);else{if(!m){if(c.stateNode===null)throw Error(n(166));return lr(c),null}o=he.current,Ds(c)?P2(c):(o=iR(A,m,h),c.stateNode=o,Md(c))}return lr(c),null;case 5:if(He(c),h=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==m&&Md(c);else{if(!m){if(c.stateNode===null)throw Error(n(166));return lr(c),null}if(o=he.current,Ds(c))P2(c);else{switch(A=gx(ye.current),o){case 1:o=A.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:o=A.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":o=A.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":o=A.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":o=A.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof m.is=="string"?A.createElement("select",{is:m.is}):A.createElement("select"),m.multiple?o.multiple=!0:m.size&&(o.size=m.size);break;default:o=typeof m.is=="string"?A.createElement(h,{is:m.is}):A.createElement(h)}}o[li]=c,o[ui]=m;e:for(A=c.child;A!==null;){if(A.tag===5||A.tag===6)o.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===c)break e;for(;A.sibling===null;){if(A.return===null||A.return===c)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}c.stateNode=o;e:switch(Bs(o,h,m),h){case"button":case"input":case"select":case"textarea":o=!!m.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Md(c)}}return lr(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==m&&Md(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(n(166));if(o=ye.current,Ds(c)){if(o=c.stateNode,h=c.memoizedProps,m=null,A=kr,A!==null)switch(A.tag){case 27:case 5:m=A.memoizedProps}o[li]=c,o=!!(o.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||QI(o.nodeValue,h)),o||Ed(c)}else o=gx(o).createTextNode(m),o[li]=c,c.stateNode=o}return lr(c),null;case 13:if(m=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(A=Ds(c),m!==null&&m.dehydrated!==null){if(o===null){if(!A)throw Error(n(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[li]=c}else Da(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;lr(c),A=!1}else A=M2(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(Ld(c),c):(Ld(c),null)}if(Ld(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=m!==null,o=o!==null&&o.memoizedState!==null,h){m=c.child,A=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(A=m.alternate.memoizedState.cachePool.pool);var N=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(N=m.memoizedState.cachePool.pool),N!==A&&(m.flags|=2048)}return h!==o&&h&&(c.child.flags|=8192),ix(c,c.updateQueue),lr(c),null;case 4:return Me(),o===null&&xS(c.stateNode.containerInfo),lr(c),null;case 10:return Il(c.type),lr(c),null;case 19:if(q(ls),A=c.memoizedState,A===null)return lr(c),null;if(m=(c.flags&128)!==0,N=A.rendering,N===null)if(m)Zv(A,!1);else{if(_r!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(N=J2(o),N!==null){for(c.flags|=128,Zv(A,!1),o=N.updateQueue,c.updateQueue=o,ix(c,o),c.subtreeFlags=0,o=h,h=c.child;h!==null;)Up(h,o),h=h.sibling;return ee(ls,ls.current&1|2),c.child}o=o.sibling}A.tail!==null&&ct()>ax&&(c.flags|=128,m=!0,Zv(A,!1),c.lanes=4194304)}else{if(!m)if(o=J2(N),o!==null){if(c.flags|=128,m=!0,o=o.updateQueue,c.updateQueue=o,ix(c,o),Zv(A,!0),A.tail===null&&A.tailMode==="hidden"&&!N.alternate&&!Qn)return lr(c),null}else 2*ct()-A.renderingStartTime>ax&&h!==536870912&&(c.flags|=128,m=!0,Zv(A,!1),c.lanes=4194304);A.isBackwards?(N.sibling=c.child,c.child=N):(o=A.last,o!==null?o.sibling=N:c.child=N,A.last=N)}return A.tail!==null?(c=A.tail,A.rendering=c,A.tail=c.sibling,A.renderingStartTime=ct(),c.sibling=null,o=ls.current,ee(ls,m?o&1|2:o&1),c):(lr(c),null);case 22:case 23:return Ld(c),dn(),m=c.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(h&536870912)!==0&&(c.flags&128)===0&&(lr(c),c.subtreeFlags&6&&(c.flags|=8192)):lr(c),h=c.updateQueue,h!==null&&ix(c,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==h&&(c.flags|=2048),o!==null&&q(S),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),Il(Rr),lr(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function a7(o,c){switch(qp(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Il(Rr),Me(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return He(c),null;case 13:if(Ld(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Da()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return q(ls),null;case 4:return Me(),null;case 10:return Il(c.type),null;case 22:case 23:return Ld(c),dn(),o!==null&&q(S),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Il(Rr),null;case 25:return null;default:return null}}function rI(o,c){switch(qp(c),c.tag){case 3:Il(Rr),Me();break;case 26:case 27:case 5:He(c);break;case 4:Me();break;case 13:Ld(c);break;case 19:q(ls);break;case 10:Il(c.type);break;case 22:case 23:Ld(c),dn(),o!==null&&q(S);break;case 24:Il(Rr)}}function e1(o,c){try{var h=c.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var A=m.next;h=A;do{if((h.tag&o)===o){m=void 0;var N=h.create,K=h.inst;m=N(),K.destroy=m}h=h.next}while(h!==A)}}catch(le){Mi(c,c.return,le)}}function of(o,c,h){try{var m=c.updateQueue,A=m!==null?m.lastEffect:null;if(A!==null){var N=A.next;m=N;do{if((m.tag&o)===o){var K=m.inst,le=K.destroy;if(le!==void 0){K.destroy=void 0,A=c;var _e=h,Ue=le;try{Ue()}catch(We){Mi(A,_e,We)}}}m=m.next}while(m!==N)}}catch(We){Mi(c,c.return,We)}}function sI(o){var c=o.updateQueue;if(c!==null){var h=o.stateNode;try{ni(c,h)}catch(m){Mi(o,o.return,m)}}}function aI(o,c,h){h.props=nm(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(m){Mi(o,c,m)}}function t1(o,c){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof h=="function"?o.refCleanup=h(m):h.current=m}}catch(A){Mi(o,c,A)}}function wc(o,c){var h=o.ref,m=o.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(A){Mi(o,c,A)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(A){Mi(o,c,A)}else h.current=null}function oI(o){var c=o.type,h=o.memoizedProps,m=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(A){Mi(o,o.return,A)}}function X5(o,c,h){try{var m=o.stateNode;C7(m,o.type,h,c),m[ui]=c}catch(A){Mi(o,o.return,A)}}function lI(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&mf(o.type)||o.tag===4}function J5(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||lI(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&mf(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Z5(o,c,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(o),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=mx));else if(m!==4&&(m===27&&mf(o.type)&&(h=o.stateNode,c=null),o=o.child,o!==null))for(Z5(o,c,h),o=o.sibling;o!==null;)Z5(o,c,h),o=o.sibling}function rx(o,c,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(m!==4&&(m===27&&mf(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(rx(o,c,h),o=o.sibling;o!==null;)rx(o,c,h),o=o.sibling}function uI(o){var c=o.stateNode,h=o.memoizedProps;try{for(var m=o.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);Bs(c,m,h),c[li]=o,c[ui]=h}catch(N){Mi(o,o.return,N)}}var Dd=!1,Pr=!1,eS=!1,cI=typeof WeakSet=="function"?WeakSet:Set,ws=null;function o7(o,c){if(o=o.containerInfo,SS=wx,o=Ms(o),os(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var A=m.anchorOffset,N=m.focusNode;m=m.focusOffset;try{h.nodeType,N.nodeType}catch{h=null;break e}var K=0,le=-1,_e=-1,Ue=0,We=0,rt=o,ze=null;t:for(;;){for(var je;rt!==h||A!==0&&rt.nodeType!==3||(le=K+A),rt!==N||m!==0&&rt.nodeType!==3||(_e=K+m),rt.nodeType===3&&(K+=rt.nodeValue.length),(je=rt.firstChild)!==null;)ze=rt,rt=je;for(;;){if(rt===o)break t;if(ze===h&&++Ue===A&&(le=K),ze===N&&++We===m&&(_e=K),(je=rt.nextSibling)!==null)break;rt=ze,ze=rt.parentNode}rt=je}h=le===-1||_e===-1?null:{start:le,end:_e}}else h=null}h=h||{start:0,end:0}}else h=null;for(TS={focusedElem:o,selectionRange:h},wx=!1,ws=c;ws!==null;)if(c=ws,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,ws=o;else for(;ws!==null;){switch(c=ws,N=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&N!==null){o=void 0,h=c,A=N.memoizedProps,N=N.memoizedState,m=h.stateNode;try{var rn=nm(h.type,A,h.elementType===h.type);o=m.getSnapshotBeforeUpdate(rn,N),m.__reactInternalSnapshotBeforeUpdate=o}catch(Qt){Mi(h,h.return,Qt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,h=o.nodeType,h===9)NS(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":NS(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=c.sibling,o!==null){o.return=c.return,ws=o;break}ws=c.return}}function dI(o,c,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:lf(o,h),m&4&&e1(5,h);break;case 1:if(lf(o,h),m&4)if(o=h.stateNode,c===null)try{o.componentDidMount()}catch(K){Mi(h,h.return,K)}else{var A=nm(h.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(A,c,o.__reactInternalSnapshotBeforeUpdate)}catch(K){Mi(h,h.return,K)}}m&64&&sI(h),m&512&&t1(h,h.return);break;case 3:if(lf(o,h),m&64&&(o=h.updateQueue,o!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{ni(o,c)}catch(K){Mi(h,h.return,K)}}break;case 27:c===null&&m&4&&uI(h);case 26:case 5:lf(o,h),c===null&&m&4&&oI(h),m&512&&t1(h,h.return);break;case 12:lf(o,h);break;case 13:lf(o,h),m&4&&pI(o,h),m&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=g7.bind(null,h),M7(o,h))));break;case 22:if(m=h.memoizedState!==null||Dd,!m){c=c!==null&&c.memoizedState!==null||Pr,A=Dd;var N=Pr;Dd=m,(Pr=c)&&!N?uf(o,h,(h.subtreeFlags&8772)!==0):lf(o,h),Dd=A,Pr=N}break;case 30:break;default:lf(o,h)}}function hI(o){var c=o.alternate;c!==null&&(o.alternate=null,hI(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&jr(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var er=null,uo=!1;function Od(o,c,h){for(h=h.child;h!==null;)fI(o,c,h),h=h.sibling}function fI(o,c,h){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Dt,h)}catch{}switch(h.tag){case 26:Pr||wc(h,c),Od(o,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Pr||wc(h,c);var m=er,A=uo;mf(h.type)&&(er=h.stateNode,uo=!1),Od(o,c,h),c1(h.stateNode),er=m,uo=A;break;case 5:Pr||wc(h,c);case 6:if(m=er,A=uo,er=null,Od(o,c,h),er=m,uo=A,er!==null)if(uo)try{(er.nodeType===9?er.body:er.nodeName==="HTML"?er.ownerDocument.body:er).removeChild(h.stateNode)}catch(N){Mi(h,c,N)}else try{er.removeChild(h.stateNode)}catch(N){Mi(h,c,N)}break;case 18:er!==null&&(uo?(o=er,tR(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),v1(o)):tR(er,h.stateNode));break;case 4:m=er,A=uo,er=h.stateNode.containerInfo,uo=!0,Od(o,c,h),er=m,uo=A;break;case 0:case 11:case 14:case 15:Pr||of(2,h,c),Pr||of(4,h,c),Od(o,c,h);break;case 1:Pr||(wc(h,c),m=h.stateNode,typeof m.componentWillUnmount=="function"&&aI(h,c,m)),Od(o,c,h);break;case 21:Od(o,c,h);break;case 22:Pr=(m=Pr)||h.memoizedState!==null,Od(o,c,h),Pr=m;break;default:Od(o,c,h)}}function pI(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{v1(o)}catch(h){Mi(c,c.return,h)}}function l7(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new cI),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new cI),c;default:throw Error(n(435,o.tag))}}function tS(o,c){var h=l7(o);c.forEach(function(m){var A=y7.bind(null,o,m);h.has(m)||(h.add(m),m.then(A,A))})}function Uo(o,c){var h=c.deletions;if(h!==null)for(var m=0;m<h.length;m++){var A=h[m],N=o,K=c,le=K;e:for(;le!==null;){switch(le.tag){case 27:if(mf(le.type)){er=le.stateNode,uo=!1;break e}break;case 5:er=le.stateNode,uo=!1;break e;case 3:case 4:er=le.stateNode.containerInfo,uo=!0;break e}le=le.return}if(er===null)throw Error(n(160));fI(N,K,A),er=null,uo=!1,N=A.alternate,N!==null&&(N.return=null),A.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)mI(c,o),c=c.sibling}var vu=null;function mI(o,c){var h=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Uo(c,o),zo(o),m&4&&(of(3,o,o.return),e1(3,o),of(5,o,o.return));break;case 1:Uo(c,o),zo(o),m&512&&(Pr||h===null||wc(h,h.return)),m&64&&Dd&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var A=vu;if(Uo(c,o),zo(o),m&512&&(Pr||h===null||wc(h,h.return)),m&4){var N=h!==null?h.memoizedState:null;if(m=o.memoizedState,h===null)if(m===null)if(o.stateNode===null){e:{m=o.type,h=o.memoizedProps,A=A.ownerDocument||A;t:switch(m){case"title":N=A.getElementsByTagName("title")[0],(!N||N[Ls]||N[li]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=A.createElement(m),A.head.insertBefore(N,A.querySelector("head > title"))),Bs(N,m,h),N[li]=o,Zn(N),m=N;break e;case"link":var K=uR("link","href",A).get(m+(h.href||""));if(K){for(var le=0;le<K.length;le++)if(N=K[le],N.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&N.getAttribute("rel")===(h.rel==null?null:h.rel)&&N.getAttribute("title")===(h.title==null?null:h.title)&&N.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){K.splice(le,1);break t}}N=A.createElement(m),Bs(N,m,h),A.head.appendChild(N);break;case"meta":if(K=uR("meta","content",A).get(m+(h.content||""))){for(le=0;le<K.length;le++)if(N=K[le],N.getAttribute("content")===(h.content==null?null:""+h.content)&&N.getAttribute("name")===(h.name==null?null:h.name)&&N.getAttribute("property")===(h.property==null?null:h.property)&&N.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&N.getAttribute("charset")===(h.charSet==null?null:h.charSet)){K.splice(le,1);break t}}N=A.createElement(m),Bs(N,m,h),A.head.appendChild(N);break;default:throw Error(n(468,m))}N[li]=o,Zn(N),m=N}o.stateNode=m}else cR(A,o.type,o.stateNode);else o.stateNode=lR(A,m,o.memoizedProps);else N!==m?(N===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):N.count--,m===null?cR(A,o.type,o.stateNode):lR(A,m,o.memoizedProps)):m===null&&o.stateNode!==null&&X5(o,o.memoizedProps,h.memoizedProps)}break;case 27:Uo(c,o),zo(o),m&512&&(Pr||h===null||wc(h,h.return)),h!==null&&m&4&&X5(o,o.memoizedProps,h.memoizedProps);break;case 5:if(Uo(c,o),zo(o),m&512&&(Pr||h===null||wc(h,h.return)),o.flags&32){A=o.stateNode;try{ia(A,"")}catch(je){Mi(o,o.return,je)}}m&4&&o.stateNode!=null&&(A=o.memoizedProps,X5(o,A,h!==null?h.memoizedProps:A)),m&1024&&(eS=!0);break;case 6:if(Uo(c,o),zo(o),m&4){if(o.stateNode===null)throw Error(n(162));m=o.memoizedProps,h=o.stateNode;try{h.nodeValue=m}catch(je){Mi(o,o.return,je)}}break;case 3:if(bx=null,A=vu,vu=yx(c.containerInfo),Uo(c,o),vu=A,zo(o),m&4&&h!==null&&h.memoizedState.isDehydrated)try{v1(c.containerInfo)}catch(je){Mi(o,o.return,je)}eS&&(eS=!1,gI(o));break;case 4:m=vu,vu=yx(o.stateNode.containerInfo),Uo(c,o),zo(o),vu=m;break;case 12:Uo(c,o),zo(o);break;case 13:Uo(c,o),zo(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(oS=ct()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,tS(o,m)));break;case 22:A=o.memoizedState!==null;var _e=h!==null&&h.memoizedState!==null,Ue=Dd,We=Pr;if(Dd=Ue||A,Pr=We||_e,Uo(c,o),Pr=We,Dd=Ue,zo(o),m&8192)e:for(c=o.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(h===null||_e||Dd||Pr||im(o)),h=null,c=o;;){if(c.tag===5||c.tag===26){if(h===null){_e=h=c;try{if(N=_e.stateNode,A)K=N.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{le=_e.stateNode;var rt=_e.memoizedProps.style,ze=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;le.style.display=ze==null||typeof ze=="boolean"?"":(""+ze).trim()}}catch(je){Mi(_e,_e.return,je)}}}else if(c.tag===6){if(h===null){_e=c;try{_e.stateNode.nodeValue=A?"":_e.memoizedProps}catch(je){Mi(_e,_e.return,je)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=o.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,tS(o,h))));break;case 19:Uo(c,o),zo(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,tS(o,m)));break;case 30:break;case 21:break;default:Uo(c,o),zo(o)}}function zo(o){var c=o.flags;if(c&2){try{for(var h,m=o.return;m!==null;){if(lI(m)){h=m;break}m=m.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var A=h.stateNode,N=J5(o);rx(o,N,A);break;case 5:var K=h.stateNode;h.flags&32&&(ia(K,""),h.flags&=-33);var le=J5(o);rx(o,le,K);break;case 3:case 4:var _e=h.stateNode.containerInfo,Ue=J5(o);Z5(o,Ue,_e);break;default:throw Error(n(161))}}catch(We){Mi(o,o.return,We)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function gI(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;gI(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function lf(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)dI(o,c.alternate,c),c=c.sibling}function im(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:of(4,c,c.return),im(c);break;case 1:wc(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&aI(c,c.return,h),im(c);break;case 27:c1(c.stateNode);case 26:case 5:wc(c,c.return),im(c);break;case 22:c.memoizedState===null&&im(c);break;case 30:im(c);break;default:im(c)}o=o.sibling}}function uf(o,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,A=o,N=c,K=N.flags;switch(N.tag){case 0:case 11:case 15:uf(A,N,h),e1(4,N);break;case 1:if(uf(A,N,h),m=N,A=m.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ue){Mi(m,m.return,Ue)}if(m=N,A=m.updateQueue,A!==null){var le=m.stateNode;try{var _e=A.shared.hiddenCallbacks;if(_e!==null)for(A.shared.hiddenCallbacks=null,A=0;A<_e.length;A++)Hn(_e[A],le)}catch(Ue){Mi(m,m.return,Ue)}}h&&K&64&&sI(N),t1(N,N.return);break;case 27:uI(N);case 26:case 5:uf(A,N,h),h&&m===null&&K&4&&oI(N),t1(N,N.return);break;case 12:uf(A,N,h);break;case 13:uf(A,N,h),h&&K&4&&pI(A,N);break;case 22:N.memoizedState===null&&uf(A,N,h),t1(N,N.return);break;case 30:break;default:uf(A,N,h)}c=c.sibling}}function nS(o,c){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&$p(h))}function iS(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&$p(o))}function Ac(o,c,h,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)yI(o,c,h,m),c=c.sibling}function yI(o,c,h,m){var A=c.flags;switch(c.tag){case 0:case 11:case 15:Ac(o,c,h,m),A&2048&&e1(9,c);break;case 1:Ac(o,c,h,m);break;case 3:Ac(o,c,h,m),A&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&$p(o)));break;case 12:if(A&2048){Ac(o,c,h,m),o=c.stateNode;try{var N=c.memoizedProps,K=N.id,le=N.onPostCommit;typeof le=="function"&&le(K,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(_e){Mi(c,c.return,_e)}}else Ac(o,c,h,m);break;case 13:Ac(o,c,h,m);break;case 23:break;case 22:N=c.stateNode,K=c.alternate,c.memoizedState!==null?N._visibility&2?Ac(o,c,h,m):n1(o,c):N._visibility&2?Ac(o,c,h,m):(N._visibility|=2,a0(o,c,h,m,(c.subtreeFlags&10256)!==0)),A&2048&&nS(K,c);break;case 24:Ac(o,c,h,m),A&2048&&iS(c.alternate,c);break;default:Ac(o,c,h,m)}}function a0(o,c,h,m,A){for(A=A&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var N=o,K=c,le=h,_e=m,Ue=K.flags;switch(K.tag){case 0:case 11:case 15:a0(N,K,le,_e,A),e1(8,K);break;case 23:break;case 22:var We=K.stateNode;K.memoizedState!==null?We._visibility&2?a0(N,K,le,_e,A):n1(N,K):(We._visibility|=2,a0(N,K,le,_e,A)),A&&Ue&2048&&nS(K.alternate,K);break;case 24:a0(N,K,le,_e,A),A&&Ue&2048&&iS(K.alternate,K);break;default:a0(N,K,le,_e,A)}c=c.sibling}}function n1(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=o,m=c,A=m.flags;switch(m.tag){case 22:n1(h,m),A&2048&&nS(m.alternate,m);break;case 24:n1(h,m),A&2048&&iS(m.alternate,m);break;default:n1(h,m)}c=c.sibling}}var i1=8192;function o0(o){if(o.subtreeFlags&i1)for(o=o.child;o!==null;)vI(o),o=o.sibling}function vI(o){switch(o.tag){case 26:o0(o),o.flags&i1&&o.memoizedState!==null&&Y7(vu,o.memoizedState,o.memoizedProps);break;case 5:o0(o);break;case 3:case 4:var c=vu;vu=yx(o.stateNode.containerInfo),o0(o),vu=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=i1,i1=16777216,o0(o),i1=c):o0(o));break;default:o0(o)}}function bI(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function r1(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var m=c[h];ws=m,xI(m,o)}bI(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)_I(o),o=o.sibling}function _I(o){switch(o.tag){case 0:case 11:case 15:r1(o),o.flags&2048&&of(9,o,o.return);break;case 3:r1(o);break;case 12:r1(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,sx(o)):r1(o);break;default:r1(o)}}function sx(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var m=c[h];ws=m,xI(m,o)}bI(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:of(8,c,c.return),sx(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,sx(c));break;default:sx(c)}o=o.sibling}}function xI(o,c){for(;ws!==null;){var h=ws;switch(h.tag){case 0:case 11:case 15:of(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:$p(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,ws=m;else e:for(h=o;ws!==null;){m=ws;var A=m.sibling,N=m.return;if(hI(m),m===h){ws=null;break e}if(A!==null){A.return=N,ws=A;break e}ws=N}}}var u7={getCacheForType:function(o){var c=Ir(Rr),h=c.data.get(o);return h===void 0&&(h=o(),c.data.set(o,h)),h}},c7=typeof WeakMap=="function"?WeakMap:Map,vi=0,Bi=null,Dn=null,Yn=0,bi=0,jo=null,cf=!1,l0=!1,rS=!1,Fd=0,_r=0,df=0,rm=0,sS=0,Ml=0,u0=0,s1=null,co=null,aS=!1,oS=0,ax=1/0,ox=null,hf=null,Vs=0,ff=null,c0=null,d0=0,lS=0,uS=null,wI=null,a1=0,cS=null;function qo(){if((vi&2)!==0&&Yn!==0)return Yn&-Yn;if(Q.T!==null){var o=Cd;return o!==0?o:yS()}return Vt()}function AI(){Ml===0&&(Ml=(Yn&536870912)===0||Qn?ta():536870912);var o=Pl.current;return o!==null&&(o.flags|=32),Ml}function $o(o,c,h){(o===Bi&&(bi===2||bi===9)||o.cancelPendingCommit!==null)&&(h0(o,0),pf(o,Yn,Ml,!1)),hr(o,h),((vi&2)===0||o!==Bi)&&(o===Bi&&((vi&2)===0&&(rm|=h),_r===4&&pf(o,Yn,Ml,!1)),Sc(o))}function SI(o,c,h){if((vi&6)!==0)throw Error(n(327));var m=!h&&(c&124)===0&&(c&o.expiredLanes)===0||zr(o,c),A=m?f7(o,c):fS(o,c,!0),N=m;do{if(A===0){l0&&!m&&pf(o,c,0,!1);break}else{if(h=o.current.alternate,N&&!d7(h)){A=fS(o,c,!1),N=!1;continue}if(A===2){if(N=c,o.errorRecoveryDisabledLanes&N)var K=0;else K=o.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){c=K;e:{var le=o;A=s1;var _e=le.current.memoizedState.isDehydrated;if(_e&&(h0(le,K).flags|=256),K=fS(le,K,!1),K!==2){if(rS&&!_e){le.errorRecoveryDisabledLanes|=N,rm|=N,A=4;break e}N=co,co=A,N!==null&&(co===null?co=N:co.push.apply(co,N))}A=K}if(N=!1,A!==2)continue}}if(A===1){h0(o,0),pf(o,c,0,!0);break}e:{switch(m=o,N=A,N){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:pf(m,c,Ml,!cf);break e;case 2:co=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(A=oS+300-ct(),10<A)){if(pf(m,c,Ml,!cf),Wn(m,0,!0)!==0)break e;m.timeoutHandle=ZI(TI.bind(null,m,h,co,ox,aS,c,Ml,rm,u0,cf,N,2,-0,0),A);break e}TI(m,h,co,ox,aS,c,Ml,rm,u0,cf,N,0,-0,0)}}break}while(!0);Sc(o)}function TI(o,c,h,m,A,N,K,le,_e,Ue,We,rt,ze,je){if(o.timeoutHandle=-1,rt=c.subtreeFlags,(rt&8192||(rt&16785408)===16785408)&&(f1={stylesheets:null,count:0,unsuspend:G7},vI(c),rt=K7(),rt!==null)){o.cancelPendingCommit=rt(LI.bind(null,o,c,N,h,m,A,K,le,_e,We,1,ze,je)),pf(o,N,K,!Ue);return}LI(o,c,N,h,m,A,K,le,_e)}function d7(o){for(var c=o;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var A=h[m],N=A.getSnapshot;A=A.value;try{if(!$r(N(),A))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function pf(o,c,h,m){c&=~sS,c&=~rm,o.suspendedLanes|=c,o.pingedLanes&=~c,m&&(o.warmLanes|=c),m=o.expirationTimes;for(var A=c;0<A;){var N=31-Ct(A),K=1<<N;m[N]=-1,A&=~K}h!==0&&ut(o,h,c)}function lx(){return(vi&6)===0?(o1(0),!1):!0}function dS(){if(Dn!==null){if(bi===0)var o=Dn.return;else o=Dn,hu=Gr=null,Jg(o),r0=null,Xv=0,o=Dn;for(;o!==null;)rI(o.alternate,o),o=o.return;Dn=null}}function h0(o,c){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,k7(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),dS(),Bi=o,Dn=h=Cl(o.current,null),Yn=c,bi=0,jo=null,cf=!1,l0=zr(o,c),rS=!1,u0=Ml=sS=rm=df=_r=0,co=s1=null,aS=!1,(c&8)!==0&&(c|=c&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=c;0<m;){var A=31-Ct(m),N=1<<A;c|=o[A],m&=~N}return Fd=c,so(),h}function EI(o,c){$t=null,Q.H=W2,c===ie||c===ae?(c=Le(),bi=3):c===se?(c=Le(),bi=4):bi=c===$k?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,jo=c,Dn===null&&(_r=1,ex(o,Nn(c,o.current)))}function CI(){var o=Q.H;return Q.H=W2,o===null?W2:o}function NI(){var o=Q.A;return Q.A=u7,o}function hS(){_r=4,cf||(Yn&4194048)!==Yn&&Pl.current!==null||(l0=!0),(df&134217727)===0&&(rm&134217727)===0||Bi===null||pf(Bi,Yn,Ml,!1)}function fS(o,c,h){var m=vi;vi|=2;var A=CI(),N=NI();(Bi!==o||Yn!==c)&&(ox=null,h0(o,c)),c=!1;var K=_r;e:do try{if(bi!==0&&Dn!==null){var le=Dn,_e=jo;switch(bi){case 8:dS(),K=6;break e;case 3:case 2:case 9:case 6:Pl.current===null&&(c=!0);var Ue=bi;if(bi=0,jo=null,f0(o,le,_e,Ue),h&&l0){K=0;break e}break;default:Ue=bi,bi=0,jo=null,f0(o,le,_e,Ue)}}h7(),K=_r;break}catch(We){EI(o,We)}while(!0);return c&&o.shellSuspendCounter++,hu=Gr=null,vi=m,Q.H=A,Q.A=N,Dn===null&&(Bi=null,Yn=0,so()),K}function h7(){for(;Dn!==null;)kI(Dn)}function f7(o,c){var h=vi;vi|=2;var m=CI(),A=NI();Bi!==o||Yn!==c?(ox=null,ax=ct()+500,h0(o,c)):l0=zr(o,c);e:do try{if(bi!==0&&Dn!==null){c=Dn;var N=jo;t:switch(bi){case 1:bi=0,jo=null,f0(o,c,N,1);break;case 2:case 9:if(pe(N)){bi=0,jo=null,II(c);break}c=function(){bi!==2&&bi!==9||Bi!==o||(bi=7),Sc(o)},N.then(c,c);break e;case 3:bi=7;break e;case 4:bi=5;break e;case 7:pe(N)?(bi=0,jo=null,II(c)):(bi=0,jo=null,f0(o,c,N,7));break;case 5:var K=null;switch(Dn.tag){case 26:K=Dn.memoizedState;case 5:case 27:var le=Dn;if(!K||dR(K)){bi=0,jo=null;var _e=le.sibling;if(_e!==null)Dn=_e;else{var Ue=le.return;Ue!==null?(Dn=Ue,ux(Ue)):Dn=null}break t}}bi=0,jo=null,f0(o,c,N,5);break;case 6:bi=0,jo=null,f0(o,c,N,6);break;case 8:dS(),_r=6;break e;default:throw Error(n(462))}}p7();break}catch(We){EI(o,We)}while(!0);return hu=Gr=null,Q.H=m,Q.A=A,vi=h,Dn!==null?0:(Bi=null,Yn=0,so(),_r)}function p7(){for(;Dn!==null&&!Ve();)kI(Dn)}function kI(o){var c=nI(o.alternate,o,Fd);o.memoizedProps=o.pendingProps,c===null?ux(o):Dn=c}function II(o){var c=o,h=c.alternate;switch(c.tag){case 15:case 0:c=Qk(h,c,c.pendingProps,c.type,void 0,Yn);break;case 11:c=Qk(h,c,c.pendingProps,c.type.render,c.ref,Yn);break;case 5:Jg(c);default:rI(h,c),c=Dn=Up(c,Fd),c=nI(h,c,Fd)}o.memoizedProps=o.pendingProps,c===null?ux(o):Dn=c}function f0(o,c,h,m){hu=Gr=null,Jg(c),r0=null,Xv=0;var A=c.return;try{if(i7(o,A,c,h,Yn)){_r=1,ex(o,Nn(h,o.current)),Dn=null;return}}catch(N){if(A!==null)throw Dn=A,N;_r=1,ex(o,Nn(h,o.current)),Dn=null;return}c.flags&32768?(Qn||m===1?o=!0:l0||(Yn&536870912)!==0?o=!1:(cf=o=!0,(m===2||m===9||m===3||m===6)&&(m=Pl.current,m!==null&&m.tag===13&&(m.flags|=16384))),RI(c,o)):ux(c)}function ux(o){var c=o;do{if((c.flags&32768)!==0){RI(c,cf);return}o=c.return;var h=s7(c.alternate,c,Fd);if(h!==null){Dn=h;return}if(c=c.sibling,c!==null){Dn=c;return}Dn=c=o}while(c!==null);_r===0&&(_r=5)}function RI(o,c){do{var h=a7(o.alternate,o);if(h!==null){h.flags&=32767,Dn=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(o=o.sibling,o!==null)){Dn=o;return}Dn=o=h}while(o!==null);_r=6,Dn=null}function LI(o,c,h,m,A,N,K,le,_e){o.cancelPendingCommit=null;do cx();while(Vs!==0);if((vi&6)!==0)throw Error(n(327));if(c!==null){if(c===o.current)throw Error(n(177));if(N=c.lanes|c.childLanes,N|=sr,hi(o,h,N,K,le,_e),o===Bi&&(Dn=Bi=null,Yn=0),c0=c,ff=o,d0=h,lS=N,uS=A,wI=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,v7(gt,function(){return FI(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=Q.T,Q.T=null,A=ce.p,ce.p=2,K=vi,vi|=4;try{o7(o,c,h)}finally{vi=K,ce.p=A,Q.T=m}}Vs=1,PI(),MI(),DI()}}function PI(){if(Vs===1){Vs=0;var o=ff,c=c0,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=Q.T,Q.T=null;var m=ce.p;ce.p=2;var A=vi;vi|=4;try{mI(c,o);var N=TS,K=Ms(o.containerInfo),le=N.focusedElem,_e=N.selectionRange;if(K!==le&&le&&le.ownerDocument&&sc(le.ownerDocument.documentElement,le)){if(_e!==null&&os(le)){var Ue=_e.start,We=_e.end;if(We===void 0&&(We=Ue),"selectionStart"in le)le.selectionStart=Ue,le.selectionEnd=Math.min(We,le.value.length);else{var rt=le.ownerDocument||document,ze=rt&&rt.defaultView||window;if(ze.getSelection){var je=ze.getSelection(),rn=le.textContent.length,Qt=Math.min(_e.start,rn),Ci=_e.end===void 0?Qt:Math.min(_e.end,rn);!je.extend&&Qt>Ci&&(K=Ci,Ci=Qt,Qt=K);var Pe=ru(le,Qt),Ce=ru(le,Ci);if(Pe&&Ce&&(je.rangeCount!==1||je.anchorNode!==Pe.node||je.anchorOffset!==Pe.offset||je.focusNode!==Ce.node||je.focusOffset!==Ce.offset)){var Oe=rt.createRange();Oe.setStart(Pe.node,Pe.offset),je.removeAllRanges(),Qt>Ci?(je.addRange(Oe),je.extend(Ce.node,Ce.offset)):(Oe.setEnd(Ce.node,Ce.offset),je.addRange(Oe))}}}}for(rt=[],je=le;je=je.parentNode;)je.nodeType===1&&rt.push({element:je,left:je.scrollLeft,top:je.scrollTop});for(typeof le.focus=="function"&&le.focus(),le=0;le<rt.length;le++){var Je=rt[le];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}wx=!!SS,TS=SS=null}finally{vi=A,ce.p=m,Q.T=h}}o.current=c,Vs=2}}function MI(){if(Vs===2){Vs=0;var o=ff,c=c0,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=Q.T,Q.T=null;var m=ce.p;ce.p=2;var A=vi;vi|=4;try{dI(o,c.alternate,c)}finally{vi=A,ce.p=m,Q.T=h}}Vs=3}}function DI(){if(Vs===4||Vs===3){Vs=0,ve();var o=ff,c=c0,h=d0,m=wI;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Vs=5:(Vs=0,c0=ff=null,OI(o,o.pendingLanes));var A=o.pendingLanes;if(A===0&&(hf=null),Fn(h),c=c.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Dt,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=Q.T,A=ce.p,ce.p=2,Q.T=null;try{for(var N=o.onRecoverableError,K=0;K<m.length;K++){var le=m[K];N(le.value,{componentStack:le.stack})}}finally{Q.T=c,ce.p=A}}(d0&3)!==0&&cx(),Sc(o),A=o.pendingLanes,(h&4194090)!==0&&(A&42)!==0?o===cS?a1++:(a1=0,cS=o):a1=0,o1(0)}}function OI(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,$p(c)))}function cx(o){return PI(),MI(),DI(),FI()}function FI(){if(Vs!==5)return!1;var o=ff,c=lS;lS=0;var h=Fn(d0),m=Q.T,A=ce.p;try{ce.p=32>h?32:h,Q.T=null,h=uS,uS=null;var N=ff,K=d0;if(Vs=0,c0=ff=null,d0=0,(vi&6)!==0)throw Error(n(331));var le=vi;if(vi|=4,_I(N.current),yI(N,N.current,K,h),vi=le,o1(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Dt,N)}catch{}return!0}finally{ce.p=A,Q.T=m,OI(o,c)}}function VI(o,c,h){c=Nn(h,c),c=j5(o.stateNode,c,2),o=et(o,c,2),o!==null&&(hr(o,2),Sc(o))}function Mi(o,c,h){if(o.tag===3)VI(o,o,h);else for(;c!==null;){if(c.tag===3){VI(c,o,h);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(hf===null||!hf.has(m))){o=Nn(h,o),h=jk(2),m=et(c,h,2),m!==null&&(qk(h,m,c,o),hr(m,2),Sc(m));break}}c=c.return}}function pS(o,c,h){var m=o.pingCache;if(m===null){m=o.pingCache=new c7;var A=new Set;m.set(c,A)}else A=m.get(c),A===void 0&&(A=new Set,m.set(c,A));A.has(h)||(rS=!0,A.add(h),o=m7.bind(null,o,c,h),c.then(o,o))}function m7(o,c,h){var m=o.pingCache;m!==null&&m.delete(c),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Bi===o&&(Yn&h)===h&&(_r===4||_r===3&&(Yn&62914560)===Yn&&300>ct()-oS?(vi&2)===0&&h0(o,0):sS|=h,u0===Yn&&(u0=0)),Sc(o)}function BI(o,c){c===0&&(c=di()),o=au(o,c),o!==null&&(hr(o,c),Sc(o))}function g7(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),BI(o,h)}function y7(o,c){var h=0;switch(o.tag){case 13:var m=o.stateNode,A=o.memoizedState;A!==null&&(h=A.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(c),BI(o,h)}function v7(o,c){return Xe(o,c)}var dx=null,p0=null,mS=!1,hx=!1,gS=!1,sm=0;function Sc(o){o!==p0&&o.next===null&&(p0===null?dx=p0=o:p0=p0.next=o),hx=!0,mS||(mS=!0,_7())}function o1(o,c){if(!gS&&hx){gS=!0;do for(var h=!1,m=dx;m!==null;){if(o!==0){var A=m.pendingLanes;if(A===0)var N=0;else{var K=m.suspendedLanes,le=m.pingedLanes;N=(1<<31-Ct(42|o)+1)-1,N&=A&~(K&~le),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(h=!0,qI(m,N))}else N=Yn,N=Wn(m,m===Bi?N:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(N&3)===0||zr(m,N)||(h=!0,qI(m,N));m=m.next}while(h);gS=!1}}function b7(){UI()}function UI(){hx=mS=!1;var o=0;sm!==0&&(N7()&&(o=sm),sm=0);for(var c=ct(),h=null,m=dx;m!==null;){var A=m.next,N=zI(m,c);N===0?(m.next=null,h===null?dx=A:h.next=A,A===null&&(p0=h)):(h=m,(o!==0||(N&3)!==0)&&(hx=!0)),m=A}o1(o)}function zI(o,c){for(var h=o.suspendedLanes,m=o.pingedLanes,A=o.expirationTimes,N=o.pendingLanes&-62914561;0<N;){var K=31-Ct(N),le=1<<K,_e=A[K];_e===-1?((le&h)===0||(le&m)!==0)&&(A[K]=In(le,c)):_e<=c&&(o.expiredLanes|=le),N&=~le}if(c=Bi,h=Yn,h=Wn(o,o===c?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,h===0||o===c&&(bi===2||bi===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&pt(m),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||zr(o,h)){if(c=h&-h,c===o.callbackPriority)return c;switch(m!==null&&pt(m),Fn(h)){case 2:case 8:h=st;break;case 32:h=gt;break;case 268435456:h=It;break;default:h=gt}return m=jI.bind(null,o),h=Xe(h,m),o.callbackPriority=c,o.callbackNode=h,c}return m!==null&&m!==null&&pt(m),o.callbackPriority=2,o.callbackNode=null,2}function jI(o,c){if(Vs!==0&&Vs!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(cx()&&o.callbackNode!==h)return null;var m=Yn;return m=Wn(o,o===Bi?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(SI(o,m,c),zI(o,ct()),o.callbackNode!=null&&o.callbackNode===h?jI.bind(null,o):null)}function qI(o,c){if(cx())return null;SI(o,c,!0)}function _7(){I7(function(){(vi&6)!==0?Xe(it,b7):UI()})}function yS(){return sm===0&&(sm=ta()),sm}function $I(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Io(""+o)}function HI(o,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,o.id&&h.setAttribute("form",o.id),c.parentNode.insertBefore(h,c),o=new FormData(o),h.parentNode.removeChild(h),o}function x7(o,c,h,m,A){if(c==="submit"&&h&&h.stateNode===A){var N=$I((A[ui]||null).action),K=m.submitter;K&&(c=(c=K[ui]||null)?$I(c.formAction):K.getAttribute("formAction"),c!==null&&(N=c,K=null));var le=new vl("action","action",null,m,A);o.push({event:le,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(sm!==0){var _e=K?HI(A,K):new FormData(A);Ll(h,{pending:!0,data:_e,method:A.method,action:N},null,_e)}}else typeof N=="function"&&(le.preventDefault(),_e=K?HI(A,K):new FormData(A),Ll(h,{pending:!0,data:_e,method:A.method,action:N},N,_e))},currentTarget:A}]})}}for(var vS=0;vS<xd.length;vS++){var bS=xd[vS],w7=bS.toLowerCase(),A7=bS[0].toUpperCase()+bS.slice(1);Ji(w7,"on"+A7)}Ji(Yh,"onAnimationEnd"),Ji(oc,"onAnimationIteration"),Ji(lc,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(uc,"onTransitionRun"),Ji(_d,"onTransitionStart"),Ji(Kh,"onTransitionCancel"),Ji(cc,"onTransitionEnd"),na("onMouseEnter",["mouseout","mouseover"]),na("onMouseLeave",["mouseout","mouseover"]),na("onPointerEnter",["pointerout","pointerover"]),na("onPointerLeave",["pointerout","pointerover"]),ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var l1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(l1));function GI(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var m=o[h],A=m.event;m=m.listeners;e:{var N=void 0;if(c)for(var K=m.length-1;0<=K;K--){var le=m[K],_e=le.instance,Ue=le.currentTarget;if(le=le.listener,_e!==N&&A.isPropagationStopped())break e;N=le,A.currentTarget=Ue;try{N(A)}catch(We){Z2(We)}A.currentTarget=null,N=_e}else for(K=0;K<m.length;K++){if(le=m[K],_e=le.instance,Ue=le.currentTarget,le=le.listener,_e!==N&&A.isPropagationStopped())break e;N=le,A.currentTarget=Ue;try{N(A)}catch(We){Z2(We)}A.currentTarget=null,N=_e}}}}function On(o,c){var h=c[$i];h===void 0&&(h=c[$i]=new Set);var m=o+"__bubble";h.has(m)||(YI(c,o,2,!1),h.add(m))}function _S(o,c,h){var m=0;c&&(m|=4),YI(h,o,m,c)}var fx="_reactListening"+Math.random().toString(36).slice(2);function xS(o){if(!o[fx]){o[fx]=!0,So.forEach(function(h){h!=="selectionchange"&&(S7.has(h)||_S(h,!1,o),_S(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[fx]||(c[fx]=!0,_S("selectionchange",!1,c))}}function YI(o,c,h,m){switch(yR(c)){case 2:var A=X7;break;case 8:A=J7;break;default:A=DS}h=A.bind(null,c,h,o),A=void 0,!Ps||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),m?A!==void 0?o.addEventListener(c,h,{capture:!0,passive:A}):o.addEventListener(c,h,!0):A!==void 0?o.addEventListener(c,h,{passive:A}):o.addEventListener(c,h,!1)}function wS(o,c,h,m,A){var N=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var K=m.tag;if(K===3||K===4){var le=m.stateNode.containerInfo;if(le===A)break;if(K===4)for(K=m.return;K!==null;){var _e=K.tag;if((_e===3||_e===4)&&K.stateNode.containerInfo===A)return;K=K.return}for(;le!==null;){if(K=Tr(le),K===null)return;if(_e=K.tag,_e===5||_e===6||_e===26||_e===27){m=N=K;continue e}le=le.parentNode}}m=m.return}jh(function(){var Ue=N,We=gi(h),rt=[];e:{var ze=su.get(o);if(ze!==void 0){var je=vl,rn=o;switch(o){case"keypress":if(aa(h)===0)break e;case"keydown":case"keyup":je=Mo;break;case"focusin":rn="focus",je=_l;break;case"focusout":rn="blur",je=_l;break;case"beforeblur":case"afterblur":je=_l;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=gr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=bl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=tc;break;case Yh:case oc:case lc:je=Ju;break;case cc:je=Z;break;case"scroll":case"scrollend":je=pd;break;case"wheel":je=we;break;case"copy":case"cut":case"paste":je=Zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=iu;break;case"toggle":case"beforetoggle":je=Ge}var Qt=(c&4)!==0,Ci=!Qt&&(o==="scroll"||o==="scrollend"),Pe=Qt?ze!==null?ze+"Capture":null:ze;Qt=[];for(var Ce=Ue,Oe;Ce!==null;){var Je=Ce;if(Oe=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||Oe===null||Pe===null||(Je=gs(Ce,Pe),Je!=null&&Qt.push(u1(Ce,Je,Oe))),Ci)break;Ce=Ce.return}0<Qt.length&&(ze=new je(ze,rn,null,h,We),rt.push({event:ze,listeners:Qt}))}}if((c&7)===0){e:{if(ze=o==="mouseover"||o==="pointerover",je=o==="mouseout"||o==="pointerout",ze&&h!==Xa&&(rn=h.relatedTarget||h.fromElement)&&(Tr(rn)||rn[Pi]))break e;if((je||ze)&&(ze=We.window===We?We:(ze=We.ownerDocument)?ze.defaultView||ze.parentWindow:window,je?(rn=h.relatedTarget||h.toElement,je=Ue,rn=rn?Tr(rn):null,rn!==null&&(Ci=s(rn),Qt=rn.tag,rn!==Ci||Qt!==5&&Qt!==27&&Qt!==6)&&(rn=null)):(je=null,rn=Ue),je!==rn)){if(Qt=gr,Je="onMouseLeave",Pe="onMouseEnter",Ce="mouse",(o==="pointerout"||o==="pointerover")&&(Qt=iu,Je="onPointerLeave",Pe="onPointerEnter",Ce="pointer"),Ci=je==null?ze:Er(je),Oe=rn==null?ze:Er(rn),ze=new Qt(Je,Ce+"leave",je,h,We),ze.target=Ci,ze.relatedTarget=Oe,Je=null,Tr(We)===Ue&&(Qt=new Qt(Pe,Ce+"enter",rn,h,We),Qt.target=Oe,Qt.relatedTarget=Ci,Je=Qt),Ci=Je,je&&rn)t:{for(Qt=je,Pe=rn,Ce=0,Oe=Qt;Oe;Oe=m0(Oe))Ce++;for(Oe=0,Je=Pe;Je;Je=m0(Je))Oe++;for(;0<Ce-Oe;)Qt=m0(Qt),Ce--;for(;0<Oe-Ce;)Pe=m0(Pe),Oe--;for(;Ce--;){if(Qt===Pe||Pe!==null&&Qt===Pe.alternate)break t;Qt=m0(Qt),Pe=m0(Pe)}Qt=null}else Qt=null;je!==null&&KI(rt,ze,je,Qt,!1),rn!==null&&Ci!==null&&KI(rt,Ci,rn,Qt,!0)}}e:{if(ze=Ue?Er(Ue):window,je=ze.nodeName&&ze.nodeName.toLowerCase(),je==="select"||je==="input"&&ze.type==="file")var Lt=Hh;else if(fi(ze))if(gd)Lt=$g;else{Lt=Dv;var Pn=la}else je=ze.nodeName,!je||je.toLowerCase()!=="input"||ze.type!=="checkbox"&&ze.type!=="radio"?Ue&&hd(Ue.elementType)&&(Lt=Hh):Lt=Vp;if(Lt&&(Lt=Lt(o,Ue))){io(rt,Lt,h,We);break e}Pn&&Pn(o,ze,Ue),o==="focusout"&&Ue&&ze.type==="number"&&Ue.memoizedProps.value!=null&&ml(ze,"number",ze.value)}switch(Pn=Ue?Er(Ue):window,o){case"focusin":(fi(Pn)||Pn.contentEditable==="true")&&(ua=Pn,Do=Ue,Tl=null);break;case"focusout":Tl=Do=ua=null;break;case"mousedown":Oo=!0;break;case"contextmenu":case"mouseup":case"dragend":Oo=!1,Xi(rt,h,We);break;case"selectionchange":if(ac)break;case"keydown":case"keyup":Xi(rt,h,We)}var zt;if(bt)e:{switch(o){case"compositionstart":var Jt="onCompositionStart";break e;case"compositionend":Jt="onCompositionEnd";break e;case"compositionupdate":Jt="onCompositionUpdate";break e}Jt=void 0}else Wt?Be(o,h)&&(Jt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Jt="onCompositionStart");Jt&&($&&h.locale!=="ko"&&(Wt||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&Wt&&(zt=fd()):(sa=We,yl="value"in sa?sa.value:sa.textContent,Wt=!0)),Pn=px(Ue,Jt),0<Pn.length&&(Jt=new eu(Jt,o,null,h,We),rt.push({event:Jt,listeners:Pn}),zt?Jt.data=zt:(zt=ot(h),zt!==null&&(Jt.data=zt)))),(zt=M?Ln(o,h):cn(o,h))&&(Jt=px(Ue,"onBeforeInput"),0<Jt.length&&(Pn=new eu("onBeforeInput","beforeinput",null,h,We),rt.push({event:Pn,listeners:Jt}),Pn.data=zt)),x7(rt,o,Ue,h,We)}GI(rt,c)})}function u1(o,c,h){return{instance:o,listener:c,currentTarget:h}}function px(o,c){for(var h=c+"Capture",m=[];o!==null;){var A=o,N=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||N===null||(A=gs(o,h),A!=null&&m.unshift(u1(o,A,N)),A=gs(o,c),A!=null&&m.push(u1(o,A,N))),o.tag===3)return m;o=o.return}return[]}function m0(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function KI(o,c,h,m,A){for(var N=c._reactName,K=[];h!==null&&h!==m;){var le=h,_e=le.alternate,Ue=le.stateNode;if(le=le.tag,_e!==null&&_e===m)break;le!==5&&le!==26&&le!==27||Ue===null||(_e=Ue,A?(Ue=gs(h,N),Ue!=null&&K.unshift(u1(h,Ue,_e))):A||(Ue=gs(h,N),Ue!=null&&K.push(u1(h,Ue,_e)))),h=h.return}K.length!==0&&o.push({event:c,listeners:K})}var T7=/\r\n?/g,E7=/\u0000|\uFFFD/g;function WI(o){return(typeof o=="string"?o:""+o).replace(T7,`
`).replace(E7,"")}function QI(o,c){return c=WI(c),WI(o)===c}function mx(){}function Ei(o,c,h,m,A,N){switch(h){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||ia(o,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&ia(o,""+m);break;case"className":Ra(o,"class",m);break;case"tabIndex":Ra(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ra(o,h,m);break;case"style":dd(o,m,N);break;case"data":if(c!=="object"){Ra(o,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||h!=="href")){o.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=Io(""+m),o.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(h==="formAction"?(c!=="input"&&Ei(o,c,"name",A.name,A,null),Ei(o,c,"formEncType",A.formEncType,A,null),Ei(o,c,"formMethod",A.formMethod,A,null),Ei(o,c,"formTarget",A.formTarget,A,null)):(Ei(o,c,"encType",A.encType,A,null),Ei(o,c,"method",A.method,A,null),Ei(o,c,"target",A.target,A,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=Io(""+m),o.setAttribute(h,m);break;case"onClick":m!=null&&(o.onclick=mx);break;case"onScroll":m!=null&&On("scroll",o);break;case"onScrollEnd":m!=null&&On("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(h=m.__html,h!=null){if(A.children!=null)throw Error(n(60));o.innerHTML=h}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}h=Io(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""+m):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":m===!0?o.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,m):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(h,m):o.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(h):o.setAttribute(h,m);break;case"popover":On("beforetoggle",o),On("toggle",o),Ia(o,"popover",m);break;case"xlinkActuate":Cr(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Cr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Cr(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Cr(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Cr(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Cr(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Cr(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Cr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Cr(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Ia(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=ko.get(h)||h,Ia(o,h,m))}}function AS(o,c,h,m,A,N){switch(h){case"style":dd(o,m,N);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(h=m.__html,h!=null){if(A.children!=null)throw Error(n(60));o.innerHTML=h}}break;case"children":typeof m=="string"?ia(o,m):(typeof m=="number"||typeof m=="bigint")&&ia(o,""+m);break;case"onScroll":m!=null&&On("scroll",o);break;case"onScrollEnd":m!=null&&On("scrollend",o);break;case"onClick":m!=null&&(o.onclick=mx);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!To.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(A=h.endsWith("Capture"),c=h.slice(2,A?h.length-7:void 0),N=o[ui]||null,N=N!=null?N[h]:null,typeof N=="function"&&o.removeEventListener(c,N,A),typeof m=="function")){typeof N!="function"&&N!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(c,m,A);break e}h in o?o[h]=m:m===!0?o.setAttribute(h,""):Ia(o,h,m)}}}function Bs(o,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":On("error",o),On("load",o);var m=!1,A=!1,N;for(N in h)if(h.hasOwnProperty(N)){var K=h[N];if(K!=null)switch(N){case"src":m=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Ei(o,c,N,K,h,null)}}A&&Ei(o,c,"srcSet",h.srcSet,h,null),m&&Ei(o,c,"src",h.src,h,null);return;case"input":On("invalid",o);var le=N=K=A=null,_e=null,Ue=null;for(m in h)if(h.hasOwnProperty(m)){var We=h[m];if(We!=null)switch(m){case"name":A=We;break;case"type":K=We;break;case"checked":_e=We;break;case"defaultChecked":Ue=We;break;case"value":N=We;break;case"defaultValue":le=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(n(137,c));break;default:Ei(o,c,m,We,h,null)}}pl(o,N,le,_e,Ue,K,A,!1),fl(o);return;case"select":On("invalid",o),m=K=N=null;for(A in h)if(h.hasOwnProperty(A)&&(le=h[A],le!=null))switch(A){case"value":N=le;break;case"defaultValue":K=le;break;case"multiple":m=le;default:Ei(o,c,A,le,h,null)}c=N,h=K,o.multiple=!!m,c!=null?Qa(o,!!m,c,!1):h!=null&&Qa(o,!!m,h,!0);return;case"textarea":On("invalid",o),N=A=m=null;for(K in h)if(h.hasOwnProperty(K)&&(le=h[K],le!=null))switch(K){case"value":m=le;break;case"defaultValue":A=le;break;case"children":N=le;break;case"dangerouslySetInnerHTML":if(le!=null)throw Error(n(91));break;default:Ei(o,c,K,le,h,null)}gl(o,m,A,N),fl(o);return;case"option":for(_e in h)if(h.hasOwnProperty(_e)&&(m=h[_e],m!=null))switch(_e){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ei(o,c,_e,m,h,null)}return;case"dialog":On("beforetoggle",o),On("toggle",o),On("cancel",o),On("close",o);break;case"iframe":case"object":On("load",o);break;case"video":case"audio":for(m=0;m<l1.length;m++)On(l1[m],o);break;case"image":On("error",o),On("load",o);break;case"details":On("toggle",o);break;case"embed":case"source":case"link":On("error",o),On("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ue in h)if(h.hasOwnProperty(Ue)&&(m=h[Ue],m!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Ei(o,c,Ue,m,h,null)}return;default:if(hd(c)){for(We in h)h.hasOwnProperty(We)&&(m=h[We],m!==void 0&&AS(o,c,We,m,h,void 0));return}}for(le in h)h.hasOwnProperty(le)&&(m=h[le],m!=null&&Ei(o,c,le,m,h,null))}function C7(o,c,h,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,N=null,K=null,le=null,_e=null,Ue=null,We=null;for(je in h){var rt=h[je];if(h.hasOwnProperty(je)&&rt!=null)switch(je){case"checked":break;case"value":break;case"defaultValue":_e=rt;default:m.hasOwnProperty(je)||Ei(o,c,je,null,m,rt)}}for(var ze in m){var je=m[ze];if(rt=h[ze],m.hasOwnProperty(ze)&&(je!=null||rt!=null))switch(ze){case"type":N=je;break;case"name":A=je;break;case"checked":Ue=je;break;case"defaultChecked":We=je;break;case"value":K=je;break;case"defaultValue":le=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(n(137,c));break;default:je!==rt&&Ei(o,c,ze,je,m,rt)}}ss(o,K,le,_e,Ue,We,N,A);return;case"select":je=K=le=ze=null;for(N in h)if(_e=h[N],h.hasOwnProperty(N)&&_e!=null)switch(N){case"value":break;case"multiple":je=_e;default:m.hasOwnProperty(N)||Ei(o,c,N,null,m,_e)}for(A in m)if(N=m[A],_e=h[A],m.hasOwnProperty(A)&&(N!=null||_e!=null))switch(A){case"value":ze=N;break;case"defaultValue":le=N;break;case"multiple":K=N;default:N!==_e&&Ei(o,c,A,N,m,_e)}c=le,h=K,m=je,ze!=null?Qa(o,!!h,ze,!1):!!m!=!!h&&(c!=null?Qa(o,!!h,c,!0):Qa(o,!!h,h?[]:"",!1));return;case"textarea":je=ze=null;for(le in h)if(A=h[le],h.hasOwnProperty(le)&&A!=null&&!m.hasOwnProperty(le))switch(le){case"value":break;case"children":break;default:Ei(o,c,le,null,m,A)}for(K in m)if(A=m[K],N=h[K],m.hasOwnProperty(K)&&(A!=null||N!=null))switch(K){case"value":ze=A;break;case"defaultValue":je=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==N&&Ei(o,c,K,A,m,N)}ei(o,ze,je);return;case"option":for(var rn in h)if(ze=h[rn],h.hasOwnProperty(rn)&&ze!=null&&!m.hasOwnProperty(rn))switch(rn){case"selected":o.selected=!1;break;default:Ei(o,c,rn,null,m,ze)}for(_e in m)if(ze=m[_e],je=h[_e],m.hasOwnProperty(_e)&&ze!==je&&(ze!=null||je!=null))switch(_e){case"selected":o.selected=ze&&typeof ze!="function"&&typeof ze!="symbol";break;default:Ei(o,c,_e,ze,m,je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qt in h)ze=h[Qt],h.hasOwnProperty(Qt)&&ze!=null&&!m.hasOwnProperty(Qt)&&Ei(o,c,Qt,null,m,ze);for(Ue in m)if(ze=m[Ue],je=h[Ue],m.hasOwnProperty(Ue)&&ze!==je&&(ze!=null||je!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(n(137,c));break;default:Ei(o,c,Ue,ze,m,je)}return;default:if(hd(c)){for(var Ci in h)ze=h[Ci],h.hasOwnProperty(Ci)&&ze!==void 0&&!m.hasOwnProperty(Ci)&&AS(o,c,Ci,void 0,m,ze);for(We in m)ze=m[We],je=h[We],!m.hasOwnProperty(We)||ze===je||ze===void 0&&je===void 0||AS(o,c,We,ze,m,je);return}}for(var Pe in h)ze=h[Pe],h.hasOwnProperty(Pe)&&ze!=null&&!m.hasOwnProperty(Pe)&&Ei(o,c,Pe,null,m,ze);for(rt in m)ze=m[rt],je=h[rt],!m.hasOwnProperty(rt)||ze===je||ze==null&&je==null||Ei(o,c,rt,ze,m,je)}var SS=null,TS=null;function gx(o){return o.nodeType===9?o:o.ownerDocument}function XI(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function JI(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function ES(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var CS=null;function N7(){var o=window.event;return o&&o.type==="popstate"?o===CS?!1:(CS=o,!0):(CS=null,!1)}var ZI=typeof setTimeout=="function"?setTimeout:void 0,k7=typeof clearTimeout=="function"?clearTimeout:void 0,eR=typeof Promise=="function"?Promise:void 0,I7=typeof queueMicrotask=="function"?queueMicrotask:typeof eR<"u"?function(o){return eR.resolve(null).then(o).catch(R7)}:ZI;function R7(o){setTimeout(function(){throw o})}function mf(o){return o==="head"}function tR(o,c){var h=c,m=0,A=0;do{var N=h.nextSibling;if(o.removeChild(h),N&&N.nodeType===8)if(h=N.data,h==="/$"){if(0<m&&8>m){h=m;var K=o.ownerDocument;if(h&1&&c1(K.documentElement),h&2&&c1(K.body),h&4)for(h=K.head,c1(h),K=h.firstChild;K;){var le=K.nextSibling,_e=K.nodeName;K[Ls]||_e==="SCRIPT"||_e==="STYLE"||_e==="LINK"&&K.rel.toLowerCase()==="stylesheet"||h.removeChild(K),K=le}}if(A===0){o.removeChild(N),v1(c);return}A--}else h==="$"||h==="$?"||h==="$!"?A++:m=h.charCodeAt(0)-48;else m=0;h=N}while(h);v1(c)}function NS(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":NS(h),jr(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function L7(o,c,h,m){for(;o.nodeType===1;){var A=h;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[Ls])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(N=o.getAttribute("rel"),N==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(N!==A.rel||o.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||o.getAttribute("title")!==(A.title==null?null:A.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(N=o.getAttribute("src"),(N!==(A.src==null?null:A.src)||o.getAttribute("type")!==(A.type==null?null:A.type)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&N&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var N=A.name==null?null:""+A.name;if(A.type==="hidden"&&o.getAttribute("name")===N)return o}else return o;if(o=bu(o.nextSibling),o===null)break}return null}function P7(o,c,h){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=bu(o.nextSibling),o===null))return null;return o}function kS(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function M7(o,c){var h=o.ownerDocument;if(o.data!=="$?"||h.readyState==="complete")c();else{var m=function(){c(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function bu(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var IS=null;function nR(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}function iR(o,c,h){switch(c=gx(h),o){case"html":if(o=c.documentElement,!o)throw Error(n(452));return o;case"head":if(o=c.head,!o)throw Error(n(453));return o;case"body":if(o=c.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function c1(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);jr(o)}var Dl=new Map,rR=new Set;function yx(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Vd=ce.d;ce.d={f:D7,r:O7,D:F7,C:V7,L:B7,m:U7,X:j7,S:z7,M:q7};function D7(){var o=Vd.f(),c=lx();return o||c}function O7(o){var c=pr(o);c!==null&&c.tag===5&&c.type==="form"?em(c):Vd.r(o)}var g0=typeof document>"u"?null:document;function sR(o,c,h){var m=g0;if(m&&typeof c=="string"&&c){var A=Un(c);A='link[rel="'+o+'"][href="'+A+'"]',typeof h=="string"&&(A+='[crossorigin="'+h+'"]'),rR.has(A)||(rR.add(A),o={rel:o,crossOrigin:h,href:c},m.querySelector(A)===null&&(c=m.createElement("link"),Bs(c,"link",o),Zn(c),m.head.appendChild(c)))}}function F7(o){Vd.D(o),sR("dns-prefetch",o,null)}function V7(o,c){Vd.C(o,c),sR("preconnect",o,c)}function B7(o,c,h){Vd.L(o,c,h);var m=g0;if(m&&o&&c){var A='link[rel="preload"][as="'+Un(c)+'"]';c==="image"&&h&&h.imageSrcSet?(A+='[imagesrcset="'+Un(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(A+='[imagesizes="'+Un(h.imageSizes)+'"]')):A+='[href="'+Un(o)+'"]';var N=A;switch(c){case"style":N=y0(o);break;case"script":N=v0(o)}Dl.has(N)||(o=f({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:o,as:c},h),Dl.set(N,o),m.querySelector(A)!==null||c==="style"&&m.querySelector(d1(N))||c==="script"&&m.querySelector(h1(N))||(c=m.createElement("link"),Bs(c,"link",o),Zn(c),m.head.appendChild(c)))}}function U7(o,c){Vd.m(o,c);var h=g0;if(h&&o){var m=c&&typeof c.as=="string"?c.as:"script",A='link[rel="modulepreload"][as="'+Un(m)+'"][href="'+Un(o)+'"]',N=A;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=v0(o)}if(!Dl.has(N)&&(o=f({rel:"modulepreload",href:o},c),Dl.set(N,o),h.querySelector(A)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(h1(N)))return}m=h.createElement("link"),Bs(m,"link",o),Zn(m),h.head.appendChild(m)}}}function z7(o,c,h){Vd.S(o,c,h);var m=g0;if(m&&o){var A=Ai(m).hoistableStyles,N=y0(o);c=c||"default";var K=A.get(N);if(!K){var le={loading:0,preload:null};if(K=m.querySelector(d1(N)))le.loading=5;else{o=f({rel:"stylesheet",href:o,"data-precedence":c},h),(h=Dl.get(N))&&RS(o,h);var _e=K=m.createElement("link");Zn(_e),Bs(_e,"link",o),_e._p=new Promise(function(Ue,We){_e.onload=Ue,_e.onerror=We}),_e.addEventListener("load",function(){le.loading|=1}),_e.addEventListener("error",function(){le.loading|=2}),le.loading|=4,vx(K,c,m)}K={type:"stylesheet",instance:K,count:1,state:le},A.set(N,K)}}}function j7(o,c){Vd.X(o,c);var h=g0;if(h&&o){var m=Ai(h).hoistableScripts,A=v0(o),N=m.get(A);N||(N=h.querySelector(h1(A)),N||(o=f({src:o,async:!0},c),(c=Dl.get(A))&&LS(o,c),N=h.createElement("script"),Zn(N),Bs(N,"link",o),h.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},m.set(A,N))}}function q7(o,c){Vd.M(o,c);var h=g0;if(h&&o){var m=Ai(h).hoistableScripts,A=v0(o),N=m.get(A);N||(N=h.querySelector(h1(A)),N||(o=f({src:o,async:!0,type:"module"},c),(c=Dl.get(A))&&LS(o,c),N=h.createElement("script"),Zn(N),Bs(N,"link",o),h.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},m.set(A,N))}}function aR(o,c,h,m){var A=(A=ye.current)?yx(A):null;if(!A)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=y0(h.href),h=Ai(A).hoistableStyles,m=h.get(c),m||(m={type:"style",instance:null,count:0,state:null},h.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=y0(h.href);var N=Ai(A).hoistableStyles,K=N.get(o);if(K||(A=A.ownerDocument||A,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(o,K),(N=A.querySelector(d1(o)))&&!N._p&&(K.instance=N,K.state.loading=5),Dl.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Dl.set(o,h),N||$7(A,o,h,K.state))),c&&m===null)throw Error(n(528,""));return K}if(c&&m!==null)throw Error(n(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=v0(h),h=Ai(A).hoistableScripts,m=h.get(c),m||(m={type:"script",instance:null,count:0,state:null},h.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function y0(o){return'href="'+Un(o)+'"'}function d1(o){return'link[rel="stylesheet"]['+o+"]"}function oR(o){return f({},o,{"data-precedence":o.precedence,precedence:null})}function $7(o,c,h,m){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=o.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),Bs(c,"link",h),Zn(c),o.head.appendChild(c))}function v0(o){return'[src="'+Un(o)+'"]'}function h1(o){return"script[async]"+o}function lR(o,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var m=o.querySelector('style[data-href~="'+Un(h.href)+'"]');if(m)return c.instance=m,Zn(m),m;var A=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),Zn(m),Bs(m,"style",A),vx(m,h.precedence,o),c.instance=m;case"stylesheet":A=y0(h.href);var N=o.querySelector(d1(A));if(N)return c.state.loading|=4,c.instance=N,Zn(N),N;m=oR(h),(A=Dl.get(A))&&RS(m,A),N=(o.ownerDocument||o).createElement("link"),Zn(N);var K=N;return K._p=new Promise(function(le,_e){K.onload=le,K.onerror=_e}),Bs(N,"link",m),c.state.loading|=4,vx(N,h.precedence,o),c.instance=N;case"script":return N=v0(h.src),(A=o.querySelector(h1(N)))?(c.instance=A,Zn(A),A):(m=h,(A=Dl.get(N))&&(m=f({},h),LS(m,A)),o=o.ownerDocument||o,A=o.createElement("script"),Zn(A),Bs(A,"link",m),o.head.appendChild(A),c.instance=A);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,vx(m,h.precedence,o));return c.instance}function vx(o,c,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=m.length?m[m.length-1]:null,N=A,K=0;K<m.length;K++){var le=m[K];if(le.dataset.precedence===c)N=le;else if(N!==A)break}N?N.parentNode.insertBefore(o,N.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(o,c.firstChild))}function RS(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function LS(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var bx=null;function uR(o,c,h){if(bx===null){var m=new Map,A=bx=new Map;A.set(h,m)}else A=bx,m=A.get(h),m||(m=new Map,A.set(h,m));if(m.has(o))return m;for(m.set(o,null),h=h.getElementsByTagName(o),A=0;A<h.length;A++){var N=h[A];if(!(N[Ls]||N[li]||o==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var K=N.getAttribute(c)||"";K=o+K;var le=m.get(K);le?le.push(N):m.set(K,[N])}}return m}function cR(o,c,h){o=o.ownerDocument||o,o.head.insertBefore(h,c==="title"?o.querySelector("head > title"):null)}function H7(o,c,h){if(h===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function dR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var f1=null;function G7(){}function Y7(o,c,h){if(f1===null)throw Error(n(475));var m=f1;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var A=y0(h.href),N=o.querySelector(d1(A));if(N){o=N._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(m.count++,m=_x.bind(m),o.then(m,m)),c.state.loading|=4,c.instance=N,Zn(N);return}N=o.ownerDocument||o,h=oR(h),(A=Dl.get(A))&&RS(h,A),N=N.createElement("link"),Zn(N);var K=N;K._p=new Promise(function(le,_e){K.onload=le,K.onerror=_e}),Bs(N,"link",h),c.instance=N}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=_x.bind(m),o.addEventListener("load",c),o.addEventListener("error",c))}}function K7(){if(f1===null)throw Error(n(475));var o=f1;return o.stylesheets&&o.count===0&&PS(o,o.stylesheets),0<o.count?function(c){var h=setTimeout(function(){if(o.stylesheets&&PS(o,o.stylesheets),o.unsuspend){var m=o.unsuspend;o.unsuspend=null,m()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(h)}}:null}function _x(){if(this.count--,this.count===0){if(this.stylesheets)PS(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var xx=null;function PS(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,xx=new Map,c.forEach(W7,o),xx=null,_x.call(o))}function W7(o,c){if(!(c.state.loading&4)){var h=xx.get(o);if(h)var m=h.get(null);else{h=new Map,xx.set(o,h);for(var A=o.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<A.length;N++){var K=A[N];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(h.set(K.dataset.precedence,K),m=K)}m&&h.set(null,m)}A=c.instance,K=A.getAttribute("data-precedence"),N=h.get(K)||m,N===m&&h.set(null,A),h.set(K,A),this.count++,m=_x.bind(this),A.addEventListener("load",m),A.addEventListener("error",m),N?N.parentNode.insertBefore(A,N.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(A,o.firstChild)),c.state.loading|=4}}var p1={$$typeof:j,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function Q7(o,c,h,m,A,N,K,le){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.hiddenUpdates=qi(null),this.identifierPrefix=m,this.onUncaughtError=A,this.onCaughtError=N,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=le,this.incompleteTransitions=new Map}function hR(o,c,h,m,A,N,K,le,_e,Ue,We,rt){return o=new Q7(o,c,h,K,le,_e,Ue,rt),c=1,N===!0&&(c|=24),N=_s(3,null,null,c),o.current=N,N.stateNode=o,c=Fv(),c.refCount++,o.pooledCache=c,c.refCount++,N.memoizedState={element:m,isDehydrated:h,cache:c},Ee(N),o}function fR(o){return o?(o=Hr,o):Hr}function pR(o,c,h,m,A,N){A=fR(A),m.context===null?m.context=A:m.pendingContext=A,m=Ke(c),m.payload={element:h},N=N===void 0?null:N,N!==null&&(m.callback=N),h=et(o,m,c),h!==null&&($o(h,o,c),Qe(h,o,c))}function mR(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function MS(o,c){mR(o,c),(o=o.alternate)&&mR(o,c)}function gR(o){if(o.tag===13){var c=au(o,67108864);c!==null&&$o(c,o,67108864),MS(o,67108864)}}var wx=!0;function X7(o,c,h,m){var A=Q.T;Q.T=null;var N=ce.p;try{ce.p=2,DS(o,c,h,m)}finally{ce.p=N,Q.T=A}}function J7(o,c,h,m){var A=Q.T;Q.T=null;var N=ce.p;try{ce.p=8,DS(o,c,h,m)}finally{ce.p=N,Q.T=A}}function DS(o,c,h,m){if(wx){var A=OS(m);if(A===null)wS(o,c,m,Ax,h),vR(o,m);else if(eV(A,o,c,h,m))m.stopPropagation();else if(vR(o,m),c&4&&-1<Z7.indexOf(o)){for(;A!==null;){var N=pr(A);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var K=un(N.pendingLanes);if(K!==0){var le=N;for(le.pendingLanes|=2,le.entangledLanes|=2;K;){var _e=1<<31-Ct(K);le.entanglements[1]|=_e,K&=~_e}Sc(N),(vi&6)===0&&(ax=ct()+500,o1(0))}}break;case 13:le=au(N,2),le!==null&&$o(le,N,2),lx(),MS(N,2)}if(N=OS(m),N===null&&wS(o,c,m,Ax,h),N===A)break;A=N}A!==null&&m.stopPropagation()}else wS(o,c,m,null,h)}}function OS(o){return o=gi(o),FS(o)}var Ax=null;function FS(o){if(Ax=null,o=Tr(o),o!==null){var c=s(o);if(c===null)o=null;else{var h=c.tag;if(h===13){if(o=a(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return Ax=o,null}function yR(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case it:return 2;case st:return 8;case gt:case yt:return 32;case It:return 268435456;default:return 32}default:return 32}}var VS=!1,gf=null,yf=null,vf=null,m1=new Map,g1=new Map,bf=[],Z7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vR(o,c){switch(o){case"focusin":case"focusout":gf=null;break;case"dragenter":case"dragleave":yf=null;break;case"mouseover":case"mouseout":vf=null;break;case"pointerover":case"pointerout":m1.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":g1.delete(c.pointerId)}}function y1(o,c,h,m,A,N){return o===null||o.nativeEvent!==N?(o={blockedOn:c,domEventName:h,eventSystemFlags:m,nativeEvent:N,targetContainers:[A]},c!==null&&(c=pr(c),c!==null&&gR(c)),o):(o.eventSystemFlags|=m,c=o.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),o)}function eV(o,c,h,m,A){switch(c){case"focusin":return gf=y1(gf,o,c,h,m,A),!0;case"dragenter":return yf=y1(yf,o,c,h,m,A),!0;case"mouseover":return vf=y1(vf,o,c,h,m,A),!0;case"pointerover":var N=A.pointerId;return m1.set(N,y1(m1.get(N)||null,o,c,h,m,A)),!0;case"gotpointercapture":return N=A.pointerId,g1.set(N,y1(g1.get(N)||null,o,c,h,m,A)),!0}return!1}function bR(o){var c=Tr(o.target);if(c!==null){var h=s(c);if(h!==null){if(c=h.tag,c===13){if(c=a(h),c!==null){o.blockedOn=c,Li(o.priority,function(){if(h.tag===13){var m=qo();m=Yt(m);var A=au(h,m);A!==null&&$o(A,h,m),MS(h,m)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Sx(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=OS(o.nativeEvent);if(h===null){h=o.nativeEvent;var m=new h.constructor(h.type,h);Xa=m,h.target.dispatchEvent(m),Xa=null}else return c=pr(h),c!==null&&gR(c),o.blockedOn=h,!1;c.shift()}return!0}function _R(o,c,h){Sx(o)&&h.delete(c)}function tV(){VS=!1,gf!==null&&Sx(gf)&&(gf=null),yf!==null&&Sx(yf)&&(yf=null),vf!==null&&Sx(vf)&&(vf=null),m1.forEach(_R),g1.forEach(_R)}function Tx(o,c){o.blockedOn===c&&(o.blockedOn=null,VS||(VS=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,tV)))}var Ex=null;function xR(o){Ex!==o&&(Ex=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ex===o&&(Ex=null);for(var c=0;c<o.length;c+=3){var h=o[c],m=o[c+1],A=o[c+2];if(typeof m!="function"){if(FS(m||h)===null)continue;break}var N=pr(h);N!==null&&(o.splice(c,3),c-=3,Ll(N,{pending:!0,data:A,method:h.method,action:m},m,A))}}))}function v1(o){function c(_e){return Tx(_e,o)}gf!==null&&Tx(gf,o),yf!==null&&Tx(yf,o),vf!==null&&Tx(vf,o),m1.forEach(c),g1.forEach(c);for(var h=0;h<bf.length;h++){var m=bf[h];m.blockedOn===o&&(m.blockedOn=null)}for(;0<bf.length&&(h=bf[0],h.blockedOn===null);)bR(h),h.blockedOn===null&&bf.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var A=h[m],N=h[m+1],K=A[ui]||null;if(typeof N=="function")K||xR(h);else if(K){var le=null;if(N&&N.hasAttribute("formAction")){if(A=N,K=N[ui]||null)le=K.formAction;else if(FS(A)!==null)continue}else le=K.action;typeof le=="function"?h[m+1]=le:(h.splice(m,3),m-=3),xR(h)}}}function BS(o){this._internalRoot=o}Cx.prototype.render=BS.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));var h=c.current,m=qo();pR(h,m,o,c,null,null)},Cx.prototype.unmount=BS.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;pR(o.current,2,null,o,null,null),lx(),c[Pi]=null}};function Cx(o){this._internalRoot=o}Cx.prototype.unstable_scheduleHydration=function(o){if(o){var c=Vt();o={blockedOn:null,target:o,priority:c};for(var h=0;h<bf.length&&c!==0&&c<bf[h].priority;h++);bf.splice(h,0,o),h===0&&bR(o)}};var wR=e.version;if(wR!=="19.1.0")throw Error(n(527,wR,"19.1.0"));ce.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=u(c),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var nV={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nx.isDisabled&&Nx.supportsFiber)try{Dt=Nx.inject(nV),dt=Nx}catch{}}return _1.createRoot=function(o,c){if(!r(o))throw Error(n(299));var h=!1,m="",A=Vk,N=Bk,K=Uk,le=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(N=c.onCaughtError),c.onRecoverableError!==void 0&&(K=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(le=c.unstable_transitionCallbacks)),c=hR(o,1,!1,null,null,h,m,A,N,K,le,null),o[Pi]=c.current,xS(o),new BS(c)},_1.hydrateRoot=function(o,c,h){if(!r(o))throw Error(n(299));var m=!1,A="",N=Vk,K=Bk,le=Uk,_e=null,Ue=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(A=h.identifierPrefix),h.onUncaughtError!==void 0&&(N=h.onUncaughtError),h.onCaughtError!==void 0&&(K=h.onCaughtError),h.onRecoverableError!==void 0&&(le=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(_e=h.unstable_transitionCallbacks),h.formState!==void 0&&(Ue=h.formState)),c=hR(o,1,!0,c,h??null,m,A,N,K,le,_e,Ue),c.context=fR(null),h=c.current,m=qo(),m=Yt(m),A=Ke(m),A.callback=null,et(h,A,m),h=m,c.current.lanes=h,hr(c,h),Sc(c),o[Pi]=c.current,xS(o),new Cx(c)},_1.version="19.1.0",_1}var PR;function pV(){if(PR)return qS.exports;PR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),qS.exports=fV(),qS.exports}var mV=pV();const gV=BP(mV);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function UP(i){return typeof i>"u"||i===null}function yV(i){return typeof i=="object"&&i!==null}function vV(i){return Array.isArray(i)?i:UP(i)?[]:[i]}function bV(i,e){var t,n,r,s;if(e)for(s=Object.keys(e),t=0,n=s.length;t<n;t+=1)r=s[t],i[r]=e[r];return i}function _V(i,e){var t="",n;for(n=0;n<e;n+=1)t+=i;return t}function xV(i){return i===0&&Number.NEGATIVE_INFINITY===1/i}var wV=UP,AV=yV,SV=vV,TV=_V,EV=xV,CV=bV,fs={isNothing:wV,isObject:AV,toArray:SV,repeat:TV,isNegativeZero:EV,extend:CV};function zP(i,e){var t="",n=i.reason||"(unknown reason)";return i.mark?(i.mark.name&&(t+='in "'+i.mark.name+'" '),t+="("+(i.mark.line+1)+":"+(i.mark.column+1)+")",!e&&i.mark.snippet&&(t+=`

`+i.mark.snippet),n+" "+t):n}function pb(i,e){Error.call(this),this.name="YAMLException",this.reason=i,this.mark=e,this.message=zP(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}pb.prototype=Object.create(Error.prototype);pb.prototype.constructor=pb;pb.prototype.toString=function(e){return this.name+": "+zP(this,e)};var $a=pb;function YS(i,e,t,n,r){var s="",a="",l=Math.floor(r/2)-1;return n-e>l&&(s=" ... ",e=n-l+s.length),t-n>l&&(a=" ...",t=n+l-a.length),{str:s+i.slice(e,t).replace(/\t/g,"→")+a,pos:n-e+s.length}}function KS(i,e){return fs.repeat(" ",e-i.length)+i}function NV(i,e){if(e=Object.create(e||null),!i.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,n=[0],r=[],s,a=-1;s=t.exec(i.buffer);)r.push(s.index),n.push(s.index+s[0].length),i.position<=s.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",u,d,f=Math.min(i.line+e.linesAfter,r.length).toString().length,p=e.maxLength-(e.indent+f+3);for(u=1;u<=e.linesBefore&&!(a-u<0);u++)d=YS(i.buffer,n[a-u],r[a-u],i.position-(n[a]-n[a-u]),p),l=fs.repeat(" ",e.indent)+KS((i.line-u+1).toString(),f)+" | "+d.str+`
`+l;for(d=YS(i.buffer,n[a],r[a],i.position,p),l+=fs.repeat(" ",e.indent)+KS((i.line+1).toString(),f)+" | "+d.str+`
`,l+=fs.repeat("-",e.indent+f+3+d.pos)+`^
`,u=1;u<=e.linesAfter&&!(a+u>=r.length);u++)d=YS(i.buffer,n[a+u],r[a+u],i.position-(n[a]-n[a+u]),p),l+=fs.repeat(" ",e.indent)+KS((i.line+u+1).toString(),f)+" | "+d.str+`
`;return l.replace(/\n$/,"")}var kV=NV,IV=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],RV=["scalar","sequence","mapping"];function LV(i){var e={};return i!==null&&Object.keys(i).forEach(function(t){i[t].forEach(function(n){e[String(n)]=t})}),e}function PV(i,e){if(e=e||{},Object.keys(e).forEach(function(t){if(IV.indexOf(t)===-1)throw new $a('Unknown option "'+t+'" is met in definition of "'+i+'" YAML type.')}),this.options=e,this.tag=i,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=LV(e.styleAliases||null),RV.indexOf(this.kind)===-1)throw new $a('Unknown kind "'+this.kind+'" is specified for "'+i+'" YAML type.')}var Xs=PV;function MR(i,e){var t=[];return i[e].forEach(function(n){var r=t.length;t.forEach(function(s,a){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(r=a)}),t[r]=n}),t}function MV(){var i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function n(r){r.multi?(i.multi[r.kind].push(r),i.multi.fallback.push(r)):i[r.kind][r.tag]=i.fallback[r.tag]=r}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return i}function kT(i){return this.extend(i)}kT.prototype.extend=function(e){var t=[],n=[];if(e instanceof Xs)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new $a("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof Xs))throw new $a("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new $a("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new $a("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof Xs))throw new $a("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(kT.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=MR(r,"implicit"),r.compiledExplicit=MR(r,"explicit"),r.compiledTypeMap=MV(r.compiledImplicit,r.compiledExplicit),r};var jP=kT,qP=new Xs("tag:yaml.org,2002:str",{kind:"scalar",construct:function(i){return i!==null?i:""}}),$P=new Xs("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(i){return i!==null?i:[]}}),HP=new Xs("tag:yaml.org,2002:map",{kind:"mapping",construct:function(i){return i!==null?i:{}}}),GP=new jP({explicit:[qP,$P,HP]});function DV(i){if(i===null)return!0;var e=i.length;return e===1&&i==="~"||e===4&&(i==="null"||i==="Null"||i==="NULL")}function OV(){return null}function FV(i){return i===null}var YP=new Xs("tag:yaml.org,2002:null",{kind:"scalar",resolve:DV,construct:OV,predicate:FV,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function VV(i){if(i===null)return!1;var e=i.length;return e===4&&(i==="true"||i==="True"||i==="TRUE")||e===5&&(i==="false"||i==="False"||i==="FALSE")}function BV(i){return i==="true"||i==="True"||i==="TRUE"}function UV(i){return Object.prototype.toString.call(i)==="[object Boolean]"}var KP=new Xs("tag:yaml.org,2002:bool",{kind:"scalar",resolve:VV,construct:BV,predicate:UV,represent:{lowercase:function(i){return i?"true":"false"},uppercase:function(i){return i?"TRUE":"FALSE"},camelcase:function(i){return i?"True":"False"}},defaultStyle:"lowercase"});function zV(i){return 48<=i&&i<=57||65<=i&&i<=70||97<=i&&i<=102}function jV(i){return 48<=i&&i<=55}function qV(i){return 48<=i&&i<=57}function $V(i){if(i===null)return!1;var e=i.length,t=0,n=!1,r;if(!e)return!1;if(r=i[t],(r==="-"||r==="+")&&(r=i[++t]),r==="0"){if(t+1===e)return!0;if(r=i[++t],r==="b"){for(t++;t<e;t++)if(r=i[t],r!=="_"){if(r!=="0"&&r!=="1")return!1;n=!0}return n&&r!=="_"}if(r==="x"){for(t++;t<e;t++)if(r=i[t],r!=="_"){if(!zV(i.charCodeAt(t)))return!1;n=!0}return n&&r!=="_"}if(r==="o"){for(t++;t<e;t++)if(r=i[t],r!=="_"){if(!jV(i.charCodeAt(t)))return!1;n=!0}return n&&r!=="_"}}if(r==="_")return!1;for(;t<e;t++)if(r=i[t],r!=="_"){if(!qV(i.charCodeAt(t)))return!1;n=!0}return!(!n||r==="_")}function HV(i){var e=i,t=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(t=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}function GV(i){return Object.prototype.toString.call(i)==="[object Number]"&&i%1===0&&!fs.isNegativeZero(i)}var WP=new Xs("tag:yaml.org,2002:int",{kind:"scalar",resolve:$V,construct:HV,predicate:GV,represent:{binary:function(i){return i>=0?"0b"+i.toString(2):"-0b"+i.toString(2).slice(1)},octal:function(i){return i>=0?"0o"+i.toString(8):"-0o"+i.toString(8).slice(1)},decimal:function(i){return i.toString(10)},hexadecimal:function(i){return i>=0?"0x"+i.toString(16).toUpperCase():"-0x"+i.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YV=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function KV(i){return!(i===null||!YV.test(i)||i[i.length-1]==="_")}function WV(i){var e,t;return e=i.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}var QV=/^[-+]?[0-9]+e/;function XV(i,e){var t;if(isNaN(i))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===i)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===i)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(fs.isNegativeZero(i))return"-0.0";return t=i.toString(10),QV.test(t)?t.replace("e",".e"):t}function JV(i){return Object.prototype.toString.call(i)==="[object Number]"&&(i%1!==0||fs.isNegativeZero(i))}var QP=new Xs("tag:yaml.org,2002:float",{kind:"scalar",resolve:KV,construct:WV,predicate:JV,represent:XV,defaultStyle:"lowercase"}),XP=GP.extend({implicit:[YP,KP,WP,QP]}),JP=XP,ZP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),eM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ZV(i){return i===null?!1:ZP.exec(i)!==null||eM.exec(i)!==null}function e9(i){var e,t,n,r,s,a,l,u=0,d=null,f,p,y;if(e=ZP.exec(i),e===null&&(e=eM.exec(i)),e===null)throw new Error("Date resolve error");if(t=+e[1],n=+e[2]-1,r=+e[3],!e[4])return new Date(Date.UTC(t,n,r));if(s=+e[4],a=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(f=+e[10],p=+(e[11]||0),d=(f*60+p)*6e4,e[9]==="-"&&(d=-d)),y=new Date(Date.UTC(t,n,r,s,a,l,u)),d&&y.setTime(y.getTime()-d),y}function t9(i){return i.toISOString()}var tM=new Xs("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ZV,construct:e9,instanceOf:Date,represent:t9});function n9(i){return i==="<<"||i===null}var nM=new Xs("tag:yaml.org,2002:merge",{kind:"scalar",resolve:n9}),JC=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function i9(i){if(i===null)return!1;var e,t,n=0,r=i.length,s=JC;for(t=0;t<r;t++)if(e=s.indexOf(i.charAt(t)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function r9(i){var e,t,n=i.replace(/[\r\n=]/g,""),r=n.length,s=JC,a=0,l=[];for(e=0;e<r;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|s.indexOf(n.charAt(e));return t=r%4*6,t===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):t===18?(l.push(a>>10&255),l.push(a>>2&255)):t===12&&l.push(a>>4&255),new Uint8Array(l)}function s9(i){var e="",t=0,n,r,s=i.length,a=JC;for(n=0;n<s;n++)n%3===0&&n&&(e+=a[t>>18&63],e+=a[t>>12&63],e+=a[t>>6&63],e+=a[t&63]),t=(t<<8)+i[n];return r=s%3,r===0?(e+=a[t>>18&63],e+=a[t>>12&63],e+=a[t>>6&63],e+=a[t&63]):r===2?(e+=a[t>>10&63],e+=a[t>>4&63],e+=a[t<<2&63],e+=a[64]):r===1&&(e+=a[t>>2&63],e+=a[t<<4&63],e+=a[64],e+=a[64]),e}function a9(i){return Object.prototype.toString.call(i)==="[object Uint8Array]"}var iM=new Xs("tag:yaml.org,2002:binary",{kind:"scalar",resolve:i9,construct:r9,predicate:a9,represent:s9}),o9=Object.prototype.hasOwnProperty,l9=Object.prototype.toString;function u9(i){if(i===null)return!0;var e=[],t,n,r,s,a,l=i;for(t=0,n=l.length;t<n;t+=1){if(r=l[t],a=!1,l9.call(r)!=="[object Object]")return!1;for(s in r)if(o9.call(r,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function c9(i){return i!==null?i:[]}var rM=new Xs("tag:yaml.org,2002:omap",{kind:"sequence",resolve:u9,construct:c9}),d9=Object.prototype.toString;function h9(i){if(i===null)return!0;var e,t,n,r,s,a=i;for(s=new Array(a.length),e=0,t=a.length;e<t;e+=1){if(n=a[e],d9.call(n)!=="[object Object]"||(r=Object.keys(n),r.length!==1))return!1;s[e]=[r[0],n[r[0]]]}return!0}function f9(i){if(i===null)return[];var e,t,n,r,s,a=i;for(s=new Array(a.length),e=0,t=a.length;e<t;e+=1)n=a[e],r=Object.keys(n),s[e]=[r[0],n[r[0]]];return s}var sM=new Xs("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:h9,construct:f9}),p9=Object.prototype.hasOwnProperty;function m9(i){if(i===null)return!0;var e,t=i;for(e in t)if(p9.call(t,e)&&t[e]!==null)return!1;return!0}function g9(i){return i!==null?i:{}}var aM=new Xs("tag:yaml.org,2002:set",{kind:"mapping",resolve:m9,construct:g9}),ZC=JP.extend({implicit:[tM,nM],explicit:[iM,rM,sM,aM]}),wp=Object.prototype.hasOwnProperty,jw=1,oM=2,lM=3,qw=4,WS=1,y9=2,DR=3,v9=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,b9=/[\x85\u2028\u2029]/,_9=/[,\[\]\{\}]/,uM=/^(?:!|!!|![a-z\-]+!)$/i,cM=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function OR(i){return Object.prototype.toString.call(i)}function Wc(i){return i===10||i===13}function wg(i){return i===9||i===32}function xo(i){return i===9||i===32||i===10||i===13}function V0(i){return i===44||i===91||i===93||i===123||i===125}function x9(i){var e;return 48<=i&&i<=57?i-48:(e=i|32,97<=e&&e<=102?e-97+10:-1)}function w9(i){return i===120?2:i===117?4:i===85?8:0}function A9(i){return 48<=i&&i<=57?i-48:-1}function FR(i){return i===48?"\0":i===97?"\x07":i===98?"\b":i===116||i===9?"	":i===110?`
`:i===118?"\v":i===102?"\f":i===114?"\r":i===101?"\x1B":i===32?" ":i===34?'"':i===47?"/":i===92?"\\":i===78?"":i===95?" ":i===76?"\u2028":i===80?"\u2029":""}function S9(i){return i<=65535?String.fromCharCode(i):String.fromCharCode((i-65536>>10)+55296,(i-65536&1023)+56320)}var dM=new Array(256),hM=new Array(256);for(var b0=0;b0<256;b0++)dM[b0]=FR(b0)?1:0,hM[b0]=FR(b0);function T9(i,e){this.input=i,this.filename=e.filename||null,this.schema=e.schema||ZC,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=i.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function fM(i,e){var t={name:i.filename,buffer:i.input.slice(0,-1),position:i.position,line:i.line,column:i.position-i.lineStart};return t.snippet=kV(t),new $a(e,t)}function qt(i,e){throw fM(i,e)}function $w(i,e){i.onWarning&&i.onWarning.call(null,fM(i,e))}var VR={YAML:function(e,t,n){var r,s,a;e.version!==null&&qt(e,"duplication of %YAML directive"),n.length!==1&&qt(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),r===null&&qt(e,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),a=parseInt(r[2],10),s!==1&&qt(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&$w(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,s;n.length!==2&&qt(e,"TAG directive accepts exactly two arguments"),r=n[0],s=n[1],uM.test(r)||qt(e,"ill-formed tag handle (first argument) of the TAG directive"),wp.call(e.tagMap,r)&&qt(e,'there is a previously declared suffix for "'+r+'" tag handle'),cM.test(s)||qt(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{qt(e,"tag prefix is malformed: "+s)}e.tagMap[r]=s}};function gp(i,e,t,n){var r,s,a,l;if(e<t){if(l=i.input.slice(e,t),n)for(r=0,s=l.length;r<s;r+=1)a=l.charCodeAt(r),a===9||32<=a&&a<=1114111||qt(i,"expected valid JSON character");else v9.test(l)&&qt(i,"the stream contains non-printable characters");i.result+=l}}function BR(i,e,t,n){var r,s,a,l;for(fs.isObject(t)||qt(i,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(t),a=0,l=r.length;a<l;a+=1)s=r[a],wp.call(e,s)||(e[s]=t[s],n[s]=!0)}function B0(i,e,t,n,r,s,a,l,u){var d,f;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),d=0,f=r.length;d<f;d+=1)Array.isArray(r[d])&&qt(i,"nested arrays are not supported inside keys"),typeof r=="object"&&OR(r[d])==="[object Object]"&&(r[d]="[object Object]");if(typeof r=="object"&&OR(r)==="[object Object]"&&(r="[object Object]"),r=String(r),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(d=0,f=s.length;d<f;d+=1)BR(i,e,s[d],t);else BR(i,e,s,t);else!i.json&&!wp.call(t,r)&&wp.call(e,r)&&(i.line=a||i.line,i.lineStart=l||i.lineStart,i.position=u||i.position,qt(i,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[r]=s,delete t[r];return e}function eN(i){var e;e=i.input.charCodeAt(i.position),e===10?i.position++:e===13?(i.position++,i.input.charCodeAt(i.position)===10&&i.position++):qt(i,"a line break is expected"),i.line+=1,i.lineStart=i.position,i.firstTabInLine=-1}function Zr(i,e,t){for(var n=0,r=i.input.charCodeAt(i.position);r!==0;){for(;wg(r);)r===9&&i.firstTabInLine===-1&&(i.firstTabInLine=i.position),r=i.input.charCodeAt(++i.position);if(e&&r===35)do r=i.input.charCodeAt(++i.position);while(r!==10&&r!==13&&r!==0);if(Wc(r))for(eN(i),r=i.input.charCodeAt(i.position),n++,i.lineIndent=0;r===32;)i.lineIndent++,r=i.input.charCodeAt(++i.position);else break}return t!==-1&&n!==0&&i.lineIndent<t&&$w(i,"deficient indentation"),n}function KA(i){var e=i.position,t;return t=i.input.charCodeAt(e),!!((t===45||t===46)&&t===i.input.charCodeAt(e+1)&&t===i.input.charCodeAt(e+2)&&(e+=3,t=i.input.charCodeAt(e),t===0||xo(t)))}function tN(i,e){e===1?i.result+=" ":e>1&&(i.result+=fs.repeat(`
`,e-1))}function E9(i,e,t){var n,r,s,a,l,u,d,f,p=i.kind,y=i.result,v;if(v=i.input.charCodeAt(i.position),xo(v)||V0(v)||v===35||v===38||v===42||v===33||v===124||v===62||v===39||v===34||v===37||v===64||v===96||(v===63||v===45)&&(r=i.input.charCodeAt(i.position+1),xo(r)||t&&V0(r)))return!1;for(i.kind="scalar",i.result="",s=a=i.position,l=!1;v!==0;){if(v===58){if(r=i.input.charCodeAt(i.position+1),xo(r)||t&&V0(r))break}else if(v===35){if(n=i.input.charCodeAt(i.position-1),xo(n))break}else{if(i.position===i.lineStart&&KA(i)||t&&V0(v))break;if(Wc(v))if(u=i.line,d=i.lineStart,f=i.lineIndent,Zr(i,!1,-1),i.lineIndent>=e){l=!0,v=i.input.charCodeAt(i.position);continue}else{i.position=a,i.line=u,i.lineStart=d,i.lineIndent=f;break}}l&&(gp(i,s,a,!1),tN(i,i.line-u),s=a=i.position,l=!1),wg(v)||(a=i.position+1),v=i.input.charCodeAt(++i.position)}return gp(i,s,a,!1),i.result?!0:(i.kind=p,i.result=y,!1)}function C9(i,e){var t,n,r;if(t=i.input.charCodeAt(i.position),t!==39)return!1;for(i.kind="scalar",i.result="",i.position++,n=r=i.position;(t=i.input.charCodeAt(i.position))!==0;)if(t===39)if(gp(i,n,i.position,!0),t=i.input.charCodeAt(++i.position),t===39)n=i.position,i.position++,r=i.position;else return!0;else Wc(t)?(gp(i,n,r,!0),tN(i,Zr(i,!1,e)),n=r=i.position):i.position===i.lineStart&&KA(i)?qt(i,"unexpected end of the document within a single quoted scalar"):(i.position++,r=i.position);qt(i,"unexpected end of the stream within a single quoted scalar")}function N9(i,e){var t,n,r,s,a,l;if(l=i.input.charCodeAt(i.position),l!==34)return!1;for(i.kind="scalar",i.result="",i.position++,t=n=i.position;(l=i.input.charCodeAt(i.position))!==0;){if(l===34)return gp(i,t,i.position,!0),i.position++,!0;if(l===92){if(gp(i,t,i.position,!0),l=i.input.charCodeAt(++i.position),Wc(l))Zr(i,!1,e);else if(l<256&&dM[l])i.result+=hM[l],i.position++;else if((a=w9(l))>0){for(r=a,s=0;r>0;r--)l=i.input.charCodeAt(++i.position),(a=x9(l))>=0?s=(s<<4)+a:qt(i,"expected hexadecimal character");i.result+=S9(s),i.position++}else qt(i,"unknown escape sequence");t=n=i.position}else Wc(l)?(gp(i,t,n,!0),tN(i,Zr(i,!1,e)),t=n=i.position):i.position===i.lineStart&&KA(i)?qt(i,"unexpected end of the document within a double quoted scalar"):(i.position++,n=i.position)}qt(i,"unexpected end of the stream within a double quoted scalar")}function k9(i,e){var t=!0,n,r,s,a=i.tag,l,u=i.anchor,d,f,p,y,v,C=Object.create(null),E,R,I,D;if(D=i.input.charCodeAt(i.position),D===91)f=93,v=!1,l=[];else if(D===123)f=125,v=!0,l={};else return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=l),D=i.input.charCodeAt(++i.position);D!==0;){if(Zr(i,!0,e),D=i.input.charCodeAt(i.position),D===f)return i.position++,i.tag=a,i.anchor=u,i.kind=v?"mapping":"sequence",i.result=l,!0;t?D===44&&qt(i,"expected the node content, but found ','"):qt(i,"missed comma between flow collection entries"),R=E=I=null,p=y=!1,D===63&&(d=i.input.charCodeAt(i.position+1),xo(d)&&(p=y=!0,i.position++,Zr(i,!0,e))),n=i.line,r=i.lineStart,s=i.position,uv(i,e,jw,!1,!0),R=i.tag,E=i.result,Zr(i,!0,e),D=i.input.charCodeAt(i.position),(y||i.line===n)&&D===58&&(p=!0,D=i.input.charCodeAt(++i.position),Zr(i,!0,e),uv(i,e,jw,!1,!0),I=i.result),v?B0(i,l,C,R,E,I,n,r,s):p?l.push(B0(i,null,C,R,E,I,n,r,s)):l.push(E),Zr(i,!0,e),D=i.input.charCodeAt(i.position),D===44?(t=!0,D=i.input.charCodeAt(++i.position)):t=!1}qt(i,"unexpected end of the stream within a flow collection")}function I9(i,e){var t,n,r=WS,s=!1,a=!1,l=e,u=0,d=!1,f,p;if(p=i.input.charCodeAt(i.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(i.kind="scalar",i.result="";p!==0;)if(p=i.input.charCodeAt(++i.position),p===43||p===45)WS===r?r=p===43?DR:y9:qt(i,"repeat of a chomping mode identifier");else if((f=A9(p))>=0)f===0?qt(i,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?qt(i,"repeat of an indentation width identifier"):(l=e+f-1,a=!0);else break;if(wg(p)){do p=i.input.charCodeAt(++i.position);while(wg(p));if(p===35)do p=i.input.charCodeAt(++i.position);while(!Wc(p)&&p!==0)}for(;p!==0;){for(eN(i),i.lineIndent=0,p=i.input.charCodeAt(i.position);(!a||i.lineIndent<l)&&p===32;)i.lineIndent++,p=i.input.charCodeAt(++i.position);if(!a&&i.lineIndent>l&&(l=i.lineIndent),Wc(p)){u++;continue}if(i.lineIndent<l){r===DR?i.result+=fs.repeat(`
`,s?1+u:u):r===WS&&s&&(i.result+=`
`);break}for(n?wg(p)?(d=!0,i.result+=fs.repeat(`
`,s?1+u:u)):d?(d=!1,i.result+=fs.repeat(`
`,u+1)):u===0?s&&(i.result+=" "):i.result+=fs.repeat(`
`,u):i.result+=fs.repeat(`
`,s?1+u:u),s=!0,a=!0,u=0,t=i.position;!Wc(p)&&p!==0;)p=i.input.charCodeAt(++i.position);gp(i,t,i.position,!1)}return!0}function UR(i,e){var t,n=i.tag,r=i.anchor,s=[],a,l=!1,u;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=s),u=i.input.charCodeAt(i.position);u!==0&&(i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,qt(i,"tab characters must not be used in indentation")),!(u!==45||(a=i.input.charCodeAt(i.position+1),!xo(a))));){if(l=!0,i.position++,Zr(i,!0,-1)&&i.lineIndent<=e){s.push(null),u=i.input.charCodeAt(i.position);continue}if(t=i.line,uv(i,e,lM,!1,!0),s.push(i.result),Zr(i,!0,-1),u=i.input.charCodeAt(i.position),(i.line===t||i.lineIndent>e)&&u!==0)qt(i,"bad indentation of a sequence entry");else if(i.lineIndent<e)break}return l?(i.tag=n,i.anchor=r,i.kind="sequence",i.result=s,!0):!1}function R9(i,e,t){var n,r,s,a,l,u,d=i.tag,f=i.anchor,p={},y=Object.create(null),v=null,C=null,E=null,R=!1,I=!1,D;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=p),D=i.input.charCodeAt(i.position);D!==0;){if(!R&&i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,qt(i,"tab characters must not be used in indentation")),n=i.input.charCodeAt(i.position+1),s=i.line,(D===63||D===58)&&xo(n))D===63?(R&&(B0(i,p,y,v,C,null,a,l,u),v=C=E=null),I=!0,R=!0,r=!0):R?(R=!1,r=!0):qt(i,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),i.position+=1,D=n;else{if(a=i.line,l=i.lineStart,u=i.position,!uv(i,t,oM,!1,!0))break;if(i.line===s){for(D=i.input.charCodeAt(i.position);wg(D);)D=i.input.charCodeAt(++i.position);if(D===58)D=i.input.charCodeAt(++i.position),xo(D)||qt(i,"a whitespace character is expected after the key-value separator within a block mapping"),R&&(B0(i,p,y,v,C,null,a,l,u),v=C=E=null),I=!0,R=!1,r=!1,v=i.tag,C=i.result;else if(I)qt(i,"can not read an implicit mapping pair; a colon is missed");else return i.tag=d,i.anchor=f,!0}else if(I)qt(i,"can not read a block mapping entry; a multiline key may not be an implicit key");else return i.tag=d,i.anchor=f,!0}if((i.line===s||i.lineIndent>e)&&(R&&(a=i.line,l=i.lineStart,u=i.position),uv(i,e,qw,!0,r)&&(R?C=i.result:E=i.result),R||(B0(i,p,y,v,C,E,a,l,u),v=C=E=null),Zr(i,!0,-1),D=i.input.charCodeAt(i.position)),(i.line===s||i.lineIndent>e)&&D!==0)qt(i,"bad indentation of a mapping entry");else if(i.lineIndent<e)break}return R&&B0(i,p,y,v,C,null,a,l,u),I&&(i.tag=d,i.anchor=f,i.kind="mapping",i.result=p),I}function L9(i){var e,t=!1,n=!1,r,s,a;if(a=i.input.charCodeAt(i.position),a!==33)return!1;if(i.tag!==null&&qt(i,"duplication of a tag property"),a=i.input.charCodeAt(++i.position),a===60?(t=!0,a=i.input.charCodeAt(++i.position)):a===33?(n=!0,r="!!",a=i.input.charCodeAt(++i.position)):r="!",e=i.position,t){do a=i.input.charCodeAt(++i.position);while(a!==0&&a!==62);i.position<i.length?(s=i.input.slice(e,i.position),a=i.input.charCodeAt(++i.position)):qt(i,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!xo(a);)a===33&&(n?qt(i,"tag suffix cannot contain exclamation marks"):(r=i.input.slice(e-1,i.position+1),uM.test(r)||qt(i,"named tag handle cannot contain such characters"),n=!0,e=i.position+1)),a=i.input.charCodeAt(++i.position);s=i.input.slice(e,i.position),_9.test(s)&&qt(i,"tag suffix cannot contain flow indicator characters")}s&&!cM.test(s)&&qt(i,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{qt(i,"tag name is malformed: "+s)}return t?i.tag=s:wp.call(i.tagMap,r)?i.tag=i.tagMap[r]+s:r==="!"?i.tag="!"+s:r==="!!"?i.tag="tag:yaml.org,2002:"+s:qt(i,'undeclared tag handle "'+r+'"'),!0}function P9(i){var e,t;if(t=i.input.charCodeAt(i.position),t!==38)return!1;for(i.anchor!==null&&qt(i,"duplication of an anchor property"),t=i.input.charCodeAt(++i.position),e=i.position;t!==0&&!xo(t)&&!V0(t);)t=i.input.charCodeAt(++i.position);return i.position===e&&qt(i,"name of an anchor node must contain at least one character"),i.anchor=i.input.slice(e,i.position),!0}function M9(i){var e,t,n;if(n=i.input.charCodeAt(i.position),n!==42)return!1;for(n=i.input.charCodeAt(++i.position),e=i.position;n!==0&&!xo(n)&&!V0(n);)n=i.input.charCodeAt(++i.position);return i.position===e&&qt(i,"name of an alias node must contain at least one character"),t=i.input.slice(e,i.position),wp.call(i.anchorMap,t)||qt(i,'unidentified alias "'+t+'"'),i.result=i.anchorMap[t],Zr(i,!0,-1),!0}function uv(i,e,t,n,r){var s,a,l,u=1,d=!1,f=!1,p,y,v,C,E,R;if(i.listener!==null&&i.listener("open",i),i.tag=null,i.anchor=null,i.kind=null,i.result=null,s=a=l=qw===t||lM===t,n&&Zr(i,!0,-1)&&(d=!0,i.lineIndent>e?u=1:i.lineIndent===e?u=0:i.lineIndent<e&&(u=-1)),u===1)for(;L9(i)||P9(i);)Zr(i,!0,-1)?(d=!0,l=s,i.lineIndent>e?u=1:i.lineIndent===e?u=0:i.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=d||r),(u===1||qw===t)&&(jw===t||oM===t?E=e:E=e+1,R=i.position-i.lineStart,u===1?l&&(UR(i,R)||R9(i,R,E))||k9(i,E)?f=!0:(a&&I9(i,E)||C9(i,E)||N9(i,E)?f=!0:M9(i)?(f=!0,(i.tag!==null||i.anchor!==null)&&qt(i,"alias node should not have any properties")):E9(i,E,jw===t)&&(f=!0,i.tag===null&&(i.tag="?")),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):u===0&&(f=l&&UR(i,R))),i.tag===null)i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);else if(i.tag==="?"){for(i.result!==null&&i.kind!=="scalar"&&qt(i,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+i.kind+'"'),p=0,y=i.implicitTypes.length;p<y;p+=1)if(C=i.implicitTypes[p],C.resolve(i.result)){i.result=C.construct(i.result),i.tag=C.tag,i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);break}}else if(i.tag!=="!"){if(wp.call(i.typeMap[i.kind||"fallback"],i.tag))C=i.typeMap[i.kind||"fallback"][i.tag];else for(C=null,v=i.typeMap.multi[i.kind||"fallback"],p=0,y=v.length;p<y;p+=1)if(i.tag.slice(0,v[p].tag.length)===v[p].tag){C=v[p];break}C||qt(i,"unknown tag !<"+i.tag+">"),i.result!==null&&C.kind!==i.kind&&qt(i,"unacceptable node kind for !<"+i.tag+'> tag; it should be "'+C.kind+'", not "'+i.kind+'"'),C.resolve(i.result,i.tag)?(i.result=C.construct(i.result,i.tag),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):qt(i,"cannot resolve a node with !<"+i.tag+"> explicit tag")}return i.listener!==null&&i.listener("close",i),i.tag!==null||i.anchor!==null||f}function D9(i){var e=i.position,t,n,r,s=!1,a;for(i.version=null,i.checkLineBreaks=i.legacy,i.tagMap=Object.create(null),i.anchorMap=Object.create(null);(a=i.input.charCodeAt(i.position))!==0&&(Zr(i,!0,-1),a=i.input.charCodeAt(i.position),!(i.lineIndent>0||a!==37));){for(s=!0,a=i.input.charCodeAt(++i.position),t=i.position;a!==0&&!xo(a);)a=i.input.charCodeAt(++i.position);for(n=i.input.slice(t,i.position),r=[],n.length<1&&qt(i,"directive name must not be less than one character in length");a!==0;){for(;wg(a);)a=i.input.charCodeAt(++i.position);if(a===35){do a=i.input.charCodeAt(++i.position);while(a!==0&&!Wc(a));break}if(Wc(a))break;for(t=i.position;a!==0&&!xo(a);)a=i.input.charCodeAt(++i.position);r.push(i.input.slice(t,i.position))}a!==0&&eN(i),wp.call(VR,n)?VR[n](i,n,r):$w(i,'unknown document directive "'+n+'"')}if(Zr(i,!0,-1),i.lineIndent===0&&i.input.charCodeAt(i.position)===45&&i.input.charCodeAt(i.position+1)===45&&i.input.charCodeAt(i.position+2)===45?(i.position+=3,Zr(i,!0,-1)):s&&qt(i,"directives end mark is expected"),uv(i,i.lineIndent-1,qw,!1,!0),Zr(i,!0,-1),i.checkLineBreaks&&b9.test(i.input.slice(e,i.position))&&$w(i,"non-ASCII line breaks are interpreted as content"),i.documents.push(i.result),i.position===i.lineStart&&KA(i)){i.input.charCodeAt(i.position)===46&&(i.position+=3,Zr(i,!0,-1));return}if(i.position<i.length-1)qt(i,"end of the stream or a document separator is expected");else return}function pM(i,e){i=String(i),e=e||{},i.length!==0&&(i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i.charCodeAt(0)===65279&&(i=i.slice(1)));var t=new T9(i,e),n=i.indexOf("\0");for(n!==-1&&(t.position=n,qt(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)D9(t);return t.documents}function O9(i,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var n=pM(i,t);if(typeof e!="function")return n;for(var r=0,s=n.length;r<s;r+=1)e(n[r])}function F9(i,e){var t=pM(i,e);if(t.length!==0){if(t.length===1)return t[0];throw new $a("expected a single document in the stream, but found more")}}var V9=O9,B9=F9,mM={loadAll:V9,load:B9},gM=Object.prototype.toString,yM=Object.prototype.hasOwnProperty,nN=65279,U9=9,mb=10,z9=13,j9=32,q9=33,$9=34,IT=35,H9=37,G9=38,Y9=39,K9=42,vM=44,W9=45,Hw=58,Q9=61,X9=62,J9=63,Z9=64,bM=91,_M=93,eB=96,xM=123,tB=124,wM=125,ka={};ka[0]="\\0";ka[7]="\\a";ka[8]="\\b";ka[9]="\\t";ka[10]="\\n";ka[11]="\\v";ka[12]="\\f";ka[13]="\\r";ka[27]="\\e";ka[34]='\\"';ka[92]="\\\\";ka[133]="\\N";ka[160]="\\_";ka[8232]="\\L";ka[8233]="\\P";var nB=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],iB=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function rB(i,e){var t,n,r,s,a,l,u;if(e===null)return{};for(t={},n=Object.keys(e),r=0,s=n.length;r<s;r+=1)a=n[r],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),u=i.compiledTypeMap.fallback[a],u&&yM.call(u.styleAliases,l)&&(l=u.styleAliases[l]),t[a]=l;return t}function sB(i){var e,t,n;if(e=i.toString(16).toUpperCase(),i<=255)t="x",n=2;else if(i<=65535)t="u",n=4;else if(i<=4294967295)t="U",n=8;else throw new $a("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+fs.repeat("0",n-e.length)+e}var aB=1,gb=2;function oB(i){this.schema=i.schema||ZC,this.indent=Math.max(1,i.indent||2),this.noArrayIndent=i.noArrayIndent||!1,this.skipInvalid=i.skipInvalid||!1,this.flowLevel=fs.isNothing(i.flowLevel)?-1:i.flowLevel,this.styleMap=rB(this.schema,i.styles||null),this.sortKeys=i.sortKeys||!1,this.lineWidth=i.lineWidth||80,this.noRefs=i.noRefs||!1,this.noCompatMode=i.noCompatMode||!1,this.condenseFlow=i.condenseFlow||!1,this.quotingType=i.quotingType==='"'?gb:aB,this.forceQuotes=i.forceQuotes||!1,this.replacer=typeof i.replacer=="function"?i.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function zR(i,e){for(var t=fs.repeat(" ",e),n=0,r=-1,s="",a,l=i.length;n<l;)r=i.indexOf(`
`,n),r===-1?(a=i.slice(n),n=l):(a=i.slice(n,r+1),n=r+1),a.length&&a!==`
`&&(s+=t),s+=a;return s}function RT(i,e){return`
`+fs.repeat(" ",i.indent*e)}function lB(i,e){var t,n,r;for(t=0,n=i.implicitTypes.length;t<n;t+=1)if(r=i.implicitTypes[t],r.resolve(e))return!0;return!1}function Gw(i){return i===j9||i===U9}function yb(i){return 32<=i&&i<=126||161<=i&&i<=55295&&i!==8232&&i!==8233||57344<=i&&i<=65533&&i!==nN||65536<=i&&i<=1114111}function jR(i){return yb(i)&&i!==nN&&i!==z9&&i!==mb}function qR(i,e,t){var n=jR(i),r=n&&!Gw(i);return(t?n:n&&i!==vM&&i!==bM&&i!==_M&&i!==xM&&i!==wM)&&i!==IT&&!(e===Hw&&!r)||jR(e)&&!Gw(e)&&i===IT||e===Hw&&r}function uB(i){return yb(i)&&i!==nN&&!Gw(i)&&i!==W9&&i!==J9&&i!==Hw&&i!==vM&&i!==bM&&i!==_M&&i!==xM&&i!==wM&&i!==IT&&i!==G9&&i!==K9&&i!==q9&&i!==tB&&i!==Q9&&i!==X9&&i!==Y9&&i!==$9&&i!==H9&&i!==Z9&&i!==eB}function cB(i){return!Gw(i)&&i!==Hw}function L1(i,e){var t=i.charCodeAt(e),n;return t>=55296&&t<=56319&&e+1<i.length&&(n=i.charCodeAt(e+1),n>=56320&&n<=57343)?(t-55296)*1024+n-56320+65536:t}function AM(i){var e=/^\n* /;return e.test(i)}var SM=1,LT=2,TM=3,EM=4,A0=5;function dB(i,e,t,n,r,s,a,l){var u,d=0,f=null,p=!1,y=!1,v=n!==-1,C=-1,E=uB(L1(i,0))&&cB(L1(i,i.length-1));if(e||a)for(u=0;u<i.length;d>=65536?u+=2:u++){if(d=L1(i,u),!yb(d))return A0;E=E&&qR(d,f,l),f=d}else{for(u=0;u<i.length;d>=65536?u+=2:u++){if(d=L1(i,u),d===mb)p=!0,v&&(y=y||u-C-1>n&&i[C+1]!==" ",C=u);else if(!yb(d))return A0;E=E&&qR(d,f,l),f=d}y=y||v&&u-C-1>n&&i[C+1]!==" "}return!p&&!y?E&&!a&&!r(i)?SM:s===gb?A0:LT:t>9&&AM(i)?A0:a?s===gb?A0:LT:y?EM:TM}function hB(i,e,t,n,r){i.dump=function(){if(e.length===0)return i.quotingType===gb?'""':"''";if(!i.noCompatMode&&(nB.indexOf(e)!==-1||iB.test(e)))return i.quotingType===gb?'"'+e+'"':"'"+e+"'";var s=i.indent*Math.max(1,t),a=i.lineWidth===-1?-1:Math.max(Math.min(i.lineWidth,40),i.lineWidth-s),l=n||i.flowLevel>-1&&t>=i.flowLevel;function u(d){return lB(i,d)}switch(dB(e,l,i.indent,a,u,i.quotingType,i.forceQuotes&&!n,r)){case SM:return e;case LT:return"'"+e.replace(/'/g,"''")+"'";case TM:return"|"+$R(e,i.indent)+HR(zR(e,s));case EM:return">"+$R(e,i.indent)+HR(zR(fB(e,a),s));case A0:return'"'+pB(e)+'"';default:throw new $a("impossible error: invalid scalar style")}}()}function $R(i,e){var t=AM(i)?String(e):"",n=i[i.length-1]===`
`,r=n&&(i[i.length-2]===`
`||i===`
`),s=r?"+":n?"":"-";return t+s+`
`}function HR(i){return i[i.length-1]===`
`?i.slice(0,-1):i}function fB(i,e){for(var t=/(\n+)([^\n]*)/g,n=function(){var d=i.indexOf(`
`);return d=d!==-1?d:i.length,t.lastIndex=d,GR(i.slice(0,d),e)}(),r=i[0]===`
`||i[0]===" ",s,a;a=t.exec(i);){var l=a[1],u=a[2];s=u[0]===" ",n+=l+(!r&&!s&&u!==""?`
`:"")+GR(u,e),r=s}return n}function GR(i,e){if(i===""||i[0]===" ")return i;for(var t=/ [^ ]/g,n,r=0,s,a=0,l=0,u="";n=t.exec(i);)l=n.index,l-r>e&&(s=a>r?a:l,u+=`
`+i.slice(r,s),r=s+1),a=l;return u+=`
`,i.length-r>e&&a>r?u+=i.slice(r,a)+`
`+i.slice(a+1):u+=i.slice(r),u.slice(1)}function pB(i){for(var e="",t=0,n,r=0;r<i.length;t>=65536?r+=2:r++)t=L1(i,r),n=ka[t],!n&&yb(t)?(e+=i[r],t>=65536&&(e+=i[r+1])):e+=n||sB(t);return e}function mB(i,e,t){var n="",r=i.tag,s,a,l;for(s=0,a=t.length;s<a;s+=1)l=t[s],i.replacer&&(l=i.replacer.call(t,String(s),l)),(Nh(i,e,l,!1,!1)||typeof l>"u"&&Nh(i,e,null,!1,!1))&&(n!==""&&(n+=","+(i.condenseFlow?"":" ")),n+=i.dump);i.tag=r,i.dump="["+n+"]"}function YR(i,e,t,n){var r="",s=i.tag,a,l,u;for(a=0,l=t.length;a<l;a+=1)u=t[a],i.replacer&&(u=i.replacer.call(t,String(a),u)),(Nh(i,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&Nh(i,e+1,null,!0,!0,!1,!0))&&((!n||r!=="")&&(r+=RT(i,e)),i.dump&&mb===i.dump.charCodeAt(0)?r+="-":r+="- ",r+=i.dump);i.tag=s,i.dump=r||"[]"}function gB(i,e,t){var n="",r=i.tag,s=Object.keys(t),a,l,u,d,f;for(a=0,l=s.length;a<l;a+=1)f="",n!==""&&(f+=", "),i.condenseFlow&&(f+='"'),u=s[a],d=t[u],i.replacer&&(d=i.replacer.call(t,u,d)),Nh(i,e,u,!1,!1)&&(i.dump.length>1024&&(f+="? "),f+=i.dump+(i.condenseFlow?'"':"")+":"+(i.condenseFlow?"":" "),Nh(i,e,d,!1,!1)&&(f+=i.dump,n+=f));i.tag=r,i.dump="{"+n+"}"}function yB(i,e,t,n){var r="",s=i.tag,a=Object.keys(t),l,u,d,f,p,y;if(i.sortKeys===!0)a.sort();else if(typeof i.sortKeys=="function")a.sort(i.sortKeys);else if(i.sortKeys)throw new $a("sortKeys must be a boolean or a function");for(l=0,u=a.length;l<u;l+=1)y="",(!n||r!=="")&&(y+=RT(i,e)),d=a[l],f=t[d],i.replacer&&(f=i.replacer.call(t,d,f)),Nh(i,e+1,d,!0,!0,!0)&&(p=i.tag!==null&&i.tag!=="?"||i.dump&&i.dump.length>1024,p&&(i.dump&&mb===i.dump.charCodeAt(0)?y+="?":y+="? "),y+=i.dump,p&&(y+=RT(i,e)),Nh(i,e+1,f,!0,p)&&(i.dump&&mb===i.dump.charCodeAt(0)?y+=":":y+=": ",y+=i.dump,r+=y));i.tag=s,i.dump=r||"{}"}function KR(i,e,t){var n,r,s,a,l,u;for(r=t?i.explicitTypes:i.implicitTypes,s=0,a=r.length;s<a;s+=1)if(l=r[s],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(t?l.multi&&l.representName?i.tag=l.representName(e):i.tag=l.tag:i.tag="?",l.represent){if(u=i.styleMap[l.tag]||l.defaultStyle,gM.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(yM.call(l.represent,u))n=l.represent[u](e,u);else throw new $a("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');i.dump=n}return!0}return!1}function Nh(i,e,t,n,r,s,a){i.tag=null,i.dump=t,KR(i,t,!1)||KR(i,t,!0);var l=gM.call(i.dump),u=n,d;n&&(n=i.flowLevel<0||i.flowLevel>e);var f=l==="[object Object]"||l==="[object Array]",p,y;if(f&&(p=i.duplicates.indexOf(t),y=p!==-1),(i.tag!==null&&i.tag!=="?"||y||i.indent!==2&&e>0)&&(r=!1),y&&i.usedDuplicates[p])i.dump="*ref_"+p;else{if(f&&y&&!i.usedDuplicates[p]&&(i.usedDuplicates[p]=!0),l==="[object Object]")n&&Object.keys(i.dump).length!==0?(yB(i,e,i.dump,r),y&&(i.dump="&ref_"+p+i.dump)):(gB(i,e,i.dump),y&&(i.dump="&ref_"+p+" "+i.dump));else if(l==="[object Array]")n&&i.dump.length!==0?(i.noArrayIndent&&!a&&e>0?YR(i,e-1,i.dump,r):YR(i,e,i.dump,r),y&&(i.dump="&ref_"+p+i.dump)):(mB(i,e,i.dump),y&&(i.dump="&ref_"+p+" "+i.dump));else if(l==="[object String]")i.tag!=="?"&&hB(i,i.dump,e,s,u);else{if(l==="[object Undefined]")return!1;if(i.skipInvalid)return!1;throw new $a("unacceptable kind of an object to dump "+l)}i.tag!==null&&i.tag!=="?"&&(d=encodeURI(i.tag[0]==="!"?i.tag.slice(1):i.tag).replace(/!/g,"%21"),i.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",i.dump=d+" "+i.dump)}return!0}function vB(i,e){var t=[],n=[],r,s;for(PT(i,t,n),r=0,s=n.length;r<s;r+=1)e.duplicates.push(t[n[r]]);e.usedDuplicates=new Array(s)}function PT(i,e,t){var n,r,s;if(i!==null&&typeof i=="object")if(r=e.indexOf(i),r!==-1)t.indexOf(r)===-1&&t.push(r);else if(e.push(i),Array.isArray(i))for(r=0,s=i.length;r<s;r+=1)PT(i[r],e,t);else for(n=Object.keys(i),r=0,s=n.length;r<s;r+=1)PT(i[n[r]],e,t)}function bB(i,e){e=e||{};var t=new oB(e);t.noRefs||vB(i,t);var n=i;return t.replacer&&(n=t.replacer.call({"":n},"",n)),Nh(t,0,n,!0,!0)?t.dump+`
`:""}var _B=bB,xB={dump:_B};function iN(i,e){return function(){throw new Error("Function yaml."+i+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var wB=Xs,AB=jP,SB=GP,TB=XP,EB=JP,CB=ZC,NB=mM.load,kB=mM.loadAll,IB=xB.dump,RB=$a,LB={binary:iM,float:QP,map:HP,null:YP,pairs:sM,set:aM,timestamp:tM,bool:KP,int:WP,merge:nM,omap:rM,seq:$P,str:qP},PB=iN("safeLoad","load"),MB=iN("safeLoadAll","loadAll"),DB=iN("safeDump","dump"),OB={Type:wB,Schema:AB,FAILSAFE_SCHEMA:SB,JSON_SCHEMA:TB,CORE_SCHEMA:EB,DEFAULT_SCHEMA:CB,load:NB,loadAll:kB,dump:IB,YAMLException:RB,types:LB,safeLoad:PB,safeLoadAll:MB,safeDump:DB};let po=null,x1=null;const Au={gemini:{textModel:"gemini-2.5-flash-preview-04-17",identifySubtopics:{temperature:0,thinkingBudget:0},generateQuiz:{defaultTemperature:.1,personalizedTemperature:.3,thinkingBudget:0,responseMimeType:"application/json"}},quizDefaults:{defaultNumQuestions:6,minQuestionsPerSubtopic:2,minQuestionsForQuiz:3,maxQuestionsForQuiz:20,minSubtopicsForDynamicOptions:3,maxSubtopicsForDynamicOptions:10},appSettingsDefaults:{secondsPerQuestion:90,numOptionsPerQuestion:4,theme:"dark",defaultTimerEnabled:!1},maxPdfTextLength:1e5},FB=()=>po?Promise.resolve(po):x1||(x1=fetch("./appconfig.yaml").then(i=>{if(!i.ok)throw new Error(`Yapılandırma dosyası yüklenemedi: ${i.status} ${i.statusText}`);return i.text()}).then(i=>{var e,t;try{const n=OB.load(i);if(n==null||typeof n!="object")return console.warn("YAML dosyası boş, yorum içeriyor veya geçerli bir YAML nesnesi değil. Varsayılan yapılandırma kullanılıyor."),po={...Au},po;const r=n;return po={...Au,...r,gemini:{...Au.gemini,...r.gemini||{},identifySubtopics:{...Au.gemini.identifySubtopics,...((e=r.gemini)==null?void 0:e.identifySubtopics)||{}},generateQuiz:{...Au.gemini.generateQuiz,...((t=r.gemini)==null?void 0:t.generateQuiz)||{}}},quizDefaults:{...Au.quizDefaults,...r.quizDefaults||{}},appSettingsDefaults:{...Au.appSettingsDefaults,...r.appSettingsDefaults||{}},maxPdfTextLength:r.maxPdfTextLength??Au.maxPdfTextLength},po.appSettingsDefaults.theme!=="light"&&po.appSettingsDefaults.theme!=="dark"&&(po.appSettingsDefaults.theme=Au.appSettingsDefaults.theme),po}catch(n){throw console.error("YAML ayrıştırma hatası (sentaks):",n),new Error(`YAML dosyası sözdizimi hatası nedeniyle ayrıştırılamadı: ${n.message}`)}}).catch(i=>(console.error("Uygulama yapılandırması yüklenirken veya ayrıştırılırken hata oluştu:",i.message),console.warn("Varsayılan yapılandırma kullanılıyor."),po={...Au},po)).finally(()=>{x1=null}),x1),WA=()=>(po||(console.warn("Yapılandırma henüz yüklenmedi. Kritik hata! Acil varsayılan yapılandırma kullanılıyor. Uygulamanın başlangıcında loadAppConfig çağrıldığından ve beklendiğinden emin olun."),po={...Au}),po),ja=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),MT=[.001,0,0,.001,0,0],QS=1.35,sl={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ef={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},VB="pdfjs_internal_editor_",vn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},jn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},BB={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ba={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Wx={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Wr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},S0={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},QA={ERRORS:0,WARNINGS:1,INFOS:5},Yw={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},kx={moveTo:0,lineTo:1,curveTo:2,closePath:3},UB={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let XA=QA.WARNINGS;function zB(i){Number.isInteger(i)&&(XA=i)}function jB(){return XA}function JA(i){XA>=QA.INFOS&&console.log(`Info: ${i}`)}function _n(i){XA>=QA.WARNINGS&&console.log(`Warning: ${i}`)}function Ii(i){throw new Error(i)}function es(i,e){i||Ii(e)}function qB(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function CM(i,e=null,t=null){if(!i)return null;if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const r=i.match(/\./g);(r==null?void 0:r.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=KB(i)}catch{}}const n=e?URL.parse(i,e):URL.parse(i);return qB(n)?n:null}function NM(i,e,t=!1){const n=URL.parse(i);return n?(n.hash=e,n.href):t&&CM(i,"http://example.com")?i.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Vn(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Fg=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class WR extends Fg{constructor(e,t){super(e,"PasswordException"),this.code=t}}class XS extends Fg{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class DT extends Fg{constructor(e){super(e,"InvalidPDFException")}}class Kw extends Fg{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class $B extends Fg{constructor(e){super(e,"FormatError")}}class Ap extends Fg{constructor(e){super(e,"AbortException")}}function kM(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Ii("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),a=i.subarray(r,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function o2(i){typeof i!="string"&&Ii("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function HB(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function GB(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function YB(){try{return new Function(""),!0}catch{return!1}}class Js{static get isLittleEndian(){return Vn(this,"isLittleEndian",GB())}static get isEvalSupported(){return Vn(this,"isEvalSupported",YB())}static get isOffscreenCanvasSupported(){return Vn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Vn(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Vn(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Vn(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const JS=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Eh,Qx,OT;class jt{static makeHexColor(e,t,n){return`#${JS[e]}${JS[t]}${JS[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,n=0){const r=e[n],s=e[n+1];e[n]=r*t[0]+s*t[2]+t[4],e[n+1]=r*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],s=t[1],a=t[2],l=t[3],u=t[4],d=t[5];for(let f=0;f<6;f+=2){const p=e[n+f],y=e[n+f+1];e[n+f]=p*r+y*a+u,e[n+f+1]=p*s+y*l+d}}static applyInverseTransform(e,t){const n=e[0],r=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,n){const r=t[0],s=t[1],a=t[2],l=t[3],u=t[4],d=t[5],f=e[0],p=e[1],y=e[2],v=e[3];let C=r*f+u,E=C,R=r*y+u,I=R,D=l*p+d,j=D,X=l*v+d,W=X;if(s!==0||a!==0){const ue=s*f,U=s*y,P=a*p,V=a*v;C+=P,I+=P,R+=V,E+=V,D+=ue,W+=ue,X+=U,j+=U}n[0]=Math.min(n[0],C,R,E,I),n[1]=Math.min(n[1],D,X,j,W),n[2]=Math.max(n[2],C,R,E,I),n[3]=Math.max(n[3],D,X,j,W)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],s=e[2],a=e[3],l=n**2+r**2,u=n*s+r*a,d=s**2+a**2,f=(l+d)/2,p=Math.sqrt(f**2-(l*d-u**2));t[0]=Math.sqrt(f+p||1),t[1]=Math.sqrt(f-p||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[n,s,r,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,s){s[0]=Math.min(s[0],e,n),s[1]=Math.min(s[1],t,r),s[2]=Math.max(s[2],e,n),s[3]=Math.max(s[3],t,r)}static bezierBoundingBox(e,t,n,r,s,a,l,u,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,u),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,u),ne(this,Eh,OT).call(this,e,n,s,l,t,r,a,u,3*(-e+3*(n-s)+l),6*(e-2*n+s),3*(n-e),d),ne(this,Eh,OT).call(this,e,n,s,l,t,r,a,u,3*(-t+3*(r-a)+u),6*(t-2*r+a),3*(r-t),d)}}Eh=new WeakSet,Qx=function(e,t,n,r,s,a,l,u,d,f){if(d<=0||d>=1)return;const p=1-d,y=d*d,v=y*d,C=p*(p*(p*e+3*d*t)+3*y*n)+v*r,E=p*(p*(p*s+3*d*a)+3*y*l)+v*u;f[0]=Math.min(f[0],C),f[1]=Math.min(f[1],E),f[2]=Math.max(f[2],C),f[3]=Math.max(f[3],E)},OT=function(e,t,n,r,s,a,l,u,d,f,p,y){if(Math.abs(d)<1e-12){Math.abs(f)>=1e-12&&ne(this,Eh,Qx).call(this,e,t,n,r,s,a,l,u,-p/f,y);return}const v=f**2-4*p*d;if(v<0)return;const C=Math.sqrt(v),E=2*d;ne(this,Eh,Qx).call(this,e,t,n,r,s,a,l,u,(-f+C)/E,y),ne(this,Eh,Qx).call(this,e,t,n,r,s,a,l,u,(-f-C)/E,y)},te(jt,Eh);function KB(i){return decodeURIComponent(escape(i))}let ZS=null,QR=null;function WB(i){return ZS||(ZS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,QR=new Map([["ﬅ","ſt"]])),i.replaceAll(ZS,(e,t,n)=>t?t.normalize("NFKC"):QR.get(n))}function IM(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),kM(i)}const rN="pdfjs_internal_id_";function QB(i,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...s]=t;if(!i(n)&&!Number.isInteger(n)||!e(r))return!1;const a=s.length;let l=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;l=!1;break;default:return!1}for(const u of s)if(!(typeof u=="number"||l&&u===null))return!1;return!0}function qa(i,e,t){return Math.min(Math.max(i,e),t)}function RM(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(kM(i))}function XB(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):o2(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((e,t)=>e+t,0)});const Ud="http://www.w3.org/2000/svg",fm=class fm{};ht(fm,"CSS",96),ht(fm,"PDF",72),ht(fm,"PDF_TO_CSS_UNITS",fm.CSS/fm.PDF);let Sp=fm;async function l2(i,e="text"){if(P1(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class u2{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=s,this.offsetY=a,n*=t;const u=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let f,p,y,v;switch(r%=360,r<0&&(r+=360),r){case 180:f=-1,p=0,y=0,v=1;break;case 90:f=0,p=1,y=1,v=0;break;case 270:f=0,p=-1,y=-1,v=0;break;case 0:f=1,p=0,y=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(y=-y,v=-v);let C,E,R,I;f===0?(C=Math.abs(d-e[1])*n+s,E=Math.abs(u-e[0])*n+a,R=(e[3]-e[1])*n,I=(e[2]-e[0])*n):(C=Math.abs(u-e[0])*n+s,E=Math.abs(d-e[1])*n+a,R=(e[2]-e[0])*n,I=(e[3]-e[1])*n),this.transform=[f*n,p*n,y*n,v*n,C-f*n*u-y*n*d,E-p*n*u-v*n*d],this.width=R,this.height=I}get rawDims(){const e=this.viewBox;return Vn(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new u2({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){const n=[e,t];return jt.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];jt.applyTransform(t,this.transform);const n=[e[2],e[3]];return jt.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return jt.applyInverseTransform(n,this.transform),n}}class sN extends Fg{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function ZA(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function aN(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function JB(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function ZB(i,e="document.pdf"){if(typeof i!="string")return e;if(ZA(i))return _n('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(i);let s=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch{}return s||e}class XR{constructor(){ht(this,"started",Object.create(null));ht(this,"times",[])}time(e){e in this.started&&_n(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||_n(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-r}ms
`);return e.join("")}}function P1(i,e){const t=e?URL.parse(i,e):URL.parse(i);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function ju(i){i.preventDefault()}function Jr(i){i.preventDefault(),i.stopPropagation()}function eU(i){console.log("Deprecated API usage: "+i)}var Mb;class oN{static toDateObject(e){if(!e||typeof e!="string")return null;g(this,Mb)||G(this,Mb,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=g(this,Mb).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const d=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(t[9],10)||0;return p=p>=0&&p<=59?p:0,d==="-"?(a+=f,l+=p):d==="+"&&(a-=f,l-=p),new Date(Date.UTC(n,r,s,a,l,u))}}Mb=new WeakMap,te(oN,Mb);function tU(i,{scale:e=1,rotation:t=0}){const{width:n,height:r}=i.attributes.style,s=[0,0,parseInt(n),parseInt(r)];return new u2({viewBox:s,userUnit:1,scale:e,rotation:t})}function lN(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(_n(`Not a valid color format: "${i}"`),[0,0,0])}function nU(i){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,lN(n))}e.remove()}function cr(i){const{a:e,b:t,c:n,d:r,e:s,f:a}=i.getTransform();return[e,t,n,r,s,a]}function Tc(i){const{a:e,b:t,c:n,d:r,e:s,f:a}=i.getTransform().invertSelf();return[e,t,n,r,s,a]}function Tg(i,e,t=!1,n=!0){if(e instanceof u2){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:a}=i,l=Js.isCSSRoundSupported,u=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${s}px`,f=l?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,p=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(a.width=f,a.height=p):(a.width=p,a.height=f)}n&&i.setAttribute("data-main-rotation",e.rotation)}class nd{constructor(){const{pixelRatio:e}=nd;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,s=-1){let a=1/0,l=1/0,u=1/0;n=nd.capPixels(n,s),n>0&&(a=Math.sqrt(n/(e*t))),r!==-1&&(l=r/e,u=r/t);const d=Math.min(a,l,u);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const FT=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Rf,gm,Fl,Lf,Db,iy,Ob,kA,LM,Qs,PM,MM,M1,DM,Xx;const qd=class qd{constructor(e){te(this,Qs);te(this,Rf,null);te(this,gm,null);te(this,Fl);te(this,Lf,null);te(this,Db,null);te(this,iy,null);G(this,Fl,e),g(qd,Ob)||G(qd,Ob,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=G(this,Rf,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=g(this,Fl)._uiManager._signal;e.addEventListener("contextmenu",ju,{signal:t}),e.addEventListener("pointerdown",ne(qd,kA,LM),{signal:t});const n=G(this,Lf,document.createElement("div"));n.className="buttons",e.append(n);const r=g(this,Fl).toolbarPosition;if(r){const{style:s}=e,a=g(this,Fl)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return ne(this,Qs,DM).call(this),e}get div(){return g(this,Rf)}hide(){var e;g(this,Rf).classList.add("hidden"),(e=g(this,gm))==null||e.hideDropdown()}show(){var e;g(this,Rf).classList.remove("hidden"),(e=g(this,Db))==null||e.shown()}async addAltText(e){const t=await e.render();ne(this,Qs,M1).call(this,t),g(this,Lf).prepend(t,g(this,Qs,Xx)),G(this,Db,e)}addColorPicker(e){G(this,gm,e);const t=e.renderButton();ne(this,Qs,M1).call(this,t),g(this,Lf).prepend(t,g(this,Qs,Xx))}async addEditSignatureButton(e){const t=G(this,iy,await e.renderEditButton(g(this,Fl)));ne(this,Qs,M1).call(this,t),g(this,Lf).prepend(t,g(this,Qs,Xx))}updateEditSignatureButton(e){g(this,iy)&&(g(this,iy).title=e)}remove(){var e;g(this,Rf).remove(),(e=g(this,gm))==null||e.destroy(),G(this,gm,null)}};Rf=new WeakMap,gm=new WeakMap,Fl=new WeakMap,Lf=new WeakMap,Db=new WeakMap,iy=new WeakMap,Ob=new WeakMap,kA=new WeakSet,LM=function(e){e.stopPropagation()},Qs=new WeakSet,PM=function(e){g(this,Fl)._focusEventsAllowed=!1,Jr(e)},MM=function(e){g(this,Fl)._focusEventsAllowed=!0,Jr(e)},M1=function(e){const t=g(this,Fl)._uiManager._signal;e.addEventListener("focusin",ne(this,Qs,PM).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",ne(this,Qs,MM).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ju,{signal:t})},DM=function(){const{editorType:e,_uiManager:t}=g(this,Fl),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",g(qd,Ob)[e]),ne(this,Qs,M1).call(this,n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),g(this,Lf).append(n)},Xx=function(){const e=document.createElement("div");return e.className="divider",e},te(qd,kA),te(qd,Ob,null);let VT=qd;var Fb,ym,vm,Lp,OM,FM,VM;class iU{constructor(e){te(this,Lp);te(this,Fb,null);te(this,ym,null);te(this,vm);G(this,vm,e)}show(e,t,n){const[r,s]=ne(this,Lp,FM).call(this,t,n),{style:a}=g(this,ym)||G(this,ym,ne(this,Lp,OM).call(this));e.append(g(this,ym)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){g(this,ym).remove()}}Fb=new WeakMap,ym=new WeakMap,vm=new WeakMap,Lp=new WeakSet,OM=function(){const e=G(this,ym,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ju,{signal:g(this,vm)._signal});const t=G(this,Fb,document.createElement("div"));return t.className="buttons",e.append(t),ne(this,Lp,VM).call(this),e},FM=function(e,t){let n=0,r=0;for(const s of e){const a=s.y+s.height;if(a<n)continue;const l=s.x+(t?s.width:0);if(a>n){r=l,n=a;continue}t?l>r&&(r=l):l<r&&(r=l)}return[t?1-r:r,n]},VM=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=g(this,vm)._signal;e.addEventListener("contextmenu",ju,{signal:n}),e.addEventListener("click",()=>{g(this,vm).highlightSelection("floating_button")},{signal:n}),g(this,Fb).append(e)};function BM(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}var IA;class rU{constructor(){te(this,IA,0)}get id(){return`${VB}${Oa(this,IA)._++}`}}IA=new WeakMap;var ry,Vb,xa,sy,Jx;const wk=class wk{constructor(){te(this,sy);te(this,ry,IM());te(this,Vb,0);te(this,xa,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Vn(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:s}=e;return ne(this,sy,Jx).call(this,`${t}_${n}_${r}_${s}`,e)}async getFromUrl(e){return ne(this,sy,Jx).call(this,e,e)}async getFromBlob(e,t){const n=await t;return ne(this,sy,Jx).call(this,e,n)}async getFromId(e){g(this,xa)||G(this,xa,new Map);const t=g(this,xa).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){g(this,xa)||G(this,xa,new Map);let n=g(this,xa).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${g(this,ry)}_${Oa(this,Vb)._++}`,refCounter:1,isSvg:!1},g(this,xa).set(e,n),g(this,xa).set(n.id,n),n}getSvgUrl(e){const t=g(this,xa).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;g(this,xa)||G(this,xa,new Map);const t=g(this,xa).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=s.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${g(this,ry)}_`)}};ry=new WeakMap,Vb=new WeakMap,xa=new WeakMap,sy=new WeakSet,Jx=async function(e,t){g(this,xa)||G(this,xa,new Map);let n=g(this,xa).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${g(this,ry)}_${Oa(this,Vb)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await l2(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const s=wk._isSVGFittingCanvas,a=new FileReader,l=new Image,u=new Promise((d,f)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,d()},a.onload=async()=>{const p=n.svgUrl=a.result;l.src=await s?`${p}#svgView(preserveAspectRatio(none))`:p},l.onerror=a.onerror=f});a.readAsDataURL(r),await u}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){_n(r),n=null}return g(this,xa).set(e,n),n&&g(this,xa).set(n.id,n),n};let BT=wk;var Mr,Pf,Bb,ur;class sU{constructor(e=128){te(this,Mr,[]);te(this,Pf,!1);te(this,Bb);te(this,ur,-1);G(this,Bb,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(r&&e(),g(this,Pf))return;const u={cmd:e,undo:t,post:n,type:s};if(g(this,ur)===-1){g(this,Mr).length>0&&(g(this,Mr).length=0),G(this,ur,0),g(this,Mr).push(u);return}if(a&&g(this,Mr)[g(this,ur)].type===s){l&&(u.undo=g(this,Mr)[g(this,ur)].undo),g(this,Mr)[g(this,ur)]=u;return}const d=g(this,ur)+1;d===g(this,Bb)?g(this,Mr).splice(0,1):(G(this,ur,d),d<g(this,Mr).length&&g(this,Mr).splice(d)),g(this,Mr).push(u)}undo(){if(g(this,ur)===-1)return;G(this,Pf,!0);const{undo:e,post:t}=g(this,Mr)[g(this,ur)];e(),t==null||t(),G(this,Pf,!1),G(this,ur,g(this,ur)-1)}redo(){if(g(this,ur)<g(this,Mr).length-1){G(this,ur,g(this,ur)+1),G(this,Pf,!0);const{cmd:e,post:t}=g(this,Mr)[g(this,ur)];e(),t==null||t(),G(this,Pf,!1)}}hasSomethingToUndo(){return g(this,ur)!==-1}hasSomethingToRedo(){return g(this,ur)<g(this,Mr).length-1}cleanType(e){if(g(this,ur)!==-1){for(let t=g(this,ur);t>=0;t--)if(g(this,Mr)[t].type!==e){g(this,Mr).splice(t+1,g(this,ur)-t),G(this,ur,t);return}g(this,Mr).length=0,G(this,ur,-1)}}destroy(){G(this,Mr,null)}}Mr=new WeakMap,Pf=new WeakMap,Bb=new WeakMap,ur=new WeakMap;var RA,UM;class c2{constructor(e){te(this,RA);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Js.platform;for(const[n,r,s={}]of e)for(const a of n){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(ne(this,RA,UM).call(this,t));if(!n)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:l=null}}=n;l&&!l(e,t)||(r.bind(e,...a,t)(),s||Jr(t))}}RA=new WeakSet,UM=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const LA=class LA{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return nU(e),Vn(this,"_colors",e)}convert(e){const t=lN(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((s,a)=>s===t[a]))return LA._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?jt.makeHexColor(...t):e}};ht(LA,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let UT=LA;var ay,Go,ds,zs,oy,Hd,ly,Vl,Mf,Df,uy,bm,kc,Eu,_m,Ub,zb,cy,jb,Ic,Of,dy,Ff,Rc,PA,Vf,qb,Bf,xm,wm,Uf,$b,Ss,_i,Gd,zf,Am,Hb,Gb,jf,Lc,Yd,Yb,Bl,At,Zx,zT,zM,jM,ew,qM,$M,HM,jT,GM,qT,$T,YM,Fa,zd,KM,WM,HT,QM,D1,GT;const $0=class $0{constructor(e,t,n,r,s,a,l,u,d,f,p,y,v,C){te(this,At);te(this,ay,new AbortController);te(this,Go,null);te(this,ds,new Map);te(this,zs,new Map);te(this,oy,null);te(this,Hd,null);te(this,ly,null);te(this,Vl,new sU);te(this,Mf,null);te(this,Df,null);te(this,uy,0);te(this,bm,new Set);te(this,kc,null);te(this,Eu,null);te(this,_m,new Set);ht(this,"_editorUndoBar",null);te(this,Ub,!1);te(this,zb,!1);te(this,cy,!1);te(this,jb,null);te(this,Ic,null);te(this,Of,null);te(this,dy,null);te(this,Ff,!1);te(this,Rc,null);te(this,PA,new rU);te(this,Vf,!1);te(this,qb,!1);te(this,Bf,null);te(this,xm,null);te(this,wm,null);te(this,Uf,null);te(this,$b,null);te(this,Ss,vn.NONE);te(this,_i,new Set);te(this,Gd,null);te(this,zf,null);te(this,Am,null);te(this,Hb,null);te(this,Gb,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});te(this,jf,[0,0]);te(this,Lc,null);te(this,Yd,null);te(this,Yb,null);te(this,Bl,null);const E=this._signal=g(this,ay).signal;G(this,Yd,e),G(this,Yb,t),G(this,oy,n),G(this,zf,r),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:E}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),s._on("setpreference",this.onSetPreference.bind(this),{signal:E}),s._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:E}),ne(this,At,qM).call(this),ne(this,At,YM).call(this),ne(this,At,jT).call(this),G(this,Hd,a.annotationStorage),G(this,jb,a.filterFactory),G(this,Am,l),G(this,dy,u||null),G(this,Ub,d),G(this,zb,f),G(this,cy,p),G(this,$b,y||null),this.viewParameters={realScale:Sp.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=C!==!1}static get _keyboardManager(){const e=$0.prototype,t=a=>g(a,Yd).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:u}=l;return u!=="text"&&u!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Vn(this,"_keyboardManager",new c2([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&g(a,Yd).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&g(a,Yd).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,n,r,s,a,l,u;(e=g(this,Bl))==null||e.resolve(),G(this,Bl,null),(t=g(this,ay))==null||t.abort(),G(this,ay,null),this._signal=null;for(const d of g(this,zs).values())d.destroy();g(this,zs).clear(),g(this,ds).clear(),g(this,_m).clear(),(n=g(this,Uf))==null||n.clear(),G(this,Go,null),g(this,_i).clear(),g(this,Vl).destroy(),(r=g(this,oy))==null||r.destroy(),(s=g(this,zf))==null||s.destroy(),(a=g(this,Rc))==null||a.hide(),G(this,Rc,null),(l=g(this,wm))==null||l.destroy(),G(this,wm,null),g(this,Ic)&&(clearTimeout(g(this,Ic)),G(this,Ic,null)),g(this,Lc)&&(clearTimeout(g(this,Lc)),G(this,Lc,null)),(u=this._editorUndoBar)==null||u.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return g(this,$b)}get useNewAltTextFlow(){return g(this,zb)}get useNewAltTextWhenAddingImage(){return g(this,cy)}get hcmFilter(){return Vn(this,"hcmFilter",g(this,Am)?g(this,jb).addHCMFilter(g(this,Am).foreground,g(this,Am).background):"none")}get direction(){return Vn(this,"direction",getComputedStyle(g(this,Yd)).direction)}get highlightColors(){return Vn(this,"highlightColors",g(this,dy)?new Map(g(this,dy).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Vn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),G(this,Df,e)}setMainHighlightColorPicker(e){G(this,wm,e)}editAltText(e,t=!1){var n;(n=g(this,oy))==null||n.editAltText(this,e,t)}getSignature(e){var t;(t=g(this,zf))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return g(this,zf)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":G(this,cy,t);break}}onPageChanging({pageNumber:e}){G(this,uy,e-1)}focusMainContainer(){g(this,Yd).focus()}findParent(e,t){for(const n of g(this,zs).values()){const{x:r,y:s,width:a,height:l}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=s&&t<=s+l)return n}return null}disableUserSelect(e=!1){g(this,Yb).classList.toggle("noUserSelect",e)}addShouldRescale(e){g(this,_m).add(e)}removeShouldRescale(e){g(this,_m).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Sp.PDF_TO_CSS_UNITS;for(const n of g(this,_m))n.onScaleChanging();(t=g(this,Df))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:a}=t,l=t.toString(),d=ne(this,At,Zx).call(this,t).closest(".textLayer"),f=this.getSelectionBoxes(d);if(!f)return;t.empty();const p=ne(this,At,zT).call(this,d),y=g(this,Ss)===vn.NONE,v=()=>{p==null||p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:a,text:l}),y&&this.showAllEditors("highlight",!0,!0)};if(y){this.switchToMode(vn.HIGHLIGHT,v);return}v()}addToAnnotationStorage(e){!e.isEmpty()&&g(this,Hd)&&!g(this,Hd).has(e.id)&&g(this,Hd).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,g(this,Ff)&&(G(this,Ff,!1),ne(this,At,ew).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of g(this,_i))if(t.div.contains(e)){G(this,xm,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!g(this,xm))return;const[e,t]=g(this,xm);G(this,xm,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){ne(this,At,jT).call(this),ne(this,At,qT).call(this)}removeEditListeners(){ne(this,At,GM).call(this),ne(this,At,$T).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of g(this,Eu))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of g(this,Eu))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=g(this,Go))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of g(this,_i)){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of g(this,Eu))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){_n(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const u of n){const d=await r.deserialize(u);if(!d)return;s.push(d)}const a=()=>{for(const u of s)ne(this,At,HT).call(this,u);ne(this,At,GT).call(this,s)},l=()=>{for(const u of s)u.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(s){_n(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),g(this,Ss)!==vn.NONE&&!this.isEditorHandlingKeyboard&&$0._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,g(this,Ff)&&(G(this,Ff,!1),ne(this,At,ew).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(ne(this,At,$M).call(this),ne(this,At,qT).call(this),ne(this,At,Fa).call(this,{isEditing:g(this,Ss)!==vn.NONE,isEmpty:ne(this,At,D1).call(this),hasSomethingToUndo:g(this,Vl).hasSomethingToUndo(),hasSomethingToRedo:g(this,Vl).hasSomethingToRedo(),hasSelectedEditor:!1})):(ne(this,At,HM).call(this),ne(this,At,$T).call(this),ne(this,At,Fa).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!g(this,Eu)){G(this,Eu,e);for(const t of g(this,Eu))ne(this,At,zd).call(this,t.defaultPropertiesToUpdate)}}getId(){return g(this,PA).id}get currentLayer(){return g(this,zs).get(g(this,uy))}getLayer(e){return g(this,zs).get(e)}get currentPageIndex(){return g(this,uy)}addLayer(e){g(this,zs).set(e.pageIndex,e),g(this,Vf)?e.enable():e.disable()}removeLayer(e){g(this,zs).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){var r,s,a;if(g(this,Ss)!==e&&!(g(this,Bl)&&(await g(this,Bl).promise,!g(this,Bl)))){if(G(this,Bl,Promise.withResolvers()),(r=g(this,Df))==null||r.commitOrRemove(),G(this,Ss,e),e===vn.NONE){this.setEditingState(!1),ne(this,At,WM).call(this),(s=this._editorUndoBar)==null||s.hide(),g(this,Bl).resolve();return}e===vn.SIGNATURE&&await((a=g(this,zf))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await ne(this,At,KM).call(this),this.unselectAll();for(const l of g(this,zs).values())l.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),g(this,Bl).resolve();return}for(const l of g(this,ds).values())l.annotationElementId===t||l.id===t?(this.setSelected(l),l.enterInEditMode()):l.unselect();g(this,Bl).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==g(this,Ss)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var n;if(g(this,Eu)){switch(e){case jn.CREATE:this.currentLayer.addNewEditor(t);return;case jn.HIGHLIGHT_DEFAULT_COLOR:(n=g(this,wm))==null||n.updateColor(t);break;case jn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(g(this,Hb)||G(this,Hb,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of g(this,_i))r.updateParams(e,t);for(const r of g(this,Eu))r.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var s;for(const a of g(this,ds).values())a.editorType===e&&a.show(t);(((s=g(this,Hb))==null?void 0:s.get(jn.HIGHLIGHT_SHOW_ALL))??!0)!==t&&ne(this,At,zd).call(this,[[jn.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(g(this,qb)!==e){G(this,qb,e);for(const t of g(this,zs).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of g(this,ds).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return g(this,ds).get(e)}addEditor(e){g(this,ds).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(g(this,Ic)&&clearTimeout(g(this,Ic)),G(this,Ic,setTimeout(()=>{this.focusMainContainer(),G(this,Ic,null)},0))),g(this,ds).delete(e.id),e.annotationElementId&&((t=g(this,Uf))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!g(this,bm).has(e.annotationElementId))&&((n=g(this,Hd))==null||n.remove(e.id))}addDeletedAnnotationElement(e){g(this,bm).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return g(this,bm).has(e)}removeDeletedAnnotationElement(e){g(this,bm).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){g(this,Go)!==e&&(G(this,Go,e),e&&ne(this,At,zd).call(this,e.propertiesToUpdate))}updateUI(e){g(this,At,QM)===e&&ne(this,At,zd).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){ne(this,At,zd).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(g(this,_i).has(e)){g(this,_i).delete(e),e.unselect(),ne(this,At,Fa).call(this,{hasSelectedEditor:this.hasSelection});return}g(this,_i).add(e),e.select(),ne(this,At,zd).call(this,e.propertiesToUpdate),ne(this,At,Fa).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=g(this,Df))==null||t.commitOrRemove();for(const n of g(this,_i))n!==e&&n.unselect();g(this,_i).clear(),g(this,_i).add(e),e.select(),ne(this,At,zd).call(this,e.propertiesToUpdate),ne(this,At,Fa).call(this,{hasSelectedEditor:!0})}isSelected(e){return g(this,_i).has(e)}get firstSelectedEditor(){return g(this,_i).values().next().value}unselect(e){e.unselect(),g(this,_i).delete(e),ne(this,At,Fa).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return g(this,_i).size!==0}get isEnterHandled(){return g(this,_i).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;g(this,Vl).undo(),ne(this,At,Fa).call(this,{hasSomethingToUndo:g(this,Vl).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ne(this,At,D1).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){g(this,Vl).redo(),ne(this,At,Fa).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:g(this,Vl).hasSomethingToRedo(),isEmpty:ne(this,At,D1).call(this)})}addCommands(e){g(this,Vl).add(e),ne(this,At,Fa).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ne(this,At,D1).call(this)})}cleanUndoStack(e){g(this,Vl).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...g(this,_i)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const a of t)ne(this,At,HT).call(this,a)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=g(this,Go))==null||e.commitOrRemove()}hasSomethingToControl(){return g(this,Go)||this.hasSelection}selectAll(){for(const e of g(this,_i))e.commit();ne(this,At,GT).call(this,g(this,ds).values())}unselectAll(){var e;if(!(g(this,Go)&&(g(this,Go).commitOrRemove(),g(this,Ss)!==vn.NONE))&&!((e=g(this,Df))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of g(this,_i))t.unselect();g(this,_i).clear(),ne(this,At,Fa).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;g(this,jf)[0]+=e,g(this,jf)[1]+=t;const[r,s]=g(this,jf),a=[...g(this,_i)],l=1e3;g(this,Lc)&&clearTimeout(g(this,Lc)),G(this,Lc,setTimeout(()=>{G(this,Lc,null),g(this,jf)[0]=g(this,jf)[1]=0,this.addCommands({cmd:()=>{for(const u of a)g(this,ds).has(u.id)&&(u.translateInPage(r,s),u.translationDone())},undo:()=>{for(const u of a)g(this,ds).has(u.id)&&(u.translateInPage(-r,-s),u.translationDone())},mustExec:!1})},l));for(const u of a)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),G(this,kc,new Map);for(const e of g(this,_i))g(this,kc).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!g(this,kc))return!1;this.disableUserSelect(!1);const e=g(this,kc);G(this,kc,null);let t=!1;for(const[{x:r,y:s,pageIndex:a},l]of e)l.newX=r,l.newY=s,l.newPageIndex=a,t||(t=r!==l.savedX||s!==l.savedY||a!==l.savedPageIndex);if(!t)return!1;const n=(r,s,a,l)=>{if(g(this,ds).has(r.id)){const u=g(this,zs).get(l);u?r._setParentAndPosition(u,s,a):(r.pageIndex=l,r.x=s,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:a,newPageIndex:l}]of e)n(r,s,a,l)},undo:()=>{for(const[r,{savedX:s,savedY:a,savedPageIndex:l}]of e)n(r,s,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(g(this,kc))for(const n of g(this,kc).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||g(this,_i).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return g(this,Go)===e}getActive(){return g(this,Go)}getMode(){return g(this,Ss)}get imageManager(){return Vn(this,"imageManager",new BT)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,f=t.rangeCount;d<f;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:r,width:s,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,f,p,y)=>({x:(f-r)/a,y:1-(d+p-n)/s,width:y/a,height:p/s});break;case"180":l=(d,f,p,y)=>({x:1-(d+p-n)/s,y:1-(f+y-r)/a,width:p/s,height:y/a});break;case"270":l=(d,f,p,y)=>({x:1-(f+y-r)/a,y:(d-n)/s,width:y/a,height:p/s});break;default:l=(d,f,p,y)=>({x:(d-n)/s,y:(f-r)/a,width:p/s,height:y/a});break}const u=[];for(let d=0,f=t.rangeCount;d<f;d++){const p=t.getRangeAt(d);if(!p.collapsed)for(const{x:y,y:v,width:C,height:E}of p.getClientRects())C===0||E===0||u.push(l(y,v,C,E))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(g(this,ly)||G(this,ly,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=g(this,ly))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=g(this,ly))==null?void 0:r.get(e.data.id);if(!t)return;const n=g(this,Hd).getRawValue(t);n&&(g(this,Ss)===vn.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var s;const r=(s=g(this,Uf))==null?void 0:s.get(e);r&&(r.setCanvas(t,n),g(this,Uf).delete(e))}addMissingCanvas(e,t){(g(this,Uf)||G(this,Uf,new Map)).set(e,t)}};ay=new WeakMap,Go=new WeakMap,ds=new WeakMap,zs=new WeakMap,oy=new WeakMap,Hd=new WeakMap,ly=new WeakMap,Vl=new WeakMap,Mf=new WeakMap,Df=new WeakMap,uy=new WeakMap,bm=new WeakMap,kc=new WeakMap,Eu=new WeakMap,_m=new WeakMap,Ub=new WeakMap,zb=new WeakMap,cy=new WeakMap,jb=new WeakMap,Ic=new WeakMap,Of=new WeakMap,dy=new WeakMap,Ff=new WeakMap,Rc=new WeakMap,PA=new WeakMap,Vf=new WeakMap,qb=new WeakMap,Bf=new WeakMap,xm=new WeakMap,wm=new WeakMap,Uf=new WeakMap,$b=new WeakMap,Ss=new WeakMap,_i=new WeakMap,Gd=new WeakMap,zf=new WeakMap,Am=new WeakMap,Hb=new WeakMap,Gb=new WeakMap,jf=new WeakMap,Lc=new WeakMap,Yd=new WeakMap,Yb=new WeakMap,Bl=new WeakMap,At=new WeakSet,Zx=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},zT=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of g(this,zs).values())if(n.hasTextLayer(e))return n;return null},zM=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=ne(this,At,Zx).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(g(this,Rc)||G(this,Rc,new iU(this)),g(this,Rc).show(n,r,this.direction==="ltr"))},jM=function(){var s,a,l;const e=document.getSelection();if(!e||e.isCollapsed){g(this,Gd)&&((s=g(this,Rc))==null||s.hide(),G(this,Gd,null),ne(this,At,Fa).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===g(this,Gd))return;const r=ne(this,At,Zx).call(this,e).closest(".textLayer");if(!r){g(this,Gd)&&((a=g(this,Rc))==null||a.hide(),G(this,Gd,null),ne(this,At,Fa).call(this,{hasSelectedText:!1}));return}if((l=g(this,Rc))==null||l.hide(),G(this,Gd,t),ne(this,At,Fa).call(this,{hasSelectedText:!0}),!(g(this,Ss)!==vn.HIGHLIGHT&&g(this,Ss)!==vn.NONE)&&(g(this,Ss)===vn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),G(this,Ff,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=g(this,Ss)===vn.HIGHLIGHT?ne(this,At,zT).call(this,r):null;u==null||u.toggleDrawing();const d=new AbortController,f=this.combinedSignal(d),p=y=>{y.type==="pointerup"&&y.button!==0||(d.abort(),u==null||u.toggleDrawing(!0),y.type==="pointerup"&&ne(this,At,ew).call(this,"main_toolbar"))};window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("blur",p,{signal:f})}},ew=function(e=""){g(this,Ss)===vn.HIGHLIGHT?this.highlightSelection(e):g(this,Ub)&&ne(this,At,zM).call(this)},qM=function(){document.addEventListener("selectionchange",ne(this,At,jM).bind(this),{signal:this._signal})},$M=function(){if(g(this,Of))return;G(this,Of,new AbortController);const e=this.combinedSignal(g(this,Of));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},HM=function(){var e;(e=g(this,Of))==null||e.abort(),G(this,Of,null)},jT=function(){if(g(this,Bf))return;G(this,Bf,new AbortController);const e=this.combinedSignal(g(this,Bf));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},GM=function(){var e;(e=g(this,Bf))==null||e.abort(),G(this,Bf,null)},qT=function(){if(g(this,Mf))return;G(this,Mf,new AbortController);const e=this.combinedSignal(g(this,Mf));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},$T=function(){var e;(e=g(this,Mf))==null||e.abort(),G(this,Mf,null)},YM=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Fa=function(e){Object.entries(e).some(([n,r])=>g(this,Gb)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(g(this,Gb),e)}),g(this,Ss)===vn.HIGHLIGHT&&e.hasSelectedEditor===!1&&ne(this,At,zd).call(this,[[jn.HIGHLIGHT_FREE,!0]]))},zd=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},KM=async function(){if(!g(this,Vf)){G(this,Vf,!0);const e=[];for(const t of g(this,zs).values())e.push(t.enable());await Promise.all(e);for(const t of g(this,ds).values())t.enable()}},WM=function(){if(this.unselectAll(),g(this,Vf)){G(this,Vf,!1);for(const e of g(this,zs).values())e.disable();for(const e of g(this,ds).values())e.disable()}},HT=function(e){const t=g(this,zs).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},QM=function(){let e=null;for(e of g(this,_i));return e},D1=function(){if(g(this,ds).size===0)return!0;if(g(this,ds).size===1)for(const e of g(this,ds).values())return e.isEmpty();return!1},GT=function(e){for(const t of g(this,_i))t.unselect();g(this,_i).clear();for(const t of e)t.isEmpty()||(g(this,_i).add(t),t.select());ne(this,At,Fa).call(this,{hasSelectedEditor:this.hasSelection})},ht($0,"TRANSLATE_SMALL",1),ht($0,"TRANSLATE_BIG",10);let Eg=$0;var Ts,Pc,Cu,hy,Mc,Yo,fy,Dc,mo,Kd,Sm,Oc,qf,Uu,O1,tw;const Va=class Va{constructor(e){te(this,Uu);te(this,Ts,null);te(this,Pc,!1);te(this,Cu,null);te(this,hy,null);te(this,Mc,null);te(this,Yo,null);te(this,fy,!1);te(this,Dc,null);te(this,mo,null);te(this,Kd,null);te(this,Sm,null);te(this,Oc,!1);G(this,mo,e),G(this,Oc,e._uiManager.useNewAltTextFlow),g(Va,qf)||G(Va,qf,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Va._l10n??(Va._l10n=e)}async render(){const e=G(this,Cu,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=G(this,hy,document.createElement("span"));e.append(t),g(this,Oc)?(e.classList.add("new"),e.setAttribute("data-l10n-id",g(Va,qf).missing),t.setAttribute("data-l10n-id",g(Va,qf)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=g(this,mo)._uiManager._signal;e.addEventListener("contextmenu",ju,{signal:n}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const r=s=>{s.preventDefault(),g(this,mo)._uiManager.editAltText(g(this,mo)),g(this,Oc)&&g(this,mo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:g(this,Uu,O1)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(G(this,fy,!0),r(s))},{signal:n}),await ne(this,Uu,tw).call(this),e}finish(){g(this,Cu)&&(g(this,Cu).focus({focusVisible:g(this,fy)}),G(this,fy,!1))}isEmpty(){return g(this,Oc)?g(this,Ts)===null:!g(this,Ts)&&!g(this,Pc)}hasData(){return g(this,Oc)?g(this,Ts)!==null||!!g(this,Kd):this.isEmpty()}get guessedText(){return g(this,Kd)}async setGuessedText(e){g(this,Ts)===null&&(G(this,Kd,e),G(this,Sm,await Va._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),ne(this,Uu,tw).call(this))}toggleAltTextBadge(e=!1){var t;if(!g(this,Oc)||g(this,Ts)){(t=g(this,Dc))==null||t.remove(),G(this,Dc,null);return}if(!g(this,Dc)){const n=G(this,Dc,document.createElement("div"));n.className="noAltTextBadge",g(this,mo).div.append(n)}g(this,Dc).classList.toggle("hidden",!e)}serialize(e){let t=g(this,Ts);return!e&&g(this,Kd)===t&&(t=g(this,Sm)),{altText:t,decorative:g(this,Pc),guessedText:g(this,Kd),textWithDisclaimer:g(this,Sm)}}get data(){return{altText:g(this,Ts),decorative:g(this,Pc)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:s=!1}){n&&(G(this,Kd,n),G(this,Sm,r)),!(g(this,Ts)===e&&g(this,Pc)===t)&&(s||(G(this,Ts,e),G(this,Pc,t)),ne(this,Uu,tw).call(this))}toggle(e=!1){g(this,Cu)&&(!e&&g(this,Yo)&&(clearTimeout(g(this,Yo)),G(this,Yo,null)),g(this,Cu).disabled=!e)}shown(){g(this,mo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:g(this,Uu,O1)}})}destroy(){var e,t;(e=g(this,Cu))==null||e.remove(),G(this,Cu,null),G(this,hy,null),G(this,Mc,null),(t=g(this,Dc))==null||t.remove(),G(this,Dc,null)}};Ts=new WeakMap,Pc=new WeakMap,Cu=new WeakMap,hy=new WeakMap,Mc=new WeakMap,Yo=new WeakMap,fy=new WeakMap,Dc=new WeakMap,mo=new WeakMap,Kd=new WeakMap,Sm=new WeakMap,Oc=new WeakMap,qf=new WeakMap,Uu=new WeakSet,O1=function(){return g(this,Ts)&&"added"||g(this,Ts)===null&&this.guessedText&&"review"||"missing"},tw=async function(){var r,s,a;const e=g(this,Cu);if(!e)return;if(g(this,Oc)){if(e.classList.toggle("done",!!g(this,Ts)),e.setAttribute("data-l10n-id",g(Va,qf)[g(this,Uu,O1)]),(r=g(this,hy))==null||r.setAttribute("data-l10n-id",g(Va,qf)[`${g(this,Uu,O1)}-label`]),!g(this,Ts)){(s=g(this,Mc))==null||s.remove();return}}else{if(!g(this,Ts)&&!g(this,Pc)){e.classList.remove("done"),(a=g(this,Mc))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=g(this,Mc);if(!t){G(this,Mc,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${g(this,mo).id}`;const l=100,u=g(this,mo)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(g(this,Yo)),G(this,Yo,null)},{once:!0}),e.addEventListener("mouseenter",()=>{G(this,Yo,setTimeout(()=>{G(this,Yo,null),g(this,Mc).classList.add("show"),g(this,mo)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:u}),e.addEventListener("mouseleave",()=>{var d;g(this,Yo)&&(clearTimeout(g(this,Yo)),G(this,Yo,null)),(d=g(this,Mc))==null||d.classList.remove("show")},{signal:u})}g(this,Pc)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=g(this,Ts)),t.parentNode||e.append(t);const n=g(this,mo).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},te(Va,qf,null),ht(Va,"_l10n",null);let Ww=Va;var py,Tm,Kb,Wb,Qb,Xb,Jb,Wd,Em,Qd,Cm,Xd,Pp,XM,JM,ZM;const Ak=class Ak{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:l}){te(this,Pp);te(this,py);te(this,Tm,!1);te(this,Kb,null);te(this,Wb);te(this,Qb);te(this,Xb);te(this,Jb);te(this,Wd,null);te(this,Em);te(this,Qd,null);te(this,Cm);te(this,Xd,null);G(this,py,e),G(this,Kb,n),G(this,Wb,t),G(this,Qb,r),G(this,Xb,s),G(this,Jb,a),G(this,Cm,new AbortController),G(this,Em,AbortSignal.any([l,g(this,Cm).signal])),e.addEventListener("touchstart",ne(this,Pp,XM).bind(this),{passive:!1,signal:g(this,Em)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/nd.pixelRatio}destroy(){var e,t;(e=g(this,Cm))==null||e.abort(),G(this,Cm,null),(t=g(this,Wd))==null||t.abort(),G(this,Wd,null)}};py=new WeakMap,Tm=new WeakMap,Kb=new WeakMap,Wb=new WeakMap,Qb=new WeakMap,Xb=new WeakMap,Jb=new WeakMap,Wd=new WeakMap,Em=new WeakMap,Qd=new WeakMap,Cm=new WeakMap,Xd=new WeakMap,Pp=new WeakSet,XM=function(e){var r,s,a;if((r=g(this,Wb))!=null&&r.call(this))return;if(e.touches.length===1){if(g(this,Wd))return;const l=G(this,Wd,new AbortController),u=AbortSignal.any([g(this,Em),l.signal]),d=g(this,py),f={capture:!0,signal:u,passive:!1},p=y=>{var v;y.pointerType==="touch"&&((v=g(this,Wd))==null||v.abort(),G(this,Wd,null))};d.addEventListener("pointerdown",y=>{y.pointerType==="touch"&&(Jr(y),p(y))},f),d.addEventListener("pointerup",p,f),d.addEventListener("pointercancel",p,f);return}if(!g(this,Xd)){G(this,Xd,new AbortController);const l=AbortSignal.any([g(this,Em),g(this,Xd).signal]),u=g(this,py),d={signal:l,capture:!1,passive:!1};u.addEventListener("touchmove",ne(this,Pp,JM).bind(this),d);const f=ne(this,Pp,ZM).bind(this);u.addEventListener("touchend",f,d),u.addEventListener("touchcancel",f,d),d.capture=!0,u.addEventListener("pointerdown",Jr,d),u.addEventListener("pointermove",Jr,d),u.addEventListener("pointercancel",Jr,d),u.addEventListener("pointerup",Jr,d),(s=g(this,Qb))==null||s.call(this)}if(Jr(e),e.touches.length!==2||(a=g(this,Kb))!=null&&a.call(this)){G(this,Qd,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),G(this,Qd,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},JM=function(e){var X;if(!g(this,Qd)||e.touches.length!==2)return;Jr(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:s}=t,{screenX:a,screenY:l}=n,u=g(this,Qd),{touch0X:d,touch0Y:f,touch1X:p,touch1Y:y}=u,v=p-d,C=y-f,E=a-r,R=l-s,I=Math.hypot(E,R)||1,D=Math.hypot(v,C)||1;if(!g(this,Tm)&&Math.abs(D-I)<=Ak.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=r,u.touch0Y=s,u.touch1X=a,u.touch1Y=l,!g(this,Tm)){G(this,Tm,!0);return}const j=[(r+a)/2,(s+l)/2];(X=g(this,Xb))==null||X.call(this,j,D,I)},ZM=function(e){var t;e.touches.length>=2||(g(this,Xd)&&(g(this,Xd).abort(),G(this,Xd,null),(t=g(this,Jb))==null||t.call(this)),g(this,Qd)&&(Jr(e),G(this,Qd,null),G(this,Tm,!1)))};let Qw=Ak;var Nm,Nu,Gi,my,$f,Zb,km,js,Im,Jd,Hf,e_,Rm,Ko,t_,Lm,Zd,Fc,gy,yy,Ul,Pm,n_,MA,Xt,YT,i_,KT,nw,eD,tD,WT,iw,QT,nD,iD,rD,XT,sD,JT,aD,oD,lD,ZT,F1;const En=class En{constructor(e){te(this,Xt);te(this,Nm,null);te(this,Nu,null);te(this,Gi,null);te(this,my,!1);te(this,$f,null);te(this,Zb,"");te(this,km,!1);te(this,js,null);te(this,Im,null);te(this,Jd,null);te(this,Hf,null);te(this,e_,"");te(this,Rm,!1);te(this,Ko,null);te(this,t_,!1);te(this,Lm,!1);te(this,Zd,!1);te(this,Fc,null);te(this,gy,0);te(this,yy,0);te(this,Ul,null);te(this,Pm,null);ht(this,"isSelected",!1);ht(this,"_isCopy",!1);ht(this,"_editToolbar",null);ht(this,"_initialOptions",Object.create(null));ht(this,"_initialData",null);ht(this,"_isVisible",!0);ht(this,"_uiManager",null);ht(this,"_focusEventsAllowed",!0);te(this,n_,!1);te(this,MA,En._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[s,a];const[l,u]=this.parentDimensions;this.x=e.x/l,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=En.prototype._resizeWithKeyboard,t=Eg.TRANSLATE_SMALL,n=Eg.TRANSLATE_BIG;return Vn(this,"_resizerKeyboardManager",new c2([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],En.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Vn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new aU({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(En._l10n??(En._l10n=e),En._l10nResizer||(En._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),En._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);En._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ii("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return g(this,n_)}set _isDraggable(e){var t;G(this,n_,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=g(this,MA)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):ne(this,Xt,F1).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(g(this,Rm)?G(this,Rm,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[s,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/s,this.y=(t+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){ne(this,Xt,YT).call(this,this.parentDimensions,e,t)}translateInPage(e,t){g(this,Ko)||G(this,Ko,[this.x,this.y,this.width,this.height]),ne(this,Xt,YT).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){g(this,Ko)||G(this,Ko,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[u,d]=this.getBaseTranslation();a+=u,l+=d;const{style:f}=n;f.left=`${(100*a).toFixed(2)}%`,f.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!g(this,Ko)&&(g(this,Ko)[0]!==this.x||g(this,Ko)[1]!==this.y)}get _hasBeenResized(){return!!g(this,Ko)&&(g(this,Ko)[2]!==this.width||g(this,Ko)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=En,r=n/e,s=n/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:s,y:a,width:l,height:u}=this;if(l*=n,u*=r,s*=n,a*=r,this._mustFixPosition)switch(e){case 0:s=qa(s,0,n-l),a=qa(a,0,r-u);break;case 90:s=qa(s,0,n-u),a=qa(a,l,r);break;case 180:s=qa(s,l,n),a=qa(a,u,r);break;case 270:s=qa(s,u,n),a=qa(a,0,r-l);break}this.x=s/=n,this.y=a/=r;const[d,f]=this.getBaseTranslation();s+=d,a+=f,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return ne(n=En,i_,KT).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return ne(n=En,i_,KT).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/n).toFixed(2)}%`,g(this,km)||(s.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),s=!g(this,km)&&t.endsWith("%");if(r&&s)return;const[a,l]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!g(this,km)&&!s&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=g(this,Gi))==null||e.finish()}async addEditToolbar(){return this._editToolbar||g(this,Lm)?this._editToolbar:(this._editToolbar=new VT(this),this.div.append(this._editToolbar.render()),g(this,Gi)&&await this._editToolbar.addAltText(g(this,Gi)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=g(this,Gi))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){g(this,Gi)||(Ww.initialize(En._l10n),G(this,Gi,new Ww(this)),g(this,Nm)&&(g(this,Gi).data=g(this,Nm),G(this,Nm,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=g(this,Gi))==null?void 0:e.data}set altTextData(e){g(this,Gi)&&(g(this,Gi).data=e)}get guessedAltText(){var e;return(e=g(this,Gi))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=g(this,Gi))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=g(this,Gi))==null?void 0:t.serialize(e)}hasAltText(){return!!g(this,Gi)&&!g(this,Gi).isEmpty()}hasAltTextData(){var e;return((e=g(this,Gi))==null?void 0:e.hasData())??!1}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=g(this,my)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),ne(this,Xt,JT).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),BM(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(g(this,Pm)||G(this,Pm,new Qw({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:ne(this,Xt,nD).bind(this),onPinching:ne(this,Xt,iD).bind(this),onPinchEnd:ne(this,Xt,rD).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=Js.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(G(this,Rm,!0),this._isDraggable){ne(this,Xt,sD).call(this,e);return}ne(this,Xt,XT).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){g(this,Fc)&&clearTimeout(g(this,Fc)),G(this,Fc,setTimeout(()=>{var e;G(this,Fc,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[l,u]=this.pageTranslation,d=e/r,f=t/r,p=this.x*s,y=this.y*a,v=this.width*s,C=this.height*a;switch(n){case 0:return[p+d+l,a-y-f-C+u,p+d+v+l,a-y-f+u];case 90:return[p+f+l,a-y+d+u,p+f+C+l,a-y+d+v+u];case 180:return[p-d-v+l,a-y+f+u,p-d+l,a-y+f+C+u];case 270:return[p-f-C+l,a-y-d-v+u,p-f+l,a-y-d+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,s,a]=e,l=s-n,u=a-r;switch(this.rotation){case 0:return[n,t-a,l,u];case 90:return[n,t-r,u,l];case 180:return[s,t-r,l,u];case 270:return[s,t-a,u,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),G(this,Lm,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),G(this,Lm,!1),!0):!1}isInEditMode(){return g(this,Lm)}shouldGetKeyboardEvents(){return g(this,Zd)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&r>0&&e<s&&n>0}rebuild(){ne(this,Xt,JT).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Ii("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,G(r,Nm,e.accessibilityData),r._isCopy=e.isCopy||!1;const[s,a]=r.pageDimensions,[l,u,d,f]=r.getRectInCurrentCoords(e.rect,a);return r.x=l/s,r.y=u/a,r.width=d/s,r.height=f/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=g(this,Hf))==null||e.abort(),G(this,Hf,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),g(this,Fc)&&(clearTimeout(g(this,Fc)),G(this,Fc,null)),ne(this,Xt,F1).call(this),this.removeEditToolbar(),g(this,Ul)){for(const n of g(this,Ul).values())clearTimeout(n);G(this,Ul,null)}this.parent=null,(t=g(this,Pm))==null||t.destroy(),G(this,Pm,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ne(this,Xt,eD).call(this),g(this,js).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),G(this,Jd,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=g(this,js).children;if(!g(this,Nu)){G(this,Nu,Array.from(t));const a=ne(this,Xt,aD).bind(this),l=ne(this,Xt,oD).bind(this),u=this._uiManager._signal;for(const d of g(this,Nu)){const f=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:u}),d.addEventListener("blur",l,{signal:u}),d.addEventListener("focus",ne(this,Xt,lD).bind(this,f),{signal:u}),d.setAttribute("data-l10n-id",En._l10nResizer[f])}}const n=g(this,Nu)[0];let r=0;for(const a of t){if(a===n)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(g(this,Nu).length/4);if(s!==r){if(s<r)for(let l=0;l<r-s;l++)g(this,js).append(g(this,js).firstChild);else if(s>r)for(let l=0;l<s-r;l++)g(this,js).firstChild.before(g(this,js).lastChild);let a=0;for(const l of t){const d=g(this,Nu)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",En._l10nResizer[d])}}ne(this,Xt,ZT).call(this,0),G(this,Zd,!0),g(this,js).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){g(this,Zd)&&ne(this,Xt,QT).call(this,g(this,e_),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){ne(this,Xt,F1).call(this),this.div.focus()}select(){var e,t,n;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(n=g(this,Gi))==null||n.toggleAltTextBadge(!1)}}unselect(){var e,t,n,r,s;this.isSelected&&(this.isSelected=!1,(e=g(this,js))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=g(this,Gi))==null||s.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return g(this,t_)}set isEditing(e){G(this,t_,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){G(this,km,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){g(this,Ul)||G(this,Ul,new Map);const{action:n}=e;let r=g(this,Ul).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),g(this,Ul).delete(n),g(this,Ul).size===0&&G(this,Ul,null)},En._telemetryTimeout),g(this,Ul).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),G(this,my,!1)}disable(){this.div&&(this.div.tabIndex=-1),G(this,my,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Nm=new WeakMap,Nu=new WeakMap,Gi=new WeakMap,my=new WeakMap,$f=new WeakMap,Zb=new WeakMap,km=new WeakMap,js=new WeakMap,Im=new WeakMap,Jd=new WeakMap,Hf=new WeakMap,e_=new WeakMap,Rm=new WeakMap,Ko=new WeakMap,t_=new WeakMap,Lm=new WeakMap,Zd=new WeakMap,Fc=new WeakMap,gy=new WeakMap,yy=new WeakMap,Ul=new WeakMap,Pm=new WeakMap,n_=new WeakMap,MA=new WeakMap,Xt=new WeakSet,YT=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},i_=new WeakSet,KT=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},nw=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},eD=function(){if(g(this,js))return;G(this,js,document.createElement("div")),g(this,js).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");g(this,js).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",ne(this,Xt,tD).bind(this,n),{signal:t}),r.addEventListener("contextmenu",ju,{signal:t}),r.tabIndex=-1}this.div.prepend(g(this,js))},tD=function(e,t){var f;t.preventDefault();const{isMac:n}=Js.platform;if(t.button!==0||t.ctrlKey&&n)return;(f=g(this,Gi))==null||f.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,G(this,Im,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",ne(this,Xt,QT).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Jr,{passive:!1,signal:a}),window.addEventListener("contextmenu",ju,{signal:a}),G(this,Jd,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var p;s.abort(),this.parent.togglePointerEvents(!0),(p=g(this,Gi))==null||p.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=u,ne(this,Xt,iw).call(this)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},WT=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;const[s,a]=this.parentDimensions;this.setDims(s*n,a*r),this.fixAndSetPosition(),this._onResized()},iw=function(){if(!g(this,Jd))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=g(this,Jd);G(this,Jd,null);const s=this.x,a=this.y,l=this.width,u=this.height;s===e&&a===t&&l===n&&u===r||this.addCommands({cmd:ne(this,Xt,WT).bind(this,s,a,l,u),undo:ne(this,Xt,WT).bind(this,e,t,n,r),mustExec:!0})},QT=function(e,t){const[n,r]=this.parentDimensions,s=this.x,a=this.y,l=this.width,u=this.height,d=En.MIN_SIZE/n,f=En.MIN_SIZE/r,p=ne(this,Xt,nw).call(this,this.rotation),y=(Q,ce)=>[p[0]*Q+p[2]*ce,p[1]*Q+p[3]*ce],v=ne(this,Xt,nw).call(this,360-this.rotation),C=(Q,ce)=>[v[0]*Q+v[2]*ce,v[1]*Q+v[3]*ce];let E,R,I=!1,D=!1;switch(e){case"topLeft":I=!0,E=(Q,ce)=>[0,0],R=(Q,ce)=>[Q,ce];break;case"topMiddle":E=(Q,ce)=>[Q/2,0],R=(Q,ce)=>[Q/2,ce];break;case"topRight":I=!0,E=(Q,ce)=>[Q,0],R=(Q,ce)=>[0,ce];break;case"middleRight":D=!0,E=(Q,ce)=>[Q,ce/2],R=(Q,ce)=>[0,ce/2];break;case"bottomRight":I=!0,E=(Q,ce)=>[Q,ce],R=(Q,ce)=>[0,0];break;case"bottomMiddle":E=(Q,ce)=>[Q/2,ce],R=(Q,ce)=>[Q/2,0];break;case"bottomLeft":I=!0,E=(Q,ce)=>[0,ce],R=(Q,ce)=>[Q,0];break;case"middleLeft":D=!0,E=(Q,ce)=>[0,ce/2],R=(Q,ce)=>[Q,ce/2];break}const j=E(l,u),X=R(l,u);let W=y(...X);const ue=En._round(s+W[0]),U=En._round(a+W[1]);let P=1,V=1,Y,O;if(t.fromKeyboard)({deltaX:Y,deltaY:O}=t);else{const{screenX:Q,screenY:ce}=t,[ge,Te]=g(this,Im);[Y,O]=this.screenToPageTranslation(Q-ge,ce-Te),g(this,Im)[0]=Q,g(this,Im)[1]=ce}if([Y,O]=C(Y/n,O/r),I){const Q=Math.hypot(l,u);P=V=Math.max(Math.min(Math.hypot(X[0]-j[0]-Y,X[1]-j[1]-O)/Q,1/l,1/u),d/l,f/u)}else D?P=qa(Math.abs(X[0]-j[0]-Y),d,1)/l:V=qa(Math.abs(X[1]-j[1]-O),f,1)/u;const F=En._round(l*P),B=En._round(u*V);W=y(...R(F,B));const H=ue-W[0],fe=U-W[1];g(this,Ko)||G(this,Ko,[this.x,this.y,this.width,this.height]),this.width=F,this.height=B,this.x=H,this.y=fe,this.setDims(n*F,r*B),this.fixAndSetPosition(),this._onResizing()},nD=function(){var e;G(this,Jd,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=g(this,Gi))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},iD=function(e,t,n){let s=.7*(n/t)+1-.7;if(s===1)return;const a=ne(this,Xt,nw).call(this,this.rotation),l=(ue,U)=>[a[0]*ue+a[2]*U,a[1]*ue+a[3]*U],[u,d]=this.parentDimensions,f=this.x,p=this.y,y=this.width,v=this.height,C=En.MIN_SIZE/u,E=En.MIN_SIZE/d;s=Math.max(Math.min(s,1/y,1/v),C/y,E/v);const R=En._round(y*s),I=En._round(v*s);if(R===y&&I===v)return;g(this,Ko)||G(this,Ko,[f,p,y,v]);const D=l(y/2,v/2),j=En._round(f+D[0]),X=En._round(p+D[1]),W=l(R/2,I/2);this.x=j-W[0],this.y=X-W[1],this.width=R,this.height=I,this.setDims(u*R,d*I),this.fixAndSetPosition(),this._onResizing()},rD=function(){var e;(e=g(this,Gi))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),ne(this,Xt,iw).call(this)},XT=function(e){const{isMac:t}=Js.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},sD=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:s},l=d=>{r.abort(),G(this,$f,null),G(this,Rm,!1),this._uiManager.endDragSession()||ne(this,Xt,XT).call(this,d),n&&this._onStopDragging()};t&&(G(this,gy,e.clientX),G(this,yy,e.clientY),G(this,$f,e.pointerId),G(this,Zb,e.pointerType),window.addEventListener("pointermove",d=>{n||(n=!0,this._onStartDragging());const{clientX:f,clientY:p,pointerId:y}=d;if(y!==g(this,$f)){Jr(d);return}const[v,C]=this.screenToPageTranslation(f-g(this,gy),p-g(this,yy));G(this,gy,f),G(this,yy,p),this._uiManager.dragSelectedEditors(v,C)},a),window.addEventListener("touchmove",Jr,a),window.addEventListener("pointerdown",d=>{d.pointerType===g(this,Zb)&&(g(this,Pm)||d.isPrimary)&&l(d),Jr(d)},a));const u=d=>{if(!g(this,$f)||g(this,$f)===d.pointerId){l(d);return}Jr(d)};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})},JT=function(){if(g(this,Hf)||!this.div)return;G(this,Hf,new AbortController);const e=this._uiManager.combinedSignal(g(this,Hf));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},aD=function(e){En._resizerKeyboardManager.exec(this,e)},oD=function(e){var t;g(this,Zd)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==g(this,js)&&ne(this,Xt,F1).call(this)},lD=function(e){G(this,e_,g(this,Zd)?e:"")},ZT=function(e){if(g(this,Nu))for(const t of g(this,Nu))t.tabIndex=e},F1=function(){G(this,Zd,!1),ne(this,Xt,ZT).call(this,-1),ne(this,Xt,iw).call(this)},te(En,i_),ht(En,"_l10n",null),ht(En,"_l10nResizer",null),ht(En,"_borderLineWidth",-1),ht(En,"_colorManager",new UT),ht(En,"_zIndex",1),ht(En,"_telemetryTimeout",1e3);let zi=En;class aU extends zi{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const JR=3285377520,Ol=4294901760,Ec=65535;class uD{constructor(e){this.h1=e?e&4294967295:JR,this.h2=e?e&4294967295:JR}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let E=0,R=e.length;E<R;E++){const I=e.charCodeAt(E);I<=255?t[n++]=I:(t[n++]=I>>>8,t[n++]=I&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,s=n-r*4,a=new Uint32Array(t.buffer,0,r);let l=0,u=0,d=this.h1,f=this.h2;const p=3432918353,y=461845907,v=p&Ec,C=y&Ec;for(let E=0;E<r;E++)E&1?(l=a[E],l=l*p&Ol|l*v&Ec,l=l<<15|l>>>17,l=l*y&Ol|l*C&Ec,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(u=a[E],u=u*p&Ol|u*v&Ec,u=u<<15|u>>>17,u=u*y&Ol|u*C&Ec,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(l=0,s){case 3:l^=t[r*4+2]<<16;case 2:l^=t[r*4+1]<<8;case 1:l^=t[r*4],l=l*p&Ol|l*v&Ec,l=l<<15|l>>>17,l=l*y&Ol|l*C&Ec,r&1?d^=l:f^=l}this.h1=d,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ol|e*36045&Ec,t=t*4283543511&Ol|((t<<16|e>>>16)*2950163797&Ol)>>>16,e^=t>>>1,e=e*444984403&Ol|e*60499&Ec,t=t*3301882366&Ol|((t<<16|e>>>16)*3120437893&Ol)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const eE=Object.freeze({map:null,hash:"",transfer:void 0});var Mm,Dm,qs,DA,cD;class uN{constructor(){te(this,DA);te(this,Mm,!1);te(this,Dm,null);te(this,qs,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=g(this,qs).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return g(this,qs).get(e)}remove(e){if(g(this,qs).delete(e),g(this,qs).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of g(this,qs).values())if(t instanceof zi)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=g(this,qs).get(e);let r=!1;if(n!==void 0)for(const[s,a]of Object.entries(t))n[s]!==a&&(r=!0,n[s]=a);else r=!0,g(this,qs).set(e,t);r&&ne(this,DA,cD).call(this),t instanceof zi&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return g(this,qs).has(e)}get size(){return g(this,qs).size}resetModified(){g(this,Mm)&&(G(this,Mm,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new dD(this)}get serializable(){if(g(this,qs).size===0)return eE;const e=new Map,t=new uD,n=[],r=Object.create(null);let s=!1;for(const[a,l]of g(this,qs)){const u=l instanceof zi?l.serialize(!1,r):l;u&&(e.set(a,u),t.update(`${a}:${JSON.stringify(u)}`),s||(s=!!u.bitmap))}if(s)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:eE}get editorStats(){let e=null;const t=new Map;for(const n of g(this,qs).values()){if(!(n instanceof zi))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const a=e[s]||(e[s]=new Map);for(const[l,u]of Object.entries(r)){if(l==="type")continue;let d=a.get(l);d||(d=new Map,a.set(l,d));const f=d.get(u)??0;d.set(u,f+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){G(this,Dm,null)}get modifiedIds(){if(g(this,Dm))return g(this,Dm);const e=[];for(const t of g(this,qs).values())!(t instanceof zi)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return G(this,Dm,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return g(this,qs).entries()}}Mm=new WeakMap,Dm=new WeakMap,qs=new WeakMap,DA=new WeakSet,cD=function(){g(this,Mm)||(G(this,Mm,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var r_;class dD extends uN{constructor(t){super();te(this,r_);const{map:n,hash:r,transfer:s}=t.serializable,a=structuredClone(n,s?{transfer:s}:null);G(this,r_,{map:a,hash:r,transfer:s})}get print(){Ii("Should not call PrintAnnotationStorage.print")}get serializable(){return g(this,r_)}get modifiedIds(){return Vn(this,"modifiedIds",{ids:new Set,hash:""})}}r_=new WeakMap;var vy;class oU{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){te(this,vy,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),g(this,vy).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||g(this,vy).has(e.loadedName))){if(es(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:a}=e,l=new FontFace(r,s,a);this.addNativeFontFace(l);try{await l.load(),g(this,vy).add(r),n==null||n(e)}catch{_n(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Ii("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw _n(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Vn(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Vn(this,"isSyncFontLoadingSupported",ja||Js.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(es(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Vn(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(X,W){return X.charCodeAt(W)<<24|X.charCodeAt(W+1)<<16|X.charCodeAt(W+2)<<8|X.charCodeAt(W+3)&255}function r(X,W,ue,U){const P=X.substring(0,W),V=X.substring(W+ue);return P+U+V}let s,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const u=l.getContext("2d");let d=0;function f(X,W){if(++d>30){_n("Load test font never loaded."),W();return}if(u.font="30px "+X,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){W();return}setTimeout(f.bind(null,X,W))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,p.length,p);const C=16,E=1482184792;let R=n(y,C);for(s=0,a=p.length-3;s<a;s+=4)R=R-E+n(p,s)|0;s<p.length&&(R=R-E+n(p+"XXX",s)|0),y=r(y,C,4,HB(R));const I=`url(data:font/opentype;base64,${btoa(y)});`,D=`@font-face {font-family:"${p}";src:${I}}`;this.insertRule(D);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const X of[e.loadedName,p]){const W=this._document.createElement("span");W.textContent="Hi",W.style.fontFamily=X,j.append(W)}this._document.body.append(j),f(p,()=>{j.remove(),t.complete()})}}vy=new WeakMap;class lU{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${RM(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(a){_n(`getPathGenerator - ignoring character: "${a}".`)}const s=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=s}}function uU(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(ja)return i;const e=URL.parse(i,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function cU(i){if(ja&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return o2(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ix(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const tE=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,dU=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",hU=QB.bind(null,tE,dU);var eh,OA;class fU{constructor(){te(this,eh,new Map);te(this,OA,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};g(this,OA).then(()=>{for(const[r]of g(this,eh))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted){_n("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}g(this,eh).set(t,r)}removeEventListener(e,t){const n=g(this,eh).get(t);n==null||n(),g(this,eh).delete(t)}terminate(){for(const[,e]of g(this,eh))e==null||e();g(this,eh).clear()}}eh=new WeakMap,OA=new WeakMap;const Rx={DATA:1,ERROR:2},Kr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ZR(){}function ho(i){if(i instanceof Ap||i instanceof DT||i instanceof WR||i instanceof Kw||i instanceof XS)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Ii('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Ap(i.message);case"InvalidPDFException":return new DT(i.message);case"PasswordException":return new WR(i.message,i.code);case"ResponseException":return new Kw(i.message,i.status,i.missing);case"UnknownErrorException":return new XS(i.message,i.details)}return new XS(i.message,i.toString())}var by,Gl,hD,fD,pD,rw;class V1{constructor(e,t,n){te(this,Gl);te(this,by,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",ne(this,Gl,hD).bind(this),{signal:g(this,by).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,n,r){const s=this.streamId++,a=this.sourceName,l=this.targetName,u=this.comObj;return new ReadableStream({start:d=>{const f=Promise.withResolvers();return this.streamControllers[s]={controller:d,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:a,targetName:l,action:e,streamId:s,data:t,desiredSize:d.desiredSize},r),f.promise},pull:d=>{const f=Promise.withResolvers();return this.streamControllers[s].pullCall=f,u.postMessage({sourceName:a,targetName:l,stream:Kr.PULL,streamId:s,desiredSize:d.desiredSize}),f.promise},cancel:d=>{es(d instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[s].cancelCall=f,this.streamControllers[s].isClosed=!0,u.postMessage({sourceName:a,targetName:l,stream:Kr.CANCEL,streamId:s,reason:ho(d)}),f.promise}},n)}destroy(){var e;(e=g(this,by))==null||e.abort(),G(this,by,null)}}by=new WeakMap,Gl=new WeakSet,hD=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){ne(this,Gl,pD).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Rx.DATA)r.resolve(e.data);else if(e.callback===Rx.ERROR)r.reject(ho(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:n,targetName:r,callback:Rx.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:n,targetName:r,callback:Rx.ERROR,callbackId:e.callbackId,reason:ho(a)})});return}if(e.streamId){ne(this,Gl,fD).call(this,e);return}t(e.data)},fD=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,a=this,l=this.actionHandler[e.action],u={enqueue(d,f=1,p){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=f,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:r,stream:Kr.ENQUEUE,streamId:t,chunk:d},p)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:Kr.CLOSE,streamId:t}),delete a.streamSinks[t])},error(d){es(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:Kr.ERROR,streamId:t,reason:ho(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(l,e.data,u).then(function(){s.postMessage({sourceName:n,targetName:r,stream:Kr.START_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:n,targetName:r,stream:Kr.START_COMPLETE,streamId:t,reason:ho(d)})})},pD=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Kr.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(ho(e.reason));break;case Kr.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(ho(e.reason));break;case Kr.PULL:if(!l){s.postMessage({sourceName:n,targetName:r,stream:Kr.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||ZR).then(function(){s.postMessage({sourceName:n,targetName:r,stream:Kr.PULL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:n,targetName:r,stream:Kr.PULL_COMPLETE,streamId:t,reason:ho(d)})});break;case Kr.ENQUEUE:if(es(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Kr.CLOSE:if(es(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),ne(this,Gl,rw).call(this,a,t);break;case Kr.ERROR:es(a,"error should have stream controller"),a.controller.error(ho(e.reason)),ne(this,Gl,rw).call(this,a,t);break;case Kr.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(ho(e.reason)),ne(this,Gl,rw).call(this,a,t);break;case Kr.CANCEL:if(!l)break;const u=ho(e.reason);Promise.try(l.onCancel||ZR,u).then(function(){s.postMessage({sourceName:n,targetName:r,stream:Kr.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:n,targetName:r,stream:Kr.CANCEL_COMPLETE,streamId:t,reason:ho(d)})}),l.sinkCapability.reject(u),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},rw=async function(e,t){var n,r,s;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var s_;class mD{constructor({enableHWA:e=!1}){te(this,s_,!1);G(this,s_,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!g(this,s_)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ii("Abstract method `_createCanvas` called.")}}s_=new WeakMap;class pU extends mD{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class gD{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ii("Abstract method `_fetch` called.")}}class e3 extends gD{async _fetch(e){const t=await l2(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):o2(t)}}class yD{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,s){return"none"}destroy(e=!1){}}var Om,_y,th,nh,wa,Fm,Vm,Nt,_a,B1,T0,sw,E0,vD,nE,C0,U1,z1,iE,j1;class mU extends yD{constructor({docId:t,ownerDocument:n=globalThis.document}){super();te(this,Nt);te(this,Om);te(this,_y);te(this,th);te(this,nh);te(this,wa);te(this,Fm);te(this,Vm,0);G(this,nh,t),G(this,wa,n)}addFilter(t){if(!t)return"none";let n=g(this,Nt,_a).get(t);if(n)return n;const[r,s,a]=ne(this,Nt,sw).call(this,t),l=t.length===1?r:`${r}${s}${a}`;if(n=g(this,Nt,_a).get(l),n)return g(this,Nt,_a).set(t,n),n;const u=`g_${g(this,nh)}_transfer_map_${Oa(this,Vm)._++}`,d=ne(this,Nt,E0).call(this,u);g(this,Nt,_a).set(t,d),g(this,Nt,_a).set(l,d);const f=ne(this,Nt,C0).call(this,u);return ne(this,Nt,z1).call(this,r,s,a,f),d}addHCMFilter(t,n){var C;const r=`${t}-${n}`,s="base";let a=g(this,Nt,B1).get(s);if((a==null?void 0:a.key)===r||(a?((C=a.filter)==null||C.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},g(this,Nt,B1).set(s,a)),!t||!n))return a.url;const l=ne(this,Nt,j1).call(this,t);t=jt.makeHexColor(...l);const u=ne(this,Nt,j1).call(this,n);if(n=jt.makeHexColor(...u),g(this,Nt,T0).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const d=new Array(256);for(let E=0;E<=255;E++){const R=E/255;d[E]=R<=.03928?R/12.92:((R+.055)/1.055)**2.4}const f=d.join(","),p=`g_${g(this,nh)}_hcm_filter`,y=a.filter=ne(this,Nt,C0).call(this,p);ne(this,Nt,z1).call(this,f,f,f,y),ne(this,Nt,nE).call(this,y);const v=(E,R)=>{const I=l[E]/255,D=u[E]/255,j=new Array(R+1);for(let X=0;X<=R;X++)j[X]=I+X/R*(D-I);return j.join(",")};return ne(this,Nt,z1).call(this,v(0,5),v(1,5),v(2,5),y),a.url=ne(this,Nt,E0).call(this,p),a.url}addAlphaFilter(t){let n=g(this,Nt,_a).get(t);if(n)return n;const[r]=ne(this,Nt,sw).call(this,[t]),s=`alpha_${r}`;if(n=g(this,Nt,_a).get(s),n)return g(this,Nt,_a).set(t,n),n;const a=`g_${g(this,nh)}_alpha_map_${Oa(this,Vm)._++}`,l=ne(this,Nt,E0).call(this,a);g(this,Nt,_a).set(t,l),g(this,Nt,_a).set(s,l);const u=ne(this,Nt,C0).call(this,a);return ne(this,Nt,iE).call(this,r,u),l}addLuminosityFilter(t){let n=g(this,Nt,_a).get(t||"luminosity");if(n)return n;let r,s;if(t?([r]=ne(this,Nt,sw).call(this,[t]),s=`luminosity_${r}`):s="luminosity",n=g(this,Nt,_a).get(s),n)return g(this,Nt,_a).set(t,n),n;const a=`g_${g(this,nh)}_luminosity_map_${Oa(this,Vm)._++}`,l=ne(this,Nt,E0).call(this,a);g(this,Nt,_a).set(t,l),g(this,Nt,_a).set(s,l);const u=ne(this,Nt,C0).call(this,a);return ne(this,Nt,vD).call(this,u),t&&ne(this,Nt,iE).call(this,r,u),l}addHighlightHCMFilter(t,n,r,s,a){var D;const l=`${n}-${r}-${s}-${a}`;let u=g(this,Nt,B1).get(t);if((u==null?void 0:u.key)===l||(u?((D=u.filter)==null||D.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},g(this,Nt,B1).set(t,u)),!n||!r))return u.url;const[d,f]=[n,r].map(ne(this,Nt,j1).bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,C]=[s,a].map(ne(this,Nt,j1).bind(this));y<p&&([p,y,v,C]=[y,p,C,v]),g(this,Nt,T0).style.color="";const E=(j,X,W)=>{const ue=new Array(256),U=(y-p)/W,P=j/255,V=(X-j)/(255*W);let Y=0;for(let O=0;O<=W;O++){const F=Math.round(p+O*U),B=P+O*V;for(let H=Y;H<=F;H++)ue[H]=B;Y=F+1}for(let O=Y;O<256;O++)ue[O]=ue[Y-1];return ue.join(",")},R=`g_${g(this,nh)}_hcm_${t}_filter`,I=u.filter=ne(this,Nt,C0).call(this,R);return ne(this,Nt,nE).call(this,I),ne(this,Nt,z1).call(this,E(v[0],C[0],5),E(v[1],C[1],5),E(v[2],C[2],5),I),u.url=ne(this,Nt,E0).call(this,R),u.url}destroy(t=!1){var n,r,s,a;t&&((n=g(this,Fm))!=null&&n.size)||((r=g(this,th))==null||r.parentNode.parentNode.remove(),G(this,th,null),(s=g(this,_y))==null||s.clear(),G(this,_y,null),(a=g(this,Fm))==null||a.clear(),G(this,Fm,null),G(this,Vm,0))}}Om=new WeakMap,_y=new WeakMap,th=new WeakMap,nh=new WeakMap,wa=new WeakMap,Fm=new WeakMap,Vm=new WeakMap,Nt=new WeakSet,_a=function(){return g(this,_y)||G(this,_y,new Map)},B1=function(){return g(this,Fm)||G(this,Fm,new Map)},T0=function(){if(!g(this,th)){const t=g(this,wa).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=g(this,wa).createElementNS(Ud,"svg");r.setAttribute("width",0),r.setAttribute("height",0),G(this,th,g(this,wa).createElementNS(Ud,"defs")),t.append(r),r.append(g(this,th)),g(this,wa).body.append(t)}return g(this,th)},sw=function(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const p=f.join(",");return[p,p,p]}const[n,r,s]=t,a=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)a[d]=n[d]/255,l[d]=r[d]/255,u[d]=s[d]/255;return[a.join(","),l.join(","),u.join(",")]},E0=function(t){if(g(this,Om)===void 0){G(this,Om,"");const n=g(this,wa).URL;n!==g(this,wa).baseURI&&(ZA(n)?_n('#createUrl: ignore "data:"-URL for performance reasons.'):G(this,Om,NM(n,"")))}return`url(${g(this,Om)}#${t})`},vD=function(t){const n=g(this,wa).createElementNS(Ud,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},nE=function(t){const n=g(this,wa).createElementNS(Ud,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},C0=function(t){const n=g(this,wa).createElementNS(Ud,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),g(this,Nt,T0).append(n),n},U1=function(t,n,r){const s=g(this,wa).createElementNS(Ud,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),t.append(s)},z1=function(t,n,r,s){const a=g(this,wa).createElementNS(Ud,"feComponentTransfer");s.append(a),ne(this,Nt,U1).call(this,a,"feFuncR",t),ne(this,Nt,U1).call(this,a,"feFuncG",n),ne(this,Nt,U1).call(this,a,"feFuncB",r)},iE=function(t,n){const r=g(this,wa).createElementNS(Ud,"feComponentTransfer");n.append(r),ne(this,Nt,U1).call(this,r,"feFuncA",t)},j1=function(t){return g(this,Nt,T0).style.color=t,lN(getComputedStyle(g(this,Nt,T0)).getPropertyValue("color"))};class bD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ii("Abstract method `_fetch` called.")}}class t3 extends bD{async _fetch(e){const t=await l2(e,"arraybuffer");return new Uint8Array(t)}}class _D{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Ii("Abstract method `_fetch` called.")}}class n3 extends _D{async _fetch(e){const t=await l2(e,"arraybuffer");return new Uint8Array(t)}}ja&&_n("Please use the `legacy` build in Node.js environments.");async function cN(i){const t=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)}class gU extends yD{}class yU extends mD{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class vU extends gD{async _fetch(e){return cN(e)}}class bU extends bD{async _fetch(e){return cN(e)}}class _U extends _D{async _fetch(e){return cN(e)}}const Gs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function rE(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),i.clip(r)}class dN{isModifyingCurrentTransform(){return!1}getPattern(){Ii("Abstract method `getPattern` called.")}}class xU extends dN{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let s;if(r===Gs.STROKE||r===Gs.FILL){const a=t.current.getClippedPathBoundingBox(r,cr(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,u=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,u),f=d.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),n=jt.transform(n,[1,0,0,1,a[0],a[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),rE(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),s=e.createPattern(d.canvas,"no-repeat");const p=new DOMMatrix(n);s.setTransform(p)}else rE(e,this._bbox),s=this._createGradient(e);return s}}function eT(i,e,t,n,r,s,a,l){const u=e.coords,d=e.colors,f=i.data,p=i.width*4;let y;u[t+1]>u[n+1]&&(y=t,t=n,n=y,y=s,s=a,a=y),u[n+1]>u[r+1]&&(y=n,n=r,r=y,y=a,a=l,l=y),u[t+1]>u[n+1]&&(y=t,t=n,n=y,y=s,s=a,a=y);const v=(u[t]+e.offsetX)*e.scaleX,C=(u[t+1]+e.offsetY)*e.scaleY,E=(u[n]+e.offsetX)*e.scaleX,R=(u[n+1]+e.offsetY)*e.scaleY,I=(u[r]+e.offsetX)*e.scaleX,D=(u[r+1]+e.offsetY)*e.scaleY;if(C>=D)return;const j=d[s],X=d[s+1],W=d[s+2],ue=d[a],U=d[a+1],P=d[a+2],V=d[l],Y=d[l+1],O=d[l+2],F=Math.round(C),B=Math.round(D);let H,fe,Q,ce,ge,Te,re,xe;for(let q=F;q<=B;q++){if(q<R){const Ae=q<C?0:(C-q)/(C-R);H=v-(v-E)*Ae,fe=j-(j-ue)*Ae,Q=X-(X-U)*Ae,ce=W-(W-P)*Ae}else{let Ae;q>D?Ae=1:R===D?Ae=0:Ae=(R-q)/(R-D),H=E-(E-I)*Ae,fe=ue-(ue-V)*Ae,Q=U-(U-Y)*Ae,ce=P-(P-O)*Ae}let ee;q<C?ee=0:q>D?ee=1:ee=(C-q)/(C-D),ge=v-(v-I)*ee,Te=j-(j-V)*ee,re=X-(X-Y)*ee,xe=W-(W-O)*ee;const he=Math.round(Math.min(H,ge)),me=Math.round(Math.max(H,ge));let ye=p*q+he*4;for(let Ae=he;Ae<=me;Ae++)ee=(H-Ae)/(H-ge),ee<0?ee=0:ee>1&&(ee=1),f[ye++]=fe-(fe-Te)*ee|0,f[ye++]=Q-(Q-re)*ee|0,f[ye++]=ce-(ce-xe)*ee|0,f[ye++]=255}}function wU(i,e,t){const n=e.coords,r=e.colors;let s,a;switch(e.type){case"lattice":const l=e.verticesPerRow,u=Math.floor(n.length/l)-1,d=l-1;for(s=0;s<u;s++){let f=s*l;for(let p=0;p<d;p++,f++)eT(i,t,n[f],n[f+1],n[f+l],r[f],r[f+1],r[f+l]),eT(i,t,n[f+l+1],n[f+1],n[f+l],r[f+l+1],r[f+1],r[f+l])}break;case"triangles":for(s=0,a=n.length;s<a;s+=3)eT(i,t,n[s],n[s+1],n[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class AU extends dN{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const l=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,f=Math.ceil(this._bounds[3])-u,p=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),v=d/p,C=f/y,E={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-u,scaleX:1/v,scaleY:1/C},R=p+2*2,I=y+2*2,D=n.getCanvas("mesh",R,I),j=D.context,X=j.createImageData(p,y);if(t){const ue=X.data;for(let U=0,P=ue.length;U<P;U+=4)ue[U]=t[0],ue[U+1]=t[1],ue[U+2]=t[2],ue[U+3]=255}for(const ue of this._figures)wU(X,ue,E);return j.putImageData(X,2,2),{canvas:D.canvas,offsetX:l-2*v,offsetY:u-2*C,scaleX:v,scaleY:C}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){rE(e,this._bbox);const s=new Float32Array(2);if(r===Gs.SHADING)jt.singularValueDecompose2dScale(cr(e),s);else if(this.matrix){jt.singularValueDecompose2dScale(this.matrix,s);const[l,u]=s;jt.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=l,s[1]*=u}else jt.singularValueDecompose2dScale(t.baseTransform,s);const a=this._createMeshCanvas(s,r===Gs.SHADING?null:this._background,t.cachedCanvases);return r!==Gs.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class SU extends dN{getPattern(){return"hotpink"}}function TU(i){switch(i[0]){case"RadialAxial":return new xU(i);case"Mesh":return new AU(i);case"Dummy":return new SU}throw new Error(`Unknown IR type: ${i[0]}`)}const i3={COLORED:1,UNCOLORED:2},FA=class FA{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:s,color:a,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),JA("TilingType: "+s);const f=t[0],p=t[1],y=t[2],v=t[3],C=y-f,E=v-p,R=new Float32Array(2);jt.singularValueDecompose2dScale(this.matrix,R);const[I,D]=R;jt.singularValueDecompose2dScale(this.baseTransform,R);const j=I*R[0],X=D*R[1];let W=C,ue=E,U=!1,P=!1;const V=Math.ceil(u*j),Y=Math.ceil(d*X),O=Math.ceil(C*j),F=Math.ceil(E*X);V>=O?W=u:U=!0,Y>=F?ue=d:P=!0;const B=this.getSizeAndScale(W,this.ctx.canvas.width,j),H=this.getSizeAndScale(ue,this.ctx.canvas.height,X),fe=e.cachedCanvases.getCanvas("pattern",B.size,H.size),Q=fe.context,ce=l.createCanvasGraphics(Q);if(ce.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ce,r,a),Q.translate(-B.scale*f,-H.scale*p),ce.transform(B.scale,0,0,H.scale,0,0),Q.save(),this.clipBbox(ce,f,p,y,v),ce.baseTransform=cr(ce.ctx),ce.executeOperatorList(n),ce.endDrawing(),Q.restore(),U||P){const ge=fe.canvas;U&&(W=u),P&&(ue=d);const Te=this.getSizeAndScale(W,this.ctx.canvas.width,j),re=this.getSizeAndScale(ue,this.ctx.canvas.height,X),xe=Te.size,q=re.size,ee=e.cachedCanvases.getCanvas("pattern-workaround",xe,q),he=ee.context,me=U?Math.floor(C/u):0,ye=P?Math.floor(E/d):0;for(let Ae=0;Ae<=me;Ae++)for(let Ie=0;Ie<=ye;Ie++)he.drawImage(ge,xe*Ae,q*Ie,xe,q,0,0,xe,q);return{canvas:ee.canvas,scaleX:Te.scale,scaleY:re.scale,offsetX:f,offsetY:p}}return{canvas:fe.canvas,scaleX:B.scale,scaleY:H.scale,offsetX:f,offsetY:p}}getSizeAndScale(e,t,n){const r=Math.max(FA.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=r?s=r:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,r,s){const a=r-t,l=s-n;e.ctx.rect(t,n,a,l),jt.axialAlignedBoundingBox([t,n,r,s],cr(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,s=e.current;switch(t){case i3.COLORED:const{fillStyle:a,strokeStyle:l}=this.ctx;r.fillStyle=s.fillColor=a,r.strokeStyle=s.strokeColor=l;break;case i3.UNCOLORED:r.fillStyle=r.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new $B(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r){let s=n;r!==Gs.SHADING&&(s=jt.transform(s,t.baseTransform),this.matrix&&(s=jt.transform(s,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(s);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const u=e.createPattern(a.canvas,"repeat");return u.setTransform(l),u}};ht(FA,"MAX_PATTERN_SIZE",3e3);let sE=FA;function EU({src:i,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const l=Js.isLittleEndian?4278190080:255,[u,d]=a?[s,l]:[l,s],f=n>>3,p=n&7,y=i.length;t=new Uint32Array(t.buffer);let v=0;for(let C=0;C<r;C++){for(const R=e+f;e<R;e++){const I=e<y?i[e]:255;t[v++]=I&128?d:u,t[v++]=I&64?d:u,t[v++]=I&32?d:u,t[v++]=I&16?d:u,t[v++]=I&8?d:u,t[v++]=I&4?d:u,t[v++]=I&2?d:u,t[v++]=I&1?d:u}if(p===0)continue;const E=e<y?i[e++]:255;for(let R=0;R<p;R++)t[v++]=E&1<<7-R?d:u}return{srcPos:e,destPos:v}}const r3=16,s3=100,CU=15,a3=10,vo=16,tT=new DOMMatrix,al=new Float32Array(2),U0=new Float32Array([1/0,1/0,-1/0,-1/0]);function NU(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},i.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},i.transform=function(t,n,r,s,a,l){e.transform(t,n,r,s,a,l),this.__originalTransform(t,n,r,s,a,l)},i.setTransform=function(t,n,r,s,a,l){e.setTransform(t,n,r,s,a,l),this.__originalSetTransform(t,n,r,s,a,l)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(t){e.rotate(t),this.__originalRotate(t)},i.clip=function(t){e.clip(t),this.__originalClip(t)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,r,s,a,l){e.bezierCurveTo(t,n,r,s,a,l),this.__originalBezierCurveTo(t,n,r,s,a,l)},i.rect=function(t,n,r,s){e.rect(t,n,r,s),this.__originalRect(t,n,r,s)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class kU{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Lx(i,e,t,n,r,s,a,l,u,d){const[f,p,y,v,C,E]=cr(i);if(p===0&&y===0){const D=a*f+C,j=Math.round(D),X=l*v+E,W=Math.round(X),ue=(a+u)*f+C,U=Math.abs(Math.round(ue)-j)||1,P=(l+d)*v+E,V=Math.abs(Math.round(P)-W)||1;return i.setTransform(Math.sign(f),0,0,Math.sign(v),j,W),i.drawImage(e,t,n,r,s,0,0,U,V),i.setTransform(f,p,y,v,C,E),[U,V]}if(f===0&&v===0){const D=l*y+C,j=Math.round(D),X=a*p+E,W=Math.round(X),ue=(l+d)*y+C,U=Math.abs(Math.round(ue)-j)||1,P=(a+u)*p+E,V=Math.abs(Math.round(P)-W)||1;return i.setTransform(0,Math.sign(p),Math.sign(y),0,j,W),i.drawImage(e,t,n,r,s,0,0,V,U),i.setTransform(f,p,y,v,C,E),[V,U]}i.drawImage(e,t,n,r,s,a,l,u,d);const R=Math.hypot(f,p),I=Math.hypot(y,v);return[R*u,I*d]}class o3{constructor(e,t){ht(this,"alphaIsShape",!1);ht(this,"fontSize",0);ht(this,"fontSizeScale",1);ht(this,"textMatrix",null);ht(this,"textMatrixScale",1);ht(this,"fontMatrix",MT);ht(this,"leading",0);ht(this,"x",0);ht(this,"y",0);ht(this,"lineX",0);ht(this,"lineY",0);ht(this,"charSpacing",0);ht(this,"wordSpacing",0);ht(this,"textHScale",1);ht(this,"textRenderingMode",ba.FILL);ht(this,"textRise",0);ht(this,"fillColor","#000000");ht(this,"strokeColor","#000000");ht(this,"patternFill",!1);ht(this,"patternStroke",!1);ht(this,"fillAlpha",1);ht(this,"strokeAlpha",1);ht(this,"lineWidth",1);ht(this,"activeSMask",null);ht(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=U0.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Gs.FILL,t=null){const n=this.minMax.slice();if(e===Gs.STROKE){t||Ii("Stroke bounding box must include transform."),jt.singularValueDecompose2dScale(t,al);const r=al[0]*this.lineWidth/2,s=al[1]*this.lineWidth/2;n[0]-=r,n[1]-=s,n[2]+=r,n[3]+=s}return n}updateClipFromPath(){const e=jt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(U0,0)}getClippedPathBoundingBox(e=Gs.FILL,t=null){return jt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function l3(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%vo,s=(t-r)/vo,a=r===0?s:s+1,l=i.createImageData(n,vo);let u=0,d;const f=e.data,p=l.data;let y,v,C,E;if(e.kind===Wx.GRAYSCALE_1BPP){const R=f.byteLength,I=new Uint32Array(p.buffer,0,p.byteLength>>2),D=I.length,j=n+7>>3,X=4294967295,W=Js.isLittleEndian?4278190080:255;for(y=0;y<a;y++){for(C=y<s?vo:r,d=0,v=0;v<C;v++){const ue=R-u;let U=0;const P=ue>j?n:ue*8-7,V=P&-8;let Y=0,O=0;for(;U<V;U+=8)O=f[u++],I[d++]=O&128?X:W,I[d++]=O&64?X:W,I[d++]=O&32?X:W,I[d++]=O&16?X:W,I[d++]=O&8?X:W,I[d++]=O&4?X:W,I[d++]=O&2?X:W,I[d++]=O&1?X:W;for(;U<P;U++)Y===0&&(O=f[u++],Y=128),I[d++]=O&Y?X:W,Y>>=1}for(;d<D;)I[d++]=0;i.putImageData(l,0,y*vo)}}else if(e.kind===Wx.RGBA_32BPP){for(v=0,E=n*vo*4,y=0;y<s;y++)p.set(f.subarray(u,u+E)),u+=E,i.putImageData(l,0,v),v+=vo;y<a&&(E=n*r*4,p.set(f.subarray(u,u+E)),i.putImageData(l,0,v))}else if(e.kind===Wx.RGB_24BPP)for(C=vo,E=n*C,y=0;y<a;y++){for(y>=s&&(C=r,E=n*C),d=0,v=E;v--;)p[d++]=f[u++],p[d++]=f[u++],p[d++]=f[u++],p[d++]=255;i.putImageData(l,0,y*vo)}else throw new Error(`bad image kind: ${e.kind}`)}function u3(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%vo,s=(t-r)/vo,a=r===0?s:s+1,l=i.createImageData(n,vo);let u=0;const d=e.data,f=l.data;for(let p=0;p<a;p++){const y=p<s?vo:r;({srcPos:u}=EU({src:d,srcPos:u,dest:f,width:n,height:y,nonBlackColor:0})),i.putImageData(l,0,p*vo)}}function w1(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function Px(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}function c3(i,e){if(e)return!0;jt.singularValueDecompose2dScale(i,al);const t=Math.fround(nd.pixelRatio*Sp.PDF_TO_CSS_UNITS);return al[0]<=t&&al[1]<=t}const IU=["butt","round","square"],RU=["miter","round","bevel"],LU={},d3={};var Hu,aE,oE,lE;const Sk=class Sk{constructor(e,t,n,r,s,{optionalContentConfig:a,markedContentStack:l=null},u,d){te(this,Hu);this.ctx=e,this.current=new o3(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new kU(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=l,n){const u=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...cr(this.compositeCtx))}this.ctx.save(),Px(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=cr(this.ctx)}executeOperatorList(e,t,n,r){const s=e.argsArray,a=e.fnArray;let l=t||0;const u=s.length;if(u===l)return l;const d=u-l>a3&&typeof n=="function",f=d?Date.now()+CU:0;let p=0;const y=this.commonObjs,v=this.objs;let C;for(;;){if(r!==void 0&&l===r.nextBreakPoint)return r.breakIt(l,n),l;if(C=a[l],C!==Yw.dependency)this[C].apply(this,s[l]);else for(const E of s[l]){const R=E.startsWith("g_")?y:v;if(!R.has(E))return R.get(E,n),l}if(l++,l===u)return l;if(d&&++p>a3){if(Date.now()>f)return n(),l;p=0}}}endDrawing(){ne(this,Hu,aE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),ne(this,Hu,oE).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=n,u=r,d="prescale1",f,p;for(;s>2&&l>1||a>2&&u>1;){let y=l,v=u;s>2&&l>1&&(y=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/y),a>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,a/=u/v),f=this.cachedCanvases.getCanvas(d,y,v),p=f.context,p.clearRect(0,0,y,v),p.drawImage(e,0,0,l,u,0,0,y,v),e=f.canvas,l=y,u=v,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,s=this.current.fillColor,a=this.current.patternFill,l=cr(t);let u,d,f,p;if((e.bitmap||e.data)&&e.count>1){const V=e.bitmap||e.data.buffer;d=JSON.stringify(a?l:[l.slice(0,4),s]),u=this._cachedBitmapsMap.get(V),u||(u=new Map,this._cachedBitmapsMap.set(V,u));const Y=u.get(d);if(Y&&!a){const O=Math.round(Math.min(l[0],l[2])+l[4]),F=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:Y,offsetX:O,offsetY:F}}f=Y}f||(p=this.cachedCanvases.getCanvas("maskCanvas",n,r),u3(p.context,e));let y=jt.transform(l,[1/n,0,0,-1/r,0,0]);y=jt.transform(y,[1,0,0,1,0,-r]);const v=U0.slice();jt.axialAlignedBoundingBox([0,0,n,r],y,v);const[C,E,R,I]=v,D=Math.round(R-C)||1,j=Math.round(I-E)||1,X=this.cachedCanvases.getCanvas("fillCanvas",D,j),W=X.context,ue=C,U=E;W.translate(-ue,-U),W.transform(...y),f||(f=this._scaleImage(p.canvas,Tc(W)),f=f.img,u&&a&&u.set(d,f)),W.imageSmoothingEnabled=c3(cr(W),e.interpolate),Lx(W,f,0,0,f.width,f.height,0,0,n,r),W.globalCompositeOperation="source-in";const P=jt.transform(Tc(W),[1,0,0,1,-ue,-U]);return W.fillStyle=a?s.getPattern(t,this,P,Gs.FILL):s,W.fillRect(0,0,n,r),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,X.canvas)),{canvas:X.canvas,offsetX:Math.round(ue),offsetY:Math.round(U)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=IU[e]}setLineJoin(e){this.ctx.lineJoin=RU[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx;const s=this.ctx=r.context;s.setTransform(this.suspendedCtx.getTransform()),w1(this.suspendedCtx,s),NU(s,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),w1(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const s=r[0],a=r[1],l=r[2]-s,u=r[3]-a;l===0||u===0||(this.genericComposeSMask(t.context,n,l,u,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,s,a,l,u,d,f,p){let y=e.canvas,v=u-f,C=d-p;if(a)if(v<0||C<0||v+n>y.width||C+r>y.height){const R=this.cachedCanvases.getCanvas("maskExtension",n,r),I=R.context;I.drawImage(y,-v,-C),I.globalCompositeOperation="destination-atop",I.fillStyle=a,I.fillRect(0,0,n,r),I.globalCompositeOperation="source-over",y=R.canvas,v=C=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const R=new Path2D;R.rect(v,C,n,r),e.clip(R),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(v,C,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const E=new Path2D;E.rect(u,d,n,r),t.clip(E),t.globalCompositeOperation="destination-in",t.drawImage(y,v,C,n,r,u,d,n,r),t.restore()}save(){this.inSMaskMode&&w1(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&w1(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,s,a){this.ctx.transform(e,t,n,r,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let[r]=t;if(!n){r||(r=t[0]=new Path2D),this[e](r);return}if(!(r instanceof Path2D)){const s=t[0]=new Path2D;for(let a=0,l=r.length;a<l;)switch(r[a++]){case kx.moveTo:s.moveTo(r[a++],r[a++]);break;case kx.lineTo:s.lineTo(r[a++],r[a++]);break;case kx.curveTo:s.bezierCurveTo(r[a++],r[a++],r[a++],r[a++],r[a++],r[a++]);break;case kx.closePath:s.closePath();break;default:_n(`Unrecognized drawing path operator: ${r[a-1]}`);break}r=s}jt.axialAlignedBoundingBox(n,cr(this.ctx),this.current.minMax),this[e](r)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const n=this.ctx,r=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const s=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=r.getPattern(n,this,Tc(n),Gs.STROKE),s){const a=new Path2D;a.addPath(e,n.getTransform().invertSelf().multiplySelf(s)),e=a}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(Gs.STROKE,cr(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const n=this.ctx,r=this.current.fillColor,s=this.current.patternFill;let a=!1;if(s){const u=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=r.getPattern(n,this,Tc(n),Gs.FILL),u){const d=new Path2D;d.addPath(e,n.getTransform().invertSelf().multiplySelf(u)),e=d}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),a&&n.restore(),t&&this.consumePath(e,l)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=LU}eoClip(){this.pendingClip=d3}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const n=new Path2D,r=t.getTransform().invertSelf();for(const{transform:s,x:a,y:l,fontSize:u,path:d}of e)n.addPath(d,new DOMMatrix(s).preMultiplySelf(r).translate(a,l).scale(u,-u));t.clip(n),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var f;const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||MT,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&_n("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const s=n.loadedName||"sans-serif",a=((f=n.systemFontInfo)==null?void 0:f.css)||`"${s}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const u=n.italic?"italic":"normal";let d=t;t<r3?d=r3:t>s3&&(d=s3),this.current.fontSizeScale=t/d,this.ctx.font=`${u} ${l} ${d}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r,s){const a=this.ctx,l=this.current,u=l.font,d=l.textRenderingMode,f=l.fontSize/l.fontSizeScale,p=d&ba.FILL_STROKE_MASK,y=!!(d&ba.ADD_TO_PATH_FLAG),v=l.patternFill&&!u.missingFile,C=l.patternStroke&&!u.missingFile;let E;if((u.disableFontFace||y||v||C)&&(E=u.getPathGenerator(this.commonObjs,e)),u.disableFontFace||v||C){a.save(),a.translate(t,n),a.scale(f,-f);let R;if((p===ba.FILL||p===ba.FILL_STROKE)&&(r?(R=a.getTransform(),a.setTransform(...r),a.fill(ne(this,Hu,lE).call(this,E,R,r))):a.fill(E)),p===ba.STROKE||p===ba.FILL_STROKE)if(s){R||(R=a.getTransform()),a.setTransform(...s);const{a:I,b:D,c:j,d:X}=R,W=jt.inverseTransform(s),ue=jt.transform([I,D,j,X,0,0],W);jt.singularValueDecompose2dScale(ue,al),a.lineWidth*=Math.max(al[0],al[1])/f,a.stroke(ne(this,Hu,lE).call(this,E,R,s))}else a.lineWidth/=f,a.stroke(E);a.restore()}else(p===ba.FILL||p===ba.FILL_STROKE)&&a.fillText(e,t,n),(p===ba.STROKE||p===ba.FILL_STROKE)&&a.strokeText(e,t,n);y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:cr(a),x:t,y:n,fontSize:f,path:E})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Vn(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const s=this.ctx,a=t.fontSizeScale,l=t.charSpacing,u=t.wordSpacing,d=t.fontDirection,f=t.textHScale*d,p=e.length,y=n.vertical,v=y?1:-1,C=n.defaultVMetrics,E=r*t.fontMatrix[0],R=t.textRenderingMode===ba.FILL&&!n.disableFontFace&&!t.patternFill;s.save(),t.textMatrix&&s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),d>0?s.scale(f,-1):s.scale(f,1);let I,D;if(t.patternFill){s.save();const U=t.fillColor.getPattern(s,this,Tc(s),Gs.FILL);I=cr(s),s.restore(),s.fillStyle=U}if(t.patternStroke){s.save();const U=t.strokeColor.getPattern(s,this,Tc(s),Gs.STROKE);D=cr(s),s.restore(),s.strokeStyle=U}let j=t.lineWidth;const X=t.textMatrixScale;if(X===0||j===0){const U=t.textRenderingMode&ba.FILL_STROKE_MASK;(U===ba.STROKE||U===ba.FILL_STROKE)&&(j=this.getSinglePixelWidth())}else j/=X;if(a!==1&&(s.scale(a,a),j/=a),s.lineWidth=j,n.isInvalidPDFjsFont){const U=[];let P=0;for(const V of e)U.push(V.unicode),P+=V.width;s.fillText(U.join(""),0,0),t.x+=P*E*f,s.restore(),this.compose();return}let W=0,ue;for(ue=0;ue<p;++ue){const U=e[ue];if(typeof U=="number"){W+=v*U*r/1e3;continue}let P=!1;const V=(U.isSpace?u:0)+l,Y=U.fontChar,O=U.accent;let F,B,H=U.width;if(y){const Q=U.vmetric||C,ce=-(U.vmetric?Q[1]:H*.5)*E,ge=Q[2]*E;H=Q?-Q[0]:H,F=ce/a,B=(W+ge)/a}else F=W/a,B=0;if(n.remeasure&&H>0){const Q=s.measureText(Y).width*1e3/r*a;if(H<Q&&this.isFontSubpixelAAEnabled){const ce=H/Q;P=!0,s.save(),s.scale(ce,1),F/=ce}else H!==Q&&(F+=(H-Q)/2e3*r/a)}if(this.contentVisible&&(U.isInFont||n.missingFile)){if(R&&!O)s.fillText(Y,F,B);else if(this.paintChar(Y,F,B,I,D),O){const Q=F+r*O.offset.x/a,ce=B-r*O.offset.y/a;this.paintChar(O.fontChar,Q,ce,I,D)}}const fe=y?H*E-V*d:H*E+V*d;W+=fe,P&&s.restore()}y?t.y-=W:t.x+=W*f,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,s=n.fontSize,a=n.fontDirection,l=r.vertical?1:-1,u=n.charSpacing,d=n.wordSpacing,f=n.textHScale*a,p=n.fontMatrix||MT,y=e.length,v=n.textRenderingMode===ba.INVISIBLE;let C,E,R,I;if(!(v||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),n.textMatrix&&t.transform(...n.textMatrix),t.translate(n.x,n.y+n.textRise),t.scale(f,a),C=0;C<y;++C){if(E=e[C],typeof E=="number"){I=l*E*s/1e3,this.ctx.translate(I,0),n.x+=I*f;continue}const D=(E.isSpace?d:0)+u,j=r.charProcOperatorList[E.operatorListId];j?this.contentVisible&&(this.save(),t.scale(s,s),t.transform(...p),this.executeOperatorList(j),this.restore()):_n(`Type3 character "${E.operatorListId}" is not available.`);const X=[E.width,0];jt.applyTransform(X,p),R=X[0]*s+D,t.translate(R,0),n.x+=R*f}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,s,a){const l=new Path2D;l.rect(n,r,s-n,a-r),this.ctx.clip(l),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=this.baseTransform||cr(this.ctx),r={createCanvasGraphics:s=>new Sk(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new sE(e,this.ctx,r,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=TU(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Tc(t),Gs.SHADING);const r=Tc(t);if(r){const{width:s,height:a}=t.canvas,l=U0.slice();jt.axialAlignedBoundingBox([0,0,s,a],r,l);const[u,d,f,p]=l;this.ctx.fillRect(u,d,f-u,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ii("Should not call beginInlineImage")}beginImageData(){Ii("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=cr(this.ctx),t)){jt.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[n,r,s,a]=t,l=new Path2D;l.rect(n,r,s-n,a-r),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||JA("TODO: Support non-isolated groups."),e.knockout&&_n("Knockout groups not supported.");const n=cr(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=U0.slice();jt.axialAlignedBoundingBox(e.bbox,cr(t),r);const s=[0,0,t.canvas.width,t.canvas.height];r=jt.intersect(r,s)||[0,0,0,0];const a=Math.floor(r[0]),l=Math.floor(r[1]),u=Math.max(Math.ceil(r[2])-a,1),d=Math.max(Math.ceil(r[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,d]);let f="groupAt"+this.groupLevel;e.smask&&(f+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(f,u,d),y=p.context;y.translate(-a,-l),y.transform(...n);let v=new Path2D;const[C,E,R,I]=e.bbox;if(v.rect(C,E,R-C,I-E),e.matrix){const D=new Path2D;D.addPath(v,new DOMMatrix(e.matrix)),v=D}y.clip(v),e.smask?this.smaskStack.push({canvas:p.canvas,context:y,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,l),t.save()),w1(t,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=cr(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=U0.slice();jt.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r,s),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,n,r,s){if(ne(this,Hu,aE).call(this),Px(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],l=t[3]-t[1];if(s&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=l,jt.singularValueDecompose2dScale(cr(this.ctx),al);const{viewportScale:u}=this,d=Math.ceil(a*this.outputScaleX*u),f=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(al[0],0,0,-al[1],0,l*al[1]),Px(this.ctx)}else{Px(this.ctx),this.endPath();const u=new Path2D;u.rect(t[0],t[1],a,l),this.ctx.clip(u)}}this.current=new o3(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ne(this,Hu,oE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this._createMaskCanvas(e),s=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(s,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,s,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const u=cr(l);l.transform(t,n,r,s,0,0);const d=this._createMaskCanvas(e);l.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]);for(let f=0,p=a.length;f<p;f+=2){const y=jt.transform(u,[t,n,r,s,a[f],a[f+1]]);l.drawImage(d.canvas,y[4],y[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:a,width:l,height:u,transform:d}=s,f=this.cachedCanvases.getCanvas("maskCanvas",l,u),p=f.context;p.save();const y=this.getObject(a,s);u3(p,y),p.globalCompositeOperation="source-in",p.fillStyle=r?n.getPattern(p,this,Tc(t),Gs.FILL):n,p.fillRect(0,0,l,u),p.restore(),t.save(),t.transform(...d),t.scale(1,-1),Lx(t,f.canvas,0,0,l,u,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){_n("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){_n("Dependent image isn't ready yet");return}const a=s.width,l=s.height,u=[];for(let d=0,f=r.length;d<f;d+=2)u.push({transform:[t,0,0,n,r[d],r[d+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(s,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;this.save();const{filter:s}=r;s!=="none"&&s!==""&&(r.filter="none"),r.scale(1/t,-1/n);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,n).context;l3(d,e),a=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(a,Tc(r));r.imageSmoothingEnabled=c3(cr(r),e.interpolate),Lx(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const s=e.width,a=e.height,u=this.cachedCanvases.getCanvas("inlineImage",s,a).context;l3(u,e),r=this.applyTransferMapsToCanvas(u)}for(const s of t)n.save(),n.transform(...s.transform),n.scale(1,-1),Lx(n,r,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const r=this.ctx;this.pendingClip&&(n||(this.pendingClip===d3?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=cr(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:s}=this.ctx.getTransform();let a,l;if(n===0&&r===0){const u=Math.abs(t),d=Math.abs(s);if(u===d)if(e===0)a=l=1/u;else{const f=u*e;a=l=f<1?1/f:1}else if(e===0)a=1/u,l=1/d;else{const f=u*e,p=d*e;a=f<1?1/f:1,l=p<1?1/p:1}}else{const u=Math.abs(t*s-n*r),d=Math.hypot(t,n),f=Math.hypot(r,s);if(e===0)a=f/u,l=d/u;else{const p=e*u;a=f>p?f/p:1,l=d>p?d/p:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[s,a]=this.getScaleForStroking();if(s===a){n.lineWidth=(r||1)*s,n.stroke(e);return}const l=n.getLineDash();t&&n.save(),n.scale(s,a),tT.a=1/s,tT.d=1/a;const u=new Path2D;if(u.addPath(e,tT),l.length>0){const d=Math.max(s,a);n.setLineDash(l.map(f=>f/d)),n.lineDashOffset/=d}n.lineWidth=r||1,n.stroke(u),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Hu=new WeakSet,aE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},oE=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},lE=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let G0=Sk;for(const i in Yw)G0.prototype[i]!==void 0&&(G0.prototype[Yw[i]]=G0.prototype[i]);var a_,o_;class Bu{static get workerPort(){return g(this,a_)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");G(this,a_,e)}static get workerSrc(){return g(this,o_)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");G(this,o_,e)}}a_=new WeakMap,o_=new WeakMap,te(Bu,a_,null),te(Bu,o_,"");var xy,l_;class PU{constructor({parsedData:e,rawData:t}){te(this,xy);te(this,l_);G(this,xy,e),G(this,l_,t)}getRaw(){return g(this,l_)}get(e){return g(this,xy).get(e)??null}[Symbol.iterator](){return g(this,xy).entries()}}xy=new WeakMap,l_=new WeakMap;const N0=Symbol("INTERNAL");var u_,c_,d_,wy;class MU{constructor(e,{name:t,intent:n,usage:r,rbGroups:s}){te(this,u_,!1);te(this,c_,!1);te(this,d_,!1);te(this,wy,!0);G(this,u_,!!(e&sl.DISPLAY)),G(this,c_,!!(e&sl.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=s}get visible(){if(g(this,d_))return g(this,wy);if(!g(this,wy))return!1;const{print:e,view:t}=this.usage;return g(this,u_)?(t==null?void 0:t.viewState)!=="OFF":g(this,c_)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==N0&&Ii("Internal method `_setVisible` called."),G(this,d_,n),G(this,wy,t)}}u_=new WeakMap,c_=new WeakMap,d_=new WeakMap,wy=new WeakMap;var Gf,Ni,Ay,Sy,h_,uE;class DU{constructor(e,t=sl.DISPLAY){te(this,h_);te(this,Gf,null);te(this,Ni,new Map);te(this,Ay,null);te(this,Sy,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,G(this,Sy,e.order);for(const n of e.groups)g(this,Ni).set(n.id,new MU(t,n));if(e.baseState==="OFF")for(const n of g(this,Ni).values())n._setVisible(N0,!1);for(const n of e.on)g(this,Ni).get(n)._setVisible(N0,!0);for(const n of e.off)g(this,Ni).get(n)._setVisible(N0,!1);G(this,Ay,this.getHash())}}isVisible(e){if(g(this,Ni).size===0)return!0;if(!e)return JA("Optional content group not defined."),!0;if(e.type==="OCG")return g(this,Ni).has(e.id)?g(this,Ni).get(e.id).visible:(_n(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return ne(this,h_,uE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!g(this,Ni).has(t))return _n(`Optional content group not found: ${t}`),!0;if(g(this,Ni).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!g(this,Ni).has(t))return _n(`Optional content group not found: ${t}`),!0;if(!g(this,Ni).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!g(this,Ni).has(t))return _n(`Optional content group not found: ${t}`),!0;if(!g(this,Ni).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!g(this,Ni).has(t))return _n(`Optional content group not found: ${t}`),!0;if(g(this,Ni).get(t).visible)return!1}return!0}return _n(`Unknown optional content policy ${e.policy}.`),!0}return _n(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var s;const r=g(this,Ni).get(e);if(!r){_n(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const l of a)l!==e&&((s=g(this,Ni).get(l))==null||s._setVisible(N0,!1,!0));r._setVisible(N0,!!t,!0),G(this,Gf,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const s=g(this,Ni).get(r);if(s)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t);break}}G(this,Gf,null)}get hasInitialVisibility(){return g(this,Ay)===null||this.getHash()===g(this,Ay)}getOrder(){return g(this,Ni).size?g(this,Sy)?g(this,Sy).slice():[...g(this,Ni).keys()]:null}getGroup(e){return g(this,Ni).get(e)||null}getHash(){if(g(this,Gf)!==null)return g(this,Gf);const e=new uD;for(const[t,n]of g(this,Ni))e.update(`${t}:${n.visible}`);return G(this,Gf,e.hexdigest())}[Symbol.iterator](){return g(this,Ni).entries()}}Gf=new WeakMap,Ni=new WeakMap,Ay=new WeakMap,Sy=new WeakMap,h_=new WeakSet,uE=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const s=e[r];let a;if(Array.isArray(s))a=ne(this,h_,uE).call(this,s);else if(g(this,Ni).has(s))a=g(this,Ni).get(s).visible;else return _n(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class OU{constructor(e,{disableRange:t=!1,disableStream:n=!1}){es(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(s==null?void 0:s.length)>0){const u=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,d)=>{this._onReceiveData({begin:u,chunk:d})}),e.addProgressListener((u,d)=>{this._onProgress({loaded:u,total:d})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});es(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,s;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){es(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new FU(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new VU(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class FU{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=aN(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class VU{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function BU(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let f=l(t);return f=unescape(f),f=u(f),f=d(f),s(f)}if(t=a(i),t){const f=d(t);return s(f)}if(t=n("filename","i").exec(i),t){t=t[1];let f=l(t);return f=d(f),s(f)}function n(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function r(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const y=new TextDecoder(f,{fatal:!0}),v=o2(p);p=y.decode(v),e=!1}catch{}}return p}function s(f){return e&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),e&&(f=r("iso-8859-1",f))),f}function a(f){const p=[];let y;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=v.exec(f))!==null;){let[,E,R,I]=y;if(E=parseInt(E,10),E in p){if(E===0)break;continue}p[E]=[R,I]}const C=[];for(let E=0;E<p.length&&E in p;++E){let[R,I]=p[E];I=l(I),R&&(I=unescape(I),E===0&&(I=u(I))),C.push(I)}return C.join("")}function l(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let y=0;y<p.length;++y){const v=p[y].indexOf('"');v!==-1&&(p[y]=p[y].slice(0,v),p.length=y+1),p[y]=p[y].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function u(f){const p=f.indexOf("'");if(p===-1)return f;const y=f.slice(0,p),C=f.slice(p+1).replace(/^[^']*'/,"");return r(y,C)}function d(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,y,v,C){if(v==="q"||v==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,R){return String.fromCharCode(parseInt(R,16))}),r(y,C);try{C=atob(C)}catch{}return r(y,C)})}return""}function xD(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function e5(i){var e;return((e=URL.parse(i))==null?void 0:e.origin)??null}function wD({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(i.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function AD(i){const e=i.get("Content-Disposition");if(e){let t=BU(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(aN(t))return t}return null}function d2(i,e){return new Kw(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i,i===404||i===0&&e.startsWith("file:"))}function SD(i){return i===200||i===206}function TD(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function ED(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(_n(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class UU{constructor(e){ht(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=xD(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return es(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new zU(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new jU(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class zU{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,TD(n,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=e5(s.url),!SD(s.status))throw d2(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:l,suggestedLength:u}=wD({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=u||this._contentLength,this._filename=AD(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ap("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ED(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class jU{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${n-1}`);const a=r.url;fetch(a,TD(s,this._withCredentials,this._abortController)).then(l=>{const u=e5(l.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!SD(l.status))throw d2(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:ED(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const nT=200,iT=206;function qU(i){const e=i.response;return typeof e!="string"?e:o2(e).buffer}class $U{constructor({url:e,httpHeaders:t,withCredentials:n}){ht(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=xD(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=iT):r.expectedStatus=nT,t.responseType="arraybuffer",es(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const s=r.status||nT;if(!(s===nT&&n.expectedStatus===iT)&&s!==n.expectedStatus){n.onError(r.status);return}const l=qU(r);if(s===iT){const u=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);d?n.onDone({begin:parseInt(d[1],10),chunk:l}):(_n('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class HU{constructor(e){this._source=e,this._manager=new $U(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return es(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new GU(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new YU(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class GU{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=e5(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[u,...d]=l.split(": ");return[u,d.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=wD({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=AD(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=d2(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class YU{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=e5((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=d2(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const KU=/^[a-z][a-z0-9\-+.]+:/i;function WU(i){if(KU.test(i))return new URL(i);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}class QU{constructor(e){this.source=e,this.url=WU(e.url),es(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return es(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new XU(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new JU(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class XU{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=d2(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ap("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class JU{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const A1=Symbol("INITIAL_DATA");var Wo,f_,cE;class CD{constructor(){te(this,f_);te(this,Wo,Object.create(null))}get(e,t=null){if(t){const r=ne(this,f_,cE).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=g(this,Wo)[e];if(!n||n.data===A1)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=g(this,Wo)[e];return!!t&&t.data!==A1}delete(e){const t=g(this,Wo)[e];return!t||t.data===A1?!1:(delete g(this,Wo)[e],!0)}resolve(e,t=null){const n=ne(this,f_,cE).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in g(this,Wo)){const{data:n}=g(this,Wo)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}G(this,Wo,Object.create(null))}*[Symbol.iterator](){for(const e in g(this,Wo)){const{data:t}=g(this,Wo)[e];t!==A1&&(yield[e,t])}}}Wo=new WeakMap,f_=new WeakSet,cE=function(e){var t;return(t=g(this,Wo))[e]||(t[e]={...Promise.withResolvers(),data:A1})};const ZU=1e5,h3=30;var VP,Yf,go,p_,m_,Bm,ih,g_,y_,Um,Ty,Ey,Kf,Cy,v_,Ny,zm,b_,__,ky,jm,x_,Wf,Iy,Mh,ND,kD,dE,hl,aw,hE,ID,RD;const us=class us{constructor({textContentSource:e,container:t,viewport:n}){te(this,Mh);te(this,Yf,Promise.withResolvers());te(this,go,null);te(this,p_,!1);te(this,m_,!!((VP=globalThis.FontInspector)!=null&&VP.enabled));te(this,Bm,null);te(this,ih,null);te(this,g_,0);te(this,y_,0);te(this,Um,null);te(this,Ty,null);te(this,Ey,0);te(this,Kf,0);te(this,Cy,Object.create(null));te(this,v_,[]);te(this,Ny,null);te(this,zm,[]);te(this,b_,new WeakMap);te(this,__,null);var u;if(e instanceof ReadableStream)G(this,Ny,e);else if(typeof e=="object")G(this,Ny,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');G(this,go,G(this,Ty,t)),G(this,Kf,n.scale*nd.pixelRatio),G(this,Ey,n.rotation),G(this,ih,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:a,pageY:l}=n.rawDims;G(this,__,[1,0,0,-1,-a,l+s]),G(this,y_,r),G(this,g_,s),ne(u=us,hl,ID).call(u),Tg(t,n),g(this,Yf).promise.finally(()=>{g(us,Iy).delete(this),G(this,ih,null),G(this,Cy,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Js.platform;return Vn(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{g(this,Um).read().then(({value:t,done:n})=>{if(n){g(this,Yf).resolve();return}g(this,Bm)??G(this,Bm,t.lang),Object.assign(g(this,Cy),t.styles),ne(this,Mh,ND).call(this,t.items),e()},g(this,Yf).reject)};return G(this,Um,g(this,Ny).getReader()),g(us,Iy).add(this),e(),g(this,Yf).promise}update({viewport:e,onBefore:t=null}){var s;const n=e.scale*nd.pixelRatio,r=e.rotation;if(r!==g(this,Ey)&&(t==null||t(),G(this,Ey,r),Tg(g(this,Ty),{rotation:r})),n!==g(this,Kf)){t==null||t(),G(this,Kf,n);const a={div:null,properties:null,ctx:ne(s=us,hl,aw).call(s,g(this,Bm))};for(const l of g(this,zm))a.properties=g(this,b_).get(l),a.div=l,ne(this,Mh,dE).call(this,a)}}cancel(){var t;const e=new Ap("TextLayer task cancelled.");(t=g(this,Um))==null||t.cancel(e).catch(()=>{}),G(this,Um,null),g(this,Yf).reject(e)}get textDivs(){return g(this,zm)}get textContentItemsStr(){return g(this,v_)}static cleanup(){if(!(g(this,Iy).size>0)){g(this,ky).clear();for(const{canvas:e}of g(this,jm).values())e.remove();g(this,jm).clear()}}};Yf=new WeakMap,go=new WeakMap,p_=new WeakMap,m_=new WeakMap,Bm=new WeakMap,ih=new WeakMap,g_=new WeakMap,y_=new WeakMap,Um=new WeakMap,Ty=new WeakMap,Ey=new WeakMap,Kf=new WeakMap,Cy=new WeakMap,v_=new WeakMap,Ny=new WeakMap,zm=new WeakMap,b_=new WeakMap,__=new WeakMap,ky=new WeakMap,jm=new WeakMap,x_=new WeakMap,Wf=new WeakMap,Iy=new WeakMap,Mh=new WeakSet,ND=function(e){var r,s;if(g(this,p_))return;(s=g(this,ih)).ctx??(s.ctx=ne(r=us,hl,aw).call(r,g(this,Bm)));const t=g(this,zm),n=g(this,v_);for(const a of e){if(t.length>ZU){_n("Ignoring additional textDivs for performance reasons."),G(this,p_,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=g(this,go);G(this,go,document.createElement("span")),g(this,go).classList.add("markedContent"),a.id!==null&&g(this,go).setAttribute("id",`${a.id}`),l.append(g(this,go))}else a.type==="endMarkedContent"&&G(this,go,g(this,go).parentNode);continue}n.push(a.str),ne(this,Mh,kD).call(this,a)}},kD=function(e){var E;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};g(this,zm).push(t);const r=jt.transform(g(this,__),e.transform);let s=Math.atan2(r[1],r[0]);const a=g(this,Cy)[e.fontName];a.vertical&&(s+=Math.PI/2);let l=g(this,m_)&&a.fontSubstitution||a.fontFamily;l=us.fontFamilyMap.get(l)||l;const u=Math.hypot(r[2],r[3]),d=u*ne(E=us,hl,RD).call(E,l,a,g(this,Bm));let f,p;s===0?(f=r[4],p=r[5]-d):(f=r[4]+d*Math.sin(s),p=r[5]-d*Math.cos(s));const y="calc(var(--total-scale-factor) *",v=t.style;g(this,go)===g(this,Ty)?(v.left=`${(100*f/g(this,y_)).toFixed(2)}%`,v.top=`${(100*p/g(this,g_)).toFixed(2)}%`):(v.left=`${y}${f.toFixed(2)}px)`,v.top=`${y}${p.toFixed(2)}px)`),v.fontSize=`${y}${(g(us,Wf)*u).toFixed(2)}px)`,v.fontFamily=l,n.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,g(this,m_)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let C=!1;if(e.str.length>1)C=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const R=Math.abs(e.transform[0]),I=Math.abs(e.transform[3]);R!==I&&Math.max(R,I)/Math.min(R,I)>1.5&&(C=!0)}if(C&&(n.canvasWidth=a.vertical?e.height:e.width),g(this,b_).set(t,n),g(this,ih).div=t,g(this,ih).properties=n,ne(this,Mh,dE).call(this,g(this,ih)),n.hasText&&g(this,go).append(t),n.hasEOL){const R=document.createElement("br");R.setAttribute("role","presentation"),g(this,go).append(R)}},dE=function(e){var l;const{div:t,properties:n,ctx:r}=e,{style:s}=t;let a="";if(g(us,Wf)>1&&(a=`scale(${1/g(us,Wf)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=s,{canvasWidth:d,fontSize:f}=n;ne(l=us,hl,hE).call(l,r,f*g(this,Kf),u);const{width:p}=r.measureText(t.textContent);p>0&&(a=`scaleX(${d*g(this,Kf)/p}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(s.transform=a)},hl=new WeakSet,aw=function(e=null){let t=g(this,jm).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),g(this,jm).set(e,t),g(this,x_).set(t,{size:0,family:""})}return t},hE=function(e,t,n){const r=g(this,x_).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},ID=function(){if(g(this,Wf)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),G(this,Wf,e.getBoundingClientRect().height),e.remove()},RD=function(e,t,n){const r=g(this,ky).get(e);if(r)return r;const s=ne(this,hl,aw).call(this,n);s.canvas.width=s.canvas.height=h3,ne(this,hl,hE).call(this,s,h3,e);const a=s.measureText(""),l=a.fontBoundingBoxAscent,u=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let d=.8;return l?d=l/(l+u):(Js.platform.isFirefox&&_n("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),g(this,ky).set(e,d),d},te(us,hl),te(us,ky,new Map),te(us,jm,new Map),te(us,x_,new WeakMap),te(us,Wf,null),te(us,Iy,new Set);let vb=us;class bb{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(s){var u;if(!s)return;let a=null;const l=s.name;if(l==="#text")a=s.value;else if(bb.shouldBuildText(l))(u=s==null?void 0:s.attributes)!=null&&u.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const d of s.children)r(d)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const ez=100;function LD(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new fE,{docId:t}=e,n=i.url?uU(i.url):null,r=i.data?cU(i.data):null,s=i.httpHeaders||null,a=i.withCredentials===!0,l=i.password??null,u=i.range instanceof PD?i.range:null,d=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let f=i.worker instanceof _b?i.worker:null;const p=i.verbosity,y=typeof i.docBaseUrl=="string"&&!ZA(i.docBaseUrl)?i.docBaseUrl:null,v=Ix(i.cMapUrl),C=i.cMapPacked!==!1,E=i.CMapReaderFactory||(ja?vU:e3),R=Ix(i.iccUrl),I=Ix(i.standardFontDataUrl),D=i.StandardFontDataFactory||(ja?bU:t3),j=Ix(i.wasmUrl),X=i.WasmFactory||(ja?_U:n3),W=i.stopAtErrors!==!0,ue=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,U=i.isEvalSupported!==!1,P=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!ja,V=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!ja&&(Js.platform.isFirefox||!globalThis.chrome),Y=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,O=typeof i.disableFontFace=="boolean"?i.disableFontFace:ja,F=i.fontExtraProperties===!0,B=i.enableXfa===!0,H=i.ownerDocument||globalThis.document,fe=i.disableRange===!0,Q=i.disableStream===!0,ce=i.disableAutoFetch===!0,ge=i.pdfBug===!0,Te=i.CanvasFactory||(ja?yU:pU),re=i.FilterFactory||(ja?gU:mU),xe=i.enableHWA===!0,q=i.useWasm!==!1,ee=u?u.length:i.length??NaN,he=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!ja&&!O,me=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(E===e3&&D===t3&&X===n3&&v&&I&&j&&P1(v,document.baseURI)&&P1(I,document.baseURI)&&P1(j,document.baseURI)),ye=null;zB(p);const Ae={canvasFactory:new Te({ownerDocument:H,enableHWA:xe}),filterFactory:new re({docId:t,ownerDocument:H}),cMapReaderFactory:me?null:new E({baseUrl:v,isCompressed:C}),standardFontDataFactory:me?null:new D({baseUrl:I}),wasmFactory:me?null:new X({baseUrl:j})};f||(f=_b.create({verbosity:p,port:Bu.workerPort}),e._worker=f);const Ie={docId:t,apiVersion:"5.3.31",data:r,password:l,disableAutoFetch:ce,rangeChunkSize:d,length:ee,docBaseUrl:y,enableXfa:B,evaluatorOptions:{maxImageSize:ue,disableFontFace:O,ignoreErrors:W,isEvalSupported:U,isOffscreenCanvasSupported:P,isImageDecoderSupported:V,canvasMaxAreaInBytes:Y,fontExtraProperties:F,useSystemFonts:he,useWasm:q,useWorkerFetch:me,cMapUrl:v,iccUrl:R,standardFontDataUrl:I,wasmUrl:j}},Me={ownerDocument:H,pdfBug:ge,styleElement:ye,loadingParams:{disableAutoFetch:ce,enableXfa:B}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const nt=f.messageHandler.sendWithPromise("GetDocRequest",Ie,r?[r.buffer]:null);let He;if(u)He=new OU(u,{disableRange:fe,disableStream:Q});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Ye=P1(n)?UU:ja?QU:HU;He=new Ye({url:n,length:ee,httpHeaders:s,withCredentials:a,rangeChunkSize:d,disableRange:fe,disableStream:Q})}return nt.then(Ye=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Xe=new V1(t,Ye,f.port),pt=new iz(Xe,e,He,Me,Ae);e._transport=pt,Xe.send("Ready",null)})}).catch(e._capability.reject),e}var VA;const BA=class BA{constructor(){ht(this,"_capability",Promise.withResolvers());ht(this,"_transport",null);ht(this,"_worker",null);ht(this,"docId",`d${Oa(BA,VA)._++}`);ht(this,"destroyed",!1);ht(this,"onPassword",null);ht(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};VA=new WeakMap,te(BA,VA,0);let fE=BA;var qm,w_,A_,S_,T_;class PD{constructor(e,t,n=!1,r=null){te(this,qm,Promise.withResolvers());te(this,w_,[]);te(this,A_,[]);te(this,S_,[]);te(this,T_,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){g(this,T_).push(e)}addProgressListener(e){g(this,S_).push(e)}addProgressiveReadListener(e){g(this,A_).push(e)}addProgressiveDoneListener(e){g(this,w_).push(e)}onDataRange(e,t){for(const n of g(this,T_))n(e,t)}onDataProgress(e,t){g(this,qm).promise.then(()=>{for(const n of g(this,S_))n(e,t)})}onDataProgressiveRead(e){g(this,qm).promise.then(()=>{for(const t of g(this,A_))t(e)})}onDataProgressiveDone(){g(this,qm).promise.then(()=>{for(const e of g(this,w_))e()})}transportReady(){g(this,qm).resolve()}requestDataRange(e,t){Ii("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}qm=new WeakMap,w_=new WeakMap,A_=new WeakMap,S_=new WeakMap,T_=new WeakMap;class tz{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Vn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var rh,$m,q1;class nz{constructor(e,t,n,r=!1){te(this,$m);te(this,rh,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new XR:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new CD,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:s=!1}={}){return new u2({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Vn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=Ef.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:f=null,isEditing:p=!1}){var X,W;(X=this._stats)==null||X.time("Overall");const y=this._transport.getRenderingIntent(n,r,f,p),{renderingIntent:v,cacheKey:C}=y;G(this,rh,!1),l||(l=this._transport.getOptionalContentConfig(v));let E=this._intentStates.get(C);E||(E=Object.create(null),this._intentStates.set(C,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const R=!!(v&sl.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(W=this._stats)==null||W.time("Page Request"),this._pumpOperatorList(y));const I=ue=>{var U;E.renderTasks.delete(D),R&&G(this,rh,!0),ne(this,$m,q1).call(this),ue?(D.capability.reject(ue),this._abortOperatorList({intentState:E,reason:ue instanceof Error?ue:new Error(ue)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(U=globalThis.Stats)!=null&&U.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new pE({callback:I,params:{canvasContext:e,viewport:t,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:d});(E.renderTasks||(E.renderTasks=new Set)).add(D);const j=D.task;return Promise.all([E.displayReadyCapability.promise,l]).then(([ue,U])=>{var P;if(this.destroyed){I();return}if((P=this._stats)==null||P.time("Rendering"),!(U.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:ue,optionalContentConfig:U}),D.operatorListChanged()}).catch(I),j}getOperatorList({intent:e="display",annotationMode:t=Ef.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var d;function s(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(u))}const a=this._transport.getRenderingIntent(e,t,n,r,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let u;return l.opListReadCapability||(u=Object.create(null),u.operatorListChanged=s,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(u),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>bb.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function s(){a.read().then(function({value:u,done:d}){if(d){n(l);return}l.lang??(l.lang=u.lang),Object.assign(l.styles,u.styles),l.items.push(...u.items),s()},r)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),G(this,rh,!1),Promise.all(e)}cleanup(e=!1){G(this,rh,!0);const t=ne(this,$m,q1).call(this);return e&&t&&this._stats&&(this._stats=new XR),t}_startRenderPage(e,t){var r,s;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&ne(this,$m,q1).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:s,transfer:a}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},a).getReader(),d=this._intentStates.get(t);d.streamReader=u;const f=()=>{u.read().then(({value:p,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,d),f())},p=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();ne(this,$m,q1).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(p);else if(d.opListReadCapability)d.opListReadCapability.reject(p);else throw p}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof sN){let r=ez;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Ap(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}rh=new WeakMap,$m=new WeakSet,q1=function(){if(!g(this,rh)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),G(this,rh,!1),!0};var Qf,ku,sh,Hm,UA,Gm,Ym,Ga,ow,MD,DD,$1,Ry,lw;const tr=class tr{constructor({name:e=null,port:t=null,verbosity:n=jB()}={}){te(this,Ga);te(this,Qf,Promise.withResolvers());te(this,ku,null);te(this,sh,null);te(this,Hm,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(g(tr,Ym).has(t))throw new Error("Cannot use more than one PDFWorker per port.");g(tr,Ym).set(t,this),ne(this,Ga,MD).call(this,t)}else ne(this,Ga,DD).call(this)}get promise(){return g(this,Qf).promise}get port(){return g(this,sh)}get messageHandler(){return g(this,ku)}destroy(){var e,t;this.destroyed=!0,(e=g(this,Hm))==null||e.terminate(),G(this,Hm,null),g(tr,Ym).delete(g(this,sh)),G(this,sh,null),(t=g(this,ku))==null||t.destroy(),G(this,ku,null)}static create(e){const t=g(this,Ym).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new tr(e)}static get workerSrc(){if(Bu.workerSrc)return Bu.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Vn(this,"_setupFakeWorkerGlobal",(async()=>g(this,Ry,lw)?g(this,Ry,lw):(await import(this.workerSrc)).WorkerMessageHandler)())}};Qf=new WeakMap,ku=new WeakMap,sh=new WeakMap,Hm=new WeakMap,UA=new WeakMap,Gm=new WeakMap,Ym=new WeakMap,Ga=new WeakSet,ow=function(){g(this,Qf).resolve(),g(this,ku).send("configure",{verbosity:this.verbosity})},MD=function(e){G(this,sh,e),G(this,ku,new V1("main","worker",e)),g(this,ku).on("ready",()=>{}),ne(this,Ga,ow).call(this)},DD=function(){if(g(tr,Gm)||g(tr,Ry,lw)){ne(this,Ga,$1).call(this);return}let{workerSrc:e}=tr;try{tr._isSameOrigin(window.location,e)||(e=tr._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new V1("main","worker",t),r=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?g(this,Qf).reject(new Error("Worker was destroyed")):ne(this,Ga,$1).call(this)},s=new AbortController;t.addEventListener("error",()=>{g(this,Hm)||r()},{signal:s.signal}),n.on("test",l=>{if(s.abort(),this.destroyed||!l){r();return}G(this,ku,n),G(this,sh,t),G(this,Hm,t),ne(this,Ga,ow).call(this)}),n.on("ready",l=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{ne(this,Ga,$1).call(this)}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{JA("The worker has been disabled.")}ne(this,Ga,$1).call(this)},$1=function(){g(tr,Gm)||(_n("Setting up fake worker."),G(tr,Gm,!0)),tr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){g(this,Qf).reject(new Error("Worker was destroyed"));return}const t=new fU;G(this,sh,t);const n=`fake${Oa(tr,UA)._++}`,r=new V1(n+"_worker",n,t);e.setup(r,t),G(this,ku,new V1(n,n+"_worker",t)),ne(this,Ga,ow).call(this)}).catch(e=>{g(this,Qf).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Ry=new WeakSet,lw=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},te(tr,Ry),te(tr,UA,0),te(tr,Gm,!1),te(tr,Ym,new WeakMap),ja&&(G(tr,Gm,!0),Bu.workerSrc||(Bu.workerSrc="./pdf.worker.mjs")),tr._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},tr._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},tr.fromPort=e=>{if(eU("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return tr.create(e)};let _b=tr;var ah,Vc,Ly,Py,oh,Km,H1;class iz{constructor(e,t,n,r,s){te(this,Km);te(this,ah,new Map);te(this,Vc,new Map);te(this,Ly,new Map);te(this,Py,new Map);te(this,oh,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new CD,this.fontLoader=new oU({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Vn(this,"annotationStorage",new uN)}getRenderingIntent(e,t=Ef.ENABLE,n=null,r=!1,s=!1){let a=sl.DISPLAY,l=eE;switch(e){case"any":a=sl.ANY;break;case"display":break;case"print":a=sl.PRINT;break;default:_n(`getRenderingIntent - invalid intent: ${e}`)}const u=a&sl.PRINT&&n instanceof dD?n:this.annotationStorage;switch(t){case Ef.DISABLE:a+=sl.ANNOTATIONS_DISABLE;break;case Ef.ENABLE:break;case Ef.ENABLE_FORMS:a+=sl.ANNOTATIONS_FORMS;break;case Ef.ENABLE_STORAGE:a+=sl.ANNOTATIONS_STORAGE,l=u.serializable;break;default:_n(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=sl.IS_EDITING),s&&(a+=sl.OPLIST);const{ids:d,hash:f}=u.modifiedIds,p=[a,l.hash,f];return{renderingIntent:a,cacheKey:p.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=g(this,oh))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of g(this,Vc).values())e.push(r._destroy());g(this,Vc).clear(),g(this,Ly).clear(),g(this,Py).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,s;this.commonObjs.clear(),this.fontLoader.clear(),g(this,ah).clear(),this.filterFactory.destroy(),vb.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Ap("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{es(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){r.close();return}es(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=u=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(n,r)=>{es(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:l}){if(l){r.close();return}es(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new tz(n,this))}),e.on("DocException",n=>{t._capability.reject(ho(n))}),e.on("PasswordRequest",n=>{G(this,oh,Promise.withResolvers());try{if(!t.onPassword)throw ho(n);const r=s=>{s instanceof Error?g(this,oh).reject(s):g(this,oh).resolve({password:s})};t.onPassword(r,n.code)}catch(r){g(this,oh).reject(r)}return g(this,oh).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;g(this,Vc).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,s])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in s){const f=s.error;_n(`Error during font loading: ${f}`),this.commonObjs.resolve(n,f);break}const l=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,u=new lU(s,l);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:d}=s;es(d,"The imageRef must be defined.");for(const f of g(this,Vc).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===d)return p.dataLen?(this.commonObjs.resolve(n,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,s,a])=>{var u;if(this.destroyed)return;const l=g(this,Vc).get(r);if(!l.objs.has(n)){if(l._intentStates.size===0){(u=a==null?void 0:a.bitmap)==null||u.close();return}switch(s){case"Image":case"Pattern":l.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&_n("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=g(this,Ly).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&g(this,Py).set(s.refStr,e);const a=new nz(t,s,this,this._params.pdfBug);return g(this,Vc).set(t,a),a});return g(this,Ly).set(t,r),r}getPageIndex(e){return tE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return ne(this,Km,H1).call(this,"GetFieldObjects")}hasJSActions(){return ne(this,Km,H1).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return ne(this,Km,H1).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return ne(this,Km,H1).call(this,"GetOptionalContentConfig").then(t=>new DU(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=g(this,ah).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,a;return{info:r[0],metadata:r[1]?new PU(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return g(this,ah).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of g(this,Vc).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),g(this,ah).clear(),this.filterFactory.destroy(!0),vb.cleanup()}}cachedPageNumber(e){if(!tE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return g(this,Py).get(t)??null}}ah=new WeakMap,Vc=new WeakMap,Ly=new WeakMap,Py=new WeakMap,oh=new WeakMap,Km=new WeakSet,H1=function(e,t=null){const n=g(this,ah).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return g(this,ah).set(e,r),r};var Xf;class rz{constructor(e){te(this,Xf,null);ht(this,"onContinue",null);ht(this,"onError",null);G(this,Xf,e)}get promise(){return g(this,Xf).capability.promise}cancel(e=0){g(this,Xf).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=g(this,Xf).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=g(this,Xf);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Xf=new WeakMap;var Jf,Wm;const pm=class pm{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:l,canvasFactory:u,filterFactory:d,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:y=null}){te(this,Jf,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=u,this.filterFactory=d,this._pdfBug=p,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new rz(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,u;if(this.cancelled)return;if(this._canvas){if(g(pm,Wm).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");g(pm,Wm).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:s,background:a}=this.params;this.gfx=new G0(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var n,r,s;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),g(this,Jf)&&(window.cancelAnimationFrame(g(this,Jf)),G(this,Jf,null)),g(pm,Wm).delete(this._canvas),e||(e=new sN(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(r=this.task).onError)==null||s.call(r,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?G(this,Jf,window.requestAnimationFrame(()=>{G(this,Jf,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),g(pm,Wm).delete(this._canvas),this.callback())))}};Jf=new WeakMap,Wm=new WeakMap,te(pm,Wm,new WeakSet);let pE=pm;const OD="5.3.31",sz="47ad820d9";function f3(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function S1(i){return Math.max(0,Math.min(255,255*i))}class p3{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=S1(e),[e,e,e]}static G_HTML([e]){const t=f3(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(S1)}static RGB_HTML(e){return`#${e.map(f3).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[S1(1-Math.min(1,e+r)),S1(1-Math.min(1,n+r)),S1(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,s=1-t,a=1-n,l=Math.min(r,s,a);return["CMYK",r,s,a,l]}}class az{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ii("Abstract method `_createSVG` called.")}}class Xw extends az{_createSVG(e){return document.createElementNS(Ud,e)}}class FD{static setupStorage(e,t,n,r,s){const a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",l=>{r.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const u=l.target.options,d=u.selectedIndex===-1?"":u[u.selectedIndex].value;r.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:s}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[u,d]of Object.entries(a))if(d!=null)switch(u){case"class":d.length&&e.setAttribute(u,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,d)}l&&s.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var p,y;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:n});const l=s!=="richText",u=e.div;if(u.append(a),e.viewport){const v=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=v}l&&u.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const v=document.createTextNode(r.value);a.append(v),l&&bb.shouldBuildText(r.name)&&d.push(v)}return{textDivs:d}}const f=[[r,-1,a]];for(;f.length>0;){const[v,C,E]=f.at(-1);if(C+1===v.children.length){f.pop();continue}const R=v.children[++f.at(-1)[1]];if(R===null)continue;const{name:I}=R;if(I==="#text"){const j=document.createTextNode(R.value);d.push(j),E.append(j);continue}const D=(p=R==null?void 0:R.attributes)!=null&&p.xmlns?document.createElementNS(R.attributes.xmlns,I):document.createElement(I);if(E.append(D),R.attributes&&this.setAttributes({html:D,element:R,storage:t,intent:s,linkService:n}),((y=R.children)==null?void 0:y.length)>0)f.push([R,-1,D]);else if(R.value){const j=document.createTextNode(R.value);l&&bb.shouldBuildText(I)&&d.push(j),D.append(j)}}for(const v of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const h2=1e3,oz=9,Cg=new WeakSet;class m3{static create(e){switch(e.data.annotationType){case Wr.LINK:return new VD(e);case Wr.TEXT:return new lz(e);case Wr.WIDGET:switch(e.data.fieldType){case"Tx":return new uz(e);case"Btn":return e.data.radioButton?new zD(e):e.data.checkBox?new dz(e):new hz(e);case"Ch":return new fz(e);case"Sig":return new cz(e)}return new Vg(e);case Wr.POPUP:return new gE(e);case Wr.FREETEXT:return new GD(e);case Wr.LINE:return new mz(e);case Wr.SQUARE:return new gz(e);case Wr.CIRCLE:return new yz(e);case Wr.POLYLINE:return new YD(e);case Wr.CARET:return new bz(e);case Wr.INK:return new hN(e);case Wr.POLYGON:return new vz(e);case Wr.HIGHLIGHT:return new KD(e);case Wr.UNDERLINE:return new _z(e);case Wr.SQUIGGLY:return new xz(e);case Wr.STRIKEOUT:return new wz(e);case Wr.STAMP:return new WD(e);case Wr.FILEATTACHMENT:return new Az(e);default:return new Ur(e)}}}var Qm,My,Dy,E_,mE;const Tk=class Tk{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){te(this,E_);te(this,Qm,null);te(this,My,!1);te(this,Dy,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Tk._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;g(this,Qm)||G(this,Qm,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&ne(this,E_,mE).call(this,t),(n=g(this,Dy))==null||n.popup.updateEdited(e)}resetEdited(){var e;g(this,Qm)&&(ne(this,E_,mE).call(this,g(this,Qm).rect),(e=g(this,Dy))==null||e.popup.resetEdited(),G(this,Qm,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Vg||(s.tabIndex=h2);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof gE){const{rotation:E}=t;return!t.hasOwnCanvas&&E!==0&&this.setRotation(E,s),s}const{width:l,height:u}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const E=t.borderStyle.horizontalCornerRadius,R=t.borderStyle.verticalCornerRadius;if(E>0||R>0){const D=`calc(${E}px * var(--total-scale-factor)) / calc(${R}px * var(--total-scale-factor))`;a.borderRadius=D}else if(this instanceof zD){const D=`calc(${l}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;a.borderRadius=D}switch(t.borderStyle.style){case S0.SOLID:a.borderStyle="solid";break;case S0.DASHED:a.borderStyle="dashed";break;case S0.BEVELED:_n("Unimplemented border style: beveled");break;case S0.INSET:_n("Unimplemented border style: inset");break;case S0.UNDERLINE:a.borderBottomStyle="solid";break}const I=t.borderColor||null;I?(G(this,My,!0),a.borderColor=jt.makeHexColor(I[0]|0,I[1]|0,I[2]|0)):a.borderWidth=0}const d=jt.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:p,pageX:y,pageY:v}=r.rawDims;a.left=`${100*(d[0]-y)/f}%`,a.top=`${100*(d[1]-v)/p}%`;const{rotation:C}=t;return t.hasOwnCanvas||C===0?(a.width=`${100*l/f}%`,a.height=`${100*u/p}%`):this.setRotation(C,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),t.style.width=`${100*s/n}%`,t.style.height=`${100*a/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const s=r.detail[t],a=s[0],l=s.slice(1);r.target.style[n]=p3[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:p3[`${a}_rgb`](l)})};return Vn(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||n[r];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,s]of Object.entries(t)){const a=n[r];if(a){const l={detail:{[r]:s},target:e};a(l),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,s]=this.data.rect.map(E=>Math.fround(E));if(e.length===8){const[E,R,I,D]=e.subarray(2,6);if(r===E&&s===R&&t===I&&n===D)return}const{style:a}=this.container;let l;if(g(this,My)){const{borderColor:E,borderWidth:R}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${R}">`],this.container.classList.add("hasBorder")}const u=r-t,d=s-n,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0);const y=f.createElement("defs");p.append(y);const v=f.createElement("clipPath"),C=`clippath_${this.data.id}`;v.setAttribute("id",C),v.setAttribute("clipPathUnits","objectBoundingBox"),y.append(v);for(let E=2,R=e.length;E<R;E+=8){const I=e[E],D=e[E+1],j=e[E+2],X=e[E+3],W=f.createElement("rect"),ue=(j-t)/u,U=(s-D)/d,P=(I-j)/u,V=(D-X)/d;W.setAttribute("x",ue),W.setAttribute("y",U),W.setAttribute("width",P),W.setAttribute("height",V),v.append(W),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${ue}" y="${U}" width="${P}" height="${V}"/>`)}g(this,My)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(p),this.container.style.clipPath=`url(#${C})`}_createPopup(){const{data:e}=this,t=G(this,Dy,new gE({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Ii("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:a,exportValues:l}of r){if(s===-1||a===t)continue;const u=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!Cg.has(d)){_n(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:u,domElement:d})}return n}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==t&&Cg.has(r)&&n.push({id:a,exportValue:s,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Qm=new WeakMap,My=new WeakMap,Dy=new WeakMap,E_=new WeakSet,mE=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:l,pageY:u}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-l)/s}%`,t.top=`${100*(a-e[3]+u)/a}%`,r===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)};let Ur=Tk;var ol,om,BD,UD;class VD extends Ur{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});te(this,ol);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let s=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(r,t.action),s=!0):t.attachment?(ne(this,ol,BD).call(this,r,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(ne(this,ol,UD).call(this,r,t.setOCGState),s=!0):t.dest?(this._bindLink(r,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),s=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&ne(this,ol,om).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),ne(this,ol,om).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const a=r.get(s);a&&(t[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),ne(this,ol,om).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),ne(this,ol,om).call(this),!this._fieldObjects){_n('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var p;r==null||r();const{fields:s,refs:a,include:l}=n,u=[];if(s.length!==0||a.length!==0){const y=new Set(a);for(const v of s){const C=this._fieldObjects[v]||[];for(const{id:E}of C)y.add(E)}for(const v of Object.values(this._fieldObjects))for(const C of v)y.has(C.id)===l&&u.push(C)}else for(const y of Object.values(this._fieldObjects))u.push(...y);const d=this.annotationStorage,f=[];for(const y of u){const{id:v}=y;switch(f.push(v),y.type){case"text":{const E=y.defaultValue||"";d.setValue(v,{value:E});break}case"checkbox":case"radiobutton":{const E=y.defaultValue===y.exportValues;d.setValue(v,{value:E});break}case"combobox":case"listbox":{const E=y.defaultValue||"";d.setValue(v,{value:E});break}default:continue}const C=document.querySelector(`[data-element-id="${v}"]`);if(C){if(!Cg.has(C)){_n(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;C.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}})),!1}}}ol=new WeakSet,om=function(){this.container.setAttribute("data-internal-link","")},BD=function(t,n,r=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(n.content,n.filename,r),!1},ne(this,ol,om).call(this)},UD=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),ne(this,ol,om).call(this)};class lz extends Ur{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Vg extends Ur{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Js.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,s){n.includes("mouse")?e.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var l;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}s&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}}))})}_setEventListeners(e,t,n,r){var s,a,l;for(const[u,d]of n)(d==="Action"||(s=this.data.actions)!=null&&s[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,u,d,r),d==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":jt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||oz,s=e.style;let a;const l=2,u=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),f=Math.round(d/(QS*r))||1,p=d/f;a=Math.min(r,u(p/QS))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(r,u(d/QS))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=jt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class uz extends Vg{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),s.setValue(a.id,{[r]:n})}render(){var r,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let l=a.value||"";const u=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;u&&l.length>u&&(l=l.slice(0,u));let d=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const f={userValue:l,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",d??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Cg.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=h2,this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",y=>{e.setValue(t,{value:y.target.value}),this.setPropertyOnSiblings(n,"value",y.target.value,"value"),f.formattedValue=null}),n.addEventListener("resetform",y=>{const v=this.data.defaultFieldValue??"";n.value=f.userValue=v,f.formattedValue=null});let p=y=>{const{formattedValue:v}=f;v!=null&&(y.target.value=v),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{var E;if(f.focused)return;const{target:C}=v;f.userValue&&(C.value=f.userValue),f.lastCommittedValue=C.value,f.commitKey=1,(E=this.data.actions)!=null&&E.Focus||(f.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const C={value(E){f.userValue=E.detail.value??"",e.setValue(t,{value:f.userValue.toString()}),E.target.value=f.userValue},formattedValue(E){const{formattedValue:R}=E.detail;f.formattedValue=R,R!=null&&E.target!==document.activeElement&&(E.target.value=R),e.setValue(t,{formattedValue:R})},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{var j;const{charLimit:R}=E.detail,{target:I}=E;if(R===0){I.removeAttribute("maxLength");return}I.setAttribute("maxLength",R);let D=f.userValue;!D||D.length<=R||(D=D.slice(0,R),I.value=f.userValue=D,e.setValue(t,{value:D}),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:I.selectionStart,selEnd:I.selectionEnd}}))}};this._dispatchEventFromSandbox(C,v)}),n.addEventListener("keydown",v=>{var R;f.commitKey=1;let C=-1;if(v.key==="Escape"?C=0:v.key==="Enter"&&!this.data.multiLine?C=2:v.key==="Tab"&&(f.commitKey=3),C===-1)return;const{value:E}=v.target;f.lastCommittedValue!==E&&(f.lastCommittedValue=E,f.userValue=E,(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:C,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const y=p;p=null,n.addEventListener("blur",v=>{var E,R;if(!f.focused||!v.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(f.focused=!1);const{value:C}=v.target;f.userValue=C,f.lastCommittedValue!==C&&((R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:f.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),y(v)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",v=>{var W;f.lastCommittedValue=null;const{data:C,target:E}=v,{value:R,selectionStart:I,selectionEnd:D}=E;let j=I,X=D;switch(v.inputType){case"deleteWordBackward":{const ue=R.substring(0,I).match(/\w*[^\w]*$/);ue&&(j-=ue[0].length);break}case"deleteWordForward":{const ue=R.substring(I).match(/^[^\w]*\w*/);ue&&(X+=ue[0].length);break}case"deleteContentBackward":I===D&&(j-=1);break;case"deleteContentForward":I===D&&(X+=1);break}v.preventDefault(),(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,change:C||"",willCommit:!1,selStart:j,selEnd:X}})}),this._setEventListeners(n,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(p&&n.addEventListener("blur",p),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class cz extends Vg{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class dz extends Vg{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Cg.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=h2,s.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const d of this._getElementsByName(l,n)){const f=u&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}e.setValue(n,{value:u})}),s.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const l={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class zD extends Vg{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(Cg.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=h2,s.addEventListener("change",a=>{const{name:l,checked:u}=a.target;for(const d of this._getElementsByName(l,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:u})}),s.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",l=>{const u={value:d=>{const f=a===d.detail.value;for(const p of this._getElementsByName(d.target.name)){const y=f&&p.id===n;p.domElement&&(p.domElement.checked=y),e.setValue(p.id,{value:y})}}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class hz extends VD{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class fz extends Vg{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Cg.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=h2;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,n.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),s=!1),r.append(p)}let a=null;if(s){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),a=()=>{f.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const l=f=>{const p=f?"value":"textContent",{options:y,multiple:v}=r;return v?Array.prototype.filter.call(y,C=>C.selected).map(C=>C[p]):y.selectedIndex===-1?null:y[y.selectedIndex][p]};let u=l(!1);const d=f=>{const p=f.target.options;return Array.prototype.map.call(p,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const p={value(y){a==null||a();const v=y.detail.value,C=new Set(Array.isArray(v)?v:[v]);for(const E of r.options)E.selected=C.has(E.value);e.setValue(t,{value:l(!0)}),u=l(!1)},multipleSelection(y){r.multiple=!0},remove(y){const v=r.options,C=y.detail.remove;v[C].selected=!1,r.remove(C),v.length>0&&Array.prototype.findIndex.call(v,R=>R.selected)===-1&&(v[0].selected=!0),e.setValue(t,{value:l(!0),items:d(y)}),u=l(!1)},clear(y){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),u=l(!1)},insert(y){const{index:v,displayValue:C,exportValue:E}=y.detail.insert,R=r.children[v],I=document.createElement("option");I.textContent=C,I.value=E,R?R.before(I):r.append(I),e.setValue(t,{value:l(!0),items:d(y)}),u=l(!1)},items(y){const{items:v}=y.detail;for(;r.length!==0;)r.remove(0);for(const C of v){const{displayValue:E,exportValue:R}=C,I=document.createElement("option");I.textContent=E,I.value=R,r.append(I)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(y)}),u=l(!1)},indices(y){const v=new Set(y.detail.indices);for(const C of y.target.options)C.selected=v.has(C.index);e.setValue(t,{value:l(!0)}),u=l(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(p,f)}),r.addEventListener("input",f=>{var v;const p=l(!0),y=l(!1);e.setValue(t,{value:p}),f.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:y,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class gE extends Ur{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Ur._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new pz({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${rN}${n}`).join(",")),this.container}}var Oy,zA,jA,Fy,Vy,xr,lh,By,C_,N_,Uy,uh,Iu,ch,k_,dh,I_,Xm,Jm,Ri,uw,yE,jD,qD,$D,HD,cw,dw,vE;class pz{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:s,contentsObj:a,richText:l,parent:u,rect:d,parentRect:f,open:p}){te(this,Ri);te(this,Oy,ne(this,Ri,$D).bind(this));te(this,zA,ne(this,Ri,vE).bind(this));te(this,jA,ne(this,Ri,dw).bind(this));te(this,Fy,ne(this,Ri,cw).bind(this));te(this,Vy,null);te(this,xr,null);te(this,lh,null);te(this,By,null);te(this,C_,null);te(this,N_,null);te(this,Uy,null);te(this,uh,!1);te(this,Iu,null);te(this,ch,null);te(this,k_,null);te(this,dh,null);te(this,I_,null);te(this,Xm,null);te(this,Jm,!1);var y;G(this,xr,e),G(this,I_,r),G(this,lh,a),G(this,dh,l),G(this,N_,u),G(this,Vy,t),G(this,k_,d),G(this,Uy,f),G(this,C_,n),G(this,By,oN.toDateObject(s)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",g(this,Fy)),v.addEventListener("mouseenter",g(this,jA)),v.addEventListener("mouseleave",g(this,zA)),v.classList.add("popupTriggerArea");for(const v of n)(y=v.container)==null||y.addEventListener("keydown",g(this,Oy));g(this,xr).hidden=!0,p&&ne(this,Ri,cw).call(this)}render(){if(g(this,Iu))return;const e=G(this,Iu,document.createElement("div"));if(e.className="popup",g(this,Vy)){const s=e.style.outlineColor=jt.makeHexColor(...g(this,Vy));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=g(this,I_),e.append(t),g(this,By)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:g(this,By).valueOf()})),t.append(s)}const r=g(this,Ri,uw);if(r)FD.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(g(this,lh));e.append(s)}g(this,xr).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,a=r.length;s<a;++s){const l=r[s];n.append(document.createTextNode(l)),s<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;g(this,Xm)||G(this,Xm,{contentsObj:g(this,lh),richText:g(this,dh)}),e&&G(this,ch,null),t&&(G(this,dh,ne(this,Ri,qD).call(this,t)),G(this,lh,null)),(n=g(this,Iu))==null||n.remove(),G(this,Iu,null)}resetEdited(){var e;g(this,Xm)&&({contentsObj:Oa(this,lh)._,richText:Oa(this,dh)._}=g(this,Xm),G(this,Xm,null),(e=g(this,Iu))==null||e.remove(),G(this,Iu,null),G(this,ch,null))}forceHide(){G(this,Jm,this.isVisible),g(this,Jm)&&(g(this,xr).hidden=!0)}maybeShow(){g(this,Jm)&&(g(this,Iu)||ne(this,Ri,dw).call(this),G(this,Jm,!1),g(this,xr).hidden=!1)}get isVisible(){return g(this,xr).hidden===!1}}Oy=new WeakMap,zA=new WeakMap,jA=new WeakMap,Fy=new WeakMap,Vy=new WeakMap,xr=new WeakMap,lh=new WeakMap,By=new WeakMap,C_=new WeakMap,N_=new WeakMap,Uy=new WeakMap,uh=new WeakMap,Iu=new WeakMap,ch=new WeakMap,k_=new WeakMap,dh=new WeakMap,I_=new WeakMap,Xm=new WeakMap,Jm=new WeakMap,Ri=new WeakSet,uw=function(){const e=g(this,dh),t=g(this,lh);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&g(this,dh).html||null},yE=function(){var e,t,n;return((n=(t=(e=g(this,Ri,uw))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},jD=function(){var e,t,n;return((n=(t=(e=g(this,Ri,uw))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},qD=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:g(this,Ri,jD),fontSize:g(this,Ri,yE)?`calc(${g(this,Ri,yE)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return n},$D=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&g(this,uh))&&ne(this,Ri,cw).call(this)},HD=function(){if(g(this,ch)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:s}}}=g(this,N_);let a=!!g(this,Uy),l=a?g(this,Uy):g(this,k_);for(const C of g(this,C_))if(!l||jt.intersect(C.data.rect,l)!==null){l=C.data.rect,a=!0;break}const u=jt.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),f=a?l[2]-l[0]+5:0,p=u[0]+f,y=u[1];G(this,ch,[100*(p-r)/t,100*(y-s)/n]);const{style:v}=g(this,xr);v.left=`${g(this,ch)[0]}%`,v.top=`${g(this,ch)[1]}%`},cw=function(){G(this,uh,!g(this,uh)),g(this,uh)?(ne(this,Ri,dw).call(this),g(this,xr).addEventListener("click",g(this,Fy)),g(this,xr).addEventListener("keydown",g(this,Oy))):(ne(this,Ri,vE).call(this),g(this,xr).removeEventListener("click",g(this,Fy)),g(this,xr).removeEventListener("keydown",g(this,Oy)))},dw=function(){g(this,Iu)||this.render(),this.isVisible?g(this,uh)&&g(this,xr).classList.add("focused"):(ne(this,Ri,HD).call(this),g(this,xr).hidden=!1,g(this,xr).style.zIndex=parseInt(g(this,xr).style.zIndex)+1e3)},vE=function(){g(this,xr).classList.remove("focused"),!(g(this,uh)||!this.isVisible)&&(g(this,xr).hidden=!0,g(this,xr).style.zIndex=parseInt(g(this,xr).style.zIndex)-1e3)};class GD extends Ur{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=vn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var R_;class mz extends Ur{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});te(this,R_,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=G(this,R_,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,R_)}addHighlightArea(){this.container.classList.add("highlightArea")}}R_=new WeakMap;var L_;class gz extends Ur{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});te(this,L_,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,l=G(this,L_,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",n-a),l.setAttribute("height",r-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,L_)}addHighlightArea(){this.container.classList.add("highlightArea")}}L_=new WeakMap;var P_;class yz extends Ur{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});te(this,P_,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,l=G(this,P_,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",r/2),l.setAttribute("rx",n/2-a/2),l.setAttribute("ry",r/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,P_)}addHighlightArea(){this.container.classList.add("highlightArea")}}P_=new WeakMap;var M_;class YD extends Ur{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});te(this,M_,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:s},width:a,height:l}=this;if(!n)return this.container;const u=this.svgFactory.create(a,l,!0);let d=[];for(let p=0,y=n.length;p<y;p+=2){const v=n[p]-t[0],C=t[3]-n[p+1];d.push(`${v},${C}`)}d=d.join(" ");const f=G(this,M_,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",d),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,M_)}addHighlightArea(){this.container.classList.add("highlightArea")}}M_=new WeakMap;class vz extends YD{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class bz extends Ur{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var D_,Zm,O_,bE;class hN extends Ur{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});te(this,O_);te(this,D_,null);te(this,Zm,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?vn.HIGHLIGHT:vn.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:s,popupRef:a}}=this,{transform:l,width:u,height:d}=ne(this,O_,bE).call(this,n,t),f=this.svgFactory.create(u,d,!0),p=G(this,D_,this.svgFactory.createElement("svg:g"));f.append(p),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let y=0,v=r.length;y<v;y++){const C=this.svgFactory.createElement(this.svgElementName);g(this,Zm).push(C),C.setAttribute("points",r[y].join(",")),p.append(C)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:s}=t,a=g(this,D_);if(n>=0&&a.setAttribute("stroke-width",n||1),r)for(let l=0,u=g(this,Zm).length;l<u;l++)g(this,Zm)[l].setAttribute("points",r[l].join(","));if(s){const{transform:l,width:u,height:d}=ne(this,O_,bE).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return g(this,Zm)}addHighlightArea(){this.container.classList.add("highlightArea")}}D_=new WeakMap,Zm=new WeakMap,O_=new WeakSet,bE=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class KD extends Ur{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=vn.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class _z extends Ur{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class xz extends Ur{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class wz extends Ur{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class WD extends Ur{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=vn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var F_,V_,_E;class Az extends Ur{constructor(t){var r;super(t,{isRenderable:!0});te(this,V_);te(this,F_,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",ne(this,V_,_E).bind(this)),G(this,F_,r);const{isMac:s}=Js.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&ne(this,V_,_E).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return g(this,F_)}addHighlightArea(){this.container.classList.add("highlightArea")}}F_=new WeakMap,V_=new WeakSet,_E=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var B_,eg,Zf,U_,Mp,wE,AE;const Ek=class Ek{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:l}){te(this,Mp);te(this,B_,null);te(this,eg,null);te(this,Zf,new Map);te(this,U_,null);this.div=e,G(this,B_,t),G(this,eg,n),G(this,U_,l||null),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return g(this,Zf).size>0}async render(e){var a;const{annotations:t}=e,n=this.div;Tg(n,this.viewport);const r=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Xw,annotationStorage:e.annotationStorage||new uN,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const u=l.annotationType===Wr.POPUP;if(u){const p=r.get(l.id);if(!p)continue;s.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;s.data=l;const d=m3.create(s);if(!d.isRenderable)continue;if(!u&&l.popupRef){const p=r.get(l.popupRef);p?p.push(d):r.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),await ne(this,Mp,wE).call(this,f,l.id),d._isEditable&&(g(this,Zf).set(d.data.id,d),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(d))}ne(this,Mp,AE).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new Xw,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=Ek._defaultBorderStyle),n.data=r;const s=m3.create(n);if(!s.isRenderable)continue;const a=s.render();await ne(this,Mp,wE).call(this,a,r.id)}}update({viewport:e}){const t=this.div;this.viewport=e,Tg(t,{rotation:e.rotation}),ne(this,Mp,AE).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(g(this,Zf).values())}getEditableAnnotation(e){return g(this,Zf).get(e)}static get _defaultBorderStyle(){return Vn(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:S0.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};B_=new WeakMap,eg=new WeakMap,Zf=new WeakMap,U_=new WeakMap,Mp=new WeakSet,wE=async function(e,t){var a,l;const n=e.firstChild||e,r=n.id=`${rN}${t}`,s=await((a=g(this,U_))==null?void 0:a.getAriaAttributes(r));if(s)for(const[u,d]of s)n.setAttribute(u,d);this.div.append(e),(l=g(this,B_))==null||l.moveElementInDOM(this.div,e,n,!1)},AE=function(){var t;if(!g(this,eg))return;const e=this.div;for(const[n,r]of g(this,eg)){const s=e.querySelector(`[data-annotation-id="${n}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):s.append(r);const l=g(this,Zf).get(n);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,s.id,r),l._hasNoCanvas=!1):l.canvas=r)}g(this,eg).clear()};let xE=Ek;const Mx=/\r\n?|\n/g;var Ru,Qo,z_,tg,Xo,ns,QD,XD,JD,hw,Ch,fw,pw,ZD,TE,e6;const Ui=class Ui extends zi{constructor(t){super({...t,name:"freeTextEditor"});te(this,ns);te(this,Ru);te(this,Qo,"");te(this,z_,`${this.id}-editor`);te(this,tg,null);te(this,Xo);G(this,Ru,t.color||Ui._defaultColor||zi._defaultLineColor),G(this,Xo,t.fontSize||Ui._defaultFontSize)}static get _keyboardManager(){const t=Ui.prototype,n=a=>a.isEmpty(),r=Eg.TRANSLATE_SMALL,s=Eg.TRANSLATE_BIG;return Vn(this,"_keyboardManager",new c2([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(t,n){zi.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case jn.FREETEXT_SIZE:Ui._defaultFontSize=n;break;case jn.FREETEXT_COLOR:Ui._defaultColor=n;break}}updateParams(t,n){switch(t){case jn.FREETEXT_SIZE:ne(this,ns,QD).call(this,n);break;case jn.FREETEXT_COLOR:ne(this,ns,XD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jn.FREETEXT_SIZE,Ui._defaultFontSize],[jn.FREETEXT_COLOR,Ui._defaultColor||zi._defaultLineColor]]}get propertiesToUpdate(){return[[jn.FREETEXT_SIZE,g(this,Xo)],[jn.FREETEXT_COLOR,g(this,Ru)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ui._internalPadding*t,-(Ui._internalPadding+g(this,Xo))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),G(this,tg,new AbortController);const t=this._uiManager.combinedSignal(g(this,tg));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",g(this,z_)),this._isDraggable=!0,(t=g(this,tg))==null||t.abort(),G(this,tg,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=g(this,Qo),n=G(this,Qo,ne(this,ns,JD).call(this).trimEnd());if(t===n)return;const r=s=>{if(G(this,Qo,s),!s){this.remove();return}ne(this,ns,pw).call(this),this._uiManager.rebuild(this),ne(this,ns,hw).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),ne(this,ns,hw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ui._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",g(this,z_)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${g(this,Xo)}px * var(--total-scale-factor))`,r.color=g(this,Ru),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,p]=this.pageDimensions,[y,v]=this.pageTranslation;let C,E;switch(this.rotation){case 0:C=t+(l[0]-y)/f,E=n+this.height-(l[1]-v)/p;break;case 90:C=t+(l[0]-y)/f,E=n-(l[1]-v)/p,[u,d]=[d,-u];break;case 180:C=t-this.width+(l[0]-y)/f,E=n-(l[1]-v)/p,[u,d]=[-u,-d];break;case 270:C=t+(l[0]-y-this.height*p)/f,E=n+(l[1]-v-this.width*f)/p,[u,d]=[-d,u];break}this.setAt(C*s,E*a,u,d)}else this._moveAfterPaste(t,n);ne(this,ns,pw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var C,E,R;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const s=ne(C=Ui,Ch,TE).call(C,n.getData("text")||"").replaceAll(Mx,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!s.includes(`
`)){l.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:u,startOffset:d}=l,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const I=u.parentElement;if(p.push(u.nodeValue.slice(d).replaceAll(Mx,"")),I!==this.editorDiv){let D=f;for(const j of this.editorDiv.childNodes){if(j===I){D=p;continue}D.push(ne(E=Ui,Ch,fw).call(E,j))}}f.push(u.nodeValue.slice(0,d).replaceAll(Mx,""))}else if(u===this.editorDiv){let I=f,D=0;for(const j of this.editorDiv.childNodes)D++===d&&(I=p),I.push(ne(R=Ui,Ch,fw).call(R,j))}G(this,Qo,`${f.join(`
`)}${s}${p.join(`
`)}`),ne(this,ns,pw).call(this);const y=new Range;let v=Math.sumPrecise(f.map(I=>I.length));for(const{firstChild:I}of this.editorDiv.childNodes)if(I.nodeType===Node.TEXT_NODE){const D=I.nodeValue.length;if(v<=D){y.setStart(I,v),y.setEnd(I,v);break}v-=D}a.removeAllRanges(),a.addRange(y)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,r){var l;let s=null;if(t instanceof GD){const{data:{defaultAppearanceData:{fontSize:u,fontColor:d},rect:f,rotation:p,id:y,popupRef:v},textContent:C,textPosition:E,parent:{page:{pageNumber:R}}}=t;if(!C||C.length===0)return null;s=t={annotationType:vn.FREETEXT,color:Array.from(d),fontSize:u,value:C.join(`
`),position:E,pageIndex:R-1,rect:f.slice(0),rotation:p,id:y,deleted:!1,popupRef:v}}const a=await super.deserialize(t,n,r);return G(a,Xo,t.fontSize),G(a,Ru,jt.makeHexColor(...t.color)),G(a,Qo,ne(l=Ui,Ch,TE).call(l,t.value)),a.annotationElementId=t.id||null,a._initialData=s,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ui._internalPadding*this.parentScale,r=this.getRect(n,n),s=zi._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:g(this,Ru)),a={annotationType:vn.FREETEXT,color:s,fontSize:g(this,Xo),value:ne(this,ns,ZD).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.isCopy=!0,a):this.annotationElementId&&!ne(this,ns,e6).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${g(this,Xo)}px * var(--total-scale-factor))`,r.color=g(this,Ru),n.replaceChildren();for(const a of g(this,Qo).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),n.append(l)}const s=Ui._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:g(this,Qo)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ru=new WeakMap,Qo=new WeakMap,z_=new WeakMap,tg=new WeakMap,Xo=new WeakMap,ns=new WeakSet,QD=function(t){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-g(this,Xo))*this.parentScale),G(this,Xo,s),ne(this,ns,hw).call(this)},r=g(this,Xo);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},XD=function(t){const n=s=>{G(this,Ru,this.editorDiv.style.color=s)},r=g(this,Ru);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},JD=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(ne(r=Ui,Ch,fw).call(r,s)),n=s);return t.join(`
`)},hw=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,l=a.style.display,u=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},Ch=new WeakSet,fw=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Mx,"")},pw=function(){if(this.editorDiv.replaceChildren(),!!g(this,Qo))for(const t of g(this,Qo).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},ZD=function(){return g(this,Qo).replaceAll(" "," ")},TE=function(t){return t.replaceAll(" "," ")},e6=function(t){const{value:n,fontSize:r,color:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((l,u)=>l!==s[u])||t.pageIndex!==a},te(Ui,Ch),ht(Ui,"_freeTextDefaultContent",""),ht(Ui,"_internalPadding",0),ht(Ui,"_defaultColor",null),ht(Ui,"_defaultFontSize",10),ht(Ui,"_type","freetext"),ht(Ui,"_editorType",vn.FREETEXT);let SE=Ui;class kt{toSVGPath(){Ii("Abstract method `toSVGPath` must be implemented.")}get box(){Ii("Abstract getter `box` must be implemented.")}serialize(e,t){Ii("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,s,a){a||(a=new Float32Array(e.length));for(let l=0,u=e.length;l<u;l+=2)a[l]=t+e[l]*r,a[l+1]=n+e[l+1]*s;return a}static _rescaleAndSwap(e,t,n,r,s,a){a||(a=new Float32Array(e.length));for(let l=0,u=e.length;l<u;l+=2)a[l]=t+e[l+1]*r,a[l+1]=n+e[l]*s;return a}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)r[s]=t+e[s],r[s+1]=n+e[s+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,s){switch(s){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,s,a){return[(e+5*n)/6,(t+5*r)/6,(5*n+s)/6,(5*r+a)/6,(n+s)/2,(r+a)/2]}}ht(kt,"PRECISION",1e-4);var Jo,Lu,zy,jy,Bc,Mn,ng,ig,j_,q_,qy,$y,ep,$_,qA,$A,ps,G1,t6,n6,i6,r6,s6,a6;const $d=class $d{constructor({x:e,y:t},n,r,s,a,l=0){te(this,ps);te(this,Jo);te(this,Lu,[]);te(this,zy);te(this,jy);te(this,Bc,[]);te(this,Mn,new Float32Array(18));te(this,ng);te(this,ig);te(this,j_);te(this,q_);te(this,qy);te(this,$y);te(this,ep,[]);G(this,Jo,n),G(this,$y,s*r),G(this,jy,a),g(this,Mn).set([NaN,NaN,NaN,NaN,e,t],6),G(this,zy,l),G(this,q_,g($d,$_)*r),G(this,j_,g($d,$A)*r),G(this,qy,r),g(this,ep).push(e,t)}isEmpty(){return isNaN(g(this,Mn)[8])}add({x:e,y:t}){var V;G(this,ng,e),G(this,ig,t);const[n,r,s,a]=g(this,Jo);let[l,u,d,f]=g(this,Mn).subarray(8,12);const p=e-d,y=t-f,v=Math.hypot(p,y);if(v<g(this,j_))return!1;const C=v-g(this,q_),E=C/v,R=E*p,I=E*y;let D=l,j=u;l=d,u=f,d+=R,f+=I,(V=g(this,ep))==null||V.push(e,t);const X=-I/C,W=R/C,ue=X*g(this,$y),U=W*g(this,$y);return g(this,Mn).set(g(this,Mn).subarray(2,8),0),g(this,Mn).set([d+ue,f+U],4),g(this,Mn).set(g(this,Mn).subarray(14,18),12),g(this,Mn).set([d-ue,f-U],16),isNaN(g(this,Mn)[6])?(g(this,Bc).length===0&&(g(this,Mn).set([l+ue,u+U],2),g(this,Bc).push(NaN,NaN,NaN,NaN,(l+ue-n)/s,(u+U-r)/a),g(this,Mn).set([l-ue,u-U],14),g(this,Lu).push(NaN,NaN,NaN,NaN,(l-ue-n)/s,(u-U-r)/a)),g(this,Mn).set([D,j,l,u,d,f],6),!this.isEmpty()):(g(this,Mn).set([D,j,l,u,d,f],6),Math.abs(Math.atan2(j-u,D-l)-Math.atan2(I,R))<Math.PI/2?([l,u,d,f]=g(this,Mn).subarray(2,6),g(this,Bc).push(NaN,NaN,NaN,NaN,((l+d)/2-n)/s,((u+f)/2-r)/a),[l,u,D,j]=g(this,Mn).subarray(14,18),g(this,Lu).push(NaN,NaN,NaN,NaN,((D+l)/2-n)/s,((j+u)/2-r)/a),!0):([D,j,l,u,d,f]=g(this,Mn).subarray(0,6),g(this,Bc).push(((D+5*l)/6-n)/s,((j+5*u)/6-r)/a,((5*l+d)/6-n)/s,((5*u+f)/6-r)/a,((l+d)/2-n)/s,((u+f)/2-r)/a),[d,f,l,u,D,j]=g(this,Mn).subarray(12,18),g(this,Lu).push(((D+5*l)/6-n)/s,((j+5*u)/6-r)/a,((5*l+d)/6-n)/s,((5*u+f)/6-r)/a,((l+d)/2-n)/s,((u+f)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=g(this,Bc),t=g(this,Lu);if(isNaN(g(this,Mn)[6])&&!this.isEmpty())return ne(this,ps,t6).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);ne(this,ps,i6).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return ne(this,ps,n6).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,s,a){return new o6(e,t,n,r,s,a)}getOutlines(){var p;const e=g(this,Bc),t=g(this,Lu),n=g(this,Mn),[r,s,a,l]=g(this,Jo),u=new Float32Array((((p=g(this,ep))==null?void 0:p.length)??0)+2);for(let y=0,v=u.length-2;y<v;y+=2)u[y]=(g(this,ep)[y]-r)/a,u[y+1]=(g(this,ep)[y+1]-s)/l;if(u[u.length-2]=(g(this,ng)-r)/a,u[u.length-1]=(g(this,ig)-s)/l,isNaN(n[6])&&!this.isEmpty())return ne(this,ps,r6).call(this,u);const d=new Float32Array(g(this,Bc).length+24+g(this,Lu).length);let f=e.length;for(let y=0;y<f;y+=2){if(isNaN(e[y])){d[y]=d[y+1]=NaN;continue}d[y]=e[y],d[y+1]=e[y+1]}f=ne(this,ps,a6).call(this,d,f);for(let y=t.length-6;y>=6;y-=6)for(let v=0;v<6;v+=2){if(isNaN(t[y+v])){d[f]=d[f+1]=NaN,f+=2;continue}d[f]=t[y+v],d[f+1]=t[y+v+1],f+=2}return ne(this,ps,s6).call(this,d,f),this.newFreeDrawOutline(d,u,g(this,Jo),g(this,qy),g(this,zy),g(this,jy))}};Jo=new WeakMap,Lu=new WeakMap,zy=new WeakMap,jy=new WeakMap,Bc=new WeakMap,Mn=new WeakMap,ng=new WeakMap,ig=new WeakMap,j_=new WeakMap,q_=new WeakMap,qy=new WeakMap,$y=new WeakMap,ep=new WeakMap,$_=new WeakMap,qA=new WeakMap,$A=new WeakMap,ps=new WeakSet,G1=function(){const e=g(this,Mn).subarray(4,6),t=g(this,Mn).subarray(16,18),[n,r,s,a]=g(this,Jo);return[(g(this,ng)+(e[0]-t[0])/2-n)/s,(g(this,ig)+(e[1]-t[1])/2-r)/a,(g(this,ng)+(t[0]-e[0])/2-n)/s,(g(this,ig)+(t[1]-e[1])/2-r)/a]},t6=function(){const[e,t,n,r]=g(this,Jo),[s,a,l,u]=ne(this,ps,G1).call(this);return`M${(g(this,Mn)[2]-e)/n} ${(g(this,Mn)[3]-t)/r} L${(g(this,Mn)[4]-e)/n} ${(g(this,Mn)[5]-t)/r} L${s} ${a} L${l} ${u} L${(g(this,Mn)[16]-e)/n} ${(g(this,Mn)[17]-t)/r} L${(g(this,Mn)[14]-e)/n} ${(g(this,Mn)[15]-t)/r} Z`},n6=function(e){const t=g(this,Lu);e.push(`L${t[4]} ${t[5]} Z`)},i6=function(e){const[t,n,r,s]=g(this,Jo),a=g(this,Mn).subarray(4,6),l=g(this,Mn).subarray(16,18),[u,d,f,p]=ne(this,ps,G1).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-n)/s} L${u} ${d} L${f} ${p} L${(l[0]-t)/r} ${(l[1]-n)/s}`)},r6=function(e){const t=g(this,Mn),[n,r,s,a]=g(this,Jo),[l,u,d,f]=ne(this,ps,G1).call(this),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-r)/a,NaN,NaN,NaN,NaN,l,u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-r)/a],0),this.newFreeDrawOutline(p,e,g(this,Jo),g(this,qy),g(this,zy),g(this,jy))},s6=function(e,t){const n=g(this,Lu);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},a6=function(e,t){const n=g(this,Mn).subarray(4,6),r=g(this,Mn).subarray(16,18),[s,a,l,u]=g(this,Jo),[d,f,p,y]=ne(this,ps,G1).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/l,(n[1]-a)/u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,y,NaN,NaN,NaN,NaN,(r[0]-s)/l,(r[1]-a)/u],t),t+=24},te($d,$_,8),te($d,qA,2),te($d,$A,g($d,$_)+g($d,qA));let Jw=$d;var Hy,rg,hh,H_,Zo,G_,Dr,HA,l6;class o6 extends kt{constructor(t,n,r,s,a,l){super();te(this,HA);te(this,Hy);te(this,rg,new Float32Array(4));te(this,hh);te(this,H_);te(this,Zo);te(this,G_);te(this,Dr);G(this,Dr,t),G(this,Zo,n),G(this,Hy,r),G(this,G_,s),G(this,hh,a),G(this,H_,l),this.lastPoint=[NaN,NaN],ne(this,HA,l6).call(this,l);const[u,d,f,p]=g(this,rg);for(let y=0,v=t.length;y<v;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-d)/p;for(let y=0,v=n.length;y<v;y+=2)n[y]=(n[y]-u)/f,n[y+1]=(n[y+1]-d)/p}toSVGPath(){const t=[`M${g(this,Dr)[4]} ${g(this,Dr)[5]}`];for(let n=6,r=g(this,Dr).length;n<r;n+=6){if(isNaN(g(this,Dr)[n])){t.push(`L${g(this,Dr)[n+4]} ${g(this,Dr)[n+5]}`);continue}t.push(`C${g(this,Dr)[n]} ${g(this,Dr)[n+1]} ${g(this,Dr)[n+2]} ${g(this,Dr)[n+3]} ${g(this,Dr)[n+4]} ${g(this,Dr)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,s],a){const l=r-t,u=s-n;let d,f;switch(a){case 0:d=kt._rescale(g(this,Dr),t,s,l,-u),f=kt._rescale(g(this,Zo),t,s,l,-u);break;case 90:d=kt._rescaleAndSwap(g(this,Dr),t,n,l,u),f=kt._rescaleAndSwap(g(this,Zo),t,n,l,u);break;case 180:d=kt._rescale(g(this,Dr),r,n,-l,u),f=kt._rescale(g(this,Zo),r,n,-l,u);break;case 270:d=kt._rescaleAndSwap(g(this,Dr),r,s,-l,-u),f=kt._rescaleAndSwap(g(this,Zo),r,s,-l,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}get box(){return g(this,rg)}newOutliner(t,n,r,s,a,l=0){return new Jw(t,n,r,s,a,l)}getNewOutline(t,n){const[r,s,a,l]=g(this,rg),[u,d,f,p]=g(this,Hy),y=a*f,v=l*p,C=r*f+u,E=s*p+d,R=this.newOutliner({x:g(this,Zo)[0]*y+C,y:g(this,Zo)[1]*v+E},g(this,Hy),g(this,G_),t,g(this,H_),n??g(this,hh));for(let I=2;I<g(this,Zo).length;I+=2)R.add({x:g(this,Zo)[I]*y+C,y:g(this,Zo)[I+1]*v+E});return R.getOutlines()}}Hy=new WeakMap,rg=new WeakMap,hh=new WeakMap,H_=new WeakMap,Zo=new WeakMap,G_=new WeakMap,Dr=new WeakMap,HA=new WeakSet,l6=function(t){const n=g(this,Dr);let r=n[4],s=n[5];const a=[r,s,r,s];let l=r,u=s;const d=t?Math.max:Math.min;for(let p=6,y=n.length;p<y;p+=6){const v=n[p+4],C=n[p+5];if(isNaN(n[p]))jt.pointBoundingBox(v,C,a),u<C?(l=v,u=C):u===C&&(l=d(l,v));else{const E=[1/0,1/0,-1/0,-1/0];jt.bezierBoundingBox(r,s,...n.slice(p,p+6),E),jt.rectBoundingBox(...E,a),u<E[3]?(l=E[2],u=E[3]):u===E[3]&&(l=d(l,E[2]))}r=v,s=C}const f=g(this,rg);f[0]=a[0]-g(this,hh),f[1]=a[1]-g(this,hh),f[2]=a[2]-a[0]+2*g(this,hh),f[3]=a[3]-a[1]+2*g(this,hh),this.lastPoint=[l,u]};var Y_,K_,tp,Pu,Ya,u6,mw,c6,d6,CE;class EE{constructor(e,t=0,n=0,r=!0){te(this,Ya);te(this,Y_);te(this,K_);te(this,tp,[]);te(this,Pu,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:v,y:C,width:E,height:R}of e){const I=Math.floor((v-t)/a)*a,D=Math.ceil((v+E+t)/a)*a,j=Math.floor((C-t)/a)*a,X=Math.ceil((C+R+t)/a)*a,W=[I,j,X,!0],ue=[D,j,X,!1];g(this,tp).push(W,ue),jt.rectBoundingBox(I,j,D,X,s)}const l=s[2]-s[0]+2*n,u=s[3]-s[1]+2*n,d=s[0]-n,f=s[1]-n,p=g(this,tp).at(r?-1:-2),y=[p[0],p[2]];for(const v of g(this,tp)){const[C,E,R]=v;v[0]=(C-d)/l,v[1]=(E-f)/u,v[2]=(R-f)/u}G(this,Y_,new Float32Array([d,f,l,u])),G(this,K_,y)}getOutlines(){g(this,tp).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of g(this,tp))t[3]?(e.push(...ne(this,Ya,CE).call(this,t)),ne(this,Ya,c6).call(this,t)):(ne(this,Ya,d6).call(this,t),e.push(...ne(this,Ya,CE).call(this,t)));return ne(this,Ya,u6).call(this,e)}}Y_=new WeakMap,K_=new WeakMap,tp=new WeakMap,Pu=new WeakMap,Ya=new WeakSet,u6=function(e){const t=[],n=new Set;for(const a of e){const[l,u,d]=a;t.push([l,u,a],[l,d,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const u=t[a][2],d=t[a+1][2];u.push(d),d.push(u),n.add(u),n.add(d)}const r=[];let s;for(;n.size>0;){const a=n.values().next().value;let[l,u,d,f,p]=a;n.delete(a);let y=l,v=u;for(s=[l,d],r.push(s);;){let C;if(n.has(f))C=f;else if(n.has(p))C=p;else break;n.delete(C),[l,u,d,f,p]=C,y!==l&&(s.push(y,v,l,v===u?u:d),y=l),v=v===u?d:u}s.push(y,v)}return new Sz(r,g(this,Y_),g(this,K_))},mw=function(e){const t=g(this,Pu);let n=0,r=t.length-1;for(;n<=r;){const s=n+r>>1,a=t[s][0];if(a===e)return s;a<e?n=s+1:r=s-1}return r+1},c6=function([,e,t]){const n=ne(this,Ya,mw).call(this,e);g(this,Pu).splice(n,0,[e,t])},d6=function([,e,t]){const n=ne(this,Ya,mw).call(this,e);for(let r=n;r<g(this,Pu).length;r++){const[s,a]=g(this,Pu)[r];if(s!==e)break;if(s===e&&a===t){g(this,Pu).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[s,a]=g(this,Pu)[r];if(s!==e)break;if(s===e&&a===t){g(this,Pu).splice(r,1);return}}},CE=function(e){const[t,n,r]=e,s=[[t,n,r]],a=ne(this,Ya,mw).call(this,r);for(let l=0;l<a;l++){const[u,d]=g(this,Pu)[l];for(let f=0,p=s.length;f<p;f++){const[,y,v]=s[f];if(!(d<=y||v<=u)){if(y>=u){if(v>d)s[f][1]=d;else{if(p===1)return[];s.splice(f,1),f--,p--}continue}s[f][2]=u,v>d&&s.push([t,d,v])}}}return s};var W_,Gy;class Sz extends kt{constructor(t,n,r){super();te(this,W_);te(this,Gy);G(this,Gy,t),G(this,W_,n),this.lastPoint=r}toSVGPath(){const t=[];for(const n of g(this,Gy)){let[r,s]=n;t.push(`M${r} ${s}`);for(let a=2;a<n.length;a+=2){const l=n[a],u=n[a+1];l===r?(t.push(`V${u}`),s=u):u===s&&(t.push(`H${l}`),r=l)}t.push("Z")}return t.join(" ")}serialize([t,n,r,s],a){const l=[],u=r-t,d=s-n;for(const f of g(this,Gy)){const p=new Array(f.length);for(let y=0;y<f.length;y+=2)p[y]=t+f[y]*u,p[y+1]=s-f[y+1]*d;l.push(p)}return l}get box(){return g(this,W_)}get classNamesForOutlining(){return["highlightOutline"]}}W_=new WeakMap,Gy=new WeakMap;class NE extends Jw{newFreeDrawOutline(e,t,n,r,s,a){return new Tz(e,t,n,r,s,a)}}class Tz extends o6{newOutliner(e,t,n,r,s,a=0){return new NE(e,t,n,r,s,a)}}var Mu,sg,Yy,hs,Q_,Ky,X_,J_,np,Du,Wy,Z_,ki,kE,IE,RE,lm,h6,Sf;const fo=class fo{constructor({editor:e=null,uiManager:t=null}){te(this,ki);te(this,Mu,null);te(this,sg,null);te(this,Yy);te(this,hs,null);te(this,Q_,!1);te(this,Ky,!1);te(this,X_,null);te(this,J_);te(this,np,null);te(this,Du,null);te(this,Wy);var n;e?(G(this,Ky,!1),G(this,Wy,jn.HIGHLIGHT_COLOR),G(this,X_,e)):(G(this,Ky,!0),G(this,Wy,jn.HIGHLIGHT_DEFAULT_COLOR)),G(this,Du,(e==null?void 0:e._uiManager)||t),G(this,J_,g(this,Du)._eventBus),G(this,Yy,(e==null?void 0:e.color)||((n=g(this,Du))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),g(fo,Z_)||G(fo,Z_,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Vn(this,"_keyboardManager",new c2([[["Escape","mac+Escape"],fo.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],fo.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],fo.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],fo.prototype._moveToPrevious],[["Home","mac+Home"],fo.prototype._moveToBeginning],[["End","mac+End"],fo.prototype._moveToEnd]]))}renderButton(){const e=G(this,Mu,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=g(this,Du)._signal;e.addEventListener("click",ne(this,ki,lm).bind(this),{signal:t}),e.addEventListener("keydown",ne(this,ki,RE).bind(this),{signal:t});const n=G(this,sg,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=g(this,Yy),e.append(n),e}renderMainDropdown(){const e=G(this,hs,ne(this,ki,kE).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===g(this,Mu)){ne(this,ki,lm).call(this,e);return}const t=e.target.getAttribute("data-color");t&&ne(this,ki,IE).call(this,t,e)}_moveToNext(e){var t,n;if(!g(this,ki,Sf)){ne(this,ki,lm).call(this,e);return}if(e.target===g(this,Mu)){(t=g(this,hs).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=g(this,hs))==null?void 0:t.firstChild)||e.target===g(this,Mu)){g(this,ki,Sf)&&this._hideDropdownFromKeyboard();return}g(this,ki,Sf)||ne(this,ki,lm).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!g(this,ki,Sf)){ne(this,ki,lm).call(this,e);return}(t=g(this,hs).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!g(this,ki,Sf)){ne(this,ki,lm).call(this,e);return}(t=g(this,hs).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=g(this,hs))==null||e.classList.add("hidden"),(t=g(this,np))==null||t.abort(),G(this,np,null)}_hideDropdownFromKeyboard(){var e;if(!g(this,Ky)){if(!g(this,ki,Sf)){(e=g(this,X_))==null||e.unselect();return}this.hideDropdown(),g(this,Mu).focus({preventScroll:!0,focusVisible:g(this,Q_)})}}updateColor(e){if(g(this,sg)&&(g(this,sg).style.backgroundColor=e),!g(this,hs))return;const t=g(this,Du).highlightColors.values();for(const n of g(this,hs).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=g(this,Mu))==null||e.remove(),G(this,Mu,null),G(this,sg,null),(t=g(this,hs))==null||t.remove(),G(this,hs,null)}};Mu=new WeakMap,sg=new WeakMap,Yy=new WeakMap,hs=new WeakMap,Q_=new WeakMap,Ky=new WeakMap,X_=new WeakMap,J_=new WeakMap,np=new WeakMap,Du=new WeakMap,Wy=new WeakMap,Z_=new WeakMap,ki=new WeakSet,kE=function(){const e=document.createElement("div"),t=g(this,Du)._signal;e.addEventListener("contextmenu",ju,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of g(this,Du).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=n,s.setAttribute("data-l10n-id",g(fo,Z_)[n]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.setAttribute("aria-selected",r===g(this,Yy)),s.addEventListener("click",ne(this,ki,IE).bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",ne(this,ki,RE).bind(this),{signal:t}),e},IE=function(e,t){t.stopPropagation(),g(this,J_).dispatch("switchannotationeditorparams",{source:this,type:g(this,Wy),value:e})},RE=function(e){fo._keyboardManager.exec(this,e)},lm=function(e){if(g(this,ki,Sf)){this.hideDropdown();return}if(G(this,Q_,e.detail===0),g(this,np)||(G(this,np,new AbortController),window.addEventListener("pointerdown",ne(this,ki,h6).bind(this),{signal:g(this,Du).combinedSignal(g(this,np))})),g(this,hs)){g(this,hs).classList.remove("hidden");return}const t=G(this,hs,ne(this,ki,kE).call(this));g(this,Mu).append(t)},h6=function(e){var t;(t=g(this,hs))!=null&&t.contains(e.target)||this.hideDropdown()},Sf=function(){return g(this,hs)&&!g(this,hs).classList.contains("hidden")},te(fo,Z_,null);let Zw=fo;var Qy,e2,fh,ag,Xy,yo,t2,n2,og,zl,el,$s,Jy,ph,Aa,Zy,jl,i2,wn,LE,gw,f6,p6,m6,PE,um,Hl,k0,g6,yw,Y1,y6,v6,b6,_6,x6;const ci=class ci extends zi{constructor(t){super({...t,name:"highlightEditor"});te(this,wn);te(this,Qy,null);te(this,e2,0);te(this,fh);te(this,ag,null);te(this,Xy,null);te(this,yo,null);te(this,t2,null);te(this,n2,0);te(this,og,null);te(this,zl,null);te(this,el,null);te(this,$s,!1);te(this,Jy,null);te(this,ph);te(this,Aa,null);te(this,Zy,"");te(this,jl);te(this,i2,"");this.color=t.color||ci._defaultColor,G(this,jl,t.thickness||ci._defaultThickness),G(this,ph,t.opacity||ci._defaultOpacity),G(this,fh,t.boxes||null),G(this,i2,t.methodOfCreation||""),G(this,Zy,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(G(this,$s,!0),ne(this,wn,gw).call(this,t),ne(this,wn,um).call(this)):g(this,fh)&&(G(this,Qy,t.anchorNode),G(this,e2,t.anchorOffset),G(this,t2,t.focusNode),G(this,n2,t.focusOffset),ne(this,wn,LE).call(this),ne(this,wn,um).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ci.prototype;return Vn(this,"_keyboardManager",new c2([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:g(this,$s)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:g(this,jl),methodOfCreation:g(this,i2)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;zi.initialize(t,n),ci._defaultColor||(ci._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case jn.HIGHLIGHT_DEFAULT_COLOR:ci._defaultColor=n;break;case jn.HIGHLIGHT_THICKNESS:ci._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return g(this,Jy)}updateParams(t,n){switch(t){case jn.HIGHLIGHT_COLOR:ne(this,wn,f6).call(this,n);break;case jn.HIGHLIGHT_THICKNESS:ne(this,wn,p6).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jn.HIGHLIGHT_DEFAULT_COLOR,ci._defaultColor],[jn.HIGHLIGHT_THICKNESS,ci._defaultThickness]]}get propertiesToUpdate(){return[[jn.HIGHLIGHT_COLOR,this.color||ci._defaultColor],[jn.HIGHLIGHT_THICKNESS,g(this,jl)||ci._defaultThickness],[jn.HIGHLIGHT_FREE,g(this,$s)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(G(this,Xy,new Zw({editor:this})),t.addColorPicker(g(this,Xy))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(ne(this,wn,Y1).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,ne(this,wn,Y1).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){ne(this,wn,PE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(ne(this,wn,um).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?ne(this,wn,PE).call(this):t&&(ne(this,wn,um).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var s,a,l;const{drawLayer:n}=this.parent;let r;g(this,$s)?(t=(t-this.rotation+360)%360,r=ne(s=ci,Hl,k0).call(s,g(this,zl).box,t)):r=ne(a=ci,Hl,k0).call(a,[this.x,this.y,this.width,this.height],t),n.updateProperties(g(this,el),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(g(this,Aa),{bbox:ne(l=ci,Hl,k0).call(l,g(this,yo).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();g(this,Zy)&&(t.setAttribute("aria-label",g(this,Zy)),t.setAttribute("role","mark")),g(this,$s)?t.classList.add("free"):this.div.addEventListener("keydown",ne(this,wn,g6).bind(this),{signal:this._uiManager._signal});const n=G(this,og,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=g(this,ag);const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),BM(this,g(this,og),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(g(this,Aa),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(g(this,Aa),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:ne(this,wn,yw).call(this,!0);break;case 1:case 3:ne(this,wn,yw).call(this,!1);break}}select(){var t;super.select(),g(this,Aa)&&((t=this.parent)==null||t.drawLayer.updateProperties(g(this,Aa),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),g(this,Aa)&&((t=this.parent)==null||t.drawLayer.updateProperties(g(this,Aa),{rootClass:{selected:!1}}),g(this,$s)||ne(this,wn,yw).call(this,!1))}get _mustFixPosition(){return!g(this,$s)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(g(this,el),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(g(this,Aa),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:s,y:a}){const{x:l,y:u,width:d,height:f}=r.getBoundingClientRect(),p=new AbortController,y=t.combinedSignal(p),v=C=>{p.abort(),ne(this,Hl,_6).call(this,t,C)};window.addEventListener("blur",v,{signal:y}),window.addEventListener("pointerup",v,{signal:y}),window.addEventListener("pointerdown",Jr,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",ju,{signal:y}),r.addEventListener("pointermove",ne(this,Hl,b6).bind(this,t),{signal:y}),this._freeHighlight=new NE({x:s,y:a},[l,u,d,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var E,R,I,D;let s=null;if(t instanceof KD){const{data:{quadPoints:j,rect:X,rotation:W,id:ue,color:U,opacity:P,popupRef:V},parent:{page:{pageNumber:Y}}}=t;s=t={annotationType:vn.HIGHLIGHT,color:Array.from(U),opacity:P,quadPoints:j,boxes:null,pageIndex:Y-1,rect:X.slice(0),rotation:W,id:ue,deleted:!1,popupRef:V}}else if(t instanceof hN){const{data:{inkLists:j,rect:X,rotation:W,id:ue,color:U,borderStyle:{rawWidth:P},popupRef:V},parent:{page:{pageNumber:Y}}}=t;s=t={annotationType:vn.HIGHLIGHT,color:Array.from(U),thickness:P,inkLists:j,boxes:null,pageIndex:Y-1,rect:X.slice(0),rotation:W,id:ue,deleted:!1,popupRef:V}}const{color:a,quadPoints:l,inkLists:u,opacity:d}=t,f=await super.deserialize(t,n,r);f.color=jt.makeHexColor(...a),G(f,ph,d||1),u&&G(f,jl,t.thickness),f.annotationElementId=t.id||null,f._initialData=s;const[p,y]=f.pageDimensions,[v,C]=f.pageTranslation;if(l){const j=G(f,fh,[]);for(let X=0;X<l.length;X+=8)j.push({x:(l[X]-v)/p,y:1-(l[X+1]-C)/y,width:(l[X+2]-l[X])/p,height:(l[X+1]-l[X+5])/y});ne(E=f,wn,LE).call(E),ne(R=f,wn,um).call(R),f.rotate(f.rotation)}else if(u){G(f,$s,!0);const j=u[0],X={x:j[0]-v,y:y-(j[1]-C)},W=new NE(X,[0,0,p,y],1,g(f,jl)/2,!0,.001);for(let P=0,V=j.length;P<V;P+=2)X.x=j[P]-v,X.y=y-(j[P+1]-C),W.add(X);const{id:ue,clipPathId:U}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:W.toSVGPath()}},!0,!0);ne(I=f,wn,gw).call(I,{highlightOutlines:W.getOutlines(),highlightId:ue,clipPathId:U}),ne(D=f,wn,um).call(D),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=zi._colorManager.convert(this.color),s={annotationType:vn.HIGHLIGHT,color:r,opacity:g(this,ph),thickness:g(this,jl),quadPoints:ne(this,wn,y6).call(this),outlines:ne(this,wn,v6).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:ne(this,wn,Y1).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!ne(this,wn,x6).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Qy=new WeakMap,e2=new WeakMap,fh=new WeakMap,ag=new WeakMap,Xy=new WeakMap,yo=new WeakMap,t2=new WeakMap,n2=new WeakMap,og=new WeakMap,zl=new WeakMap,el=new WeakMap,$s=new WeakMap,Jy=new WeakMap,ph=new WeakMap,Aa=new WeakMap,Zy=new WeakMap,jl=new WeakMap,i2=new WeakMap,wn=new WeakSet,LE=function(){const t=new EE(g(this,fh),.001);G(this,zl,t.getOutlines()),[this.x,this.y,this.width,this.height]=g(this,zl).box;const n=new EE(g(this,fh),.0025,.001,this._uiManager.direction==="ltr");G(this,yo,n.getOutlines());const{lastPoint:r}=g(this,yo);G(this,Jy,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},gw=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var p,y;if(G(this,zl,t),G(this,yo,t.getNewOutline(g(this,jl)/2+1.5,.0025)),n>=0)G(this,el,n),G(this,ag,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),G(this,Aa,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:g(this,yo).box,path:{d:g(this,yo).toSVGPath()}},!0));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(g(this,el),{bbox:ne(p=ci,Hl,k0).call(p,g(this,zl).box,(v-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(g(this,Aa),{bbox:ne(y=ci,Hl,k0).call(y,g(this,yo).box,v),path:{d:g(this,yo).toSVGPath()}})}const[a,l,u,d]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=u,this.height=d;break;case 90:{const[v,C]=this.parentDimensions;this.x=l,this.y=1-a,this.width=u*C/v,this.height=d*v/C;break}case 180:this.x=1-a,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[v,C]=this.parentDimensions;this.x=1-l,this.y=a,this.width=u*C/v,this.height=d*v/C;break}}const{lastPoint:f}=g(this,yo);G(this,Jy,[(f[0]-a)/u,(f[1]-l)/d])},f6=function(t){const n=(a,l)=>{var u,d;this.color=a,G(this,ph,l),(u=this.parent)==null||u.drawLayer.updateProperties(g(this,el),{root:{fill:a,"fill-opacity":l}}),(d=g(this,Xy))==null||d.updateColor(a)},r=this.color,s=g(this,ph);this.addCommands({cmd:n.bind(this,t,ci._defaultOpacity),undo:n.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},p6=function(t){const n=g(this,jl),r=s=>{G(this,jl,s),ne(this,wn,m6).call(this,s)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},m6=function(t){if(!g(this,$s))return;ne(this,wn,gw).call(this,{highlightOutlines:g(this,zl).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},PE=function(){g(this,el)===null||!this.parent||(this.parent.drawLayer.remove(g(this,el)),G(this,el,null),this.parent.drawLayer.remove(g(this,Aa)),G(this,Aa,null))},um=function(t=this.parent){g(this,el)===null&&({id:Oa(this,el)._,clipPathId:Oa(this,ag)._}=t.drawLayer.draw({bbox:g(this,zl).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":g(this,ph)},rootClass:{highlight:!0,free:g(this,$s)},path:{d:g(this,zl).toSVGPath()}},!1,!0),G(this,Aa,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:g(this,$s)},bbox:g(this,yo).box,path:{d:g(this,yo).toSVGPath()}},g(this,$s))),g(this,og)&&(g(this,og).style.clipPath=g(this,ag)))},Hl=new WeakSet,k0=function([t,n,r,s],a){switch(a){case 90:return[1-n-s,t,s,r];case 180:return[1-t-r,1-n-s,r,s];case 270:return[n,1-t-r,s,r]}return[t,n,r,s]},g6=function(t){ci._keyboardManager.exec(this,t)},yw=function(t){if(!g(this,Qy))return;const n=window.getSelection();t?n.setPosition(g(this,Qy),g(this,e2)):n.setPosition(g(this,t2),g(this,n2))},Y1=function(){return g(this,$s)?this.rotation:0},y6=function(){if(g(this,$s))return null;const[t,n]=this.pageDimensions,[r,s]=this.pageTranslation,a=g(this,fh),l=new Float32Array(a.length*8);let u=0;for(const{x:d,y:f,width:p,height:y}of a){const v=d*t+r,C=(1-f)*n+s;l[u]=l[u+4]=v,l[u+1]=l[u+3]=C,l[u+2]=l[u+6]=v+p*t,l[u+5]=l[u+7]=C-y*n,u+=8}return l},v6=function(t){return g(this,zl).serialize(t,ne(this,wn,Y1).call(this))},b6=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},_6=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},x6=function(t){const{color:n}=this._initialData;return t.color.some((r,s)=>r!==n[s])},te(ci,Hl),ht(ci,"_defaultColor",null),ht(ci,"_defaultOpacity",1),ht(ci,"_defaultThickness",12),ht(ci,"_type","highlight"),ht(ci,"_editorType",vn.HIGHLIGHT),ht(ci,"_freeHighlightId",-1),ht(ci,"_freeHighlight",null),ht(ci,"_freeHighlightClipId","");let eA=ci;var lg;class w6{constructor(){te(this,lg,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){g(this,lg)[e]=t}toSVGProperties(){const e=g(this,lg);return G(this,lg,Object.create(null)),{root:e}}reset(){G(this,lg,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Ii("Not implemented")}}lg=new WeakMap;var tl,ev,Es,ug,cg,ip,rp,sp,dg,Xn,ME,DE,OE,K1,A6,vw,W1,I0;const Rt=class Rt extends zi{constructor(t){super(t);te(this,Xn);te(this,tl,null);te(this,ev);ht(this,"_drawId",null);G(this,ev,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(ne(this,Xn,ME).call(this,t),ne(this,Xn,K1).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[s,a]of Object.entries(n))r.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){Ii("Not implemented")}static get typesMap(){Ii("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(g(Rt,Es).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,s]of this.typesMap)t.push([r,n[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,s]of this.constructor.typesMap)t.push([r,n[s]]);return t}_updateProperty(t,n,r){const s=this._drawingOptions,a=s[n],l=u=>{var f;s.updateProperty(n,u);const d=g(this,tl).updateProperty(n,u);d&&ne(this,Xn,W1).call(this,d),(f=this.parent)==null||f.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:l.bind(this,r),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties(g(this,tl).getPathResizingSVGProperties(ne(this,Xn,vw).call(this)),{bbox:ne(this,Xn,I0).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties(g(this,tl).getPathResizedSVGProperties(ne(this,Xn,vw).call(this)),{bbox:ne(this,Xn,I0).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:ne(this,Xn,I0).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties(g(this,tl).getPathTranslatedSVGProperties(ne(this,Xn,vw).call(this),this.parentDimensions),{bbox:ne(this,Xn,I0).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,g(this,ev)&&(G(this,ev,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){ne(this,Xn,OE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(ne(this,Xn,K1).call(this),ne(this,Xn,W1).call(this,g(this,tl).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),ne(this,Xn,OE).call(this)):t&&(this._uiManager.addShouldRescale(this),ne(this,Xn,K1).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties({bbox:ne(this,Xn,I0).call(this)},g(this,tl).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&ne(this,Xn,W1).call(this,g(this,tl).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const r=super.render();r.classList.add("draw");const s=document.createElement("div");r.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[a,l]=this.parentDimensions;return this.setDims(this.width*a,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),r}static createDrawerInstance(t,n,r,s,a){Ii("Not implemented")}static startDrawing(t,n,r,s){var R;const{target:a,offsetX:l,offsetY:u,pointerId:d,pointerType:f}=s;if(g(Rt,rp)&&g(Rt,rp)!==f)return;const{viewport:{rotation:p}}=t,{width:y,height:v}=a.getBoundingClientRect(),C=G(Rt,ug,new AbortController),E=t.combinedSignal(C);if(g(Rt,ip)||G(Rt,ip,d),g(Rt,rp)??G(Rt,rp,f),window.addEventListener("pointerup",I=>{var D;g(Rt,ip)===I.pointerId?this._endDraw(I):(D=g(Rt,sp))==null||D.delete(I.pointerId)},{signal:E}),window.addEventListener("pointercancel",I=>{var D;g(Rt,ip)===I.pointerId?this._currentParent.endDrawingSession():(D=g(Rt,sp))==null||D.delete(I.pointerId)},{signal:E}),window.addEventListener("pointerdown",I=>{g(Rt,rp)===I.pointerType&&((g(Rt,sp)||G(Rt,sp,new Set)).add(I.pointerId),g(Rt,Es).isCancellable()&&(g(Rt,Es).removeLastElement(),g(Rt,Es).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",ju,{signal:E}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),a.addEventListener("touchmove",I=>{I.timeStamp===g(Rt,dg)&&Jr(I)},{signal:E}),t.toggleDrawing(),(R=n._editorUndoBar)==null||R.hide(),g(Rt,Es)){t.drawLayer.updateProperties(this._currentDrawId,g(Rt,Es).startNew(l,u,y,v,p));return}n.updateUIForDefaultProperties(this),G(Rt,Es,this.createDrawerInstance(l,u,y,v,p)),G(Rt,cg,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(g(Rt,cg).toSVGProperties(),g(Rt,Es).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(G(Rt,dg,-1),!g(Rt,Es))return;const{offsetX:n,offsetY:r,pointerId:s}=t;if(g(Rt,ip)===s){if(((a=g(Rt,sp))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,g(Rt,Es).add(n,r)),G(Rt,dg,t.timeStamp),Jr(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,G(Rt,Es,null),G(Rt,cg,null),G(Rt,rp,null),G(Rt,dg,NaN)),g(Rt,ug)&&(g(Rt,ug).abort(),G(Rt,ug,null),G(Rt,ip,NaN),G(Rt,sp,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,g(Rt,Es).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=g(Rt,Es),s=this._currentDrawId,a=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,r.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:jn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(jn.DRAW_STEP),!g(Rt,Es).isEmpty()){const{pageDimensions:[r,s],scale:a}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:g(Rt,Es).getOutlines(r*a,s*a,a,this._INNER_MARGIN),drawingOptions:g(Rt,cg),mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,s,a,l){Ii("Not implemented")}static async deserialize(t,n,r){var p,y;const{rawDims:{pageWidth:s,pageHeight:a,pageX:l,pageY:u}}=n.viewport,d=this.deserializeDraw(l,u,s,a,this._INNER_MARGIN,t),f=await super.deserialize(t,n,r);return f.createDrawingOptions(t),ne(p=f,Xn,ME).call(p,{drawOutlines:d}),ne(y=f,Xn,K1).call(y),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[n,r]=this.pageTranslation,[s,a]=this.pageDimensions;return g(this,tl).serialize([n,r,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};tl=new WeakMap,ev=new WeakMap,Es=new WeakMap,ug=new WeakMap,cg=new WeakMap,ip=new WeakMap,rp=new WeakMap,sp=new WeakMap,dg=new WeakMap,Xn=new WeakSet,ME=function({drawOutlines:t,drawId:n,drawingOptions:r}){G(this,tl,t),this._drawingOptions||(this._drawingOptions=r),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=ne(this,Xn,DE).call(this,t,this.parent),ne(this,Xn,W1).call(this,t.box)},DE=function(t,n){const{id:r}=n.drawLayer.draw(Rt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},OE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},K1=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=ne(this,Xn,DE).call(this,g(this,tl),t)}},A6=function([t,n,r,s]){const{parentDimensions:[a,l],rotation:u}=this;switch(u){case 90:return[n,1-t,r*(l/a),s*(a/l)];case 180:return[1-t,1-n,r,s];case 270:return[1-n,t,r*(l/a),s*(a/l)];default:return[t,n,r,s]}},vw=function(){const{x:t,y:n,width:r,height:s,parentDimensions:[a,l],rotation:u}=this;switch(u){case 90:return[1-n,t,r*(a/l),s*(l/a)];case 180:return[1-t,1-n,r,s];case 270:return[n,1-t,r*(a/l),s*(l/a)];default:return[t,n,r,s]}},W1=function(t){if([this.x,this.y,this.width,this.height]=ne(this,Xn,A6).call(this,t),this.div){this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()},I0=function(){const{x:t,y:n,width:r,height:s,rotation:a,parentRotation:l,parentDimensions:[u,d]}=this;switch((a*4+l)/90){case 1:return[1-n-s,t,s,r];case 2:return[1-t-r,1-n-s,r,s];case 3:return[n,1-t-r,s,r];case 4:return[t,n-r*(u/d),s*(d/u),r*(u/d)];case 5:return[1-n,t,r*(u/d),s*(d/u)];case 6:return[1-t-s*(d/u),1-n,s*(d/u),r*(u/d)];case 7:return[n-r*(u/d),1-t-s*(d/u),r*(u/d),s*(d/u)];case 8:return[t-r,n-s,r,s];case 9:return[1-n,t-r,s,r];case 10:return[1-t,1-n,r,s];case 11:return[n-s,1-t,s,r];case 12:return[t-s*(d/u),n,s*(d/u),r*(u/d)];case 13:return[1-n-r*(u/d),t-s*(d/u),r*(u/d),s*(d/u)];case 14:return[1-t,1-n-r*(u/d),s*(d/u),r*(u/d)];case 15:return[n,1-t,r*(u/d),s*(d/u)];default:return[t,n,r,s]}},ht(Rt,"_currentDrawId",-1),ht(Rt,"_currentParent",null),te(Rt,Es,null),te(Rt,ug,null),te(Rt,cg,null),te(Rt,ip,NaN),te(Rt,rp,null),te(Rt,sp,null),te(Rt,dg,NaN),ht(Rt,"_INNER_MARGIN",3);let tA=Rt;var Uc,Cs,Ns,hg,tv,Ba,Hs,ql,fg,pg,mg,nv,bw;class Ez{constructor(e,t,n,r,s,a){te(this,nv);te(this,Uc,new Float64Array(6));te(this,Cs);te(this,Ns);te(this,hg);te(this,tv);te(this,Ba);te(this,Hs,"");te(this,ql,0);te(this,fg,new f2);te(this,pg);te(this,mg);G(this,pg,n),G(this,mg,r),G(this,hg,s),G(this,tv,a),[e,t]=ne(this,nv,bw).call(this,e,t);const l=G(this,Cs,[NaN,NaN,NaN,NaN,e,t]);G(this,Ba,[e,t]),G(this,Ns,[{line:l,points:g(this,Ba)}]),g(this,Uc).set(l,0)}updateProperty(e,t){e==="stroke-width"&&G(this,tv,t)}isEmpty(){return!g(this,Ns)||g(this,Ns).length===0}isCancellable(){return g(this,Ba).length<=10}add(e,t){[e,t]=ne(this,nv,bw).call(this,e,t);const[n,r,s,a]=g(this,Uc).subarray(2,6),l=e-s,u=t-a;return Math.hypot(g(this,pg)*l,g(this,mg)*u)<=2?null:(g(this,Ba).push(e,t),isNaN(n)?(g(this,Uc).set([s,a,e,t],2),g(this,Cs).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(g(this,Uc)[0])&&g(this,Cs).splice(6,6),g(this,Uc).set([n,r,s,a,e,t],0),g(this,Cs).push(...kt.createBezierPoints(n,r,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(g(this,Ba).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,s){G(this,pg,n),G(this,mg,r),G(this,hg,s),[e,t]=ne(this,nv,bw).call(this,e,t);const a=G(this,Cs,[NaN,NaN,NaN,NaN,e,t]);G(this,Ba,[e,t]);const l=g(this,Ns).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),g(this,Ns).push({line:a,points:g(this,Ba)}),g(this,Uc).set(a,0),G(this,ql,0),this.toSVGPath(),null}getLastElement(){return g(this,Ns).at(-1)}setLastElement(e){return g(this,Ns)?(g(this,Ns).push(e),G(this,Cs,e.line),G(this,Ba,e.points),G(this,ql,0),{path:{d:this.toSVGPath()}}):g(this,fg).setLastElement(e)}removeLastElement(){if(!g(this,Ns))return g(this,fg).removeLastElement();g(this,Ns).pop(),G(this,Hs,"");for(let e=0,t=g(this,Ns).length;e<t;e++){const{line:n,points:r}=g(this,Ns)[e];G(this,Cs,n),G(this,Ba,r),G(this,ql,0),this.toSVGPath()}return{path:{d:g(this,Hs)}}}toSVGPath(){const e=kt.svgRound(g(this,Cs)[4]),t=kt.svgRound(g(this,Cs)[5]);if(g(this,Ba).length===2)return G(this,Hs,`${g(this,Hs)} M ${e} ${t} Z`),g(this,Hs);if(g(this,Ba).length<=6){const r=g(this,Hs).lastIndexOf("M");G(this,Hs,`${g(this,Hs).slice(0,r)} M ${e} ${t}`),G(this,ql,6)}if(g(this,Ba).length===4){const r=kt.svgRound(g(this,Cs)[10]),s=kt.svgRound(g(this,Cs)[11]);return G(this,Hs,`${g(this,Hs)} L ${r} ${s}`),G(this,ql,12),g(this,Hs)}const n=[];g(this,ql)===0&&(n.push(`M ${e} ${t}`),G(this,ql,6));for(let r=g(this,ql),s=g(this,Cs).length;r<s;r+=6){const[a,l,u,d,f,p]=g(this,Cs).slice(r,r+6).map(kt.svgRound);n.push(`C${a} ${l} ${u} ${d} ${f} ${p}`)}return G(this,Hs,g(this,Hs)+n.join(" ")),G(this,ql,g(this,Cs).length),g(this,Hs)}getOutlines(e,t,n,r){const s=g(this,Ns).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),g(this,fg).build(g(this,Ns),e,t,n,g(this,hg),g(this,tv),r),G(this,Uc,null),G(this,Cs,null),G(this,Ns,null),G(this,Hs,null),g(this,fg)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Uc=new WeakMap,Cs=new WeakMap,Ns=new WeakMap,hg=new WeakMap,tv=new WeakMap,Ba=new WeakMap,Hs=new WeakMap,ql=new WeakMap,fg=new WeakMap,pg=new WeakMap,mg=new WeakMap,nv=new WeakSet,bw=function(e,t){return kt._normalizePoint(e,t,g(this,pg),g(this,mg),g(this,hg))};var Ua,r2,s2,nl,zc,jc,iv,rv,gg,Ks,jd,S6,T6,E6;class f2 extends kt{constructor(){super(...arguments);te(this,Ks);te(this,Ua);te(this,r2,0);te(this,s2);te(this,nl);te(this,zc);te(this,jc);te(this,iv);te(this,rv);te(this,gg)}build(t,n,r,s,a,l,u){G(this,zc,n),G(this,jc,r),G(this,iv,s),G(this,rv,a),G(this,gg,l),G(this,s2,u??0),G(this,nl,t),ne(this,Ks,T6).call(this)}get thickness(){return g(this,gg)}setLastElement(t){return g(this,nl).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return g(this,nl).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of g(this,nl)){if(t.push(`M${kt.svgRound(n[4])} ${kt.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${kt.svgRound(n[10])} ${kt.svgRound(n[11])}`);continue}for(let r=6,s=n.length;r<s;r+=6){const[a,l,u,d,f,p]=n.subarray(r,r+6).map(kt.svgRound);t.push(`C${a} ${l} ${u} ${d} ${f} ${p}`)}}return t.join("")}serialize([t,n,r,s],a){const l=[],u=[],[d,f,p,y]=ne(this,Ks,S6).call(this);let v,C,E,R,I,D,j,X,W;switch(g(this,rv)){case 0:W=kt._rescale,v=t,C=n+s,E=r,R=-s,I=t+d*r,D=n+(1-f-y)*s,j=t+(d+p)*r,X=n+(1-f)*s;break;case 90:W=kt._rescaleAndSwap,v=t,C=n,E=r,R=s,I=t+f*r,D=n+d*s,j=t+(f+y)*r,X=n+(d+p)*s;break;case 180:W=kt._rescale,v=t+r,C=n,E=-r,R=s,I=t+(1-d-p)*r,D=n+f*s,j=t+(1-d)*r,X=n+(f+y)*s;break;case 270:W=kt._rescaleAndSwap,v=t+r,C=n+s,E=-r,R=-s,I=t+(1-f-y)*r,D=n+(1-d-p)*s,j=t+(1-f)*r,X=n+(1-d)*s;break}for(const{line:ue,points:U}of g(this,nl))l.push(W(ue,v,C,E,R,a?new Array(ue.length):null)),u.push(W(U,v,C,E,R,a?new Array(U.length):null));return{lines:l,points:u,rect:[I,D,j,X]}}static deserialize(t,n,r,s,a,{paths:{lines:l,points:u},rotation:d,thickness:f}){const p=[];let y,v,C,E,R;switch(d){case 0:R=kt._rescale,y=-t/r,v=n/s+1,C=1/r,E=-1/s;break;case 90:R=kt._rescaleAndSwap,y=-n/s,v=-t/r,C=1/s,E=1/r;break;case 180:R=kt._rescale,y=t/r+1,v=-n/s,C=-1/r,E=1/s;break;case 270:R=kt._rescaleAndSwap,y=n/s+1,v=t/r+1,C=-1/s,E=-1/r;break}if(!l){l=[];for(const D of u){const j=D.length;if(j===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1]]));continue}if(j===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1],NaN,NaN,NaN,NaN,D[2],D[3]]));continue}const X=new Float32Array(3*(j-2));l.push(X);let[W,ue,U,P]=D.subarray(0,4);X.set([NaN,NaN,NaN,NaN,W,ue],0);for(let V=4;V<j;V+=2){const Y=D[V],O=D[V+1];X.set(kt.createBezierPoints(W,ue,U,P,Y,O),(V-2)*3),[W,ue,U,P]=[U,P,Y,O]}}}for(let D=0,j=l.length;D<j;D++)p.push({line:R(l[D].map(X=>X??NaN),y,v,C,E),points:R(u[D].map(X=>X??NaN),y,v,C,E)});const I=new this.prototype.constructor;return I.build(p,r,s,1,d,f,a),I}get box(){return g(this,Ua)}updateProperty(t,n){return t==="stroke-width"?ne(this,Ks,E6).call(this,n):null}updateParentDimensions([t,n],r){const[s,a]=ne(this,Ks,jd).call(this);G(this,zc,t),G(this,jc,n),G(this,iv,r);const[l,u]=ne(this,Ks,jd).call(this),d=l-s,f=u-a,p=g(this,Ua);return p[0]-=d,p[1]-=f,p[2]+=2*d,p[3]+=2*f,p}updateRotation(t){return G(this,r2,t),{path:{transform:this.rotationTransform}}}get viewBox(){return g(this,Ua).map(kt.svgRound).join(" ")}get defaultProperties(){const[t,n]=g(this,Ua);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=g(this,Ua);let r=0,s=0,a=0,l=0,u=0,d=0;switch(g(this,r2)){case 90:s=n/t,a=-t/n,u=t;break;case 180:r=-1,l=-1,u=t,d=n;break;case 270:s=-n/t,a=t/n,d=n;break;default:return""}return`matrix(${r} ${s} ${a} ${l} ${kt.svgRound(u)} ${kt.svgRound(d)})`}getPathResizingSVGProperties([t,n,r,s]){const[a,l]=ne(this,Ks,jd).call(this),[u,d,f,p]=g(this,Ua);if(Math.abs(f-a)<=kt.PRECISION||Math.abs(p-l)<=kt.PRECISION){const R=t+r/2-(u+f/2),I=n+s/2-(d+p/2);return{path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${R} ${I})`}}}const y=(r-2*a)/(f-2*a),v=(s-2*l)/(p-2*l),C=f/r,E=p/s;return{path:{"transform-origin":`${kt.svgRound(u)} ${kt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${C} ${E}) translate(${kt.svgRound(a)} ${kt.svgRound(l)}) scale(${y} ${v}) translate(${kt.svgRound(-a)} ${kt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,r,s]){const[a,l]=ne(this,Ks,jd).call(this),u=g(this,Ua),[d,f,p,y]=u;if(u[0]=t,u[1]=n,u[2]=r,u[3]=s,Math.abs(p-a)<=kt.PRECISION||Math.abs(y-l)<=kt.PRECISION){const I=t+r/2-(d+p/2),D=n+s/2-(f+y/2);for(const{line:j,points:X}of g(this,nl))kt._translate(j,I,D,j),kt._translate(X,I,D,X);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(r-2*a)/(p-2*a),C=(s-2*l)/(y-2*l),E=-v*(d+a)+t+a,R=-C*(f+l)+n+l;if(v!==1||C!==1||E!==0||R!==0)for(const{line:I,points:D}of g(this,nl))kt._rescale(I,E,R,v,C,I),kt._rescale(D,E,R,v,C,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[s,a]=r,l=g(this,Ua),u=t-l[0],d=n-l[1];if(g(this,zc)===s&&g(this,jc)===a)for(const{line:f,points:p}of g(this,nl))kt._translate(f,u,d,f),kt._translate(p,u,d,p);else{const f=g(this,zc)/s,p=g(this,jc)/a;G(this,zc,s),G(this,jc,a);for(const{line:y,points:v}of g(this,nl))kt._rescale(y,u,d,f,p,y),kt._rescale(v,u,d,f,p,v);l[2]*=f,l[3]*=p}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(n)}`}}}get defaultSVGProperties(){const t=g(this,Ua);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${kt.svgRound(t[0])} ${kt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Ua=new WeakMap,r2=new WeakMap,s2=new WeakMap,nl=new WeakMap,zc=new WeakMap,jc=new WeakMap,iv=new WeakMap,rv=new WeakMap,gg=new WeakMap,Ks=new WeakSet,jd=function(t=g(this,gg)){const n=g(this,s2)+t/2*g(this,iv);return g(this,rv)%180===0?[n/g(this,zc),n/g(this,jc)]:[n/g(this,jc),n/g(this,zc)]},S6=function(){const[t,n,r,s]=g(this,Ua),[a,l]=ne(this,Ks,jd).call(this,0);return[t+a,n+l,r-2*a,s-2*l]},T6=function(){const t=G(this,Ua,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of g(this,nl)){if(s.length<=12){for(let u=4,d=s.length;u<d;u+=6)jt.pointBoundingBox(s[u],s[u+1],t);continue}let a=s[4],l=s[5];for(let u=6,d=s.length;u<d;u+=6){const[f,p,y,v,C,E]=s.subarray(u,u+6);jt.bezierBoundingBox(a,l,f,p,y,v,C,E,t),a=C,l=E}}const[n,r]=ne(this,Ks,jd).call(this);t[0]=qa(t[0]-n,0,1),t[1]=qa(t[1]-r,0,1),t[2]=qa(t[2]+n,0,1),t[3]=qa(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},E6=function(t){const[n,r]=ne(this,Ks,jd).call(this);G(this,gg,t);const[s,a]=ne(this,Ks,jd).call(this),[l,u]=[s-n,a-r],d=g(this,Ua);return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d};class t5 extends w6{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:zi._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new t5(this._viewParameters);return e.updateAll(this),e}}var GA,C6;const H0=class H0 extends tA{constructor(t){super({...t,name:"inkEditor"});te(this,GA);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){zi.initialize(t,n),this._defaultDrawingOptions=new t5(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Vn(this,"typesMap",new Map([[jn.INK_THICKNESS,"stroke-width"],[jn.INK_COLOR,"stroke"],[jn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,s,a){return new Ez(t,n,r,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,s,a,l){return f2.deserialize(t,n,r,s,a,l)}static async deserialize(t,n,r){let s=null;if(t instanceof hN){const{data:{inkLists:l,rect:u,rotation:d,id:f,color:p,opacity:y,borderStyle:{rawWidth:v},popupRef:C},parent:{page:{pageNumber:E}}}=t;s=t={annotationType:vn.INK,color:Array.from(p),thickness:v,opacity:y,paths:{points:l},boxes:null,pageIndex:E-1,rect:u.slice(0),rotation:d,id:f,deleted:!1,popupRef:C}}const a=await super.deserialize(t,n,r);return a.annotationElementId=t.id||null,a._initialData=s,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=H0.getDefaultDrawingOptions({stroke:jt.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":u}}=this,d={annotationType:vn.INK,color:zi._colorManager.convert(a),opacity:l,thickness:u,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(d.isCopy=!0,d):this.annotationElementId&&!ne(this,GA,C6).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){const{points:n,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n}),null}};GA=new WeakSet,C6=function(t){const{color:n,thickness:r,opacity:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==n[u])||t.thickness!==r||t.opacity!==s||t.pageIndex!==a},ht(H0,"_type","ink"),ht(H0,"_editorType",vn.INK),ht(H0,"_defaultDrawingOptions",null);let FE=H0;class VE extends f2{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Dx=8,T1=3;var yg,mi,BE,Ou,N6,k6,UE,_w,I6,R6,L6,zE,jE,P6;class _h{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},s,a,l,u){let d=new OffscreenCanvas(1,1),f=d.getContext("2d",{alpha:!1});const p=200,y=f.font=`${n} ${r} ${p}px ${t}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:C,actualBoundingBoxAscent:E,actualBoundingBoxDescent:R,fontBoundingBoxAscent:I,fontBoundingBoxDescent:D,width:j}=f.measureText(e),X=1.5,W=Math.ceil(Math.max(Math.abs(v)+Math.abs(C)||0,j)*X),ue=Math.ceil(Math.max(Math.abs(E)+Math.abs(R)||p,Math.abs(I)+Math.abs(D)||p)*X);d=new OffscreenCanvas(W,ue),f=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=y,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,W,ue),f.fillStyle="black",f.fillText(e,W*(X-1)/2,ue*(3-X)/2);const U=ne(this,mi,zE).call(this,f.getImageData(0,0,W,ue).data),P=ne(this,mi,L6).call(this,U),V=ne(this,mi,jE).call(this,P),Y=ne(this,mi,UE).call(this,U,W,ue,V);return this.processDrawnLines({lines:{curves:Y,width:W,height:ue},pageWidth:s,pageHeight:a,rotation:l,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,s){const[a,l,u]=ne(this,mi,P6).call(this,e),[d,f]=ne(this,mi,R6).call(this,a,l,u,Math.hypot(l,u)*g(this,yg).sigmaSFactor,g(this,yg).sigmaR,g(this,yg).kernelSize),p=ne(this,mi,jE).call(this,f),y=ne(this,mi,UE).call(this,d,l,u,p);return this.processDrawnLines({lines:{curves:y,width:l,height:u},pageWidth:t,pageHeight:n,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:s,mustSmooth:a,areContours:l}){r%180!==0&&([t,n]=[n,t]);const{curves:u,width:d,height:f}=e,p=e.thickness??0,y=[],v=Math.min(t/d,n/f),C=v/t,E=v/n,R=[];for(const{points:D}of u){const j=a?ne(this,mi,I6).call(this,D):D;if(!j)continue;R.push(j);const X=j.length,W=new Float32Array(X),ue=new Float32Array(3*(X===2?2:X-2));if(y.push({line:ue,points:W}),X===2){W[0]=j[0]*C,W[1]=j[1]*E,ue.set([NaN,NaN,NaN,NaN,W[0],W[1]],0);continue}let[U,P,V,Y]=j;U*=C,P*=E,V*=C,Y*=E,W.set([U,P,V,Y],0),ue.set([NaN,NaN,NaN,NaN,U,P],0);for(let O=4;O<X;O+=2){const F=W[O]=j[O]*C,B=W[O+1]=j[O+1]*E;ue.set(kt.createBezierPoints(U,P,V,Y,F,B),(O-2)*3),[U,P,V,Y]=[V,Y,F,B]}}if(y.length===0)return null;const I=l?new VE:new f2;return I.build(y,t,n,1,r,l?0:p,s),{outline:I,newCurves:R,areContours:l,thickness:p,width:d,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:s}){let a=1/0,l=-1/0,u=0;for(const j of e){u+=j.length;for(let X=2,W=j.length;X<W;X++){const ue=j[X]-j[X-2];a=Math.min(a,ue),l=Math.max(l,ue)}}let d;a>=-128&&l<=127?d=Int8Array:a>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const f=e.length,p=Dx+T1*f,y=new Uint32Array(p);let v=0;y[v++]=p*Uint32Array.BYTES_PER_ELEMENT+(u-2*f)*d.BYTES_PER_ELEMENT,y[v++]=0,y[v++]=r,y[v++]=s,y[v++]=t?0:1,y[v++]=Math.max(0,Math.floor(n??0)),y[v++]=f,y[v++]=d.BYTES_PER_ELEMENT;for(const j of e)y[v++]=j.length-2,y[v++]=j[0],y[v++]=j[1];const C=new CompressionStream("deflate-raw"),E=C.writable.getWriter();await E.ready,E.write(y);const R=d.prototype.constructor;for(const j of e){const X=new R(j.length-2);for(let W=2,ue=j.length;W<ue;W++)X[W-2]=j[W]-j[W-2];E.write(X)}E.close();const I=await new Response(C.readable).arrayBuffer(),D=new Uint8Array(I);return RM(D)}static async decompressSignature(e){try{const t=XB(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),s=r.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,l=0;for await(const j of n)a||(a=new Uint8Array(new Uint32Array(j.buffer,0,4)[0])),a.set(j,l),l+=j.length;const u=new Uint32Array(a.buffer,0,a.length>>2),d=u[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const f=u[2],p=u[3],y=u[4]===0,v=u[5],C=u[6],E=u[7],R=[],I=(Dx+T1*C)*Uint32Array.BYTES_PER_ELEMENT;let D;switch(E){case Int8Array.BYTES_PER_ELEMENT:D=new Int8Array(a.buffer,I);break;case Int16Array.BYTES_PER_ELEMENT:D=new Int16Array(a.buffer,I);break;case Int32Array.BYTES_PER_ELEMENT:D=new Int32Array(a.buffer,I);break}l=0;for(let j=0;j<C;j++){const X=u[T1*j+Dx],W=new Float32Array(X+2);R.push(W);for(let ue=0;ue<T1-1;ue++)W[ue]=u[T1*j+Dx+ue+1];for(let ue=0;ue<X;ue++)W[ue+2]=W[ue]+D[l++]}return{areContours:y,thickness:v,outlines:R,width:f,height:p}}catch(t){return _n(`decompressSignature: ${t}`),null}}}yg=new WeakMap,mi=new WeakSet,BE=function(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r},Ou=new WeakMap,N6=function(e,t,n,r,s,a,l){const u=ne(this,mi,BE).call(this,n,r,s,a);for(let d=0;d<8;d++){const f=(-d+u-l+16)%8,p=g(this,Ou)[2*f],y=g(this,Ou)[2*f+1];if(e[(n+p)*t+(r+y)]!==0)return f}return-1},k6=function(e,t,n,r,s,a,l){const u=ne(this,mi,BE).call(this,n,r,s,a);for(let d=0;d<8;d++){const f=(d+u+l+16)%8,p=g(this,Ou)[2*f],y=g(this,Ou)[2*f+1];if(e[(n+p)*t+(r+y)]!==0)return f}return-1},UE=function(e,t,n,r){const s=e.length,a=new Int32Array(s);for(let f=0;f<s;f++)a[f]=e[f]<=r?1:0;for(let f=1;f<n-1;f++)a[f*t]=a[f*t+t-1]=0;for(let f=0;f<t;f++)a[f]=a[t*n-1-f]=0;let l=1,u;const d=[];for(let f=1;f<n-1;f++){u=1;for(let p=1;p<t-1;p++){const y=f*t+p,v=a[y];if(v===0)continue;let C=f,E=p;if(v===1&&a[y-1]===0)l+=1,E-=1;else if(v>=1&&a[y+1]===0)l+=1,E+=1,v>1&&(u=v);else{v!==1&&(u=Math.abs(v));continue}const R=[p,f],I=E===p+1,D={isHole:I,points:R,id:l,parent:0};d.push(D);let j;for(const O of d)if(O.id===u){j=O;break}j?j.isHole?D.parent=I?j.parent:u:D.parent=I?u:j.parent:D.parent=I?u:0;const X=ne(this,mi,N6).call(this,a,t,f,p,C,E,0);if(X===-1){a[y]=-l,a[y]!==1&&(u=Math.abs(a[y]));continue}let W=g(this,Ou)[2*X],ue=g(this,Ou)[2*X+1];const U=f+W,P=p+ue;C=U,E=P;let V=f,Y=p;for(;;){const O=ne(this,mi,k6).call(this,a,t,V,Y,C,E,1);W=g(this,Ou)[2*O],ue=g(this,Ou)[2*O+1];const F=V+W,B=Y+ue;R.push(B,F);const H=V*t+Y;if(a[H+1]===0?a[H]=-l:a[H]===1&&(a[H]=l),F===f&&B===p&&V===U&&Y===P){a[y]!==1&&(u=Math.abs(a[y]));break}else C=V,E=Y,V=F,Y=B}}}return d},_w=function(e,t,n,r){if(n-t<=4){for(let U=t;U<n-2;U+=2)r.push(e[U],e[U+1]);return}const s=e[t],a=e[t+1],l=e[n-4]-s,u=e[n-3]-a,d=Math.hypot(l,u),f=l/d,p=u/d,y=f*a-p*s,v=u/l,C=1/d,E=Math.atan(v),R=Math.cos(E),I=Math.sin(E),D=C*(Math.abs(R)+Math.abs(I)),j=C*(1-D+D**2),X=Math.max(Math.atan(Math.abs(I+R)*j),Math.atan(Math.abs(I-R)*j));let W=0,ue=t;for(let U=t+2;U<n-2;U+=2){const P=Math.abs(y-f*e[U+1]+p*e[U]);P>W&&(ue=U,W=P)}W>(d*X)**2?(ne(this,mi,_w).call(this,e,t,ue+2,r),ne(this,mi,_w).call(this,e,ue,n,r)):r.push(s,a)},I6=function(e){const t=[],n=e.length;return ne(this,mi,_w).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},R6=function(e,t,n,r,s,a){const l=new Float32Array(a**2),u=-2*r**2,d=a>>1;for(let E=0;E<a;E++){const R=(E-d)**2;for(let I=0;I<a;I++)l[E*a+I]=Math.exp((R+(I-d)**2)/u)}const f=new Float32Array(256),p=-2*s**2;for(let E=0;E<256;E++)f[E]=Math.exp(E**2/p);const y=e.length,v=new Uint8Array(y),C=new Uint32Array(256);for(let E=0;E<n;E++)for(let R=0;R<t;R++){const I=E*t+R,D=e[I];let j=0,X=0;for(let ue=0;ue<a;ue++){const U=E+ue-d;if(!(U<0||U>=n))for(let P=0;P<a;P++){const V=R+P-d;if(V<0||V>=t)continue;const Y=e[U*t+V],O=l[ue*a+P]*f[Math.abs(Y-D)];j+=Y*O,X+=O}}const W=v[I]=Math.round(j/X);C[W]++}return[v,C]},L6=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},zE=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,s=1/0;for(let l=0,u=n.length;l<u;l++){if(e[(l<<2)+3]===0){r=n[l]=255;continue}const f=n[l]=e[l<<2];f>r&&(r=f),f<s&&(s=f)}const a=255/(r-s);for(let l=0;l<t;l++)n[l]=(n[l]-s)*a;return n},jE=function(e){let t,n=-1/0,r=-1/0;const s=e.findIndex(u=>u!==0);let a=s,l=s;for(t=s;t<256;t++){const u=e[t];u>n&&(t-a>r&&(r=t-a,l=t-1),n=u,a=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},P6=function(e){const t=e,{width:n,height:r}=e,{maxDim:s}=g(this,yg);let a=n,l=r;if(n>s||r>s){let y=n,v=r,C=Math.log2(Math.max(n,r)/s);const E=Math.floor(C);C=C===E?E-1:E;for(let I=0;I<C;I++){a=Math.ceil(y/2),l=Math.ceil(v/2);const D=new OffscreenCanvas(a,l);D.getContext("2d").drawImage(e,0,0,y,v,0,0,a,l),y=a,v=l,e!==t&&e.close(),e=D.transferToImageBitmap()}const R=Math.min(s/a,s/l);a=Math.round(a*R),l=Math.round(l*R)}const d=new OffscreenCanvas(a,l).getContext("2d",{willReadFrequently:!0});d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,a,l);const f=d.getImageData(0,0,a,l).data;return[ne(this,mi,zE).call(this,f),a,l]},te(_h,mi),te(_h,yg,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),te(_h,Ou,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class fN extends w6{constructor(){super(),super.updateProperties({fill:zi._defaultLineColor,"stroke-width":0})}clone(){const e=new fN;return e.updateAll(this),e}}class pN extends t5{constructor(e){super(e),super.updateProperties({stroke:zi._defaultLineColor,"stroke-width":1})}clone(){const e=new pN(this._viewParameters);return e.updateAll(this),e}}var ap,il,op,lp;const Ho=class Ho extends tA{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});te(this,ap,!1);te(this,il,null);te(this,op,null);te(this,lp,null);this._willKeepAspectRatio=!0,G(this,op,t.signatureData||null),G(this,il,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){zi.initialize(t,n),this._defaultDrawingOptions=new fN,this._defaultDrawnSignatureOptions=new pN(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Vn(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!g(this,il)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(g(this,op)){const{lines:s,mustSmooth:a,areContours:l,description:u,uuid:d,heightInPage:f}=g(this,op),{rawDims:{pageWidth:p,pageHeight:y},rotation:v}=this.parent.viewport,C=_h.processDrawnLines({lines:s,pageWidth:p,pageHeight:y,rotation:v,innerMargin:Ho._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(C,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){G(this,lp,t),this.addEditToolbar()}getUuid(){return g(this,lp)}get description(){return g(this,il)}set description(t){G(this,il,t),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:r,width:s,height:a}=g(this,op),l=Math.max(s,a),u=_h.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:r,width:s,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.signatureManager&&g(this,il)!==null&&(await t.addEditSignatureButton(this._uiManager.signatureManager,g(this,lp),g(this,il)),t.show()),t):null}addSignature(t,n,r,s){const{x:a,y:l}=this,{outline:u}=G(this,op,t);G(this,ap,u instanceof VE),G(this,il,r),this.div.setAttribute("data-l10n-args",JSON.stringify({description:r}));let d;g(this,ap)?d=Ho.getDefaultDrawingOptions():(d=Ho._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[f,p]=this.parentDimensions,[,y]=this.pageDimensions;let v=n/y;v=v>=1?.5:v,this.width*=v/this.height,this.width>=1&&(v*=.9/this.width,this.width=.9),this.height=v,this.setDims(f*this.width,p*this.height),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return _h.process(t,n,r,s,Ho._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:r,pageHeight:s},rotation:a}=this.parent.viewport;return _h.extractContoursFromText(t,n,r,s,a,Ho._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return _h.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:s,innerMargin:Ho._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Ho.getDefaultDrawingOptions():(this._drawingOptions=Ho._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:r,rect:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,l={annotationType:vn.SIGNATURE,isSignature:!0,areContours:g(this,ap),color:[0,0,0],thickness:g(this,ap)?0:a,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(l.paths={lines:n,points:r},l.uuid=g(this,lp),l.isCopy=!0):l.lines=n,g(this,il)&&(l.accessibilityData={type:"Figure",alt:g(this,il)}),l}static deserializeDraw(t,n,r,s,a,l){return l.areContours?VE.deserialize(t,n,r,s,a,l):f2.deserialize(t,n,r,s,a,l)}static async deserialize(t,n,r){var a;const s=await super.deserialize(t,n,r);return G(s,ap,t.areContours),G(s,il,((a=t.accessibilityData)==null?void 0:a.alt)||""),G(s,lp,t.uuid),s}};ap=new WeakMap,il=new WeakMap,op=new WeakMap,lp=new WeakMap,ht(Ho,"_type","signature"),ht(Ho,"_editorType",vn.SIGNATURE),ht(Ho,"_defaultDrawingOptions",null);let qE=Ho;var nr,ks,up,mh,cp,sv,gh,vg,qc,rl,av,Jn,Q1,X1,xw,ww,Aw,HE,Sw,M6;class $E extends zi{constructor(t){super({...t,name:"stampEditor"});te(this,Jn);te(this,nr,null);te(this,ks,null);te(this,up,null);te(this,mh,null);te(this,cp,null);te(this,sv,"");te(this,gh,null);te(this,vg,!1);te(this,qc,null);te(this,rl,!1);te(this,av,!1);G(this,mh,t.bitmapUrl),G(this,cp,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){zi.initialize(t,n)}static isHandlingMimeForPasting(t){return FT.includes(t)}static paste(t,n){n.pasteEditor({mode:vn.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await r.guess({name:"altText",request:{data:s,width:a,height:l,channels:s.length/(a*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;g(this,ks)&&(G(this,nr,null),this._uiManager.imageManager.deleteId(g(this,ks)),(t=g(this,gh))==null||t.remove(),G(this,gh,null),g(this,qc)&&(clearTimeout(g(this,qc)),G(this,qc,null))),super.remove()}rebuild(){if(!this.parent){g(this,ks)&&ne(this,Jn,xw).call(this);return}super.rebuild(),this.div!==null&&(g(this,ks)&&g(this,gh)===null&&ne(this,Jn,xw).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(g(this,up)||g(this,nr)||g(this,mh)||g(this,cp)||g(this,ks)||g(this,vg))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),g(this,vg)||(g(this,nr)?ne(this,Jn,ww).call(this):ne(this,Jn,xw).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:r,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(G(this,ks,r),s&&G(this,nr,s),G(this,vg,!1),ne(this,Jn,ww).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;g(this,qc)!==null&&clearTimeout(g(this,qc)),G(this,qc,setTimeout(()=>{G(this,qc,null),ne(this,Jn,HE).call(this)},200))}copyCanvas(t,n,r=!1){var v;t||(t=224);const{width:s,height:a}=g(this,nr),l=new nd;let u=g(this,nr),d=s,f=a,p=null;if(n){if(s>n||a>n){const P=Math.min(n/s,n/a);d=Math.floor(s*P),f=Math.floor(a*P)}p=document.createElement("canvas");const C=p.width=Math.ceil(d*l.sx),E=p.height=Math.ceil(f*l.sy);g(this,rl)||(u=ne(this,Jn,Aw).call(this,C,E));const R=p.getContext("2d");R.filter=this._uiManager.hcmFilter;let I="white",D="#cfcfd8";this._uiManager.hcmFilter!=="none"?D="black":(v=window.matchMedia)!=null&&v.call(window,"(prefers-color-scheme: dark)").matches&&(I="#8f8f9d",D="#42414d");const j=15,X=j*l.sx,W=j*l.sy,ue=new OffscreenCanvas(X*2,W*2),U=ue.getContext("2d");U.fillStyle=I,U.fillRect(0,0,X*2,W*2),U.fillStyle=D,U.fillRect(0,0,X,W),U.fillRect(X,W,X,W),R.fillStyle=R.createPattern(ue,"repeat"),R.fillRect(0,0,C,E),R.drawImage(u,0,0,u.width,u.height,0,0,C,E)}let y=null;if(r){let C,E;if(l.symmetric&&u.width<t&&u.height<t)C=u.width,E=u.height;else if(u=g(this,nr),s>t||a>t){const D=Math.min(t/s,t/a);C=Math.floor(s*D),E=Math.floor(a*D),g(this,rl)||(u=ne(this,Jn,Aw).call(this,C,E))}const I=new OffscreenCanvas(C,E).getContext("2d",{willReadFrequently:!0});I.drawImage(u,0,0,u.width,u.height,0,0,C,E),y={width:C,height:E,data:I.getImageData(0,0,C,E).data}}return{canvas:p,width:d,height:f,imageData:y}}static async deserialize(t,n,r){var R;let s=null,a=!1;if(t instanceof WD){const{data:{rect:I,rotation:D,id:j,structParent:X,popupRef:W},container:ue,parent:{page:{pageNumber:U}},canvas:P}=t;let V,Y;P?(delete t.canvas,{id:V,bitmap:Y}=r.imageManager.getFromCanvas(ue.id,P),P.remove()):(a=!0,t._hasNoCanvas=!0);const O=((R=await n._structTree.getAriaAttributes(`${rN}${j}`))==null?void 0:R.get("aria-label"))||"";s=t={annotationType:vn.STAMP,bitmapId:V,bitmap:Y,pageIndex:U-1,rect:I.slice(0),rotation:D,id:j,deleted:!1,accessibilityData:{decorative:!1,altText:O},isSvg:!1,structParent:X,popupRef:W}}const l=await super.deserialize(t,n,r),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:p,isSvg:y,accessibilityData:v}=t;a?(r.addMissingCanvas(t.id,l),G(l,vg,!0)):p&&r.imageManager.isValidId(p)?(G(l,ks,p),d&&G(l,nr,d)):G(l,mh,f),G(l,rl,y);const[C,E]=l.pageDimensions;return l.width=(u[2]-u[0])/C,l.height=(u[3]-u[1])/E,l.annotationElementId=t.id||null,v&&(l.altTextData=v),l._initialData=s,G(l,av,!!s),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:vn.STAMP,bitmapId:g(this,ks),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:g(this,rl),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=ne(this,Jn,Sw).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const u=ne(this,Jn,M6).call(this,r);if(u.isSame)return null;u.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const l=g(this,rl)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(g(this,ks)))n.stamps.set(g(this,ks),{area:l,serialized:r}),r.bitmap=ne(this,Jn,Sw).call(this,!1);else if(g(this,rl)){const u=n.stamps.get(g(this,ks));l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=ne(this,Jn,Sw).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}nr=new WeakMap,ks=new WeakMap,up=new WeakMap,mh=new WeakMap,cp=new WeakMap,sv=new WeakMap,gh=new WeakMap,vg=new WeakMap,qc=new WeakMap,rl=new WeakMap,av=new WeakMap,Jn=new WeakSet,Q1=function(t,n=!1){if(!t){this.remove();return}G(this,nr,t.bitmap),n||(G(this,ks,t.id),G(this,rl,t.isSvg)),t.file&&G(this,sv,t.file.name),ne(this,Jn,ww).call(this)},X1=function(){if(G(this,up,null),this._uiManager.enableWaiting(!1),!!g(this,gh)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,nr)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,nr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},xw=function(){if(g(this,ks)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(g(this,ks)).then(r=>ne(this,Jn,Q1).call(this,r,!0)).finally(()=>ne(this,Jn,X1).call(this));return}if(g(this,mh)){const r=g(this,mh);G(this,mh,null),this._uiManager.enableWaiting(!0),G(this,up,this._uiManager.imageManager.getFromUrl(r).then(s=>ne(this,Jn,Q1).call(this,s)).finally(()=>ne(this,Jn,X1).call(this)));return}if(g(this,cp)){const r=g(this,cp);G(this,cp,null),this._uiManager.enableWaiting(!0),G(this,up,this._uiManager.imageManager.getFromFile(r).then(s=>ne(this,Jn,Q1).call(this,s)).finally(()=>ne(this,Jn,X1).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=FT.join(",");const n=this._uiManager._signal;G(this,up,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),ne(this,Jn,Q1).call(this,s)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>ne(this,Jn,X1).call(this))),t.click()},ww=function(){var p;const{div:t}=this;let{width:n,height:r}=g(this,nr);const[s,a]=this.pageDimensions,l=.75;if(this.width)n=this.width*s,r=this.height*a;else if(n>l*s||r>l*a){const y=Math.min(l*s/n,l*a/r);n*=y,r*=y}const[u,d]=this.parentDimensions;this.setDims(n*u/s,r*d/a),this._uiManager.enableWaiting(!1);const f=G(this,gh,document.createElement("canvas"));f.setAttribute("role","img"),this.addContainer(f),this.width=n/s,this.height=r/a,(p=this._initialOptions)!=null&&p.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),ne(this,Jn,HE).call(this),g(this,av)||(this.parent.addUndoableEditor(this),G(this,av,!0)),this._reportTelemetry({action:"inserted_image"}),g(this,sv)&&this.div.setAttribute("aria-description",g(this,sv))},Aw=function(t,n){const{width:r,height:s}=g(this,nr);let a=r,l=s,u=g(this,nr);for(;a>2*t||l>2*n;){const d=a,f=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(a,l);p.getContext("2d").drawImage(u,0,0,d,f,0,0,a,l),u=p.transferToImageBitmap()}return u},HE=function(){const[t,n]=this.parentDimensions,{width:r,height:s}=this,a=new nd,l=Math.ceil(r*t*a.sx),u=Math.ceil(s*n*a.sy),d=g(this,gh);if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const f=g(this,rl)?g(this,nr):ne(this,Jn,Aw).call(this,l,u),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,l,u)},Sw=function(t){if(t){if(g(this,rl)){const s=this._uiManager.imageManager.getSvgUrl(g(this,ks));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=g(this,nr),n.getContext("2d").drawImage(g(this,nr),0,0),n.toDataURL()}if(g(this,rl)){const[n,r]=this.pageDimensions,s=Math.round(this.width*n*Sp.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Sp.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(s,a);return l.getContext("2d").drawImage(g(this,nr),0,0,g(this,nr).width,g(this,nr).height,0,0,s,a),l.transferToImageBitmap()}return structuredClone(g(this,nr))},M6=function(t){var l;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,s=t.pageIndex===n,a=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},ht($E,"_type","stamp"),ht($E,"_editorType",vn.STAMP);var bg,ov,$c,dp,yh,$l,hp,lv,_g,Fu,vh,Sa,bh,Ut,fp,ir,D6,Cc,YE,KE,Tw;const Su=class Su{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:l,textLayer:u,viewport:d,l10n:f}){te(this,ir);te(this,bg);te(this,ov,!1);te(this,$c,null);te(this,dp,null);te(this,yh,null);te(this,$l,new Map);te(this,hp,!1);te(this,lv,!1);te(this,_g,!1);te(this,Fu,null);te(this,vh,null);te(this,Sa,null);te(this,bh,null);te(this,Ut);const p=[...g(Su,fp).values()];if(!Su._initialized){Su._initialized=!0;for(const y of p)y.initialize(f,e)}e.registerEditorTypes(p),G(this,Ut,e),this.pageIndex=t,this.div=n,G(this,bg,s),G(this,$c,a),this.viewport=d,G(this,Sa,u),this.drawLayer=l,this._structTree=r,g(this,Ut).addLayer(this)}get isEmpty(){return g(this,$l).size===0}get isInvisible(){return this.isEmpty&&g(this,Ut).getMode()===vn.NONE}updateToolbar(e){g(this,Ut).updateToolbar(e)}updateMode(e=g(this,Ut).getMode()){switch(ne(this,ir,Tw).call(this),e){case vn.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case vn.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case vn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of g(Su,fp).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=g(this,Sa))==null?void 0:t.div)}setEditingState(e){g(this,Ut).setEditingState(e)}addCommands(e){g(this,Ut).addCommands(e)}cleanUndoStack(e){g(this,Ut).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=g(this,$c))==null||t.div.classList.toggle("disabled",!e)}async enable(){G(this,_g,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of g(this,$l).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(g(this,Ut).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!g(this,$c)){G(this,_g,!1);return}const t=g(this,$c).getEditableAnnotations();for(const n of t){if(n.hide(),g(this,Ut).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}G(this,_g,!1)}disable(){var r;G(this,lv,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of g(this,$l).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(r=this.getEditableAnnotation(s.annotationElementId))==null||r.show(),s.remove()}if(g(this,$c)){const s=g(this,$c).getEditableAnnotations();for(const a of s){const{id:l}=a.data;if(g(this,Ut).isDeletedAnnotationElement(l))continue;let u=t.get(l);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=e.get(l),u&&(g(this,Ut).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}ne(this,ir,Tw).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of g(Su,fp).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),G(this,lv,!1)}getEditableAnnotation(e){var t;return((t=g(this,$c))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){g(this,Ut).getActive()!==e&&g(this,Ut).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=g(this,Sa))!=null&&e.div&&!g(this,bh)){G(this,bh,new AbortController);const t=g(this,Ut).combinedSignal(g(this,bh));g(this,Sa).div.addEventListener("pointerdown",ne(this,ir,D6).bind(this),{signal:t}),g(this,Sa).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=g(this,Sa))!=null&&e.div&&g(this,bh)&&(g(this,bh).abort(),G(this,bh,null),g(this,Sa).div.classList.remove("highlighting"))}enableClick(){if(g(this,dp))return;G(this,dp,new AbortController);const e=g(this,Ut).combinedSignal(g(this,dp));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=g(this,dp))==null||e.abort(),G(this,dp,null)}attach(e){g(this,$l).set(e.id,e);const{annotationElementId:t}=e;t&&g(this,Ut).isDeletedAnnotationElement(t)&&g(this,Ut).removeDeletedAnnotationElement(e)}detach(e){var t;g(this,$l).delete(e.id),(t=g(this,bg))==null||t.removePointerInTextLayer(e.contentDiv),!g(this,lv)&&e.annotationElementId&&g(this,Ut).addDeletedAnnotationElement(e)}remove(e){this.detach(e),g(this,Ut).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(g(this,Ut).addDeletedAnnotationElement(e.annotationElementId),zi.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),g(this,Ut).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!g(this,_g)),g(this,Ut).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!g(this,yh)&&(e._focusEventsAllowed=!1,G(this,yh,setTimeout(()=>{G(this,yh,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:g(this,Ut)._signal}),t.focus())},0))),e._structTreeParentId=(n=g(this,bg))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return g(this,Ut).getId()}combinedSignal(e){return g(this,Ut).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=g(this,ir,Cc))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await g(this,Ut).updateMode(e.mode);const{offsetX:n,offsetY:r}=ne(this,ir,KE).call(this),s=this.getNextId(),a=ne(this,ir,YE).call(this,{parent:this,id:s,x:n,y:r,uiManager:g(this,Ut),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=g(Su,fp).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,g(this,Ut)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),s=ne(this,ir,YE).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:g(this,Ut),isCentered:t,...n});return s&&this.add(s),s}addNewEditor(e={}){this.createAndAddNewEditor(ne(this,ir,KE).call(this),!0,e)}setSelected(e){g(this,Ut).setSelected(e)}toggleSelected(e){g(this,Ut).toggleSelected(e)}unselect(e){g(this,Ut).unselect(e)}pointerup(e){var r;const{isMac:t}=Js.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!g(this,hp)||(G(this,hp,!1),(r=g(this,ir,Cc))!=null&&r.isDrawer&&g(this,ir,Cc).supportMultipleDrawings))return;if(!g(this,ov)){G(this,ov,!0);return}const n=g(this,Ut).getMode();if(n===vn.STAMP||n===vn.SIGNATURE){g(this,Ut).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(g(this,Ut).getMode()===vn.HIGHLIGHT&&this.enableTextSelection(),g(this,hp)){G(this,hp,!1);return}const{isMac:t}=Js.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(G(this,hp,!0),(r=g(this,ir,Cc))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=g(this,Ut).getActive();G(this,ov,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),g(this,Fu)){g(this,ir,Cc).startDrawing(this,g(this,Ut),!1,e);return}g(this,Ut).setCurrentDrawingSession(this),G(this,Fu,new AbortController);const t=g(this,Ut).combinedSignal(g(this,Fu));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(G(this,vh,null),this.commitOrRemove())},{signal:t}),g(this,ir,Cc).startDrawing(this,g(this,Ut),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&G(this,vh,t);return}g(this,vh)&&setTimeout(()=>{var t;(t=g(this,vh))==null||t.focus(),G(this,vh,null)},0)}endDrawingSession(e=!1){return g(this,Fu)?(g(this,Ut).setCurrentDrawingSession(null),g(this,Fu).abort(),G(this,Fu,null),G(this,vh,null),g(this,ir,Cc).endDrawing(e)):null}findNewParent(e,t,n){const r=g(this,Ut).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return g(this,Fu)?(this.endDrawingSession(),!0):!1}onScaleChanging(){g(this,Fu)&&g(this,ir,Cc).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=g(this,Ut).getActive())==null?void 0:e.parent)===this&&(g(this,Ut).commitOrRemove(),g(this,Ut).setActiveEditor(null)),g(this,yh)&&(clearTimeout(g(this,yh)),G(this,yh,null));for(const n of g(this,$l).values())(t=g(this,bg))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,g(this,$l).clear(),g(this,Ut).removeLayer(this)}render({viewport:e}){this.viewport=e,Tg(this.div,e);for(const t of g(this,Ut).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){g(this,Ut).commitOrRemove(),ne(this,ir,Tw).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Tg(this.div,{rotation:n}),t!==n)for(const r of g(this,$l).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return g(this,Ut).viewParameters.realScale}};bg=new WeakMap,ov=new WeakMap,$c=new WeakMap,dp=new WeakMap,yh=new WeakMap,$l=new WeakMap,hp=new WeakMap,lv=new WeakMap,_g=new WeakMap,Fu=new WeakMap,vh=new WeakMap,Sa=new WeakMap,bh=new WeakMap,Ut=new WeakMap,fp=new WeakMap,ir=new WeakSet,D6=function(e){g(this,Ut).unselectAll();const{target:t}=e;if(t===g(this,Sa).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&g(this,Sa).div.contains(t)){const{isMac:n}=Js.platform;if(e.button!==0||e.ctrlKey&&n)return;g(this,Ut).showAllEditors("highlight",!0,!0),g(this,Sa).div.classList.add("free"),this.toggleDrawing(),eA.startHighlighting(this,g(this,Ut).direction==="ltr",{target:g(this,Sa).div,x:e.x,y:e.y}),g(this,Sa).div.addEventListener("pointerup",()=>{g(this,Sa).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:g(this,Ut)._signal}),e.preventDefault()}},Cc=function(){return g(Su,fp).get(g(this,Ut).getMode())},YE=function(e){const t=g(this,ir,Cc);return t?new t.prototype.constructor(e):null},KE=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+n),u=Math.min(window.innerHeight,t+r),d=(s+l)/2-e,f=(a+u)/2-t,[p,y]=this.viewport.rotation%180===0?[d,f]:[f,d];return{offsetX:p,offsetY:y}},Tw=function(){for(const e of g(this,$l).values())e.isEmpty()&&e.remove()},ht(Su,"_initialized",!1),te(Su,fp,new Map([SE,FE,$E,eA,qE].map(e=>[e._editorType,e])));let GE=Su;var Vu,za,xg,a2,YA,O6,sd,QE,F6,XE;const cs=class cs{constructor({pageIndex:e}){te(this,sd);te(this,Vu,null);te(this,za,new Map);te(this,xg,new Map);this.pageIndex=e}setParent(e){if(!g(this,Vu)){G(this,Vu,e);return}if(g(this,Vu)!==e){if(g(this,za).size>0)for(const t of g(this,za).values())t.remove(),e.append(t);G(this,Vu,e)}}static get _svgFactory(){return Vn(this,"_svgFactory",new Xw)}draw(e,t=!1,n=!1){const r=Oa(cs,a2)._++,s=ne(this,sd,QE).call(this),a=cs._svgFactory.createElement("defs");s.append(a);const l=cs._svgFactory.createElement("path");a.append(l);const u=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke"),t&&g(this,xg).set(r,l);const d=n?ne(this,sd,F6).call(this,a,u):null,f=cs._svgFactory.createElement("use");return s.append(f),f.setAttribute("href",`#${u}`),this.updateProperties(s,e),g(this,za).set(r,s),{id:r,clipPathId:`url(#${d})`}}drawOutline(e,t){const n=Oa(cs,a2)._++,r=ne(this,sd,QE).call(this),s=cs._svgFactory.createElement("defs");r.append(s);const a=cs._svgFactory.createElement("path");s.append(a);const l=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const p=cs._svgFactory.createElement("mask");s.append(p),u=`mask_p${this.pageIndex}_${n}`,p.setAttribute("id",u),p.setAttribute("maskUnits","objectBoundingBox");const y=cs._svgFactory.createElement("rect");p.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const v=cs._svgFactory.createElement("use");p.append(v),v.setAttribute("href",`#${l}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=cs._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${l}`),u&&d.setAttribute("mask",`url(#${u})`);const f=d.cloneNode();return r.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(r,e),g(this,za).set(n,r),n}finalizeDraw(e,t){g(this,xg).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var u;if(!t)return;const{root:n,bbox:r,rootClass:s,path:a}=t,l=typeof e=="number"?g(this,za).get(e):e;if(l){if(n&&ne(this,sd,XE).call(this,l,n),r&&ne(u=cs,YA,O6).call(u,l,r),s){const{classList:d}=l;for(const[f,p]of Object.entries(s))d.toggle(f,p)}if(a){const f=l.firstChild.firstChild;ne(this,sd,XE).call(this,f,a)}}}updateParent(e,t){if(t===this)return;const n=g(this,za).get(e);n&&(g(t,Vu).append(n),g(this,za).delete(e),g(t,za).set(e,n))}remove(e){g(this,xg).delete(e),g(this,Vu)!==null&&(g(this,za).get(e).remove(),g(this,za).delete(e))}destroy(){G(this,Vu,null);for(const e of g(this,za).values())e.remove();g(this,za).clear(),g(this,xg).clear()}};Vu=new WeakMap,za=new WeakMap,xg=new WeakMap,a2=new WeakMap,YA=new WeakSet,O6=function(e,[t,n,r,s]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*s}%`},sd=new WeakSet,QE=function(){const e=cs._svgFactory.create(1,1,!0);return g(this,Vu).append(e),e.setAttribute("aria-hidden",!0),e},F6=function(e,t){const n=cs._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const s=cs._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},XE=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},te(cs,YA),te(cs,a2,0);let WE=cs;globalThis._pdfjsTestingUtils={HighlightOutliner:EE};globalThis.pdfjsLib={AbortException:Ap,AnnotationEditorLayer:GE,AnnotationEditorParamsType:jn,AnnotationEditorType:vn,AnnotationEditorUIManager:Eg,AnnotationLayer:xE,AnnotationMode:Ef,AnnotationType:Wr,build:sz,ColorPicker:Zw,createValidAbsoluteUrl:CM,DOMSVGFactory:Xw,DrawLayer:WE,FeatureTest:Js,fetchData:l2,getDocument:LD,getFilenameFromUrl:JB,getPdfFilenameFromUrl:ZB,getUuid:IM,getXfaPageViewport:tU,GlobalWorkerOptions:Bu,ImageKind:Wx,InvalidPDFException:DT,isDataScheme:ZA,isPdfFile:aN,isValidExplicitDest:hU,MathClamp:qa,noContextMenu:ju,normalizeUnicode:WB,OPS:Yw,OutputScale:nd,PasswordResponses:UB,PDFDataRangeTransport:PD,PDFDateString:oN,PDFWorker:_b,PermissionFlag:BB,PixelsPerInch:Sp,RenderingCancelledException:sN,ResponseException:Kw,setLayerDimensions:Tg,shadow:Vn,SignatureExtractor:_h,stopEvent:Jr,SupportedImageMimeTypes:FT,TextLayer:vb,TouchManager:Qw,updateUrlHash:NM,Util:jt,VerbosityLevel:QA,version:OD,XfaLayer:FD};const Cz=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),Nz=Oi.memo(Cz);if(!Bu.workerSrc){const i=`https://esm.sh/pdfjs-dist@${OD}/build/pdf.worker.js`;Bu.workerSrc=i}const kz=({onPdfTextExtracted:i,onProcessingStateChange:e,onError:t,theme:n})=>{const[r,s]=qe.useState(null),[a,l]=qe.useState(!1),u=WA(),d=qe.useCallback(async f=>{var y;const p=(y=f.target.files)==null?void 0:y[0];if(p){if(p.type!=="application/pdf"){t("Lütfen geçerli bir PDF dosyası seçin."),f.target&&(f.target.value="");return}s(p.name),l(!0),e(!0),t("");try{const v=await p.arrayBuffer(),C=await LD({data:v}).promise;let E="";const R=u.maxPdfTextLength;for(let I=1;I<=C.numPages;I++){const X=(await(await C.getPage(I)).getTextContent()).items.map(W=>"str"in W?W.str:"").join(" ");if(E+=X+`
`,E.length>R){console.warn(`PDF metni ${R} karakter sınırına ulaştığı için kesildi.`),E=E.substring(0,R);break}}if(!E.trim()){t("PDF dosyasından metin çıkarılamadı veya dosya boş."),l(!1),e(!1),f.target&&(f.target.value=""),s(null);return}i(E,p.name)}catch(v){console.error("Error processing PDF:",v),t(`PDF işlenirken hata oluştu: ${v.message}`),l(!1),e(!1),f.target&&(f.target.value=""),s(null)}}},[i,e,t,u.maxPdfTextLength]);return T.jsx("div",{className:"w-full",children:T.jsxs("label",{htmlFor:"pdf-upload",className:`cursor-pointer flex flex-col items-center justify-center p-4 sm:p-6 border-2 border-dashed rounded-xl transition-all duration-200 hover:scale-[1.01] touch-target ${n==="dark"?"border-secondary-600 hover:border-primary-500 bg-secondary-800/50 hover:bg-secondary-700/60":"border-gray-300 hover:border-primary-500 bg-gray-50 hover:bg-gray-100"} ${a?"pointer-events-none opacity-75":""}`,children:[T.jsx("div",{className:`p-3 rounded-full mb-3 ${n==="dark"?"bg-primary-500/20 text-primary-400":"bg-primary-100 text-primary-600"}`,children:T.jsx(Nz,{className:"w-8 h-8"})}),T.jsx("span",{className:`text-base sm:text-lg font-semibold mb-1 ${n==="dark"?"text-gray-100":"text-gray-800"}`,children:a?"İşleniyor...":"PDF Dosyanızı Seçin"}),T.jsx("span",{className:`text-xs sm:text-sm text-center px-2 ${n==="dark"?"text-gray-400":"text-gray-500"}`,children:a?"PDF dosyanız analiz ediliyor":"Tıklayın veya dosyayı sürükleyin"}),r&&T.jsxs("div",{className:`mt-3 px-3 py-1.5 rounded-lg text-xs font-medium max-w-full truncate ${a?n==="dark"?"text-blue-300 bg-blue-500/20":"text-blue-600 bg-blue-100":n==="dark"?"text-green-300 bg-green-500/20":"text-green-600 bg-green-100"}`,title:r,children:[T.jsx("i",{className:`fas ${a?"fa-spinner fa-spin":"fa-check"} mr-1`}),r]}),T.jsx("input",{id:"pdf-upload",type:"file",accept:".pdf",onChange:d,className:"hidden",disabled:a})]})})},g3=Oi.memo(kz),Iz=({text:i,theme:e})=>T.jsxs("div",{className:"flex flex-col items-center justify-center p-4 sm:p-6",children:[T.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 border-3 sm:border-4 border-primary-500 border-t-transparent rounded-full animate-spin"}),i&&T.jsx("p",{className:`mt-3 text-sm sm:text-base lg:text-lg text-center max-w-xs ${e==="dark"?"text-primary-300":"text-primary-700"}`,children:i})]}),R0=Oi.memo(Iz),n5=i=>{const e=i==="dark";return{bg:{primary:e?"bg-secondary-900":"bg-white",secondary:e?"bg-secondary-800":"bg-gray-50",tertiary:e?"bg-secondary-700":"bg-gray-100",card:e?"bg-secondary-800":"bg-white",input:e?"bg-secondary-700":"bg-white",button:{primary:e?"bg-primary-600 hover:bg-primary-700":"bg-primary-500 hover:bg-primary-600",secondary:e?"bg-secondary-700 hover:bg-secondary-600":"bg-gray-200 hover:bg-gray-300",success:e?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600",warning:e?"bg-yellow-600 hover:bg-yellow-700":"bg-yellow-500 hover:bg-yellow-600"}},text:{primary:e?"text-white":"text-gray-900",secondary:e?"text-gray-200":"text-gray-700",tertiary:e?"text-gray-300":"text-gray-600",muted:e?"text-gray-400":"text-gray-500",accent:e?"text-primary-400":"text-primary-600"},border:{primary:e?"border-secondary-700":"border-gray-200",secondary:e?"border-secondary-600":"border-gray-300",input:e?"border-secondary-600":"border-gray-300"},ring:{primary:e?"ring-secondary-700/50":"ring-gray-200",focus:"focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},combine:(...t)=>t.filter(Boolean).join(" ")}},V6=i=>i==="dark"?"bg-secondary-800 text-gray-200":"bg-white text-gray-800",bo=(i,e="primary")=>{const t=i==="dark";switch(e){case"primary":return t?"text-white":"text-gray-900";case"secondary":return t?"text-gray-200":"text-gray-700";case"muted":return t?"text-gray-400":"text-gray-500";default:return t?"text-white":"text-gray-900"}},J1=(i,e="primary")=>{const t=i==="dark",n="px-4 py-2 rounded-md font-medium transition-colors";switch(e){case"primary":return`${n} ${t?"bg-primary-600 hover:bg-primary-700 text-white":"bg-primary-500 hover:bg-primary-600 text-white"}`;case"secondary":return`${n} ${t?"bg-secondary-700 hover:bg-secondary-600 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-800"}`;case"success":return`${n} ${t?"bg-green-600 hover:bg-green-700 text-white":"bg-green-500 hover:bg-green-600 text-white"}`;case"danger":return`${n} ${t?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"}`;default:return`${n} ${t?"bg-primary-600 hover:bg-primary-700 text-white":"bg-primary-500 hover:bg-primary-600 text-white"}`}},y3=(i,e)=>{const t=i==="dark";return e==="success"?t?"bg-green-700 border-green-600 text-green-100":"bg-green-100 border-green-400 text-green-700":t?"bg-red-700 border-red-600 text-red-100":"bg-red-100 border-red-400 text-red-700"},v3=(i,e="pink")=>{const t=i==="dark";switch(e){case"pink":return{colorClass:t?"text-pink-300":"text-pink-800",bgColorClass:t?"bg-pink-500/30":"bg-pink-200"};default:return{colorClass:t?"text-pink-300":"text-pink-800",bgColorClass:t?"bg-pink-500/30":"bg-pink-200"}}},Rz=({newSubtopics:i,confirmedExistingSubtopics:e,onConfirm:t,onCancel:n,isLoading:r,selectionContext:s="pdf_scan",theme:a})=>{const l=qe.useMemo(()=>s==="weak_topics"?Array.from(new Set([...i])):Array.from(new Set([...i,...e])),[i,e,s]),[u,d]=qe.useState([]);qe.useEffect(()=>{if(l.length>0){const D=Math.ceil(l.length/2);d(l.slice(0,D))}else d([])},[l]);const f=D=>{d(j=>j.includes(D)?j.filter(X=>X!==D):[...j,D])},p=()=>{u.length===l.length?d([]):d([...l])},y=()=>{t(u)},v=()=>!1;if(r)return T.jsx(R0,{text:"Alt konular işleniyor..."});const C=s==="weak_topics"?"Zayıf Konuları Seçin":"Alt Konuları Seçin";let E,R;s==="weak_topics"?(E="Sınavınız için odaklanmak istediğiniz zayıf olduğunuz konuları listeden seçin.",R="İptal Et (Varsayılanla Oluştur)",l.length>0&&(E+=` (${u.length} / ${l.length} zayıf konu seçili)`)):(E="Sınavınız için odaklanmak istediğiniz alt konuları listeden seçin. İstemediğiniz konuların seçimini kaldırabilirsiniz.",R="İptal Et (Tüm Metinden Oluştur)",l.length>0&&(E+=` (${u.length} / ${l.length} seçili)`));const I=D=>{if(s!=="pdf_scan")return null;const j=a==="dark";return i.includes(D)?{label:"Yeni",colorClasses:j?"bg-teal-700/30 text-teal-300":"bg-teal-100 text-teal-700"}:e.includes(D)?{label:"Mevcut",colorClasses:j?"bg-sky-700/30 text-sky-300":"bg-sky-100 text-sky-700"}:null};return T.jsxs("div",{className:`w-full max-w-4xl mx-auto ${V6(a)}`,children:[T.jsxs("div",{className:"mb-6 sm:mb-8",children:[T.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[T.jsxs("div",{className:"flex-1",children:[T.jsxs("h2",{className:`text-2xl sm:text-3xl font-bold mb-2 ${bo(a,"primary")}`,children:[T.jsx("i",{className:`fas ${s==="weak_topics"?"fa-target":"fa-list-check"} mr-3 text-primary-500`}),C]}),T.jsx("p",{className:`text-sm sm:text-base ${bo(a,"secondary")}`,children:E})]}),T.jsxs("button",{onClick:n,className:`shrink-0 px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 text-sm font-medium hover:scale-105 focus:outline-none focus:ring-2 focus:ring-opacity-50 touch-target ${a==="dark"?"bg-secondary-700 text-gray-300 hover:bg-secondary-600 border border-secondary-600 focus:ring-secondary-500":"bg-gray-100 text-gray-600 hover:bg-gray-200 border border-gray-300 focus:ring-gray-400"}`,title:R,children:[T.jsx("i",{className:"fas fa-times"}),T.jsx("span",{className:"hidden sm:inline",children:R}),T.jsx("span",{className:"sm:hidden",children:"İptal"})]})]}),l.length>0&&T.jsx("div",{className:`mt-4 p-4 rounded-lg border ${a==="dark"?"bg-secondary-800/50 border-secondary-700":"bg-gray-50 border-gray-200"}`,children:T.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[T.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[T.jsxs("div",{className:`flex items-center gap-2 ${bo(a,"primary")}`,children:[T.jsx("div",{className:"w-3 h-3 bg-primary-500 rounded-full"}),T.jsxs("span",{className:"font-medium",children:["Seçili: ",u.length]})]}),T.jsxs("div",{className:`flex items-center gap-2 ${bo(a,"secondary")}`,children:[T.jsx("div",{className:`w-3 h-3 rounded-full ${a==="dark"?"bg-gray-600":"bg-gray-400"}`}),T.jsxs("span",{children:["Toplam: ",l.length]})]})]}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:`flex-1 sm:w-32 h-2 rounded-full overflow-hidden ${a==="dark"?"bg-secondary-700":"bg-gray-200"}`,children:T.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-primary-600 transition-all duration-300",style:{width:`${l.length?u.length/l.length*100:0}%`}})}),T.jsxs("span",{className:`text-sm font-medium ${bo(a,"primary")}`,children:[l.length?Math.round(u.length/l.length*100):0,"%"]})]})]})})]}),l.length===0?T.jsxs("div",{className:`text-center py-12 px-6 rounded-xl border-2 border-dashed ${a==="dark"?"border-secondary-600 bg-secondary-800/30":"border-gray-300 bg-gray-50"}`,children:[T.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${a==="dark"?"bg-secondary-700 text-gray-400":"bg-gray-200 text-gray-500"}`,children:T.jsx("i",{className:"fas fa-exclamation-triangle text-2xl"})}),T.jsx("h3",{className:`text-lg font-semibold mb-2 ${bo(a,"primary")}`,children:"Konu Bulunamadı"}),T.jsxs("p",{className:`${bo(a,"secondary")} max-w-md mx-auto`,children:[s==="weak_topics"?"Bu ders için görüntülenecek zayıf konu bulunmuyor.":"Bu PDF'ten alt konu çıkarılamadı veya PDF içeriği yetersiz."," İptal edip ",s==="weak_topics"?"varsayılan zayıf konu ayarlarıyla":"tüm metinden"," sınav oluşturmayı deneyebilirsiniz."]})]}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[T.jsx("div",{className:"flex flex-wrap items-center gap-2",children:s==="pdf_scan"&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[T.jsx("div",{className:`w-3 h-3 rounded-full ${a==="dark"?"bg-teal-400":"bg-teal-500"}`}),T.jsx("span",{className:bo(a,"secondary"),children:"Yeni Konular"})]}),T.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[T.jsx("div",{className:`w-3 h-3 rounded-full ${a==="dark"?"bg-sky-400":"bg-sky-500"}`}),T.jsx("span",{className:bo(a,"secondary"),children:"Mevcut Konular"})]})]})}),T.jsxs("button",{onClick:p,className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-opacity-50 touch-target ${a==="dark"?"bg-secondary-700 text-gray-200 hover:bg-secondary-600 border border-secondary-600 focus:ring-secondary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300 focus:ring-gray-400"}`,children:[T.jsx("i",{className:`fas ${u.length===l.length?"fa-times-circle":"fa-check-double"}`}),u.length===l.length?"Tüm Seçimi Kaldır":"Tümünü Seç"]})]}),T.jsx("div",{className:"mb-8",children:T.jsx("div",{className:"max-h-[400px] overflow-y-auto pr-2 custom-scrollbar-subtopic",children:T.jsx("div",{className:"space-y-2",children:l.map((D,j)=>{const X=I(D),W=u.includes(D),ue=`subtopic-checkbox-${j}`,U=a==="dark",P=()=>{let V="group relative flex items-center p-3 sm:p-4 rounded-lg transition-all duration-200 border cursor-pointer hover:shadow-md focus-within:ring-2 focus-within:ring-primary-500 focus-within:ring-opacity-50 ";return W?V+=U?"bg-primary-900/40 border-primary-500 shadow-lg shadow-primary-500/20":"bg-primary-50 border-primary-400 shadow-lg shadow-primary-500/10":V+=U?"bg-secondary-800/30 border-secondary-600 hover:border-primary-400/70 hover:bg-secondary-700/50":"bg-white border-gray-200 hover:border-primary-300 hover:bg-gray-50",V};return T.jsxs("label",{htmlFor:ue,className:P(),children:[T.jsx("input",{id:ue,type:"checkbox",checked:W,onChange:()=>f(D),className:"h-5 w-5 rounded border-2 transition-colors focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 shrink-0 checked:bg-primary-500 checked:border-primary-500 mr-4"}),T.jsxs("div",{className:"flex-1 min-w-0 flex items-center justify-between",children:[T.jsx("div",{className:"flex-1 min-w-0",children:T.jsx("span",{className:`block text-sm sm:text-base font-medium leading-relaxed break-words ${W?U?"text-primary-100":"text-primary-700":U?"text-gray-100":"text-gray-800"}`,children:D})}),X&&X.label&&T.jsx("div",{className:`ml-3 text-xs font-semibold px-2 py-1 rounded-full shrink-0 ${X.colorClasses}`,children:X.label})]}),W&&T.jsx("div",{className:"ml-3 w-6 h-6 bg-primary-500 rounded-full flex items-center justify-center shadow-sm shrink-0",children:T.jsx("i",{className:"fas fa-check text-white text-xs"})})]},`${j}-${D.replace(/\s+/g,"-")}`)})})})})]}),T.jsx("div",{className:`flex flex-col sm:flex-row justify-center sm:justify-end items-center gap-3 pt-6 border-t ${a==="dark"?"border-secondary-700":"border-gray-200"}`,children:T.jsxs("button",{onClick:y,disabled:v(),className:`w-full sm:w-auto px-8 py-3 rounded-lg font-semibold shadow-lg focus:outline-none focus:ring-2 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed touch-target transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2 ${J1(a,"primary")}`,"aria-label":"Seçili Konularla Devam Et",children:[T.jsx("span",{children:"Devam Et"}),T.jsx("i",{className:"fas fa-arrow-right"})]})}),T.jsx("style",{children:`
        .custom-scrollbar-subtopic::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar-subtopic::-webkit-scrollbar-track {
          background: ${a==="dark"?"rgba(55, 65, 81, 0.5)":"rgba(243, 244, 246, 0.5)"};
          border-radius: 10px;
        }
        .custom-scrollbar-subtopic::-webkit-scrollbar-thumb {
          background: ${a==="dark"?"rgba(156, 163, 175, 0.5)":"rgba(107, 114, 128, 0.5)"};
          border-radius: 10px;
        }
        .custom-scrollbar-subtopic::-webkit-scrollbar-thumb:hover {
          background: ${a==="dark"?"rgba(156, 163, 175, 0.7)":"rgba(107, 114, 128, 0.7)"};
        }
        .custom-scrollbar-subtopic {
          scrollbar-width: thin;
          scrollbar-color: ${a==="dark"?"rgba(156, 163, 175, 0.5) rgba(55, 65, 81, 0.5)":"rgba(107, 114, 128, 0.5) rgba(243, 244, 246, 0.5)"};
        }
        
        /* Touch feedback */
        @media (hover: none) and (pointer: coarse) {
          .group:active {
            transform: scale(0.99);
          }
        }
        
        /* Smooth animations */
        .group {
          transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* List item hover effects */
        .group:hover {
          transform: translateX(2px);
        }
      `})]})},b3=Oi.memo(Rz),Lz=({onSubmit:i,onBack:e,initialNumQuestions:t,initialDifficulty:n="Orta",initialTimerEnabled:r=!1,defaultSecondsPerQuestion:s=90,selectedSubtopicsCount:a,hasIdentifiedSubtopics:l,currentQuizMode:u,currentPersonalizedQuizType:d,quizDefaults:f,theme:p})=>{const[y,v]=qe.useState(t||f.defaultNumQuestions),[C,E]=qe.useState(n),[R,I]=qe.useState(r),j=qe.useMemo(()=>{const{minQuestionsPerSubtopic:P,minSubtopicsForDynamicOptions:V,maxSubtopicsForDynamicOptions:Y,minQuestionsForQuiz:O}=f;let F=O;a>0&&(F=Math.max(O,a*P));let B=[];const H=Y-V+1;return H>0&&(B=Array.from({length:H},(fe,Q)=>(V+Q)*P)),B=B.filter(fe=>fe>=F&&fe<=f.maxQuestionsForQuiz),B.length===0&&(F>f.maxQuestionsForQuiz?B=[f.maxQuestionsForQuiz]:(B=[F,Math.min(f.maxQuestionsForQuiz,F+P),Math.min(f.maxQuestionsForQuiz,F+P*2)].filter((fe,Q,ce)=>ce.indexOf(fe)===Q&&fe<=f.maxQuestionsForQuiz),B.length===0&&(B=[F]))),B=[...new Set(B)].sort((fe,Q)=>fe-Q),B.length>0?B:[O]},[a,f]),X=j[0],W=j[j.length-1];qe.useEffect(()=>{let P=y;j.length>0?y<X?P=X:y>W?P=W:P=j.reduce((Y,O)=>Math.abs(O-y)<Math.abs(Y-y)?O:Y,X):P=f.defaultNumQuestions,P!==y&&v(P)},[y,j,X,W,f.defaultNumQuestions]);const ue=()=>{i(y,C,R)},U=qe.useMemo(()=>{if(u==="personalized"){if(d==="weak_topics")return a>0?`${a} zayıf konu üzerinden sınav oluşturulacaktır.`:"Seçili ders için zayıf konu bulunmuyor. Sınav genel kapsamda olabilir veya hiç soru üretilemeyebilir.";if(d==="new_topics")return l?a>0?`${a} yeni alt konu üzerinden sınav oluşturulacaktır.`:"Belgeden ayırt edici yeni alt konu bulunamadı. Sınav tüm dokümanı kapsayacaktır.":"Sınav, PDF'ten belirlenecek yeni konuları kapsayacaktır.";if(d==="comprehensive"){let P="Sınav, zayıf olduğunuz konuları ve PDF'teki yeni konuları kapsayacaktır.";return l&&a>0?P+=` PDF'ten ${a} konu belirlendi/seçildi.`:l&&(P+=" PDF'ten yeni konu belirlenemedi, zayıf konulara odaklanılacak."),P}return"Kişiselleştirilmiş sınav ayarları yapılıyor."}return l?a>0?`${a} alt konu üzerinden sınav oluşturulacaktır.`:"Hiç alt konu seçilmedi. Sınav tüm dokümanı kapsayacaktır.":"Sınav tüm dokümanı kapsayacaktır."},[u,d,a,l]);return T.jsxs("div",{className:`w-full max-w-2xl mx-auto p-3 sm:p-4 space-y-3 sm:space-y-4 ${p==="dark"?"text-gray-200":"text-gray-700"}`,children:[T.jsxs("div",{className:"text-center space-y-2",children:[T.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-3",children:[T.jsx("div",{className:`p-2 sm:p-3 rounded-full ${p==="dark"?"bg-primary-500/20":"bg-primary-100"}`,children:T.jsx("i",{className:`fas fa-cog text-lg sm:text-xl ${p==="dark"?"text-primary-400":"text-primary-600"}`})}),T.jsx("h2",{className:`text-xl sm:text-2xl font-bold ${p==="dark"?"text-white":"text-gray-900"}`,children:"Sınav Tercihleri"})]}),T.jsx("div",{className:`p-3 rounded-lg border-l-4 ${p==="dark"?"bg-secondary-800/50 border-primary-500 text-gray-300":"bg-blue-50 border-blue-400 text-gray-700"}`,children:T.jsxs("p",{className:"text-sm leading-relaxed",children:[T.jsx("i",{className:"fas fa-info-circle mr-2 text-blue-500"}),U]})})]}),T.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[T.jsxs("div",{className:`quiz-card p-3 sm:p-4 rounded-xl border transition-all duration-300 hover:shadow-lg ${p==="dark"?"bg-secondary-800/50 border-secondary-600 hover:border-primary-500/50":"bg-white border-gray-200 hover:border-primary-300 shadow-sm"}`,children:[T.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 mb-3",children:[T.jsx("div",{className:`p-2 rounded-lg self-start ${p==="dark"?"bg-blue-500/20":"bg-blue-100"}`,children:T.jsx("i",{className:`fas fa-list-ol ${p==="dark"?"text-blue-400":"text-blue-600"}`})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h3",{className:`font-semibold ${p==="dark"?"text-white":"text-gray-900"}`,children:"Soru Sayısı"}),T.jsx("p",{className:`text-sm ${p==="dark"?"text-gray-400":"text-gray-600"}`,children:"Sınavda yer alacak toplam soru sayısını belirleyin"})]})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[T.jsx("span",{className:`text-sm font-medium ${p==="dark"?"text-gray-300":"text-gray-700"}`,children:"Seçilen Soru Sayısı"}),T.jsx("div",{className:`px-3 sm:px-4 py-1 sm:py-2 rounded-full font-bold text-base sm:text-lg self-start sm:self-auto ${p==="dark"?"bg-primary-500/20 text-primary-300":"bg-primary-100 text-primary-700"}`,children:y})]}),j.length>0?T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{className:"relative",children:[T.jsx("input",{id:"num-questions-slider",type:"range",min:X,max:W,step:j.length>1&&j[1]-j[0]>0?j[1]-j[0]:1,value:y,onChange:P=>{const V=parseInt(P.target.value,10),Y=j.reduce((O,F)=>Math.abs(F-V)<Math.abs(O-V)?F:O,X);v(Y)},className:`w-full h-3 rounded-lg appearance-none cursor-pointer slider-enhanced ${p==="dark"?"bg-secondary-600":"bg-gray-200"}`,style:{background:p==="dark"?`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${(y-X)/(W-X)*100}%, #4b5563 ${(y-X)/(W-X)*100}%, #4b5563 100%)`:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${(y-X)/(W-X)*100}%, #e5e7eb ${(y-X)/(W-X)*100}%, #e5e7eb 100%)`},"aria-label":`Soru sayısı, mevcut değer ${y}`}),j.length>1&&T.jsx("datalist",{id:"num-questions-datalist",children:j.map(P=>T.jsx("option",{value:P,label:P.toString()},P))})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center text-sm space-y-2 sm:space-y-0",children:[T.jsxs("span",{className:`px-2 py-1 rounded text-center sm:text-left ${p==="dark"?"bg-secondary-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:["Min: ",X]}),T.jsx("div",{className:`flex space-x-1 justify-center ${p==="dark"?"text-gray-400":"text-gray-500"}`,children:j.map(P=>T.jsx("span",{className:`w-2 h-2 rounded-full transition-all duration-200 ${P===y?"bg-primary-500 scale-125":p==="dark"?"bg-gray-600":"bg-gray-300"}`},P))}),T.jsxs("span",{className:`px-2 py-1 rounded text-center sm:text-right ${p==="dark"?"bg-secondary-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:["Max: ",W]})]})]}):T.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${p==="dark"?"bg-yellow-900/20 border-yellow-500 text-yellow-300":"bg-yellow-50 border-yellow-400 text-yellow-700"}`,children:[T.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),"Seçilen alt konu sayısına göre uygun soru sayısı aralığı bulunamadı. Lütfen alt konu seçiminizi gözden geçirin."]})]})]}),T.jsxs("div",{className:`quiz-card p-3 sm:p-4 rounded-xl border transition-all duration-300 hover:shadow-lg ${p==="dark"?"bg-secondary-800/50 border-secondary-600 hover:border-primary-500/50":"bg-white border-gray-200 hover:border-primary-300 shadow-sm"}`,children:[T.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 mb-3",children:[T.jsx("div",{className:`p-2 rounded-lg self-start ${p==="dark"?"bg-purple-500/20":"bg-purple-100"}`,children:T.jsx("i",{className:`fas fa-chart-line ${p==="dark"?"text-purple-400":"text-purple-600"}`})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h3",{className:`font-semibold ${p==="dark"?"text-white":"text-gray-900"}`,children:"Zorluk Seviyesi"}),T.jsx("p",{className:`text-sm ${p==="dark"?"text-gray-400":"text-gray-600"}`,children:"Sınav sorularının zorluk derecesini seçin"})]})]}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 sm:gap-3",children:["Kolay","Orta","Zor"].map(P=>T.jsxs("button",{onClick:()=>E(P),className:`p-3 rounded-lg border-2 transition-all duration-200 text-center ${C===P?p==="dark"?"border-primary-500 bg-primary-500/20 text-primary-300":"border-primary-500 bg-primary-50 text-primary-700":p==="dark"?"border-secondary-600 bg-secondary-700/50 text-gray-300 hover:border-secondary-500":"border-gray-200 bg-gray-50 text-gray-700 hover:border-gray-300"}`,children:[T.jsx("div",{className:`text-lg mb-1 ${P==="Kolay"?"text-green-500":P==="Orta"?"text-yellow-500":"text-red-500"}`,children:T.jsx("i",{className:`fas ${P==="Kolay"?"fa-smile":P==="Orta"?"fa-meh":"fa-frown"}`})}),T.jsx("div",{className:"font-medium",children:P})]},P))})]}),T.jsxs("div",{className:`quiz-card p-3 sm:p-4 rounded-xl border transition-all duration-300 hover:shadow-lg ${p==="dark"?"bg-secondary-800/50 border-secondary-600 hover:border-primary-500/50":"bg-white border-gray-200 hover:border-primary-300 shadow-sm"}`,children:[T.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-3 mb-3",children:[T.jsx("div",{className:`p-2 rounded-lg self-start ${p==="dark"?"bg-orange-500/20":"bg-orange-100"}`,children:T.jsx("i",{className:`fas fa-clock ${p==="dark"?"text-orange-400":"text-orange-600"}`})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h3",{className:`font-semibold ${p==="dark"?"text-white":"text-gray-900"}`,children:"Zamanlayıcı Ayarı"}),T.jsxs("p",{className:`text-sm ${p==="dark"?"text-gray-400":"text-gray-600"}`,children:["Her soru için ",s," saniye süre sınırı"]})]}),T.jsx("div",{className:"self-start sm:self-center",children:T.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[T.jsx("input",{type:"checkbox",checked:R,onChange:P=>I(P.target.checked),className:"sr-only peer"}),T.jsx("div",{className:`w-14 h-7 rounded-full peer transition-colors duration-200 ${R?"bg-primary-500":p==="dark"?"bg-secondary-600":"bg-gray-300"} peer-focus:ring-4 ${p==="dark"?"peer-focus:ring-primary-500/25":"peer-focus:ring-primary-200"} relative`,children:T.jsx("div",{className:`absolute top-0.5 left-0.5 bg-white rounded-full h-6 w-6 transition-transform duration-200 ${R?"translate-x-7":"translate-x-0"} shadow-md flex items-center justify-center`,children:T.jsx("i",{className:`fas ${R?"fa-check":"fa-times"} text-xs ${R?"text-primary-500":"text-gray-400"}`})})})]})})]}),T.jsxs("div",{className:`text-sm ${R?p==="dark"?"text-green-400":"text-green-600":"text-gray-500"}`,children:[T.jsx("i",{className:`fas ${R?"fa-play-circle":"fa-pause-circle"} mr-2`}),R?"Zamanlayıcı aktif - Her soru için süre sınırı uygulanacak":"Zamanlayıcı devre dışı - Sınırsız süre"]})]})]}),T.jsxs("div",{className:`flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-3 sm:space-y-0 sm:space-x-4 pt-4 border-t ${p==="dark"?"border-secondary-700":"border-gray-200"}`,children:[T.jsxs("button",{onClick:e,className:`w-full sm:w-auto px-5 py-2 rounded-lg border transition-all duration-200 flex items-center justify-center space-x-2 ${p==="dark"?"border-secondary-600 text-gray-300 hover:text-white hover:border-secondary-500 hover:bg-secondary-700/50":"border-gray-300 text-gray-600 hover:text-gray-800 hover:border-gray-400 hover:bg-gray-50"}`,"aria-label":"Geri dön",children:[T.jsx("i",{className:"fas fa-arrow-left"}),T.jsx("span",{children:"Geri"})]}),T.jsxs("button",{onClick:ue,disabled:(j.length===0||y<X||y>W)&&j.length>0,className:`w-full sm:w-auto px-6 py-2 rounded-lg font-semibold shadow-lg transition-all duration-200 flex items-center justify-center space-x-2 transform hover:scale-105 ${p==="dark"?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white":"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-400 hover:to-green-500 text-white"} disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:hover:scale-100`,"aria-label":"Sınavı Başlat",children:[T.jsx("span",{children:"Sınavı Başlat"}),T.jsx("i",{className:"fas fa-play-circle"})]})]})]})},Pz=Oi.memo(Lz),Mz="modulepreload",Dz=function(i){return"/ai-quiz/"+i},_3={},JE=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let a=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=a(t.map(d=>{if(d=Dz(d),d in _3)return;_3[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":Mz,f||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),f)return new Promise((v,C)=>{y.addEventListener("load",v),y.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function xi(i){"@babel/helpers - typeof";return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xi(i)}var Ca=Uint8Array,ll=Uint16Array,mN=Int32Array,i5=new Ca([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r5=new Ca([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ZE=new Ca([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),B6=function(i,e){for(var t=new ll(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var r=new mN(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)r[s]=s-t[n]<<5|n;return{b:t,r}},U6=B6(i5,2),z6=U6.b,eC=U6.r;z6[28]=258,eC[258]=28;var j6=B6(r5,0),Oz=j6.b,x3=j6.r,tC=new ll(32768);for(var Wi=0;Wi<32768;++Wi){var xf=(Wi&43690)>>1|(Wi&21845)<<1;xf=(xf&52428)>>2|(xf&13107)<<2,xf=(xf&61680)>>4|(xf&3855)<<4,tC[Wi]=((xf&65280)>>8|(xf&255)<<8)>>1}var Qc=function(i,e,t){for(var n=i.length,r=0,s=new ll(e);r<n;++r)i[r]&&++s[i[r]-1];var a=new ll(e);for(r=1;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var l;if(t){l=new ll(1<<e);var u=15-e;for(r=0;r<n;++r)if(i[r])for(var d=r<<4|i[r],f=e-i[r],p=a[i[r]-1]++<<f,y=p|(1<<f)-1;p<=y;++p)l[tC[p]>>u]=d}else for(l=new ll(n),r=0;r<n;++r)i[r]&&(l[r]=tC[a[i[r]-1]++]>>15-i[r]);return l},Tp=new Ca(288);for(var Wi=0;Wi<144;++Wi)Tp[Wi]=8;for(var Wi=144;Wi<256;++Wi)Tp[Wi]=9;for(var Wi=256;Wi<280;++Wi)Tp[Wi]=7;for(var Wi=280;Wi<288;++Wi)Tp[Wi]=8;var xb=new Ca(32);for(var Wi=0;Wi<32;++Wi)xb[Wi]=5;var Fz=Qc(Tp,9,0),Vz=Qc(Tp,9,1),Bz=Qc(xb,5,0),Uz=Qc(xb,5,1),rT=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},_u=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},sT=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},gN=function(i){return(i+7)/8|0},q6=function(i,e,t){return(t==null||t>i.length)&&(t=i.length),new Ca(i.subarray(e,t))},zz=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Tu=function(i,e,t){var n=new Error(e||zz[i]);if(n.code=i,Error.captureStackTrace&&Error.captureStackTrace(n,Tu),!t)throw n;return n},jz=function(i,e,t,n){var r=i.length,s=0;if(!r||e.f&&!e.l)return t||new Ca(0);var a=!t,l=a||e.i!=2,u=e.i;a&&(t=new Ca(r*3));var d=function(He){var Ye=t.length;if(He>Ye){var Xe=new Ca(Math.max(Ye*2,He));Xe.set(t),t=Xe}},f=e.f||0,p=e.p||0,y=e.b||0,v=e.l,C=e.d,E=e.m,R=e.n,I=r*8;do{if(!v){f=_u(i,p,1);var D=_u(i,p+1,3);if(p+=3,D)if(D==1)v=Vz,C=Uz,E=9,R=5;else if(D==2){var ue=_u(i,p,31)+257,U=_u(i,p+10,15)+4,P=ue+_u(i,p+5,31)+1;p+=14;for(var V=new Ca(P),Y=new Ca(19),O=0;O<U;++O)Y[ZE[O]]=_u(i,p+O*3,7);p+=U*3;for(var F=rT(Y),B=(1<<F)-1,H=Qc(Y,F,1),O=0;O<P;){var fe=H[_u(i,p,B)];p+=fe&15;var j=fe>>4;if(j<16)V[O++]=j;else{var Q=0,ce=0;for(j==16?(ce=3+_u(i,p,3),p+=2,Q=V[O-1]):j==17?(ce=3+_u(i,p,7),p+=3):j==18&&(ce=11+_u(i,p,127),p+=7);ce--;)V[O++]=Q}}var ge=V.subarray(0,ue),Te=V.subarray(ue);E=rT(ge),R=rT(Te),v=Qc(ge,E,1),C=Qc(Te,R,1)}else Tu(1);else{var j=gN(p)+4,X=i[j-4]|i[j-3]<<8,W=j+X;if(W>r){u&&Tu(0);break}l&&d(y+X),t.set(i.subarray(j,W),y),e.b=y+=X,e.p=p=W*8,e.f=f;continue}if(p>I){u&&Tu(0);break}}l&&d(y+131072);for(var re=(1<<E)-1,xe=(1<<R)-1,q=p;;q=p){var Q=v[sT(i,p)&re],ee=Q>>4;if(p+=Q&15,p>I){u&&Tu(0);break}if(Q||Tu(2),ee<256)t[y++]=ee;else if(ee==256){q=p,v=null;break}else{var he=ee-254;if(ee>264){var O=ee-257,me=i5[O];he=_u(i,p,(1<<me)-1)+z6[O],p+=me}var ye=C[sT(i,p)&xe],Ae=ye>>4;ye||Tu(3),p+=ye&15;var Te=Oz[Ae];if(Ae>3){var me=r5[Ae];Te+=sT(i,p)&(1<<me)-1,p+=me}if(p>I){u&&Tu(0);break}l&&d(y+131072);var Ie=y+he;if(y<Te){var Me=s-Te,nt=Math.min(Te,Ie);for(Me+y<0&&Tu(3);y<nt;++y)t[y]=n[Me+y]}for(;y<Ie;++y)t[y]=t[y-Te]}}e.l=v,e.p=q,e.b=y,e.f=f,v&&(f=1,e.m=E,e.d=C,e.n=R)}while(!f);return y!=t.length&&a?q6(t,0,y):t.subarray(0,y)},Bd=function(i,e,t){t<<=e&7;var n=e/8|0;i[n]|=t,i[n+1]|=t>>8},E1=function(i,e,t){t<<=e&7;var n=e/8|0;i[n]|=t,i[n+1]|=t>>8,i[n+2]|=t>>16},aT=function(i,e){for(var t=[],n=0;n<i.length;++n)i[n]&&t.push({s:n,f:i[n]});var r=t.length,s=t.slice();if(!r)return{t:H6,l:0};if(r==1){var a=new Ca(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(W,ue){return W.f-ue.f}),t.push({s:-1,f:25001});var l=t[0],u=t[1],d=0,f=1,p=2;for(t[0]={s:-1,f:l.f+u.f,l,r:u};f!=r-1;)l=t[t[d].f<t[p].f?d++:p++],u=t[d!=f&&t[d].f<t[p].f?d++:p++],t[f++]={s:-1,f:l.f+u.f,l,r:u};for(var y=s[0].s,n=1;n<r;++n)s[n].s>y&&(y=s[n].s);var v=new ll(y+1),C=nC(t[f-1],v,0);if(C>e){var n=0,E=0,R=C-e,I=1<<R;for(s.sort(function(ue,U){return v[U.s]-v[ue.s]||ue.f-U.f});n<r;++n){var D=s[n].s;if(v[D]>e)E+=I-(1<<C-v[D]),v[D]=e;else break}for(E>>=R;E>0;){var j=s[n].s;v[j]<e?E-=1<<e-v[j]++-1:++n}for(;n>=0&&E;--n){var X=s[n].s;v[X]==e&&(--v[X],++E)}C=e}return{t:new Ca(v),l:C}},nC=function(i,e,t){return i.s==-1?Math.max(nC(i.l,e,t+1),nC(i.r,e,t+1)):e[i.s]=t},w3=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new ll(++e),n=0,r=i[0],s=1,a=function(u){t[n++]=u},l=1;l<=e;++l)if(i[l]==r&&l!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(r),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(r);s=1,r=i[l]}return{c:t.subarray(0,n),n:e}},C1=function(i,e){for(var t=0,n=0;n<e.length;++n)t+=i[n]*e[n];return t},$6=function(i,e,t){var n=t.length,r=gN(e+2);i[r]=n&255,i[r+1]=n>>8,i[r+2]=i[r]^255,i[r+3]=i[r+1]^255;for(var s=0;s<n;++s)i[r+s+4]=t[s];return(r+4+n)*8},A3=function(i,e,t,n,r,s,a,l,u,d,f){Bd(e,f++,t),++r[256];for(var p=aT(r,15),y=p.t,v=p.l,C=aT(s,15),E=C.t,R=C.l,I=w3(y),D=I.c,j=I.n,X=w3(E),W=X.c,ue=X.n,U=new ll(19),P=0;P<D.length;++P)++U[D[P]&31];for(var P=0;P<W.length;++P)++U[W[P]&31];for(var V=aT(U,7),Y=V.t,O=V.l,F=19;F>4&&!Y[ZE[F-1]];--F);var B=d+5<<3,H=C1(r,Tp)+C1(s,xb)+a,fe=C1(r,y)+C1(s,E)+a+14+3*F+C1(U,Y)+2*U[16]+3*U[17]+7*U[18];if(u>=0&&B<=H&&B<=fe)return $6(e,f,i.subarray(u,u+d));var Q,ce,ge,Te;if(Bd(e,f,1+(fe<H)),f+=2,fe<H){Q=Qc(y,v,0),ce=y,ge=Qc(E,R,0),Te=E;var re=Qc(Y,O,0);Bd(e,f,j-257),Bd(e,f+5,ue-1),Bd(e,f+10,F-4),f+=14;for(var P=0;P<F;++P)Bd(e,f+3*P,Y[ZE[P]]);f+=3*F;for(var xe=[D,W],q=0;q<2;++q)for(var ee=xe[q],P=0;P<ee.length;++P){var he=ee[P]&31;Bd(e,f,re[he]),f+=Y[he],he>15&&(Bd(e,f,ee[P]>>5&127),f+=ee[P]>>12)}}else Q=Fz,ce=Tp,ge=Bz,Te=xb;for(var P=0;P<l;++P){var me=n[P];if(me>255){var he=me>>18&31;E1(e,f,Q[he+257]),f+=ce[he+257],he>7&&(Bd(e,f,me>>23&31),f+=i5[he]);var ye=me&31;E1(e,f,ge[ye]),f+=Te[ye],ye>3&&(E1(e,f,me>>5&8191),f+=r5[ye])}else E1(e,f,Q[me]),f+=ce[me]}return E1(e,f,Q[256]),f+ce[256]},qz=new mN([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),H6=new Ca(0),$z=function(i,e,t,n,r,s){var a=s.z||i.length,l=new Ca(n+a+5*(1+Math.ceil(a/7e3))+r),u=l.subarray(n,l.length-r),d=s.l,f=(s.r||0)&7;if(e){f&&(u[0]=s.r>>3);for(var p=qz[e-1],y=p>>13,v=p&8191,C=(1<<t)-1,E=s.p||new ll(32768),R=s.h||new ll(C+1),I=Math.ceil(t/3),D=2*I,j=function(pt){return(i[pt]^i[pt+1]<<I^i[pt+2]<<D)&C},X=new mN(25e3),W=new ll(288),ue=new ll(32),U=0,P=0,V=s.i||0,Y=0,O=s.w||0,F=0;V+2<a;++V){var B=j(V),H=V&32767,fe=R[B];if(E[H]=fe,R[B]=H,O<=V){var Q=a-V;if((U>7e3||Y>24576)&&(Q>423||!d)){f=A3(i,u,0,X,W,ue,P,Y,F,V-F,f),Y=U=P=0,F=V;for(var ce=0;ce<286;++ce)W[ce]=0;for(var ce=0;ce<30;++ce)ue[ce]=0}var ge=2,Te=0,re=v,xe=H-fe&32767;if(Q>2&&B==j(V-xe))for(var q=Math.min(y,Q)-1,ee=Math.min(32767,V),he=Math.min(258,Q);xe<=ee&&--re&&H!=fe;){if(i[V+ge]==i[V+ge-xe]){for(var me=0;me<he&&i[V+me]==i[V+me-xe];++me);if(me>ge){if(ge=me,Te=xe,me>q)break;for(var ye=Math.min(xe,me-2),Ae=0,ce=0;ce<ye;++ce){var Ie=V-xe+ce&32767,Me=E[Ie],nt=Ie-Me&32767;nt>Ae&&(Ae=nt,fe=Ie)}}}H=fe,fe=E[H],xe+=H-fe&32767}if(Te){X[Y++]=268435456|eC[ge]<<18|x3[Te];var He=eC[ge]&31,Ye=x3[Te]&31;P+=i5[He]+r5[Ye],++W[257+He],++ue[Ye],O=V+ge,++U}else X[Y++]=i[V],++W[i[V]]}}for(V=Math.max(V,O);V<a;++V)X[Y++]=i[V],++W[i[V]];f=A3(i,u,d,X,W,ue,P,Y,F,V-F,f),d||(s.r=f&7|u[f/8|0]<<3,f-=7,s.h=R,s.p=E,s.i=V,s.w=O)}else{for(var V=s.w||0;V<a+d;V+=65535){var Xe=V+65535;Xe>=a&&(u[f/8|0]=d,Xe=a),f=$6(u,f+1,i.subarray(V,Xe))}s.i=a}return q6(l,0,n+gN(f)+r)},G6=function(){var i=1,e=0;return{p:function(t){for(var n=i,r=e,s=t.length|0,a=0;a!=s;){for(var l=Math.min(a+2655,s);a<l;++a)r+=n+=t[a];n=(n&65535)+15*(n>>16),r=(r&65535)+15*(r>>16)}i=n,e=r},d:function(){return i%=65521,e%=65521,(i&255)<<24|(i&65280)<<8|(e&255)<<8|e>>8}}},Hz=function(i,e,t,n,r){if(!r&&(r={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Ca(s.length+i.length);a.set(s),a.set(i,s.length),i=a,r.w=s.length}return $z(i,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):20:12+e.mem,t,n,r)},Y6=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8},Gz=function(i,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(i[0]=120,i[1]=n<<6|(e.dictionary&&32),i[1]|=31-(i[0]<<8|i[1])%31,e.dictionary){var r=G6();r.p(e.dictionary),Y6(i,2,r.d())}},Yz=function(i,e){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&Tu(6,"invalid zlib data"),(i[1]>>5&1)==1&&Tu(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function iC(i,e){e||(e={});var t=G6();t.p(i);var n=Hz(i,e,e.dictionary?6:2,4);return Gz(n,e),Y6(n,n.length-4,t.d()),n}function Kz(i,e){return jz(i.subarray(Yz(i),-4),{i:2},e,e)}var Wz=typeof TextDecoder<"u"&&new TextDecoder,Qz=0;try{Wz.decode(H6,{stream:!0}),Qz=1}catch{}var tn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function oT(){tn.console&&typeof tn.console.log=="function"&&tn.console.log.apply(tn.console,arguments)}var Di={log:oT,warn:function(i){tn.console&&(typeof tn.console.warn=="function"?tn.console.warn.apply(tn.console,arguments):oT.call(null,arguments))},error:function(i){tn.console&&(typeof tn.console.error=="function"?tn.console.error.apply(tn.console,arguments):oT(i))}};function lT(i,e,t){var n=new XMLHttpRequest;n.open("GET",i),n.responseType="blob",n.onload=function(){cm(n.response,e,t)},n.onerror=function(){Di.error("could not download file")},n.send()}function S3(i){var e=new XMLHttpRequest;e.open("HEAD",i,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ox(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(e)}}var ob,rC,cm=tn.saveAs||((typeof window>"u"?"undefined":xi(window))!=="object"||window!==tn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,e,t){var n=tn.URL||tn.webkitURL,r=document.createElement("a");e=e||i.name||"download",r.download=e,r.rel="noopener",typeof i=="string"?(r.href=i,r.origin!==location.origin?S3(r.href)?lT(i,e,t):Ox(r,r.target="_blank"):Ox(r)):(r.href=n.createObjectURL(i),setTimeout(function(){n.revokeObjectURL(r.href)},4e4),setTimeout(function(){Ox(r)},0))}:"msSaveOrOpenBlob"in navigator?function(i,e,t){if(e=e||i.name||"download",typeof i=="string")if(S3(i))lT(i,e,t);else{var n=document.createElement("a");n.href=i,n.target="_blank",setTimeout(function(){Ox(n)})}else navigator.msSaveOrOpenBlob(function(r,s){return s===void 0?s={autoBom:!1}:xi(s)!=="object"&&(Di.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(i,t),e)}:function(i,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof i=="string")return lT(i,e,t);var r=i.type==="application/octet-stream",s=/constructor/i.test(tn.HTMLElement)||tn.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&s)&&(typeof FileReader>"u"?"undefined":xi(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=a?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},l.readAsDataURL(i)}else{var u=tn.URL||tn.webkitURL,d=u.createObjectURL(i);n?n.location=d:location.href=d,n=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function K6(i){var e;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<t.length;n++){var r=t[n].re,s=t[n].process,a=r.exec(i);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),u=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),"#"+l+u+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function uT(i,e){var t=i[0],n=i[1],r=i[2],s=i[3];t=pa(t,n,r,s,e[0],7,-680876936),s=pa(s,t,n,r,e[1],12,-389564586),r=pa(r,s,t,n,e[2],17,606105819),n=pa(n,r,s,t,e[3],22,-1044525330),t=pa(t,n,r,s,e[4],7,-176418897),s=pa(s,t,n,r,e[5],12,1200080426),r=pa(r,s,t,n,e[6],17,-1473231341),n=pa(n,r,s,t,e[7],22,-45705983),t=pa(t,n,r,s,e[8],7,1770035416),s=pa(s,t,n,r,e[9],12,-1958414417),r=pa(r,s,t,n,e[10],17,-42063),n=pa(n,r,s,t,e[11],22,-1990404162),t=pa(t,n,r,s,e[12],7,1804603682),s=pa(s,t,n,r,e[13],12,-40341101),r=pa(r,s,t,n,e[14],17,-1502002290),t=ma(t,n=pa(n,r,s,t,e[15],22,1236535329),r,s,e[1],5,-165796510),s=ma(s,t,n,r,e[6],9,-1069501632),r=ma(r,s,t,n,e[11],14,643717713),n=ma(n,r,s,t,e[0],20,-373897302),t=ma(t,n,r,s,e[5],5,-701558691),s=ma(s,t,n,r,e[10],9,38016083),r=ma(r,s,t,n,e[15],14,-660478335),n=ma(n,r,s,t,e[4],20,-405537848),t=ma(t,n,r,s,e[9],5,568446438),s=ma(s,t,n,r,e[14],9,-1019803690),r=ma(r,s,t,n,e[3],14,-187363961),n=ma(n,r,s,t,e[8],20,1163531501),t=ma(t,n,r,s,e[13],5,-1444681467),s=ma(s,t,n,r,e[2],9,-51403784),r=ma(r,s,t,n,e[7],14,1735328473),t=ga(t,n=ma(n,r,s,t,e[12],20,-1926607734),r,s,e[5],4,-378558),s=ga(s,t,n,r,e[8],11,-2022574463),r=ga(r,s,t,n,e[11],16,1839030562),n=ga(n,r,s,t,e[14],23,-35309556),t=ga(t,n,r,s,e[1],4,-1530992060),s=ga(s,t,n,r,e[4],11,1272893353),r=ga(r,s,t,n,e[7],16,-155497632),n=ga(n,r,s,t,e[10],23,-1094730640),t=ga(t,n,r,s,e[13],4,681279174),s=ga(s,t,n,r,e[0],11,-358537222),r=ga(r,s,t,n,e[3],16,-722521979),n=ga(n,r,s,t,e[6],23,76029189),t=ga(t,n,r,s,e[9],4,-640364487),s=ga(s,t,n,r,e[12],11,-421815835),r=ga(r,s,t,n,e[15],16,530742520),t=ya(t,n=ga(n,r,s,t,e[2],23,-995338651),r,s,e[0],6,-198630844),s=ya(s,t,n,r,e[7],10,1126891415),r=ya(r,s,t,n,e[14],15,-1416354905),n=ya(n,r,s,t,e[5],21,-57434055),t=ya(t,n,r,s,e[12],6,1700485571),s=ya(s,t,n,r,e[3],10,-1894986606),r=ya(r,s,t,n,e[10],15,-1051523),n=ya(n,r,s,t,e[1],21,-2054922799),t=ya(t,n,r,s,e[8],6,1873313359),s=ya(s,t,n,r,e[15],10,-30611744),r=ya(r,s,t,n,e[6],15,-1560198380),n=ya(n,r,s,t,e[13],21,1309151649),t=ya(t,n,r,s,e[4],6,-145523070),s=ya(s,t,n,r,e[11],10,-1120210379),r=ya(r,s,t,n,e[2],15,718787259),n=ya(n,r,s,t,e[9],21,-343485551),i[0]=pp(t,i[0]),i[1]=pp(n,i[1]),i[2]=pp(r,i[2]),i[3]=pp(s,i[3])}function s5(i,e,t,n,r,s){return e=pp(pp(e,i),pp(n,s)),pp(e<<r|e>>>32-r,t)}function pa(i,e,t,n,r,s,a){return s5(e&t|~e&n,i,e,r,s,a)}function ma(i,e,t,n,r,s,a){return s5(e&n|t&~n,i,e,r,s,a)}function ga(i,e,t,n,r,s,a){return s5(e^t^n,i,e,r,s,a)}function ya(i,e,t,n,r,s,a){return s5(t^(e|~n),i,e,r,s,a)}function W6(i){var e,t=i.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=i.length;e+=64)uT(n,Xz(i.substring(e-64,e)));i=i.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i.length;e++)r[e>>2]|=i.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(uT(n,r),e=0;e<16;e++)r[e]=0;return r[14]=8*t,uT(n,r),n}function Xz(i){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return t}ob=tn.atob.bind(tn),rC=tn.btoa.bind(tn);var T3="0123456789abcdef".split("");function Jz(i){for(var e="",t=0;t<4;t++)e+=T3[i>>8*t+4&15]+T3[i>>8*t&15];return e}function Zz(i){return String.fromCharCode((255&i)>>0,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function sC(i){return W6(i).map(Zz).join("")}var ej=function(i){for(var e=0;e<i.length;e++)i[e]=Jz(i[e]);return i.join("")}(W6("hello"))!="5d41402abc4b2a76b9719d911017c592";function pp(i,e){if(ej){var t=(65535&i)+(65535&e);return(i>>16)+(e>>16)+(t>>16)<<16|65535&t}return i+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function aC(i,e){var t,n,r,s;if(i!==t){for(var a=(r=i,s=1+(256/i.length>>0),new Array(s+1).join(r)),l=[],u=0;u<256;u++)l[u]=u;var d=0;for(u=0;u<256;u++){var f=l[u];d=(d+f+a.charCodeAt(u))%256,l[u]=l[d],l[d]=f}t=i,n=l}else l=n;var p=e.length,y=0,v=0,C="";for(u=0;u<p;u++)v=(v+(f=l[y=(y+1)%256]))%256,l[y]=l[v],l[v]=f,a=l[(l[y]+l[v])%256],C+=String.fromCharCode(e.charCodeAt(u)^a);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var E3={print:4,modify:8,copy:16,"annot-forms":32};function L0(i,e,t,n){this.v=1,this.r=2;var r=192;i.forEach(function(l){if(E3.perm!==void 0)throw new Error("Invalid permission: "+l);r+=E3[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^r)),this.encryptionKey=sC(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=aC(this.encryptionKey,this.padding)}function P0(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var e="",t=i.length,n=0;n<t;n++){var r=i.charCodeAt(n);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=i[n]}return e}function C3(i){if(xi(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,r){if(r=r||!1,typeof t!="string"||typeof n!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[n,!!r],s},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),r=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(i,n)}catch(l){tn.console&&Di.error("jsPDF PubSub Error",l.message,l)}a[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function nA(i){if(!(this instanceof nA))return new nA(i);var e="opacity,stroke-opacity".split(",");for(var t in i)i.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=i[t]);this.id="",this.objectNumber=-1}function Q6(i,e){this.gState=i,this.matrix=e,this.id="",this.objectNumber=-1}function hm(i,e,t,n,r){if(!(this instanceof hm))return new hm(i,e,t,n,r);this.type=i==="axial"?2:3,this.coords=e,this.colors=t,Q6.call(this,n,r)}function z0(i,e,t,n,r){if(!(this instanceof z0))return new z0(i,e,t,n,r);this.boundingBox=i,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Q6.call(this,n,r)}function Zt(i){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],r=arguments[2],s=arguments[3],a=[],l=1,u=16,d="S",f=null;xi(i=i||{})==="object"&&(t=i.orientation,n=i.unit||n,r=i.format||r,s=i.compress||i.compressPdf||s,(f=i.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(e=i.precision),i.floatPrecision!==void 0&&(u=i.floatPrecision),d=i.defaultPathOperation||"S"),a=i.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",t=(""+(t||"P")).toLowerCase();var p=i.putOnlyUsedFonts||!1,y={},v={internal:{},__private__:{}};v.__private__.PubSub=C3;var C="1.3",E=v.__private__.getPdfVersion=function(){return C};v.__private__.setPdfVersion=function(k){C=k};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return R};var I=v.__private__.getPageFormat=function(k){return R[k]};r=r||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},j=D.COMPAT;function X(){this.saveGraphicsState(),ve(new wt(xt,0,0,-xt,0,bs()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),d="n",j=D.ADVANCED}function W(){this.restoreGraphicsState(),d="S",j=D.COMPAT}var ue=v.__private__.combineFontStyleAndFontWeight=function(k,Z){if(k=="bold"&&Z=="normal"||k=="bold"&&Z==400||k=="normal"&&Z=="italic"||k=="bold"&&Z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Z&&(k=Z==400||Z==="normal"?k==="italic"?"italic":"normal":Z!=700&&Z!=="bold"||k!=="normal"?(Z==700?"bold":Z)+""+k:"bold"),k};v.advancedAPI=function(k){var Z=j===D.COMPAT;return Z&&X.call(this),typeof k!="function"||(k(this),Z&&W.call(this)),this},v.compatAPI=function(k){var Z=j===D.ADVANCED;return Z&&W.call(this),typeof k!="function"||(k(this),Z&&X.call(this)),this},v.isAdvancedAPI=function(){return j===D.ADVANCED};var U,P=function(k){if(j!==D.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=v.roundToPrecision=v.__private__.roundToPrecision=function(k,Z){var be=e||Z;if(isNaN(k)||isNaN(be))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(be).replace(/0+$/,"")};U=v.hpf=v.__private__.hpf=typeof u=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return V(k,u)}:u==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return V(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return V(k,16)};var Y=v.f2=v.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return V(k,2)},O=v.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return V(k,3)},F=v.scale=v.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return j===D.COMPAT?k*xt:j===D.ADVANCED?k:void 0},B=function(k){return j===D.COMPAT?bs()-k:j===D.ADVANCED?k:void 0},H=function(k){return F(B(k))};v.__private__.setPrecision=v.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var fe,Q="00000000000000000000000000000000",ce=v.__private__.getFileId=function(){return Q},ge=v.__private__.setFileId=function(k){return Q=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(gi=new L0(f.userPermissions,f.userPassword,f.ownerPassword,Q)),Q};v.setFileId=function(k){return ge(k),this},v.getFileId=function(){return ce()};var Te=v.__private__.convertDateToPDFDate=function(k){var Z=k.getTimezoneOffset(),be=Z<0?"+":"-",we=Math.floor(Math.abs(Z/60)),Re=Math.abs(Z%60),Ge=[be,he(we),"'",he(Re),"'"].join("");return["D:",k.getFullYear(),he(k.getMonth()+1),he(k.getDate()),he(k.getHours()),he(k.getMinutes()),he(k.getSeconds()),Ge].join("")},re=v.__private__.convertPDFDateToDate=function(k){var Z=parseInt(k.substr(2,4),10),be=parseInt(k.substr(6,2),10)-1,we=parseInt(k.substr(8,2),10),Re=parseInt(k.substr(10,2),10),Ge=parseInt(k.substr(12,2),10),at=parseInt(k.substr(14,2),10);return new Date(Z,be,we,Re,Ge,at,0)},xe=v.__private__.setCreationDate=function(k){var Z;if(k===void 0&&(k=new Date),k instanceof Date)Z=Te(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Z=k}return fe=Z},q=v.__private__.getCreationDate=function(k){var Z=fe;return k==="jsDate"&&(Z=re(fe)),Z};v.setCreationDate=function(k){return xe(k),this},v.getCreationDate=function(k){return q(k)};var ee,he=v.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},me=v.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},ye=0,Ae=[],Ie=[],Me=0,nt=[],He=[],Ye=!1,Xe=Ie,pt=function(){ye=0,Me=0,Ie=[],Ae=[],nt=[],Ls=Qi(),jr=Qi()};v.__private__.setCustomOutputDestination=function(k){Ye=!0,Xe=k};var Ve=function(k){Ye||(Xe=k)};v.__private__.resetCustomOutputDestination=function(){Ye=!1,Xe=Ie};var ve=v.__private__.out=function(k){return k=k.toString(),Me+=k.length+1,Xe.push(k),Xe},ct=v.__private__.write=function(k){return ve(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},mt=v.__private__.getArrayBuffer=function(k){for(var Z=k.length,be=new ArrayBuffer(Z),we=new Uint8Array(be);Z--;)we[Z]=k.charCodeAt(Z);return be},it=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return it};var st=i.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(k){return st=j===D.ADVANCED?k/xt:k,this};var gt,yt=v.__private__.getFontSize=v.getFontSize=function(){return j===D.COMPAT?st:st*xt},It=i.R2L||!1;v.__private__.setR2L=v.setR2L=function(k){return It=k,this},v.__private__.getR2L=v.getR2L=function(){return It};var Gt,nn=v.__private__.setZoomMode=function(k){var Z=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))gt=k;else if(isNaN(k)){if(Z.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');gt=k}else gt=parseInt(k,10)};v.__private__.getZoomMode=function(){return gt};var Dt,dt=v.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');Gt=k};v.__private__.getPageMode=function(){return Gt};var pn=v.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');Dt=k};v.__private__.getLayoutMode=function(){return Dt},v.__private__.setDisplayMode=v.setDisplayMode=function(k,Z,be){return nn(k),pn(Z),dt(be),this};var Ct={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(k){if(Object.keys(Ct).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ct[k]},v.__private__.getDocumentProperties=function(){return Ct},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(k){for(var Z in Ct)Ct.hasOwnProperty(Z)&&k[Z]&&(Ct[Z]=k[Z]);return this},v.__private__.setDocumentProperty=function(k,Z){if(Object.keys(Ct).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ct[k]=Z};var gn,xt,Fi,ln,Sr,un={},Wn={},zr=[],In={},ta={},di={},qi={},hr=null,hi=0,ut=[],on=new C3(v),Yt=i.hotfixes||[],Fn={},Vt={},Li=[],wt=function k(Z,be,we,Re,Ge,at){if(!(this instanceof k))return new k(Z,be,we,Re,Ge,at);isNaN(Z)&&(Z=1),isNaN(be)&&(be=0),isNaN(we)&&(we=0),isNaN(Re)&&(Re=1),isNaN(Ge)&&(Ge=0),isNaN(at)&&(at=0),this._matrix=[Z,be,we,Re,Ge,at]};Object.defineProperty(wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wt.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(k)},wt.prototype.multiply=function(k){var Z=k.sx*this.sx+k.shy*this.shx,be=k.sx*this.shy+k.shy*this.sy,we=k.shx*this.sx+k.sy*this.shx,Re=k.shx*this.shy+k.sy*this.sy,Ge=k.tx*this.sx+k.ty*this.shx+this.tx,at=k.tx*this.shy+k.ty*this.sy+this.ty;return new wt(Z,be,we,Re,Ge,at)},wt.prototype.decompose=function(){var k=this.sx,Z=this.shy,be=this.shx,we=this.sy,Re=this.tx,Ge=this.ty,at=Math.sqrt(k*k+Z*Z),bt=(k/=at)*be+(Z/=at)*we;be-=k*bt,we-=Z*bt;var w=Math.sqrt(be*be+we*we);return bt/=w,k*(we/=w)<Z*(be/=w)&&(k=-k,Z=-Z,bt=-bt,at=-at),{scale:new wt(at,0,0,w,0,0),translate:new wt(1,0,0,1,Re,Ge),rotate:new wt(k,Z,-Z,k,0,0),skew:new wt(1,0,bt,1,0,0)}},wt.prototype.toString=function(k){return this.join(" ")},wt.prototype.inversed=function(){var k=this.sx,Z=this.shy,be=this.shx,we=this.sy,Re=this.tx,Ge=this.ty,at=1/(k*we-Z*be),bt=we*at,w=-Z*at,M=-be*at,$=k*at;return new wt(bt,w,M,$,-bt*Re-M*Ge,-w*Re-$*Ge)},wt.prototype.applyToPoint=function(k){var Z=k.x*this.sx+k.y*this.shx+this.tx,be=k.x*this.shy+k.y*this.sy+this.ty;return new tu(Z,be)},wt.prototype.applyToRectangle=function(k){var Z=this.applyToPoint(k),be=this.applyToPoint(new tu(k.x+k.w,k.y+k.h));return new ec(Z.x,Z.y,be.x-Z.x,be.y-Z.y)},wt.prototype.clone=function(){var k=this.sx,Z=this.shy,be=this.shx,we=this.sy,Re=this.tx,Ge=this.ty;return new wt(k,Z,be,we,Re,Ge)},v.Matrix=wt;var li=v.matrixMult=function(k,Z){return Z.multiply(k)},ui=new wt(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=ui;var Pi=function(k,Z){if(!ta[k]){var be=(Z instanceof hm?"Sh":"P")+(Object.keys(In).length+1).toString(10);Z.id=be,ta[k]=be,In[be]=Z,on.publish("addPattern",Z)}};v.ShadingPattern=hm,v.TilingPattern=z0,v.addShadingPattern=function(k,Z){return P("addShadingPattern()"),Pi(k,Z),this},v.beginTilingPattern=function(k){P("beginTilingPattern()"),wl(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},v.endTilingPattern=function(k,Z){P("endTilingPattern()"),Z.stream=He[ee].join(`
`),Pi(k,Z),on.publish("endTilingPattern",Z),Li.pop().restore()};var $i=v.__private__.newObject=function(){var k=Qi();return fr(k,!0),k},Qi=v.__private__.newObjectDeferred=function(){return ye++,Ae[ye]=function(){return Me},ye},fr=function(k,Z){return Z=typeof Z=="boolean"&&Z,Ae[k]=Me,Z&&ve(k+" 0 obj"),k},Kl=v.__private__.newAdditionalObject=function(){var k={objId:Qi(),content:""};return nt.push(k),k},Ls=Qi(),jr=Qi(),Tr=v.__private__.decodeColorString=function(k){var Z=k.split(" ");if(Z.length!==2||Z[1]!=="g"&&Z[1]!=="G")Z.length===5&&(Z[4]==="k"||Z[4]==="K")&&(Z=[(1-Z[0])*(1-Z[3]),(1-Z[1])*(1-Z[3]),(1-Z[2])*(1-Z[3]),"r"]);else{var be=parseFloat(Z[0]);Z=[be,be,be,"r"]}for(var we="#",Re=0;Re<3;Re++)we+=("0"+Math.floor(255*parseFloat(Z[Re])).toString(16)).slice(-2);return we},pr=v.__private__.encodeColorString=function(k){var Z;typeof k=="string"&&(k={ch1:k});var be=k.ch1,we=k.ch2,Re=k.ch3,Ge=k.ch4,at=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof be=="string"&&be.charAt(0)!=="#"){var bt=new K6(be);if(bt.ok)be=bt.toHex();else if(!/^\d*\.?\d*$/.test(be))throw new Error('Invalid color "'+be+'" passed to jsPDF.encodeColorString.')}if(typeof be=="string"&&/^#[0-9A-Fa-f]{3}$/.test(be)&&(be="#"+be[1]+be[1]+be[2]+be[2]+be[3]+be[3]),typeof be=="string"&&/^#[0-9A-Fa-f]{6}$/.test(be)){var w=parseInt(be.substr(1),16);be=w>>16&255,we=w>>8&255,Re=255&w}if(we===void 0||Ge===void 0&&be===we&&we===Re)if(typeof be=="string")Z=be+" "+at[0];else switch(k.precision){case 2:Z=Y(be/255)+" "+at[0];break;case 3:default:Z=O(be/255)+" "+at[0]}else if(Ge===void 0||xi(Ge)==="object"){if(Ge&&!isNaN(Ge.a)&&Ge.a===0)return Z=["1.","1.","1.",at[1]].join(" ");if(typeof be=="string")Z=[be,we,Re,at[1]].join(" ");else switch(k.precision){case 2:Z=[Y(be/255),Y(we/255),Y(Re/255),at[1]].join(" ");break;default:case 3:Z=[O(be/255),O(we/255),O(Re/255),at[1]].join(" ")}}else if(typeof be=="string")Z=[be,we,Re,Ge,at[2]].join(" ");else switch(k.precision){case 2:Z=[Y(be),Y(we),Y(Re),Y(Ge),at[2]].join(" ");break;case 3:default:Z=[O(be),O(we),O(Re),O(Ge),at[2]].join(" ")}return Z},Er=v.__private__.getFilters=function(){return a},Ai=v.__private__.putStream=function(k){var Z=(k=k||{}).data||"",be=k.filters||Er(),we=k.alreadyAppliedFilters||[],Re=k.addLength1||!1,Ge=Z.length,at=k.objectId,bt=function(Wt){return Wt};if(f!==null&&at===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(bt=gi.encryptor(at,0));var w={};be===!0&&(be=["FlateEncode"]);var M=k.additionalKeyValues||[],$=(w=Zt.API.processDataByFilters!==void 0?Zt.API.processDataByFilters(Z,be):{data:Z,reverseChain:[]}).reverseChain+(Array.isArray(we)?we.join(" "):we.toString());if(w.data.length!==0&&(M.push({key:"Length",value:w.data.length}),Re===!0&&M.push({key:"Length1",value:Ge})),$.length!=0)if($.split("/").length-1==1)M.push({key:"Filter",value:$});else{M.push({key:"Filter",value:"["+$+"]"});for(var oe=0;oe<M.length;oe+=1)if(M[oe].key==="DecodeParms"){for(var ke=[],Be=0;Be<w.reverseChain.split("/").length-1;Be+=1)ke.push("null");ke.push(M[oe].value),M[oe].value="["+ke.join(" ")+"]"}}ve("<<");for(var ot=0;ot<M.length;ot++)ve("/"+M[ot].key+" "+M[ot].value);ve(">>"),w.data.length!==0&&(ve("stream"),ve(bt(w.data)),ve("endstream"))},Zn=v.__private__.putPage=function(k){var Z=k.number,be=k.data,we=k.objId,Re=k.contentsObjId;fr(we,!0),ve("<</Type /Page"),ve("/Parent "+k.rootDictionaryObjId+" 0 R"),ve("/Resources "+k.resourceDictionaryObjId+" 0 R"),ve("/MediaBox ["+parseFloat(U(k.mediaBox.bottomLeftX))+" "+parseFloat(U(k.mediaBox.bottomLeftY))+" "+U(k.mediaBox.topRightX)+" "+U(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&ve("/CropBox ["+U(k.cropBox.bottomLeftX)+" "+U(k.cropBox.bottomLeftY)+" "+U(k.cropBox.topRightX)+" "+U(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&ve("/BleedBox ["+U(k.bleedBox.bottomLeftX)+" "+U(k.bleedBox.bottomLeftY)+" "+U(k.bleedBox.topRightX)+" "+U(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&ve("/TrimBox ["+U(k.trimBox.bottomLeftX)+" "+U(k.trimBox.bottomLeftY)+" "+U(k.trimBox.topRightX)+" "+U(k.trimBox.topRightY)+"]"),k.artBox!==null&&ve("/ArtBox ["+U(k.artBox.bottomLeftX)+" "+U(k.artBox.bottomLeftY)+" "+U(k.artBox.topRightX)+" "+U(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&ve("/UserUnit "+k.userUnit),on.publish("putPage",{objId:we,pageContext:ut[Z],pageNumber:Z,page:be}),ve("/Contents "+Re+" 0 R"),ve(">>"),ve("endobj");var Ge=be.join(`
`);return j===D.ADVANCED&&(Ge+=`
Q`),fr(Re,!0),Ai({data:Ge,filters:Er(),objectId:Re}),ve("endobj"),we},So=v.__private__.putPages=function(){var k,Z,be=[];for(k=1;k<=hi;k++)ut[k].objId=Qi(),ut[k].contentsObjId=Qi();for(k=1;k<=hi;k++)be.push(Zn({number:k,data:He[k],objId:ut[k].objId,contentsObjId:ut[k].contentsObjId,mediaBox:ut[k].mediaBox,cropBox:ut[k].cropBox,bleedBox:ut[k].bleedBox,trimBox:ut[k].trimBox,artBox:ut[k].artBox,userUnit:ut[k].userUnit,rootDictionaryObjId:Ls,resourceDictionaryObjId:jr}));fr(Ls,!0),ve("<</Type /Pages");var we="/Kids [";for(Z=0;Z<hi;Z++)we+=be[Z]+" 0 R ";ve(we+"]"),ve("/Count "+hi),ve(">>"),ve("endobj"),on.publish("postPutPages")},To=function(k){on.publish("putFont",{font:k,out:ve,newObject:$i,putStream:Ai}),k.isAlreadyPutted!==!0&&(k.objectNumber=$i(),ve("<<"),ve("/Type /Font"),ve("/BaseFont /"+P0(k.postScriptName)),ve("/Subtype /Type1"),typeof k.encoding=="string"&&ve("/Encoding /"+k.encoding),ve("/FirstChar 32"),ve("/LastChar 255"),ve(">>"),ve("endobj"))},ms=function(){for(var k in un)un.hasOwnProperty(k)&&(p===!1||p===!0&&y.hasOwnProperty(k))&&To(un[k])},na=function(k){k.objectNumber=$i();var Z=[];Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Form"}),Z.push({key:"BBox",value:"["+[U(k.x),U(k.y),U(k.x+k.width),U(k.y+k.height)].join(" ")+"]"}),Z.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var be=k.pages[1].join(`
`);Ai({data:be,additionalKeyValues:Z,objectId:k.objectNumber}),ve("endobj")},Wl=function(){for(var k in Fn)Fn.hasOwnProperty(k)&&na(Fn[k])},ld=function(k,Z){var be,we=[],Re=1/(Z-1);for(be=0;be<1;be+=Re)we.push(be);if(we.push(1),k[0].offset!=0){var Ge={offset:0,color:k[0].color};k.unshift(Ge)}if(k[k.length-1].offset!=1){var at={offset:1,color:k[k.length-1].color};k.push(at)}for(var bt="",w=0,M=0;M<we.length;M++){for(be=we[M];be>k[w+1].offset;)w++;var $=k[w].offset,oe=(be-$)/(k[w+1].offset-$),ke=k[w].color,Be=k[w+1].color;bt+=me(Math.round((1-oe)*ke[0]+oe*Be[0]).toString(16))+me(Math.round((1-oe)*ke[1]+oe*Be[1]).toString(16))+me(Math.round((1-oe)*ke[2]+oe*Be[2]).toString(16))}return bt.trim()},Ql=function(k,Z){Z||(Z=21);var be=$i(),we=ld(k.colors,Z),Re=[];Re.push({key:"FunctionType",value:"0"}),Re.push({key:"Domain",value:"[0.0 1.0]"}),Re.push({key:"Size",value:"["+Z+"]"}),Re.push({key:"BitsPerSample",value:"8"}),Re.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Re.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ai({data:we,additionalKeyValues:Re,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:be}),ve("endobj"),k.objectNumber=$i(),ve("<< /ShadingType "+k.type),ve("/ColorSpace /DeviceRGB");var Ge="/Coords ["+U(parseFloat(k.coords[0]))+" "+U(parseFloat(k.coords[1]))+" ";k.type===2?Ge+=U(parseFloat(k.coords[2]))+" "+U(parseFloat(k.coords[3])):Ge+=U(parseFloat(k.coords[2]))+" "+U(parseFloat(k.coords[3]))+" "+U(parseFloat(k.coords[4]))+" "+U(parseFloat(k.coords[5])),ve(Ge+="]"),k.matrix&&ve("/Matrix ["+k.matrix.toString()+"]"),ve("/Function "+be+" 0 R"),ve("/Extend [true true]"),ve(">>"),ve("endobj")},Vh=function(k,Z){var be=Qi(),we=$i();Z.push({resourcesOid:be,objectOid:we}),k.objectNumber=we;var Re=[];Re.push({key:"Type",value:"/Pattern"}),Re.push({key:"PatternType",value:"1"}),Re.push({key:"PaintType",value:"1"}),Re.push({key:"TilingType",value:"1"}),Re.push({key:"BBox",value:"["+k.boundingBox.map(U).join(" ")+"]"}),Re.push({key:"XStep",value:U(k.xStep)}),Re.push({key:"YStep",value:U(k.yStep)}),Re.push({key:"Resources",value:be+" 0 R"}),k.matrix&&Re.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),Ai({data:k.stream,additionalKeyValues:Re,objectId:k.objectNumber}),ve("endobj")},Ia=function(k){var Z;for(Z in In)In.hasOwnProperty(Z)&&(In[Z]instanceof hm?Ql(In[Z]):In[Z]instanceof z0&&Vh(In[Z],k))},Ra=function(k){for(var Z in k.objectNumber=$i(),ve("<<"),k)switch(Z){case"opacity":ve("/ca "+Y(k[Z]));break;case"stroke-opacity":ve("/CA "+Y(k[Z]))}ve(">>"),ve("endobj")},Cr=function(){var k;for(k in di)di.hasOwnProperty(k)&&Ra(di[k])},Eo=function(){for(var k in ve("/XObject <<"),Fn)Fn.hasOwnProperty(k)&&Fn[k].objectNumber>=0&&ve("/"+k+" "+Fn[k].objectNumber+" 0 R");on.publish("putXobjectDict"),ve(">>")},Bh=function(){gi.oid=$i(),ve("<<"),ve("/Filter /Standard"),ve("/V "+gi.v),ve("/R "+gi.r),ve("/U <"+gi.toHexString(gi.U)+">"),ve("/O <"+gi.toHexString(gi.O)+">"),ve("/P "+gi.P),ve(">>"),ve("endobj")},Wa=function(){for(var k in ve("/Font <<"),un)un.hasOwnProperty(k)&&(p===!1||p===!0&&y.hasOwnProperty(k))&&ve("/"+k+" "+un[k].objectNumber+" 0 R");ve(">>")},Ku=function(){if(Object.keys(In).length>0){for(var k in ve("/Shading <<"),In)In.hasOwnProperty(k)&&In[k]instanceof hm&&In[k].objectNumber>=0&&ve("/"+k+" "+In[k].objectNumber+" 0 R");on.publish("putShadingPatternDict"),ve(">>")}},Co=function(k){if(Object.keys(In).length>0){for(var Z in ve("/Pattern <<"),In)In.hasOwnProperty(Z)&&In[Z]instanceof v.TilingPattern&&In[Z].objectNumber>=0&&In[Z].objectNumber<k&&ve("/"+Z+" "+In[Z].objectNumber+" 0 R");on.publish("putTilingPatternDict"),ve(">>")}},ud=function(){if(Object.keys(di).length>0){var k;for(k in ve("/ExtGState <<"),di)di.hasOwnProperty(k)&&di[k].objectNumber>=0&&ve("/"+k+" "+di[k].objectNumber+" 0 R");on.publish("putGStateDict"),ve(">>")}},Si=function(k){fr(k.resourcesOid,!0),ve("<<"),ve("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Wa(),Ku(),Co(k.objectOid),ud(),Eo(),ve(">>"),ve("endobj")},qr=function(){var k=[];ms(),Cr(),Wl(),Ia(k),on.publish("putResources"),k.forEach(Si),Si({resourcesOid:jr,objectOid:Number.MAX_SAFE_INTEGER}),on.publish("postPutResources")},Wu=function(){on.publish("putAdditionalObjects");for(var k=0;k<nt.length;k++){var Z=nt[k];fr(Z.objId,!0),ve(Z.content),ve("endobj")}on.publish("postPutAdditionalObjects")},Uh=function(k){Wn[k.fontName]=Wn[k.fontName]||{},Wn[k.fontName][k.fontStyle]=k.id},fl=function(k,Z,be,we,Re){var Ge={id:"F"+(Object.keys(un).length+1).toString(10),postScriptName:k,fontName:Z,fontStyle:be,encoding:we,isStandardFont:Re||!1,metadata:{}};return on.publish("addFont",{font:Ge,instance:this}),un[Ge.id]=Ge,Uh(Ge),Ge.id},cd=function(k){for(var Z=0,be=it.length;Z<be;Z++){var we=fl.call(this,k[Z][0],k[Z][1],k[Z][2],it[Z][3],!0);p===!1&&(y[we]=!0);var Re=k[Z][0].split("-");Uh({id:we,fontName:Re[0],fontStyle:Re[1]||""})}on.publish("addFonts",{fonts:un,dictionary:Wn})},rs=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(we){var Z=we.stack||"";~Z.indexOf(" at ")&&(Z=Z.split(" at ")[1]);var be="Error in function "+Z.split(`
`)[0].split("<")[0]+": "+we.message;if(!tn.console)throw new Error(be);tn.console.error(be,we),tn.alert&&alert(be)}},k.foo.bar=k,k.foo},Qu=function(k,Z){var be,we,Re,Ge,at,bt,w,M,$;if(Re=(Z=Z||{}).sourceEncoding||"Unicode",at=Z.outputEncoding,(Z.autoencode||at)&&un[gn].metadata&&un[gn].metadata[Re]&&un[gn].metadata[Re].encoding&&(Ge=un[gn].metadata[Re].encoding,!at&&un[gn].encoding&&(at=un[gn].encoding),!at&&Ge.codePages&&(at=Ge.codePages[0]),typeof at=="string"&&(at=Ge[at]),at)){for(w=!1,bt=[],be=0,we=k.length;be<we;be++)(M=at[k.charCodeAt(be)])?bt.push(String.fromCharCode(M)):bt.push(k[be]),bt[be].charCodeAt(0)>>8&&(w=!0);k=bt.join("")}for(be=k.length;w===void 0&&be!==0;)k.charCodeAt(be-1)>>8&&(w=!0),be--;if(!w)return k;for(bt=Z.noBOM?[]:[254,255],be=0,we=k.length;be<we;be++){if(($=(M=k.charCodeAt(be))>>8)>>8)throw new Error("Character at position "+be+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");bt.push($),bt.push(M-($<<8))}return String.fromCharCode.apply(void 0,bt)},Un=v.__private__.pdfEscape=v.pdfEscape=function(k,Z){return Qu(k,Z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ss=v.__private__.beginPage=function(k){He[++hi]=[],ut[hi]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},Qa(hi),Ve(He[ee])},pl=function(k,Z){var be,we,Re;switch(t=Z||t,typeof k=="string"&&(be=I(k.toLowerCase()),Array.isArray(be)&&(we=be[0],Re=be[1])),Array.isArray(k)&&(we=k[0]*xt,Re=k[1]*xt),isNaN(we)&&(we=r[0],Re=r[1]),(we>14400||Re>14400)&&(Di.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),we=Math.min(14400,we),Re=Math.min(14400,Re)),r=[we,Re],t.substr(0,1)){case"l":Re>we&&(r=[Re,we]);break;case"p":we>Re&&(r=[Re,we])}ss(r),pd(vl),ve(as),md!==0&&ve(md+" J"),eu!==0&&ve(eu+" j"),on.publish("addPage",{pageNumber:hi})},ml=function(k){k>0&&k<=hi&&(He.splice(k,1),ut.splice(k,1),hi--,ee>hi&&(ee=hi),this.setPage(ee))},Qa=function(k){k>0&&k<=hi&&(ee=k)},ei=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return He.length-1},gl=function(k,Z,be){var we,Re=void 0;return be=be||{},k=k!==void 0?k:un[gn].fontName,Z=Z!==void 0?Z:un[gn].fontStyle,we=k.toLowerCase(),Wn[we]!==void 0&&Wn[we][Z]!==void 0?Re=Wn[we][Z]:Wn[k]!==void 0&&Wn[k][Z]!==void 0?Re=Wn[k][Z]:be.disableWarning===!1&&Di.warn("Unable to look up font label for font '"+k+"', '"+Z+"'. Refer to getFontList() for available fonts."),Re||be.noFallback||(Re=Wn.times[Z])==null&&(Re=Wn.times.normal),Re},ia=v.__private__.putInfo=function(){var k=$i(),Z=function(we){return we};for(var be in f!==null&&(Z=gi.encryptor(k,0)),ve("<<"),ve("/Producer ("+Un(Z("jsPDF "+Zt.version))+")"),Ct)Ct.hasOwnProperty(be)&&Ct[be]&&ve("/"+be.substr(0,1).toUpperCase()+be.substr(1)+" ("+Un(Z(Ct[be]))+")");ve("/CreationDate ("+Un(Z(fe))+")"),ve(">>"),ve("endobj")},No=v.__private__.putCatalog=function(k){var Z=(k=k||{}).rootDictionaryObjId||Ls;switch($i(),ve("<<"),ve("/Type /Catalog"),ve("/Pages "+Z+" 0 R"),gt||(gt="fullwidth"),gt){case"fullwidth":ve("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ve("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ve("/OpenAction [3 0 R /Fit]");break;case"original":ve("/OpenAction [3 0 R /XYZ null null 1]");break;default:var be=""+gt;be.substr(be.length-1)==="%"&&(gt=parseInt(gt)/100),typeof gt=="number"&&ve("/OpenAction [3 0 R /XYZ null null "+Y(gt)+"]")}switch(Dt||(Dt="continuous"),Dt){case"continuous":ve("/PageLayout /OneColumn");break;case"single":ve("/PageLayout /SinglePage");break;case"two":case"twoleft":ve("/PageLayout /TwoColumnLeft");break;case"tworight":ve("/PageLayout /TwoColumnRight")}Gt&&ve("/PageMode /"+Gt),on.publish("putCatalog"),ve(">>"),ve("endobj")},zh=v.__private__.putTrailer=function(){ve("trailer"),ve("<<"),ve("/Size "+(ye+1)),ve("/Root "+ye+" 0 R"),ve("/Info "+(ye-1)+" 0 R"),f!==null&&ve("/Encrypt "+gi.oid+" 0 R"),ve("/ID [ <"+Q+"> <"+Q+"> ]"),ve(">>")},dd=v.__private__.putHeader=function(){ve("%PDF-"+C),ve("%ºß¬à")},hd=v.__private__.putXRef=function(){var k="0000000000";ve("xref"),ve("0 "+(ye+1)),ve("0000000000 65535 f ");for(var Z=1;Z<=ye;Z++)typeof Ae[Z]=="function"?ve((k+Ae[Z]()).slice(-10)+" 00000 n "):Ae[Z]!==void 0?ve((k+Ae[Z]).slice(-10)+" 00000 n "):ve("0000000000 00000 n ")},ko=v.__private__.buildDocument=function(){pt(),Ve(Ie),on.publish("buildDocument"),dd(),So(),Wu(),qr(),f!==null&&Bh(),ia(),No();var k=Me;return hd(),zh(),ve("startxref"),ve(""+k),ve("%%EOF"),Ve(He[ee]),Ie.join(`
`)},Xu=v.__private__.getBlob=function(k){return new Blob([mt(k)],{type:"application/pdf"})},Io=v.output=v.__private__.output=rs(function(k,Z){switch(typeof(Z=Z||{})=="string"?Z={filename:Z}:Z.filename=Z.filename||"generated.pdf",k){case void 0:return ko();case"save":v.save(Z.filename);break;case"arraybuffer":return mt(ko());case"blob":return Xu(ko());case"bloburi":case"bloburl":if(tn.URL!==void 0&&typeof tn.URL.createObjectURL=="function")return tn.URL&&tn.URL.createObjectURL(Xu(ko()))||void 0;Di.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var be="",we=ko();try{be=rC(we)}catch{be=rC(unescape(encodeURIComponent(we)))}return"data:application/pdf;filename="+Z.filename+";base64,"+be;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var Re="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Z.pdfObjectUrl&&(Re=Z.pdfObjectUrl,Ge="");var at='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Re+'"'+Ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Z)+");<\/script></body></html>",bt=tn.open();return bt!==null&&bt.document.write(at),bt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var w='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Z.filename+'" width="500px" height="400px" /></body></html>',M=tn.open();if(M!==null){M.document.write(w);var $=this;M.document.documentElement.querySelector("#pdfViewer").onload=function(){M.document.title=Z.filename,M.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open($.output("bloburl"))}}return M}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Z)+'"></iframe></body></html>',ke=tn.open();if(ke!==null&&(ke.document.write(oe),ke.document.title=Z.filename),ke||typeof safari>"u")return ke;break;case"datauri":case"dataurl":return tn.document.location.href=this.output("datauristring",Z);default:return null}}),Xa=function(k){return Array.isArray(Yt)===!0&&Yt.indexOf(k)>-1};switch(n){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=Xa("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xt=n}var gi=null;xe(),ge();var Ro=function(k){return f!==null?gi.encryptor(k,0):function(Z){return Z}},Ja=v.__private__.getPageInfo=v.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ut[k].objId,pageNumber:k,pageContext:ut[k]}},Kt=v.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Z in ut)if(ut[Z].objId===k)break;return Ja(Z)},Za=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:ut[ee].objId,pageNumber:ee,pageContext:ut[ee]}};v.addPage=function(){return pl.apply(this,arguments),this},v.setPage=function(){return Qa.apply(this,arguments),Ve.call(this,He[ee]),this},v.insertPage=function(k){return this.addPage(),this.movePage(ee,k),this},v.movePage=function(k,Z){var be,we;if(k>Z){be=He[k],we=ut[k];for(var Re=k;Re>Z;Re--)He[Re]=He[Re-1],ut[Re]=ut[Re-1];He[Z]=be,ut[Z]=we,this.setPage(Z)}else if(k<Z){be=He[k],we=ut[k];for(var Ge=k;Ge<Z;Ge++)He[Ge]=He[Ge+1],ut[Ge]=ut[Ge+1];He[Z]=be,ut[Z]=we,this.setPage(Z)}return this},v.deletePage=function(){return ml.apply(this,arguments),this},v.__private__.text=v.text=function(k,Z,be,we,Re){var Ge,at,bt,w,M,$,oe,ke,Be,ot=(we=we||{}).scope||this;if(typeof k=="number"&&typeof Z=="number"&&(typeof be=="string"||Array.isArray(be))){var Wt=be;be=Z,Z=k,k=Wt}if(arguments[3]instanceof wt?(P("The transform parameter of text() with a Matrix value"),Be=Re):(bt=arguments[4],w=arguments[5],xi(oe=arguments[3])==="object"&&oe!==null||(typeof bt=="string"&&(w=bt,bt=null),typeof oe=="string"&&(w=oe,oe=null),typeof oe=="number"&&(bt=oe,oe=null),we={flags:oe,angle:bt,align:w})),isNaN(Z)||isNaN(be)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return ot;var Ln="",cn=!1,ti=typeof we.lineHeightFactor=="number"?we.lineHeightFactor:Rn,fi=ot.internal.scaleFactor;function io(Nn){return Nn=Nn.split("	").join(Array(we.TabLen||9).join(" ")),Un(Nn,oe)}function rr(Nn){for(var kn,Ti=Nn.concat(),sr=[],so=Ti.length;so--;)typeof(kn=Ti.shift())=="string"?sr.push(kn):Array.isArray(Nn)&&(kn.length===1||kn[1]===void 0&&kn[2]===void 0)?sr.push(kn[0]):sr.push([kn[0],kn[1],kn[2]]);return sr}function oa(Nn,kn){var Ti;if(typeof Nn=="string")Ti=kn(Nn)[0];else if(Array.isArray(Nn)){for(var sr,so,dc=Nn.concat(),hc=[],au=dc.length;au--;)typeof(sr=dc.shift())=="string"?hc.push(kn(sr)[0]):Array.isArray(sr)&&typeof sr[0]=="string"&&(so=kn(sr[0],sr[1],sr[2]),hc.push([so[0],so[1],so[2]]));Ti=hc}return Ti}var Sl=!1,nc=!0;if(typeof k=="string")Sl=!0;else if(Array.isArray(k)){var Hh=k.concat();at=[];for(var gd,Nr=Hh.length;Nr--;)(typeof(gd=Hh.shift())!="string"||Array.isArray(gd)&&typeof gd[0]!="string")&&(nc=!1);Sl=nc}if(Sl===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var ic=st/ot.internal.scaleFactor,yd=ic*(ti-1);switch(we.baseline){case"bottom":be-=yd;break;case"top":be+=ic-yd;break;case"hanging":be+=ic-2*yd;break;case"middle":be+=ic/2-yd}if(($=we.maxWidth||0)>0&&(typeof k=="string"?k=ot.splitTextToSize(k,$):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Nn,kn){return Nn.concat(ot.splitTextToSize(kn,$))},[]))),Ge={text:k,x:Z,y:be,options:we,mutex:{pdfEscape:Un,activeFontKey:gn,fonts:un,activeFontSize:st}},on.publish("preProcessText",Ge),k=Ge.text,bt=(we=Ge.options).angle,!(Be instanceof wt)&&bt&&typeof bt=="number"){bt*=Math.PI/180,we.rotationDirection===0&&(bt=-bt),j===D.ADVANCED&&(bt=-bt);var vd=Math.cos(bt),Gh=Math.sin(bt);Be=new wt(vd,Gh,-Gh,vd,0,0)}else bt&&bt instanceof wt&&(Be=bt);j!==D.ADVANCED||Be||(Be=ui),(M=we.charSpace||Zl)!==void 0&&(Ln+=U(F(M))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ke=we.horizontalScale)!==void 0&&(Ln+=U(100*ke)+` Tz
`),we.lang;var la=-1,Dv=we.renderingMode!==void 0?we.renderingMode:we.stroke,Vp=ot.internal.getCurrentPageInfo().pageContext;switch(Dv){case 0:case!1:case"fill":la=0;break;case 1:case!0:case"stroke":la=1;break;case 2:case"fillThenStroke":la=2;break;case 3:case"invisible":la=3;break;case 4:case"fillAndAddForClipping":la=4;break;case 5:case"strokeAndAddPathForClipping":la=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":la=6;break;case 7:case"addToPathForClipping":la=7}var $g=Vp.usedRenderingMode!==void 0?Vp.usedRenderingMode:-1;la!==-1?Ln+=la+` Tr
`:$g!==-1&&(Ln+=`0 Tr
`),la!==-1&&(Vp.usedRenderingMode=la),w=we.align||"left";var ro,$r=st*ti,rc=ot.internal.pageSize.getWidth(),Bp=un[gn];M=we.charSpace||Zl,$=we.maxWidth||0,oe=Object.assign({autoencode:!0,noBOM:!0},we.flags);var ru=[],sc=function(Nn){return ot.getStringUnitWidth(Nn,{font:Bp,charSpace:M,fontSize:st,doKerning:!1})*st/fi};if(Object.prototype.toString.call(k)==="[object Array]"){var Ms;at=rr(k),w!=="left"&&(ro=at.map(sc));var os,ac=0;if(w==="right"){Z-=ro[0],k=[],Nr=at.length;for(var ua=0;ua<Nr;ua++)ua===0?(os=vs(Z),Ms=gr(be)):(os=F(ac-ro[ua]),Ms=-$r),k.push([at[ua],os,Ms]),ac=ro[ua]}else if(w==="center"){Z-=ro[0]/2,k=[],Nr=at.length;for(var Do=0;Do<Nr;Do++)Do===0?(os=vs(Z),Ms=gr(be)):(os=F((ac-ro[Do])/2),Ms=-$r),k.push([at[Do],os,Ms]),ac=ro[Do]}else if(w==="left"){k=[],Nr=at.length;for(var Tl=0;Tl<Nr;Tl++)k.push(at[Tl])}else if(w==="justify"&&Bp.encoding==="Identity-H"){k=[],Nr=at.length,$=$!==0?$:rc;for(var Oo=0,Xi=0;Xi<Nr;Xi++)if(Ms=Xi===0?gr(be):-$r,os=Xi===0?vs(Z):Oo,Xi<Nr-1){var Fo=F(($-ro[Xi])/(at[Xi].split(" ").length-1)),yr=at[Xi].split(" ");k.push([yr[0]+" ",os,Ms]),Oo=0;for(var ca=1;ca<yr.length;ca++){var bd=(sc(yr[ca-1]+" "+yr[ca])-sc(yr[ca]))*fi+Fo;ca==yr.length-1?k.push([yr[ca],bd,0]):k.push([yr[ca]+" ",bd,0]),Oo-=bd}}else k.push([at[Xi],os,Ms]);k.push(["",Oo,0])}else{if(w!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],Nr=at.length,$=$!==0?$:rc,Xi=0;Xi<Nr;Xi++)Ms=Xi===0?gr(be):-$r,os=Xi===0?vs(Z):0,Xi<Nr-1?ru.push(U(F(($-ro[Xi])/(at[Xi].split(" ").length-1)))):ru.push(0),k.push([at[Xi],os,Ms])}}var El=typeof we.R2L=="boolean"?we.R2L:It;El===!0&&(k=oa(k,function(Nn,kn,Ti){return[Nn.split("").reverse().join(""),kn,Ti]})),Ge={text:k,x:Z,y:be,options:we,mutex:{pdfEscape:Un,activeFontKey:gn,fonts:un,activeFontSize:st}},on.publish("postProcessText",Ge),k=Ge.text,cn=Ge.mutex.isHex||!1;var Yh=un[gn].encoding;Yh!=="WinAnsiEncoding"&&Yh!=="StandardEncoding"||(k=oa(k,function(Nn,kn,Ti){return[io(Nn),kn,Ti]})),at=rr(k),k=[];for(var oc,lc,uc,_d=0,Kh=1,cc=Array.isArray(at[0])?Kh:_d,su="",xd=function(Nn,kn,Ti){var sr="";return Ti instanceof wt?(Ti=typeof we.angle=="number"?li(Ti,new wt(1,0,0,1,Nn,kn)):li(new wt(1,0,0,1,Nn,kn),Ti),j===D.ADVANCED&&(Ti=li(new wt(1,0,0,-1,0,0),Ti)),sr=Ti.join(" ")+` Tm
`):sr=U(Nn)+" "+U(kn)+` Td
`,sr},Ji=0;Ji<at.length;Ji++){switch(su="",cc){case Kh:uc=(cn?"<":"(")+at[Ji][0]+(cn?">":")"),oc=parseFloat(at[Ji][1]),lc=parseFloat(at[Ji][2]);break;case _d:uc=(cn?"<":"(")+at[Ji]+(cn?">":")"),oc=vs(Z),lc=gr(be)}ru!==void 0&&ru[Ji]!==void 0&&(su=ru[Ji]+` Tw
`),Ji===0?k.push(su+xd(oc,lc,Be)+uc):cc===_d?k.push(su+uc):cc===Kh&&k.push(su+xd(oc,lc,Be)+uc)}k=cc===_d?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var Pa=`BT
/`;return Pa+=gn+" "+st+` Tf
`,Pa+=U(st*ti)+` TL
`,Pa+=Po+`
`,Pa+=Ln,Pa+=k,ve(Pa+="ET"),y[gn]=!0,ot};var jh=v.__private__.clip=v.clip=function(k){return ve(k==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return jh("evenodd")},v.__private__.discardPath=v.discardPath=function(){return ve("n"),this};var gs=v.__private__.isValidStyle=function(k){var Z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(Z=!0),Z};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(k){return gs(k)&&(d=k),this};var ra=v.__private__.getStyle=v.getStyle=function(k){var Z=d;switch(k){case"D":case"S":Z="S";break;case"F":Z="f";break;case"FD":case"DF":Z="B";break;case"f":case"f*":case"B":case"B*":Z=k}return Z},Ps=v.close=function(){return ve("h"),this};v.stroke=function(){return ve("S"),this},v.fill=function(k){return eo("f",k),this},v.fillEvenOdd=function(k){return eo("f*",k),this},v.fillStroke=function(k){return eo("B",k),this},v.fillStrokeEvenOdd=function(k){return eo("B*",k),this};var eo=function(k,Z){xi(Z)==="object"?Lo(Z,k):ve(k)},sa=function(k){k===null||j===D.ADVANCED&&k===void 0||(k=ra(k),ve(k))};function yl(k,Z,be,we,Re){var Ge=new z0(Z||this.boundingBox,be||this.xStep,we||this.yStep,this.gState,Re||this.matrix);Ge.stream=this.stream;var at=k+"$$"+this.cloneIndex+++"$$";return Pi(at,Ge),Ge}var Lo=function(k,Z){var be=ta[k.key],we=In[be];if(we instanceof hm)ve("q"),ve(fd(Z)),we.gState&&v.setGState(we.gState),ve(k.matrix.toString()+" cm"),ve("/"+be+" sh"),ve("Q");else if(we instanceof z0){var Re=new wt(1,0,0,-1,0,bs());k.matrix&&(Re=Re.multiply(k.matrix||ui),be=yl.call(we,k.key,k.boundingBox,k.xStep,k.yStep,Re).id),ve("q"),ve("/Pattern cs"),ve("/"+be+" scn"),we.gState&&v.setGState(we.gState),ve(Z),ve("Q")}},fd=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},aa=v.moveTo=function(k,Z){return ve(U(F(k))+" "+U(H(Z))+" m"),this},ys=v.lineTo=function(k,Z){return ve(U(F(k))+" "+U(H(Z))+" l"),this},to=v.curveTo=function(k,Z,be,we,Re,Ge){return ve([U(F(k)),U(H(Z)),U(F(be)),U(H(we)),U(F(Re)),U(H(Ge)),"c"].join(" ")),this};v.__private__.line=v.line=function(k,Z,be,we,Re){if(isNaN(k)||isNaN(Z)||isNaN(be)||isNaN(we)||!gs(Re))throw new Error("Invalid arguments passed to jsPDF.line");return j===D.COMPAT?this.lines([[be-k,we-Z]],k,Z,[1,1],Re||"S"):this.lines([[be-k,we-Z]],k,Z,[1,1]).stroke()},v.__private__.lines=v.lines=function(k,Z,be,we,Re,Ge){var at,bt,w,M,$,oe,ke,Be,ot,Wt,Ln,cn;if(typeof k=="number"&&(cn=be,be=Z,Z=k,k=cn),we=we||[1,1],Ge=Ge||!1,isNaN(Z)||isNaN(be)||!Array.isArray(k)||!Array.isArray(we)||!gs(Re)||typeof Ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(aa(Z,be),at=we[0],bt=we[1],M=k.length,Wt=Z,Ln=be,w=0;w<M;w++)($=k[w]).length===2?(Wt=$[0]*at+Wt,Ln=$[1]*bt+Ln,ys(Wt,Ln)):(oe=$[0]*at+Wt,ke=$[1]*bt+Ln,Be=$[2]*at+Wt,ot=$[3]*bt+Ln,Wt=$[4]*at+Wt,Ln=$[5]*bt+Ln,to(oe,ke,Be,ot,Wt,Ln));return Ge&&Ps(),sa(Re),this},v.path=function(k){for(var Z=0;Z<k.length;Z++){var be=k[Z],we=be.c;switch(be.op){case"m":aa(we[0],we[1]);break;case"l":ys(we[0],we[1]);break;case"c":to.apply(this,we);break;case"h":Ps()}}return this},v.__private__.rect=v.rect=function(k,Z,be,we,Re){if(isNaN(k)||isNaN(Z)||isNaN(be)||isNaN(we)||!gs(Re))throw new Error("Invalid arguments passed to jsPDF.rect");return j===D.COMPAT&&(we=-we),ve([U(F(k)),U(H(Z)),U(F(be)),U(F(we)),"re"].join(" ")),sa(Re),this},v.__private__.triangle=v.triangle=function(k,Z,be,we,Re,Ge,at){if(isNaN(k)||isNaN(Z)||isNaN(be)||isNaN(we)||isNaN(Re)||isNaN(Ge)||!gs(at))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[be-k,we-Z],[Re-be,Ge-we],[k-Re,Z-Ge]],k,Z,[1,1],at,!0),this},v.__private__.roundedRect=v.roundedRect=function(k,Z,be,we,Re,Ge,at){if(isNaN(k)||isNaN(Z)||isNaN(be)||isNaN(we)||isNaN(Re)||isNaN(Ge)||!gs(at))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var bt=4/3*(Math.SQRT2-1);return Re=Math.min(Re,.5*be),Ge=Math.min(Ge,.5*we),this.lines([[be-2*Re,0],[Re*bt,0,Re,Ge-Ge*bt,Re,Ge],[0,we-2*Ge],[0,Ge*bt,-Re*bt,Ge,-Re,Ge],[2*Re-be,0],[-Re*bt,0,-Re,-Ge*bt,-Re,-Ge],[0,2*Ge-we],[0,-Ge*bt,Re*bt,-Ge,Re,-Ge]],k+Re,Z,[1,1],at,!0),this},v.__private__.ellipse=v.ellipse=function(k,Z,be,we,Re){if(isNaN(k)||isNaN(Z)||isNaN(be)||isNaN(we)||!gs(Re))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ge=4/3*(Math.SQRT2-1)*be,at=4/3*(Math.SQRT2-1)*we;return aa(k+be,Z),to(k+be,Z-at,k+Ge,Z-we,k,Z-we),to(k-Ge,Z-we,k-be,Z-at,k-be,Z),to(k-be,Z+at,k-Ge,Z+we,k,Z+we),to(k+Ge,Z+we,k+be,Z+at,k+be,Z),sa(Re),this},v.__private__.circle=v.circle=function(k,Z,be,we){if(isNaN(k)||isNaN(Z)||isNaN(be)||!gs(we))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,Z,be,be,we)},v.setFont=function(k,Z,be){return be&&(Z=ue(Z,be)),gn=gl(k,Z,{disableWarning:!1}),this};var mr=v.__private__.getFont=v.getFont=function(){return un[gl.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var k,Z,be={};for(k in Wn)if(Wn.hasOwnProperty(k))for(Z in be[k]=[],Wn[k])Wn[k].hasOwnProperty(Z)&&be[k].push(Z);return be},v.addFont=function(k,Z,be,we,Re){var Ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ge.indexOf(arguments[3])!==-1?Re=arguments[3]:arguments[3]&&Ge.indexOf(arguments[3])==-1&&(be=ue(be,we)),Re=Re||"Identity-H",fl.call(this,k,Z,be,Re)};var Rn,vl=i.lineWidth||.200025,no=v.__private__.getLineWidth=v.getLineWidth=function(){return vl},pd=v.__private__.setLineWidth=v.setLineWidth=function(k){return vl=k,ve(U(F(k))+" w"),this};v.__private__.setLineDash=Zt.API.setLineDash=Zt.API.setLineDashPattern=function(k,Z){if(k=k||[],Z=Z||0,isNaN(Z)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(be){return U(F(be))}).join(" "),Z=U(F(Z)),ve("["+k+"] "+Z+" d"),this};var Xl=v.__private__.getLineHeight=v.getLineHeight=function(){return st*Rn};v.__private__.getLineHeight=v.getLineHeight=function(){return st*Rn};var Jl=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(Rn=k),this},La=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return Rn};Jl(i.lineHeight);var vs=v.__private__.getHorizontalCoordinate=function(k){return F(k)},gr=v.__private__.getVerticalCoordinate=function(k){return j===D.ADVANCED?k:ut[ee].mediaBox.topRightY-ut[ee].mediaBox.bottomLeftY-F(k)},qh=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(k){return U(vs(k))},bl=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(k){return U(gr(k))},as=i.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return Tr(as)},v.__private__.setStrokeColor=v.setDrawColor=function(k,Z,be,we){return as=pr({ch1:k,ch2:Z,ch3:be,ch4:we,pdfColorType:"draw",precision:2}),ve(as),this};var _l=i.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return Tr(_l)},v.__private__.setFillColor=v.setFillColor=function(k,Z,be,we){return _l=pr({ch1:k,ch2:Z,ch3:be,ch4:we,pdfColorType:"fill",precision:2}),ve(_l),this};var Po=i.textColor||"0 g",Ju=v.__private__.getTextColor=v.getTextColor=function(){return Tr(Po)};v.__private__.setTextColor=v.setTextColor=function(k,Z,be,we){return Po=pr({ch1:k,ch2:Z,ch3:be,ch4:we,pdfColorType:"text",precision:3}),this};var Zl=i.charSpace,Zu=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Zl||0)};v.__private__.setCharSpace=v.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zl=k,this};var md=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(k){var Z=v.CapJoinStyles[k];if(Z===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return md=Z,ve(Z+" J"),this};var eu=0;v.__private__.setLineJoin=v.setLineJoin=function(k){var Z=v.CapJoinStyles[k];if(Z===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return eu=Z,ve(Z+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ve(U(F(k))+" M"),this},v.GState=nA,v.setGState=function(k){(k=typeof k=="string"?di[qi[k]]:xl(null,k)).equals(hr)||(ve("/"+k.id+" gs"),hr=k)};var xl=function(k,Z){if(!k||!qi[k]){var be=!1;for(var we in di)if(di.hasOwnProperty(we)&&di[we].equals(Z)){be=!0;break}if(be)Z=di[we];else{var Re="GS"+(Object.keys(di).length+1).toString(10);di[Re]=Z,Z.id=Re}return k&&(qi[k]=Z.id),on.publish("addGState",Z),Z}};v.addGState=function(k,Z){return xl(k,Z),this},v.saveGraphicsState=function(){return ve("q"),zr.push({key:gn,size:st,color:Po}),this},v.restoreGraphicsState=function(){ve("Q");var k=zr.pop();return gn=k.key,st=k.size,Po=k.color,hr=null,this},v.setCurrentTransformationMatrix=function(k){return ve(k.toString()+" cm"),this},v.comment=function(k){return ve("#"+k),this};var tu=function(k,Z){var be=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return be},set:function(Ge){isNaN(Ge)||(be=parseFloat(Ge))}});var we=Z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return we},set:function(Ge){isNaN(Ge)||(we=parseFloat(Ge))}});var Re="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Re},set:function(Ge){Re=Ge.toString()}}),this},ec=function(k,Z,be,we){tu.call(this,k,Z),this.type="rect";var Re=be||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Re},set:function(at){isNaN(at)||(Re=parseFloat(at))}});var Ge=we||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ge},set:function(at){isNaN(at)||(Ge=parseFloat(at))}}),this},nu=function(){this.page=hi,this.currentPage=ee,this.pages=He.slice(0),this.pagesContext=ut.slice(0),this.x=Fi,this.y=ln,this.matrix=Sr,this.width=Al(ee),this.height=bs(ee),this.outputDestination=Xe,this.id="",this.objectNumber=-1};nu.prototype.restore=function(){hi=this.page,ee=this.currentPage,ut=this.pagesContext,He=this.pages,Fi=this.x,ln=this.y,Sr=this.matrix,iu(ee,this.width),tc(ee,this.height),Xe=this.outputDestination};var wl=function(k,Z,be,we,Re){Li.push(new nu),hi=ee=0,He=[],Fi=k,ln=Z,Sr=Re,ss([be,we])},$h=function(k){if(Vt[k])Li.pop().restore();else{var Z=new nu,be="Xo"+(Object.keys(Fn).length+1).toString(10);Z.id=be,Vt[k]=be,Fn[be]=Z,on.publish("addFormObject",Z),Li.pop().restore()}};for(var Mo in v.beginFormObject=function(k,Z,be,we,Re){return wl(k,Z,be,we,Re),this},v.endFormObject=function(k){return $h(k),this},v.doFormObject=function(k,Z){var be=Fn[Vt[k]];return ve("q"),ve(Z.toString()+" cm"),ve("/"+be.id+" Do"),ve("Q"),this},v.getFormObject=function(k){var Z=Fn[Vt[k]];return{x:Z.x,y:Z.y,width:Z.width,height:Z.height,matrix:Z.matrix}},v.save=function(k,Z){return k=k||"generated.pdf",(Z=Z||{}).returnPromise=Z.returnPromise||!1,Z.returnPromise===!1?(cm(Xu(ko()),k),typeof cm.unload=="function"&&tn.setTimeout&&setTimeout(cm.unload,911),this):new Promise(function(be,we){try{var Re=cm(Xu(ko()),k);typeof cm.unload=="function"&&tn.setTimeout&&setTimeout(cm.unload,911),be(Re)}catch(Ge){we(Ge.message)}})},Zt.API)Zt.API.hasOwnProperty(Mo)&&(Mo==="events"&&Zt.API.events.length?function(k,Z){var be,we,Re;for(Re=Z.length-1;Re!==-1;Re--)be=Z[Re][0],we=Z[Re][1],k.subscribe.apply(k,[be].concat(typeof we=="function"?[we]:we))}(on,Zt.API.events):v[Mo]=Zt.API[Mo]);var Al=v.getPageWidth=function(k){return(ut[k=k||ee].mediaBox.topRightX-ut[k].mediaBox.bottomLeftX)/xt},iu=v.setPageWidth=function(k,Z){ut[k].mediaBox.topRightX=Z*xt+ut[k].mediaBox.bottomLeftX},bs=v.getPageHeight=function(k){return(ut[k=k||ee].mediaBox.topRightY-ut[k].mediaBox.bottomLeftY)/xt},tc=v.setPageHeight=function(k,Z){ut[k].mediaBox.topRightY=Z*xt+ut[k].mediaBox.bottomLeftY};return v.internal={pdfEscape:Un,getStyle:ra,getFont:mr,getFontSize:yt,getCharSpace:Zu,getTextColor:Ju,getLineHeight:Xl,getLineHeightFactor:La,getLineWidth:no,write:ct,getHorizontalCoordinate:vs,getVerticalCoordinate:gr,getCoordinateString:qh,getVerticalCoordinateString:bl,collections:{},newObject:$i,newAdditionalObject:Kl,newObjectDeferred:Qi,newObjectDeferredBegin:fr,getFilters:Er,putStream:Ai,events:on,scaleFactor:xt,pageSize:{getWidth:function(){return Al(ee)},setWidth:function(k){iu(ee,k)},getHeight:function(){return bs(ee)},setHeight:function(k){tc(ee,k)}},encryptionOptions:f,encryption:gi,getEncryptor:Ro,output:Io,getNumberOfPages:ei,pages:He,out:ve,f2:Y,f3:O,getPageInfo:Ja,getPageInfoByObjId:Kt,getCurrentPageInfo:Za,getPDFVersion:E,Point:tu,Rectangle:ec,Matrix:wt,hasHotfix:Xa},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return Al(ee)},set:function(k){iu(ee,k)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return bs(ee)},set:function(k){tc(ee,k)},enumerable:!0,configurable:!0}),cd.call(v,it),gn="F1",pl(r,t),on.publish("initialized"),v}L0.prototype.lsbFirstWord=function(i){return String.fromCharCode(i>>0&255,i>>8&255,i>>16&255,i>>24&255)},L0.prototype.toHexString=function(i){return i.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},L0.prototype.hexToBytes=function(i){for(var e=[],t=0;t<i.length;t+=2)e.push(String.fromCharCode(parseInt(i.substr(t,2),16)));return e.join("")},L0.prototype.processOwnerPassword=function(i,e){return aC(sC(e).substr(0,5),i)},L0.prototype.encryptor=function(i,e){var t=sC(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return aC(t,n)}},nA.prototype.equals=function(i){var e,t="id,objectNumber,equals";if(!i||xi(i)!==xi(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!i.hasOwnProperty(e)||this[e]!==i[e])return!1;n++}for(e in i)i.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Zt.API={events:[]},Zt.version="3.0.1";var wr=Zt.API,yN=1,Bg=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_0=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},yn=function(i){return i.toFixed(2)},wf=function(i){return i.toFixed(5)};wr.__acroform__={};var Ao=function(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i},N3=function(i){return i*yN},Nc=function(i){var e=new J6,t=Pt.internal.getHeight(i)||0,n=Pt.internal.getWidth(i)||0;return e.BBox=[0,0,Number(yn(n)),Number(yn(t))],e},tj=wr.__acroform__.setBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|=1<<e},nj=wr.__acroform__.clearBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&=~(1<<e)},ij=wr.__acroform__.getBit=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(i&1<<e)==0?0:1},Fr=wr.__acroform__.getBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ij(i,e-1)},Vr=wr.__acroform__.setBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return tj(i,e-1)},Br=wr.__acroform__.clearBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return nj(i,e-1)},rj=wr.__acroform__.calculateCoordinates=function(i,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,r=i[0],s=i[1],a=i[2],l=i[3],u={};return u.lowerLeft_X=t(r)||0,u.lowerLeft_Y=n(s+l)||0,u.upperRight_X=t(r+a)||0,u.upperRight_Y=n(s)||0,[Number(yn(u.lowerLeft_X)),Number(yn(u.lowerLeft_Y)),Number(yn(u.upperRight_X)),Number(yn(u.upperRight_Y))]},sj=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var e=[],t=i._V||i.DV,n=oC(i,t),r=i.scope.internal.getFont(i.fontName,i.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(i.scope.__private__.encodeColorString(i.color)),e.push("/"+r+" "+yn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Nc(i);return s.scope=i.scope,s.stream=e.join(`
`),s}},oC=function(i,e){var t=i.fontSize===0?i.maxFontSize:i.fontSize,n={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=i.multiline?r.map(function(O){return O.split(`
`)}):r.map(function(O){return[O]});var s=t,a=Pt.internal.getHeight(i)||0;a=a<0?-a:a;var l=Pt.internal.getWidth(i)||0;l=l<0?-l:l;var u=function(O,F,B){if(O+1<r.length){var H=F+" "+r[O+1][0];return Fx(H,i,B).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var d,f,p=Fx("3",i,s).height,y=i.multiline?a-s:(a-p)/2,v=y+=2,C=0,E=0,R=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Fx(e,i,s=12).width+", FieldWidth:"+l+`
`;break}for(var I="",D=0,j=0;j<r.length;j++)if(r.hasOwnProperty(j)){var X=!1;if(r[j].length!==1&&R!==r[j].length-1){if((p+2)*(D+2)+2>a)continue e;I+=r[j][R],X=!0,E=j,j--}else{I=(I+=r[j][R]+" ").substr(I.length-1)==" "?I.substr(0,I.length-1):I;var W=parseInt(j),ue=u(W,I,s),U=j>=r.length-1;if(ue&&!U){I+=" ",R=0;continue}if(ue||U){if(U)E=W;else if(i.multiline&&(p+2)*(D+2)+2>a)continue e}else{if(!i.multiline||(p+2)*(D+2)+2>a)continue e;E=W}}for(var P="",V=C;V<=E;V++){var Y=r[V];if(i.multiline){if(V===E){P+=Y[R]+" ",R=(R+1)%Y.length;continue}if(V===C){P+=Y[Y.length-1]+" ";continue}}P+=Y[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,f=Fx(P,i,s).width,i.textAlign){case"right":d=l-f-2;break;case"center":d=(l-f)/2;break;case"left":default:d=2}e+=yn(d)+" "+yn(v)+` Td
`,e+="("+Bg(P)+`) Tj
`,e+=-yn(d)+` 0 Td
`,v=-(s+2),f=0,C=X?E:E+1,D++,I=""}break}return n.text=e,n.fontSize=s,n},Fx=function(i,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(i,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:r}},aj={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},oj=function(i,e){var t={type:"reference",object:i};e.internal.getPageInfo(i.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(i.page).pageContext.annotations.push(t)},lj=function(i,e){for(var t in i)if(i.hasOwnProperty(t)){var n=t,r=i[t];e.internal.newObjectDeferredBegin(r.objId,!0),xi(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete i[n]}},uj=function(i,e){if(e.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(Gu.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(aj)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");yN=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new Z6,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in n)if(n.hasOwnProperty(r)){var s=n[r];s.objId=void 0,s.hasAnnotation&&oj(s,t)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(t){(function(n,r){var s=!n;for(var a in n||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var l=n[a],u=[],d=l.Rect;if(l.Rect&&(l.Rect=rj(l.Rect,r)),r.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Pt.createDefaultAppearanceStream(l),xi(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(u=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=sj(l);u.push({key:"AP",value:"<</N "+f+">>"}),r.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var p="";for(var y in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(y)){var v=l.appearanceStreamContent[y];if(p+="/"+y+" ",p+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var a in v)if(v.hasOwnProperty(a)){var C=v[a];typeof C=="function"&&(C=C.call(r,l)),p+="/"+a+" "+C+" ",r.internal.acroformPlugin.xForms.indexOf(C)>=0||r.internal.acroformPlugin.xForms.push(C)}}else typeof(C=v)=="function"&&(C=C.call(r,l)),p+="/"+a+" "+C,r.internal.acroformPlugin.xForms.indexOf(C)>=0||r.internal.acroformPlugin.xForms.push(C);p+=">>"}u.push({key:"AP",value:`<<
`+p+">>"})}r.internal.putStream({additionalKeyValues:u,objectId:l.objId}),r.internal.out("endobj")}s&&lj(r.internal.acroformPlugin.xForms,r)})(t,i)}),i.internal.acroformPlugin.isInitialized=!0}},X6=wr.__acroform__.arrayToPdfArray=function(i,e,t){var n=function(a){return a};if(Array.isArray(i)){for(var r="[",s=0;s<i.length;s++)switch(s!==0&&(r+=" "),xi(i[s])){case"boolean":case"number":case"object":r+=i[s].toString();break;case"string":i[s].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),r+="("+Bg(n(i[s].toString()))+")"):r+=i[s].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},cT=function(i,e,t){var n=function(r){return r};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(i=i||"").toString(),i="("+Bg(n(i))+")"},Hc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Hc.prototype.toString=function(){return this.objId+" 0 R"},Hc.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},Hc.prototype.getKeyValueListForStream=function(){var i=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],r=this[n];r&&(Array.isArray(r)?i.push({key:n,value:X6(r,this.objId,this.scope)}):r instanceof Hc?(r.scope=this.scope,i.push({key:n,value:r.objId+" 0 R"})):typeof r!="function"&&i.push({key:n,value:r}))}return i};var J6=function(){Hc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){i=t.trim()},get:function(){return i||null}})};Ao(J6,Hc);var Z6=function(){Hc.call(this);var i,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Bg(t(i))+")"}},set:function(t){i=t}})};Ao(Z6,Hc);var Gu=function i(){Hc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute F supplied.');e=I}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Fr(e,3)},set:function(I){I?this.F=Vr(e,3):this.F=Br(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute Ff supplied.');t=I}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(I){n=I!==void 0?I:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(I){n[0]=I}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(I){n[1]=I}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(I){n[2]=I}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(I){n[3]=I}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(I){switch(I){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=I;break;default:throw new Error('Invalid value "'+I+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof iA)return;s="FieldObject"+i.FieldNum++}var I=function(D){return D};return this.scope&&(I=this.scope.internal.getEncryptor(this.objId)),"("+Bg(I(s))+")"},set:function(I){s=I.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(I){s=I}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(I){a=I}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(I){l=I}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(I){u=I}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/yN:d},set:function(I){d=I}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(I){f=I}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof iA||this instanceof Ag))return cT(p,this.objId,this.scope)},set:function(I){I=I.toString(),p=I}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Rs?y:cT(y,this.objId,this.scope)},set:function(I){I=I.toString(),y=this instanceof Rs?I:I.substr(0,1)==="("?_0(I.substr(1,I.length-2)):_0(I)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Rs?_0(y.substr(1,y.length-1)):y},set:function(I){I=I.toString(),y=this instanceof Rs?"/"+I:I}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(I){this.V=I}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Rs?v:cT(v,this.objId,this.scope)},set:function(I){I=I.toString(),v=this instanceof Rs?I:I.substr(0,1)==="("?_0(I.substr(1,I.length-2)):_0(I)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Rs?_0(v.substr(1,v.length-1)):v},set:function(I){I=I.toString(),v=this instanceof Rs?"/"+I:I}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(I){I=!!I,E=I}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(I){C=I}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,1)},set:function(I){I?this.Ff=Vr(this.Ff,1):this.Ff=Br(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,2)},set:function(I){I?this.Ff=Vr(this.Ff,2):this.Ff=Br(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,3)},set:function(I){I?this.Ff=Vr(this.Ff,3):this.Ff=Br(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(I){if([0,1,2].indexOf(I)===-1)throw new Error('Invalid value "'+I+'" for attribute Q supplied.');R=I}}),Object.defineProperty(this,"textAlign",{get:function(){var I;switch(R){case 0:default:I="left";break;case 1:I="center";break;case 2:I="right"}return I},configurable:!0,enumerable:!0,set:function(I){switch(I){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};Ao(Gu,Hc);var Y0=function(){Gu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){i=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return X6(e,this.objId,this.scope)},set:function(t){var n,r;r=[],typeof(n=t)=="string"&&(r=function(s,a,l){l||(l=1);for(var u,d=[];u=a.exec(s);)d.push(u[l]);return d}(n,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,18)},set:function(t){t?this.Ff=Vr(this.Ff,18):this.Ff=Br(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Vr(this.Ff,19):this.Ff=Br(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,20)},set:function(t){t?(this.Ff=Vr(this.Ff,20),e.sort()):this.Ff=Br(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,22)},set:function(t){t?this.Ff=Vr(this.Ff,22):this.Ff=Br(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,23)},set:function(t){t?this.Ff=Vr(this.Ff,23):this.Ff=Br(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,27)},set:function(t){t?this.Ff=Vr(this.Ff,27):this.Ff=Br(this.Ff,27)}}),this.hasAppearanceStream=!1};Ao(Y0,Gu);var K0=function(){Y0.call(this),this.fontName="helvetica",this.combo=!1};Ao(K0,Y0);var W0=function(){K0.call(this),this.combo=!0};Ao(W0,K0);var Ew=function(){W0.call(this),this.edit=!0};Ao(Ew,W0);var Rs=function(){Gu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,15)},set:function(t){t?this.Ff=Vr(this.Ff,15):this.Ff=Br(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,16)},set:function(t){t?this.Ff=Vr(this.Ff,16):this.Ff=Br(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,17)},set:function(t){t?this.Ff=Vr(this.Ff,17):this.Ff=Br(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,26)},set:function(t){t?this.Ff=Vr(this.Ff,26):this.Ff=Br(this.Ff,26)}});var i,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,r=[];for(n in r.push("<<"),e)r.push("/"+n+" ("+Bg(t(e[n]))+")");return r.push(">>"),r.join(`
`)}},set:function(t){xi(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(t){i="/"+t}})};Ao(Rs,Gu);var Cw=function(){Rs.call(this),this.pushButton=!0};Ao(Cw,Rs);var Q0=function(){Rs.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e!==void 0?e:[]}})};Ao(Q0,Rs);var iA=function(){var i,e;Gu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(r){i=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+Bg(r(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(r){xi(r)==="object"&&(n=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(r){typeof r=="string"&&(n.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Pt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ao(iA,Gu),Q0.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=i.createAppearanceStream(t.optionName),t.caption=i.getCA()}},Q0.prototype.createOption=function(i){var e=new iA;return e.Parent=this,e.optionName=i,this.Kids.push(e),cj.call(this.scope,e),e};var Nw=function(){Rs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Pt.CheckBox.createAppearanceStream()};Ao(Nw,Rs);var Ag=function(){Gu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,13)},set:function(e){e?this.Ff=Vr(this.Ff,13):this.Ff=Br(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,21)},set:function(e){e?this.Ff=Vr(this.Ff,21):this.Ff=Br(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,23)},set:function(e){e?this.Ff=Vr(this.Ff,23):this.Ff=Br(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,24)},set:function(e){e?this.Ff=Vr(this.Ff,24):this.Ff=Br(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,25)},set:function(e){e?this.Ff=Vr(this.Ff,25):this.Ff=Br(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,26)},set:function(e){e?this.Ff=Vr(this.Ff,26):this.Ff=Br(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){Number.isInteger(e)&&(i=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ao(Ag,Gu);var kw=function(){Ag.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Fr(this.Ff,14)},set:function(i){i?this.Ff=Vr(this.Ff,14):this.Ff=Br(this.Ff,14)}}),this.password=!0};Ao(kw,Ag);var Pt={CheckBox:{createAppearanceStream:function(){return{N:{On:Pt.CheckBox.YesNormal},D:{On:Pt.CheckBox.YesPushDown,Off:Pt.CheckBox.OffPushDown}}},YesPushDown:function(i){var e=Nc(i);e.scope=i.scope;var t=[],n=i.scope.internal.getFont(i.fontName,i.fontStyle).id,r=i.scope.__private__.encodeColorString(i.color),s=oC(i,i.caption);return t.push("0.749023 g"),t.push("0 0 "+yn(Pt.internal.getWidth(i))+" "+yn(Pt.internal.getHeight(i))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+yn(s.fontSize)+" Tf "+r),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(i){var e=Nc(i);e.scope=i.scope;var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,n=i.scope.__private__.encodeColorString(i.color),r=[],s=Pt.internal.getHeight(i),a=Pt.internal.getWidth(i),l=oC(i,i.caption);return r.push("1 g"),r.push("0 0 "+yn(a)+" "+yn(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+yn(a-1)+" "+yn(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+t+" "+yn(l.fontSize)+" Tf "+n),r.push(l.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(i){var e=Nc(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+yn(Pt.internal.getWidth(i))+" "+yn(Pt.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(i){var e={D:{Off:Pt.RadioButton.Circle.OffPushDown},N:{}};return e.N[i]=Pt.RadioButton.Circle.YesNormal,e.D[i]=Pt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(i){var e=Nc(i);e.scope=i.scope;var t=[],n=Pt.internal.getWidth(i)<=Pt.internal.getHeight(i)?Pt.internal.getWidth(i)/4:Pt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=Pt.internal.Bezier_C,s=Number((n*r).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+wf(Pt.internal.getWidth(i)/2)+" "+wf(Pt.internal.getHeight(i)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Nc(i);e.scope=i.scope;var t=[],n=Pt.internal.getWidth(i)<=Pt.internal.getHeight(i)?Pt.internal.getWidth(i)/4:Pt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),s=Number((r*Pt.internal.Bezier_C).toFixed(5)),a=Number((n*Pt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+wf(Pt.internal.getWidth(i)/2)+" "+wf(Pt.internal.getHeight(i)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+wf(Pt.internal.getWidth(i)/2)+" "+wf(Pt.internal.getHeight(i)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(i){var e=Nc(i);e.scope=i.scope;var t=[],n=Pt.internal.getWidth(i)<=Pt.internal.getHeight(i)?Pt.internal.getWidth(i)/4:Pt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),s=Number((r*Pt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+wf(Pt.internal.getWidth(i)/2)+" "+wf(Pt.internal.getHeight(i)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(i){var e={D:{Off:Pt.RadioButton.Cross.OffPushDown},N:{}};return e.N[i]=Pt.RadioButton.Cross.YesNormal,e.D[i]=Pt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(i){var e=Nc(i);e.scope=i.scope;var t=[],n=Pt.internal.calculateCross(i);return t.push("q"),t.push("1 1 "+yn(Pt.internal.getWidth(i)-2)+" "+yn(Pt.internal.getHeight(i)-2)+" re"),t.push("W"),t.push("n"),t.push(yn(n.x1.x)+" "+yn(n.x1.y)+" m"),t.push(yn(n.x2.x)+" "+yn(n.x2.y)+" l"),t.push(yn(n.x4.x)+" "+yn(n.x4.y)+" m"),t.push(yn(n.x3.x)+" "+yn(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Nc(i);e.scope=i.scope;var t=Pt.internal.calculateCross(i),n=[];return n.push("0.749023 g"),n.push("0 0 "+yn(Pt.internal.getWidth(i))+" "+yn(Pt.internal.getHeight(i))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+yn(Pt.internal.getWidth(i)-2)+" "+yn(Pt.internal.getHeight(i)-2)+" re"),n.push("W"),n.push("n"),n.push(yn(t.x1.x)+" "+yn(t.x1.y)+" m"),n.push(yn(t.x2.x)+" "+yn(t.x2.y)+" l"),n.push(yn(t.x4.x)+" "+yn(t.x4.y)+" m"),n.push(yn(t.x3.x)+" "+yn(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(i){var e=Nc(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+yn(Pt.internal.getWidth(i))+" "+yn(Pt.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(i){var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,t=i.scope.__private__.encodeColorString(i.color);return"/"+e+" "+i.fontSize+" Tf "+t}};Pt.internal={Bezier_C:.551915024494,calculateCross:function(i){var e=Pt.internal.getWidth(i),t=Pt.internal.getHeight(i),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},Pt.internal.getWidth=function(i){var e=0;return xi(i)==="object"&&(e=N3(i.Rect[2])),e},Pt.internal.getHeight=function(i){var e=0;return xi(i)==="object"&&(e=N3(i.Rect[3])),e};var cj=wr.addField=function(i){if(uj(this,i),!(i instanceof Gu))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=i).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};wr.AcroFormChoiceField=Y0,wr.AcroFormListBox=K0,wr.AcroFormComboBox=W0,wr.AcroFormEditBox=Ew,wr.AcroFormButton=Rs,wr.AcroFormPushButton=Cw,wr.AcroFormRadioButton=Q0,wr.AcroFormCheckBox=Nw,wr.AcroFormTextField=Ag,wr.AcroFormPasswordField=kw,wr.AcroFormAppearance=Pt,wr.AcroForm={ChoiceField:Y0,ListBox:K0,ComboBox:W0,EditBox:Ew,Button:Rs,PushButton:Cw,RadioButton:Q0,CheckBox:Nw,TextField:Ag,PasswordField:kw,Appearance:Pt},Zt.AcroForm={ChoiceField:Y0,ListBox:K0,ComboBox:W0,EditBox:Ew,Button:Rs,PushButton:Cw,RadioButton:Q0,CheckBox:Nw,TextField:Ag,PasswordField:kw,Appearance:Pt};Zt.AcroForm;function eO(i){return i.reduce(function(e,t,n){return e[t]=n,e},{})}(function(i){i.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=i.__addimage__.getImageFileTypeByImageData=function(O,F){var B,H,fe,Q,ce,ge=e;if((F=F||e)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(ue(O))for(ce in t)for(fe=t[ce],B=0;B<fe.length;B+=1){for(Q=!0,H=0;H<fe[B].length;H+=1)if(fe[B][H]!==void 0&&fe[B][H]!==O[H]){Q=!1;break}if(Q===!0){ge=ce;break}}else for(ce in t)for(fe=t[ce],B=0;B<fe.length;B+=1){for(Q=!0,H=0;H<fe[B].length;H+=1)if(fe[B][H]!==void 0&&fe[B][H]!==O.charCodeAt(H)){Q=!1;break}if(Q===!0){ge=ce;break}}return ge===e&&F!==e&&(ge=F),ge},r=function O(F){for(var B=this.internal.write,H=this.internal.putStream,fe=(0,this.internal.getFilters)();fe.indexOf("FlateEncode")!==-1;)fe.splice(fe.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:F.width}),Q.push({key:"Height",value:F.height}),F.colorSpace===R.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===R.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var ce="",ge=0,Te=F.transparency.length;ge<Te;ge++)ce+=F.transparency[ge]+" "+F.transparency[ge]+" ";Q.push({key:"Mask",value:"["+ce+"]"})}F.sMask!==void 0&&Q.push({key:"SMask",value:F.objectId+1+" 0 R"});var re=F.filter!==void 0?["/"+F.filter]:void 0;if(H({data:F.data,additionalKeyValues:Q,alreadyAppliedFilters:re,objectId:F.objectId}),B("endobj"),"sMask"in F&&F.sMask!==void 0){var xe="/Predictor "+F.predictor+" /Colors 1 /BitsPerComponent "+F.bitsPerComponent+" /Columns "+F.width,q={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:xe,data:F.sMask};"filter"in F&&(q.filter=F.filter),O.call(this,q)}if(F.colorSpace===R.INDEXED){var ee=this.internal.newObject();H({data:P(new Uint8Array(F.palette)),objectId:ee}),B("endobj")}},s=function(){var O=this.internal.collections.addImage_images;for(var F in O)r.call(this,O[F])},a=function(){var O,F=this.internal.collections.addImage_images,B=this.internal.write;for(var H in F)B("/I"+(O=F[H]).index,O.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},u=function(){var O=this.internal.collections.addImage_images;return l.call(this),O},d=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(O){return typeof i["process"+O.toUpperCase()]=="function"},p=function(O){return xi(O)==="object"&&O.nodeType===1},y=function(O,F){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var B=""+O.getAttribute("src");if(B.indexOf("data:image/")===0)return ob(unescape(B).split("base64,").pop());var H=i.loadFile(B,!0);if(H!==void 0)return H}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var fe;switch(F){case"PNG":fe="image/png";break;case"WEBP":fe="image/webp";break;case"JPEG":case"JPG":default:fe="image/jpeg"}return ob(O.toDataURL(fe,1).split("base64,").pop())}},v=function(O){var F=this.internal.collections.addImage_images;if(F){for(var B in F)if(O===F[B].alias)return F[B]}},C=function(O,F,B){return O||F||(O=-96,F=-96),O<0&&(O=-1*B.width*72/O/this.internal.scaleFactor),F<0&&(F=-1*B.height*72/F/this.internal.scaleFactor),O===0&&(O=F*B.width/B.height),F===0&&(F=O*B.height/B.width),[O,F]},E=function(O,F,B,H,fe,Q){var ce=C.call(this,B,H,fe),ge=this.internal.getCoordinateString,Te=this.internal.getVerticalCoordinateString,re=u.call(this);if(B=ce[0],H=ce[1],re[fe.index]=fe,Q){Q*=Math.PI/180;var xe=Math.cos(Q),q=Math.sin(Q),ee=function(me){return me.toFixed(4)},he=[ee(xe),ee(q),ee(-1*q),ee(xe),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,ge(O),Te(F+H),"cm"].join(" ")),this.internal.write(he.join(" ")),this.internal.write([ge(B),"0","0",ge(H),"0","0","cm"].join(" "))):this.internal.write([ge(B),"0","0",ge(H),ge(O),Te(F+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+fe.index+" Do"),this.internal.write("Q")},R=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=i.__addimage__.sHashCode=function(O){var F,B,H=0;if(typeof O=="string")for(B=O.length,F=0;F<B;F++)H=(H<<5)-H+O.charCodeAt(F),H|=0;else if(ue(O))for(B=O.byteLength/2,F=0;F<B;F++)H=(H<<5)-H+O[F],H|=0;return H},j=i.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var F=!0;return O.length===0&&(F=!1),O.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(F=!1),F},X=i.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var F=O.indexOf(",");return F<0?null:O.substring(0,F).trim().endsWith("base64")?O.substring(F+1):null},W=i.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};i.__addimage__.isArrayBuffer=function(O){return W()&&O instanceof ArrayBuffer};var ue=i.__addimage__.isArrayBufferView=function(O){return W()&&typeof Uint32Array<"u"&&(O instanceof Int8Array||O instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array)},U=i.__addimage__.binaryStringToUint8Array=function(O){for(var F=O.length,B=new Uint8Array(F),H=0;H<F;H++)B[H]=O.charCodeAt(H);return B},P=i.__addimage__.arrayBufferToBinaryString=function(O){for(var F="",B=ue(O)?O:new Uint8Array(O),H=0;H<B.length;H+=8192)F+=String.fromCharCode.apply(null,B.subarray(H,H+8192));return F};i.addImage=function(){var O,F,B,H,fe,Q,ce,ge,Te;if(typeof arguments[1]=="number"?(F=e,B=arguments[1],H=arguments[2],fe=arguments[3],Q=arguments[4],ce=arguments[5],ge=arguments[6],Te=arguments[7]):(F=arguments[1],B=arguments[2],H=arguments[3],fe=arguments[4],Q=arguments[5],ce=arguments[6],ge=arguments[7],Te=arguments[8]),xi(O=arguments[0])==="object"&&!p(O)&&"imageData"in O){var re=O;O=re.imageData,F=re.format||F||e,B=re.x||B||0,H=re.y||H||0,fe=re.w||re.width||fe,Q=re.h||re.height||Q,ce=re.alias||ce,ge=re.compression||ge,Te=re.rotation||re.angle||Te}var xe=this.internal.getFilters();if(ge===void 0&&xe.indexOf("FlateEncode")!==-1&&(ge="SLOW"),isNaN(B)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var q=V.call(this,O,F,ce,ge);return E.call(this,B,H,fe,Q,q,Te),this};var V=function(O,F,B,H){var fe,Q,ce;if(typeof O=="string"&&n(O)===e){O=unescape(O);var ge=Y(O,!1);(ge!==""||(ge=i.loadFile(O,!0))!==void 0)&&(O=ge)}if(p(O)&&(O=y(O,F)),F=n(O,F),!f(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((ce=B)==null||ce.length===0)&&(B=function(Te){return typeof Te=="string"||ue(Te)?D(Te):ue(Te.data)?D(Te.data):null}(O)),(fe=v.call(this,B))||(W()&&(O instanceof Uint8Array||F==="RGBA"||(Q=O,O=U(O))),fe=this["process"+F.toUpperCase()](O,d.call(this),B,function(Te){return Te&&typeof Te=="string"&&(Te=Te.toUpperCase()),Te in i.image_compression?Te:I.NONE}(H),Q)),!fe)throw new Error("An unknown error occurred whilst processing the image.");return fe},Y=i.__addimage__.convertBase64ToBinaryString=function(O,F){F=typeof F!="boolean"||F;var B,H="";if(typeof O=="string"){var fe;B=(fe=X(O))!==null&&fe!==void 0?fe:O;try{H=ob(B)}catch(Q){if(F)throw j(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};i.getImageProperties=function(O){var F,B,H="";if(p(O)&&(O=y(O)),typeof O=="string"&&n(O)===e&&((H=Y(O,!1))===""&&(H=i.loadFile(O)||""),O=H),B=n(O),!f(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(!W()||O instanceof Uint8Array||(O=U(O)),!(F=this["process"+B.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=B,F}})(Zt.API),function(i){var e=function(t){if(t!==void 0&&t!="")return!0};Zt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(t){for(var n,r,s,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,f=!1,p=0;p<d.length&&!f;p++)switch((n=d[p]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<d.length;y++){n=d[y];var v=this.internal.pdfEscape,C=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),I=this.internal.getEncryptor(E.objId),D=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+v(I(n.contents))+")",s+=" /Popup "+R.objId+" 0 R",s+=" /P "+u.objId+" 0 R",s+=" /T ("+v(I(D))+") >>",E.content=s;var j=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+j,n.open&&(s+=" /Open true"),s+=" >>",R.content=s,this.internal.write(E.objId,"0 R",R.objId,"0 R");break;case"freetext":r="/Rect ["+a(n.bounds.x)+" "+l(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var X=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+v(C(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+X+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var W=this.annotations._nameMap[n.options.name];n.options.pageNumber=W.page,n.options.top=W.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+v(C(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var ue=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+ue+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),i.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},i.link=function(t,n,r,s,a){var l=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:u(t),y:d(n),w:u(t+r),h:d(n+s)},options:a,type:"link"})},i.textWithLink=function(t,n,r,s){var a,l,u=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var f=this.splitTextToSize(t,l).length;a=Math.ceil(d*f)}else l=u,a=d;return this.text(t,n,r,s),r+=.2*d,s.align==="center"&&(n-=u/2),s.align==="right"&&(n-=u),this.link(n,r-d,l,a,s),u},i.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(Zt.API),function(i){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];i.__arabicParser__={};var s=i.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},a=i.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},l=i.__arabicParser__.isArabicEndLetter=function(E){return a(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},u=i.__arabicParser__.isArabicAlfLetter=function(E){return a(E)&&r.indexOf(E.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return a(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var d=i.__arabicParser__.arabicLetterHasFinalForm=function(E){return a(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(E){return a(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var f=i.__arabicParser__.arabicLetterHasMedialForm=function(E){return a(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=i.__arabicParser__.resolveLigatures=function(E){var R=0,I=t,D="",j=0;for(R=0;R<E.length;R+=1)I[E.charCodeAt(R)]!==void 0?(j++,typeof(I=I[E.charCodeAt(R)])=="number"&&(D+=String.fromCharCode(I),I=t,j=0),R===E.length-1&&(I=t,D+=E.charAt(R-(j-1)),R-=j-1,j=0)):(I=t,D+=E.charAt(R-j),R-=j,j=0);return D};i.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&n[E.charCodeAt(0)]!==void 0};var y=i.__arabicParser__.getCorrectForm=function(E,R,I){return a(E)?s(E)===!1?-1:!d(E)||!a(R)&&!a(I)||!a(I)&&l(R)||l(E)&&!a(R)||l(E)&&u(R)||l(E)&&l(R)?0:f(E)&&a(R)&&!l(R)&&a(I)&&d(I)?3:l(E)||!a(I)?1:2:-1},v=function(E){var R=0,I=0,D=0,j="",X="",W="",ue=(E=E||"").split("\\s+"),U=[];for(R=0;R<ue.length;R+=1){for(U.push(""),I=0;I<ue[R].length;I+=1)j=ue[R][I],X=ue[R][I-1],W=ue[R][I+1],a(j)?(D=y(j,X,W),U[R]+=D!==-1?String.fromCharCode(e[j.charCodeAt(0)][D]):j):U[R]+=j;U[R]=p(U[R])}return U.join(" ")},C=i.__arabicParser__.processArabic=i.processArabic=function(){var E,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,I=[];if(Array.isArray(R)){var D=0;for(I=[],D=0;D<R.length;D+=1)Array.isArray(R[D])?I.push([v(R[D][0]),R[D][1],R[D][2]]):I.push([v(R[D])]);E=I}else E=v(R);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};i.events.push(["preProcessText",C])}(Zt.API),Zt.API.autoPrint=function(i){var e;switch((i=i||{}).variant=i.variant||"non-conform",i.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(i){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var r;if((t=t||"2d")!=="2d")return null;for(r in n)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=n[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Zt.API),function(i){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(E){u=E}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(E){f=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(E){y=E}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(E){C=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(u){return n.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},i.getTextDimensions=function(u,d){n.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),p=d.font||this.getFont(),y=d.scaleFactor||this.internal.scaleFactor,v=0,C=0,E=0,R=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var I=d.maxWidth;I>0?typeof u=="string"?u=this.splitTextToSize(u,I):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(j,X){return j.concat(R.splitTextToSize(X,I))},[])):u=Array.isArray(u)?u:[u];for(var D=0;D<u.length;D++)v<(E=this.getStringUnitWidth(u[D],{font:p})*f)&&(v=E);return v!==0&&(C=u.length),{w:v/=y,h:Math.max((C*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},i.cellAddPage=function(){n.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=i.cell=function(){var u;u=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===u.lineNumber?(u.x=(d.x||0)+(d.width||0),u.y=d.y||0):d.y+d.height+u.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=p.top,v&&y&&(this.printHeaderRow(u.lineNumber,!0),u.y+=y[0].height)):u.y=d.y+d.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,t===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-f,u.y+f,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+f,{align:"center",baseline:"top",maxWidth:u.width-f-f}):this.text(u.text,u.x+f,u.y+f,{align:"left",baseline:"top",maxWidth:u.width-f-f})),this.internal.__cell__.lastCell=u,this};i.table=function(u,d,f,p,y){if(n.call(this),!f)throw new Error("No data for PDF table.");var v,C,E,R,I=[],D=[],j=[],X={},W={},ue=[],U=[],P=(y=y||{}).autoSize||!1,V=y.printHeaders!==!1,Y=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,O=y.margins||Object.assign({width:this.getPageWidth()},e),F=typeof y.padding=="number"?y.padding:3,B=y.headerBackgroundColor||"#c8c8c8",H=y.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=V,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=Y,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=H,this.setFontSize(Y),p==null)D=I=Object.keys(f[0]),j=I.map(function(){return"left"});else if(Array.isArray(p)&&xi(p[0])==="object")for(I=p.map(function(re){return re.name}),D=p.map(function(re){return re.prompt||re.name||""}),j=p.map(function(re){return re.align||"left"}),v=0;v<p.length;v+=1)W[p[v].name]=p[v].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=I=p,j=I.map(function(){return"left"}));if(P||Array.isArray(p)&&typeof p[0]=="string")for(v=0;v<I.length;v+=1){for(X[R=I[v]]=f.map(function(re){return re[R]}),this.setFont(void 0,"bold"),ue.push(this.getTextDimensions(D[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=X[R],this.setFont(void 0,"normal"),E=0;E<C.length;E+=1)ue.push(this.getTextDimensions(C[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);W[R]=Math.max.apply(null,ue)+F+F,ue=[]}if(V){var fe={};for(v=0;v<I.length;v+=1)fe[I[v]]={},fe[I[v]].text=D[v],fe[I[v]].align=j[v];var Q=l.call(this,fe,W);U=I.map(function(re){return new s(u,d,W[re],Q,fe[re].text,void 0,fe[re].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var ce=p.reduce(function(re,xe){return re[xe.name]=xe.align,re},{});for(v=0;v<f.length;v+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:v,data:f[v]},this);var ge=l.call(this,f[v],W);for(E=0;E<I.length;E+=1){var Te=f[v][I[E]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:v,col:E,data:Te},this),a.call(this,new s(u,d,W[I[E]],ge,Te,v+2,ce[I[E]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=d,this};var l=function(u,d){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(u).map(function(v){var C=u[v];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,d[v]-f-f)},this).map(function(v){return this.getLineHeightFactor()*v.length*p/y+f+f},this).reduce(function(v,C){return Math.max(v,C)},0)};i.setTableHeaderRow=function(u){n.call(this),this.internal.__cell__.tableHeaderRow=u},i.printHeaderRow=function(u,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){f=this.internal.__cell__.tableHeaderRow[v].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=u;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,f),this.setTextColor(C)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),t=!1}}(Zt.API);var tO={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},nO=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],lC=eO(nO),iO=[100,200,300,400,500,600,700,800,900],dj=eO(iO);function uC(i){var e=i.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return tO[s=s||"normal"]?s:"normal"}(i.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(i.weight),r=function(s){return typeof lC[s=s||"normal"]=="number"?s:"normal"}(i.stretch);return{family:e,style:t,weight:n,stretch:r,src:i.src||[],ref:i.ref||{name:e,style:[r,t,n].join(" ")}}}function k3(i,e,t,n){var r;for(r=t;r>=0&&r<e.length;r+=n)if(i[e[r]])return i[e[r]];for(r=t;r>=0&&r<e.length;r-=n)if(i[e[r]])return i[e[r]]}var hj={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},I3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function R3(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function fj(i,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",r=Object.assign({},hj,t.genericFontFamilies||{}),s=null,a=null,l=0;l<e.length;++l)if(r[(s=uC(e[l])).family]&&(s.family=r[s.family]),i.hasOwnProperty(s.family)){a=i[s.family];break}if(!(a=a||i[n]))throw new Error("Could not find a font-family for the rule '"+R3(s)+"' and default family '"+n+"'.");if(a=function(u,d){if(d[u])return d[u];var f=lC[u],p=f<=lC.normal?-1:1,y=k3(d,nO,f,p);if(!y)throw new Error("Could not find a matching font-stretch value for "+u);return y}(s.stretch,a),a=function(u,d){if(d[u])return d[u];for(var f=tO[u],p=0;p<f.length;++p)if(d[f[p]])return d[f[p]];throw new Error("Could not find a matching font-style for "+u)}(s.style,a),!(a=function(u,d){if(d[u])return d[u];if(u===400&&d[500])return d[500];if(u===500&&d[400])return d[400];var f=dj[u],p=k3(d,iO,f,u<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+u);return p}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+R3(s)+"'.");return a}function L3(i){return i.trimLeft()}function pj(i,e){for(var t=0;t<i.length;){if(i.charAt(t)===e)return[i.substring(0,t),i.substring(t+1)];t+=1}return null}function mj(i){var e=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],i.substring(e[0].length)]}var Vx,P3,M3,dT=["times"];(function(i){var e,t,n,r,s,a,l,u,d,f=function(q){return q=q||{},this.isStrokeTransparent=q.isStrokeTransparent||!1,this.strokeOpacity=q.strokeOpacity||1,this.strokeStyle=q.strokeStyle||"#000000",this.fillStyle=q.fillStyle||"#000000",this.isFillTransparent=q.isFillTransparent||!1,this.fillOpacity=q.fillOpacity||1,this.font=q.font||"10px sans-serif",this.textBaseline=q.textBaseline||"alphabetic",this.textAlign=q.textAlign||"left",this.lineWidth=q.lineWidth||1,this.lineJoin=q.lineJoin||"miter",this.lineCap=q.lineCap||"butt",this.path=q.path||[],this.transform=q.transform!==void 0?q.transform.clone():new u,this.globalCompositeOperation=q.globalCompositeOperation||"normal",this.globalAlpha=q.globalAlpha||1,this.clip_path=q.clip_path||[],this.currentPoint=q.currentPoint||new a,this.miterLimit=q.miterLimit||10,this.lastPoint=q.lastPoint||new a,this.lineDashOffset=q.lineDashOffset||0,this.lineDash=q.lineDash||[],this.margin=q.margin||[0,0,0,0],this.prevPageLastElemOffset=q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof q.ignoreClearRect!="boolean"||q.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,u=this.internal.Matrix,d=new f}]);var p=function(q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ee=q;Object.defineProperty(this,"pdf",{get:function(){return ee}});var he=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return he},set:function(Ve){he=!!Ve}});var me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return me},set:function(Ve){me=!!Ve}});var ye=0;Object.defineProperty(this,"posX",{get:function(){return ye},set:function(Ve){isNaN(Ve)||(ye=Ve)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(Ve){isNaN(Ve)||(Ae=Ve)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Ve){var ve;typeof Ve=="number"?ve=[Ve,Ve,Ve,Ve]:((ve=new Array(4))[0]=Ve[0],ve[1]=Ve.length>=2?Ve[1]:ve[0],ve[2]=Ve.length>=3?Ve[2]:ve[0],ve[3]=Ve.length>=4?Ve[3]:ve[1]),d.margin=ve}});var Ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ie},set:function(Ve){Ie=Ve}});var Me=0;Object.defineProperty(this,"lastBreak",{get:function(){return Me},set:function(Ve){Me=Ve}});var nt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return nt},set:function(Ve){nt=Ve}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Ve){Ve instanceof f&&(d=Ve)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Ve){d.path=Ve}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(Ve){He=Ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ve){var ve;ve=y(Ve),this.ctx.fillStyle=ve.style,this.ctx.isFillTransparent=ve.a===0,this.ctx.fillOpacity=ve.a,this.pdf.setFillColor(ve.r,ve.g,ve.b,{a:ve.a}),this.pdf.setTextColor(ve.r,ve.g,ve.b,{a:ve.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ve){var ve=y(Ve);this.ctx.strokeStyle=ve.style,this.ctx.isStrokeTransparent=ve.a===0,this.ctx.strokeOpacity=ve.a,ve.a===0?this.pdf.setDrawColor(255,255,255):(ve.a,this.pdf.setDrawColor(ve.r,ve.g,ve.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ve){["butt","round","square"].indexOf(Ve)!==-1&&(this.ctx.lineCap=Ve,this.pdf.setLineCap(Ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ve){isNaN(Ve)||(this.ctx.lineWidth=Ve,this.pdf.setLineWidth(Ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ve){["bevel","round","miter"].indexOf(Ve)!==-1&&(this.ctx.lineJoin=Ve,this.pdf.setLineJoin(Ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ve){isNaN(Ve)||(this.ctx.miterLimit=Ve,this.pdf.setMiterLimit(Ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ve){this.ctx.textBaseline=Ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ve){["right","end","center","left","start"].indexOf(Ve)!==-1&&(this.ctx.textAlign=Ve)}});var Ye=null;function Xe(Ve,ve){if(Ye===null){var ct=function(mt){var it=[];return Object.keys(mt).forEach(function(st){mt[st].forEach(function(gt){var yt=null;switch(gt){case"bold":yt={family:st,weight:"bold"};break;case"italic":yt={family:st,style:"italic"};break;case"bolditalic":yt={family:st,weight:"bold",style:"italic"};break;case"":case"normal":yt={family:st}}yt!==null&&(yt.ref={name:st,style:gt},it.push(yt))})}),it}(Ve.getFontList());Ye=function(mt){for(var it={},st=0;st<mt.length;++st){var gt=uC(mt[st]),yt=gt.family,It=gt.stretch,Gt=gt.style,nn=gt.weight;it[yt]=it[yt]||{},it[yt][It]=it[yt][It]||{},it[yt][It][Gt]=it[yt][It][Gt]||{},it[yt][It][Gt][nn]=gt}return it}(ct.concat(ve))}return Ye}var pt=null;Object.defineProperty(this,"fontFaces",{get:function(){return pt},set:function(Ve){Ye=null,pt=Ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ve){var ve;if(this.ctx.font=Ve,(ve=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ve))!==null){var ct=ve[1];ve[2];var mt=ve[3],it=ve[4];ve[5];var st=ve[6],gt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(it)[2];it=Math.floor(gt==="px"?parseFloat(it)*this.pdf.internal.scaleFactor:gt==="em"?parseFloat(it)*this.pdf.getFontSize():parseFloat(it)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(it);var yt=function(Ct){var gn,xt,Fi=[],ln=Ct.trim();if(ln==="")return dT;if(ln in I3)return[I3[ln]];for(;ln!=="";){switch(xt=null,gn=(ln=L3(ln)).charAt(0)){case'"':case"'":xt=pj(ln.substring(1),gn);break;default:xt=mj(ln)}if(xt===null||(Fi.push(xt[0]),(ln=L3(xt[1]))!==""&&ln.charAt(0)!==","))return dT;ln=ln.replace(/^,/,"")}return Fi}(st);if(this.fontFaces){var It=fj(Xe(this.pdf,this.fontFaces),yt.map(function(Ct){return{family:Ct,stretch:"normal",weight:mt,style:ct}}));this.pdf.setFont(It.ref.name,It.ref.style)}else{var Gt="";(mt==="bold"||parseInt(mt,10)>=700||ct==="bold")&&(Gt="bold"),ct==="italic"&&(Gt+="italic"),Gt.length===0&&(Gt="normal");for(var nn="",Dt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<yt.length;dt++){if(this.pdf.internal.getFont(yt[dt],Gt,{noFallback:!0,disableWarning:!0})!==void 0){nn=yt[dt];break}if(Gt==="bolditalic"&&this.pdf.internal.getFont(yt[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)nn=yt[dt],Gt="bold";else if(this.pdf.internal.getFont(yt[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){nn=yt[dt],Gt="normal";break}}if(nn===""){for(var pn=0;pn<yt.length;pn++)if(Dt[yt[pn]]){nn=Dt[yt[pn]];break}}nn=nn===""?"Times":nn,this.pdf.setFont(nn,Gt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ve){this.ctx.globalCompositeOperation=Ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ve){this.ctx.globalAlpha=Ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ve){this.ctx.lineDashOffset=Ve,xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ve){this.ctx.lineDash=Ve,xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ve){this.ctx.ignoreClearRect=!!Ve}})};p.prototype.setLineDash=function(q){this.lineDash=q},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){X.call(this,"fill",!1)},p.prototype.stroke=function(){X.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(q,ee){if(isNaN(q)||isNaN(ee))throw Di.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var he=this.ctx.transform.applyToPoint(new a(q,ee));this.path.push({type:"mt",x:he.x,y:he.y}),this.ctx.lastPoint=new a(q,ee)},p.prototype.closePath=function(){var q=new a(0,0),ee=0;for(ee=this.path.length-1;ee!==-1;ee--)if(this.path[ee].type==="begin"&&xi(this.path[ee+1])==="object"&&typeof this.path[ee+1].x=="number"){q=new a(this.path[ee+1].x,this.path[ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(q.x,q.y)},p.prototype.lineTo=function(q,ee){if(isNaN(q)||isNaN(ee))throw Di.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var he=this.ctx.transform.applyToPoint(new a(q,ee));this.path.push({type:"lt",x:he.x,y:he.y}),this.ctx.lastPoint=new a(he.x,he.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),X.call(this,null,!0)},p.prototype.quadraticCurveTo=function(q,ee,he,me){if(isNaN(he)||isNaN(me)||isNaN(q)||isNaN(ee))throw Di.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ye=this.ctx.transform.applyToPoint(new a(he,me)),Ae=this.ctx.transform.applyToPoint(new a(q,ee));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new a(ye.x,ye.y)},p.prototype.bezierCurveTo=function(q,ee,he,me,ye,Ae){if(isNaN(ye)||isNaN(Ae)||isNaN(q)||isNaN(ee)||isNaN(he)||isNaN(me))throw Di.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ie=this.ctx.transform.applyToPoint(new a(ye,Ae)),Me=this.ctx.transform.applyToPoint(new a(q,ee)),nt=this.ctx.transform.applyToPoint(new a(he,me));this.path.push({type:"bct",x1:Me.x,y1:Me.y,x2:nt.x,y2:nt.y,x:Ie.x,y:Ie.y}),this.ctx.lastPoint=new a(Ie.x,Ie.y)},p.prototype.arc=function(q,ee,he,me,ye,Ae){if(isNaN(q)||isNaN(ee)||isNaN(he)||isNaN(me)||isNaN(ye))throw Di.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var Ie=this.ctx.transform.applyToPoint(new a(q,ee));q=Ie.x,ee=Ie.y;var Me=this.ctx.transform.applyToPoint(new a(0,he)),nt=this.ctx.transform.applyToPoint(new a(0,0));he=Math.sqrt(Math.pow(Me.x-nt.x,2)+Math.pow(Me.y-nt.y,2))}Math.abs(ye-me)>=2*Math.PI&&(me=0,ye=2*Math.PI),this.path.push({type:"arc",x:q,y:ee,radius:he,startAngle:me,endAngle:ye,counterclockwise:Ae})},p.prototype.arcTo=function(q,ee,he,me,ye){throw new Error("arcTo not implemented.")},p.prototype.rect=function(q,ee,he,me){if(isNaN(q)||isNaN(ee)||isNaN(he)||isNaN(me))throw Di.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(q,ee),this.lineTo(q+he,ee),this.lineTo(q+he,ee+me),this.lineTo(q,ee+me),this.lineTo(q,ee),this.lineTo(q+he,ee),this.lineTo(q,ee)},p.prototype.fillRect=function(q,ee,he,me){if(isNaN(q)||isNaN(ee)||isNaN(he)||isNaN(me))throw Di.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ye={};this.lineCap!=="butt"&&(ye.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ye.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(q,ee,he,me),this.fill(),ye.hasOwnProperty("lineCap")&&(this.lineCap=ye.lineCap),ye.hasOwnProperty("lineJoin")&&(this.lineJoin=ye.lineJoin)}},p.prototype.strokeRect=function(q,ee,he,me){if(isNaN(q)||isNaN(ee)||isNaN(he)||isNaN(me))throw Di.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(q,ee,he,me),this.stroke())},p.prototype.clearRect=function(q,ee,he,me){if(isNaN(q)||isNaN(ee)||isNaN(he)||isNaN(me))throw Di.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(q,ee,he,me))},p.prototype.save=function(q){q=typeof q!="boolean"||q;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,he=0;he<this.pdf.internal.getNumberOfPages();he++)this.pdf.setPage(he+1),this.pdf.internal.out("q");if(this.pdf.setPage(ee),q){this.ctx.fontSize=this.pdf.internal.getFontSize();var me=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=me}},p.prototype.restore=function(q){q=typeof q!="boolean"||q;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,he=0;he<this.pdf.internal.getNumberOfPages();he++)this.pdf.setPage(he+1),this.pdf.internal.out("Q");this.pdf.setPage(ee),q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(q){var ee,he,me,ye;if(q.isCanvasGradient===!0&&(q=q.getColor()),!q)return{r:0,g:0,b:0,a:0,style:q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(q))ee=0,he=0,me=0,ye=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(q);if(Ae!==null)ee=parseInt(Ae[1]),he=parseInt(Ae[2]),me=parseInt(Ae[3]),ye=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(q))!==null)ee=parseInt(Ae[1]),he=parseInt(Ae[2]),me=parseInt(Ae[3]),ye=parseFloat(Ae[4]);else{if(ye=1,typeof q=="string"&&q.charAt(0)!=="#"){var Ie=new K6(q);q=Ie.ok?Ie.toHex():"#000000"}q.length===4?(ee=q.substring(1,2),ee+=ee,he=q.substring(2,3),he+=he,me=q.substring(3,4),me+=me):(ee=q.substring(1,3),he=q.substring(3,5),me=q.substring(5,7)),ee=parseInt(ee,16),he=parseInt(he,16),me=parseInt(me,16)}}return{r:ee,g:he,b:me,a:ye,style:q}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(q,ee,he,me){if(isNaN(ee)||isNaN(he)||typeof q!="string")throw Di.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(me=isNaN(me)?void 0:me,!v.call(this)){var ye=ge(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;F.call(this,{text:q,x:ee,y:he,scale:Ae,angle:ye,align:this.textAlign,maxWidth:me})}},p.prototype.strokeText=function(q,ee,he,me){if(isNaN(ee)||isNaN(he)||typeof q!="string")throw Di.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){me=isNaN(me)?void 0:me;var ye=ge(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;F.call(this,{text:q,x:ee,y:he,scale:Ae,renderingMode:"stroke",angle:ye,align:this.textAlign,maxWidth:me})}},p.prototype.measureText=function(q){if(typeof q!="string")throw Di.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ee=this.pdf,he=this.pdf.internal.scaleFactor,me=ee.internal.getFontSize(),ye=ee.getStringUnitWidth(q)*me/ee.internal.scaleFactor,Ae=function(Ie){var Me=(Ie=Ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Me}}),this};return new Ae({width:ye*=Math.round(96*he/72*1e4)/1e4})},p.prototype.scale=function(q,ee){if(isNaN(q)||isNaN(ee))throw Di.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var he=new u(q,0,0,ee,0,0);this.ctx.transform=this.ctx.transform.multiply(he)},p.prototype.rotate=function(q){if(isNaN(q))throw Di.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ee=new u(Math.cos(q),Math.sin(q),-Math.sin(q),Math.cos(q),0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},p.prototype.translate=function(q,ee){if(isNaN(q)||isNaN(ee))throw Di.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var he=new u(1,0,0,1,q,ee);this.ctx.transform=this.ctx.transform.multiply(he)},p.prototype.transform=function(q,ee,he,me,ye,Ae){if(isNaN(q)||isNaN(ee)||isNaN(he)||isNaN(me)||isNaN(ye)||isNaN(Ae))throw Di.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ie=new u(q,ee,he,me,ye,Ae);this.ctx.transform=this.ctx.transform.multiply(Ie)},p.prototype.setTransform=function(q,ee,he,me,ye,Ae){q=isNaN(q)?1:q,ee=isNaN(ee)?0:ee,he=isNaN(he)?0:he,me=isNaN(me)?1:me,ye=isNaN(ye)?0:ye,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new u(q,ee,he,me,ye,Ae)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(q,ee,he,me,ye,Ae,Ie,Me,nt){var He=this.pdf.getImageProperties(q),Ye=1,Xe=1,pt=1,Ve=1;me!==void 0&&Me!==void 0&&(pt=Me/me,Ve=nt/ye,Ye=He.width/me*Me/me,Xe=He.height/ye*nt/ye),Ae===void 0&&(Ae=ee,Ie=he,ee=0,he=0),me!==void 0&&Me===void 0&&(Me=me,nt=ye),me===void 0&&Me===void 0&&(Me=He.width,nt=He.height);for(var ve,ct=this.ctx.transform.decompose(),mt=ge(ct.rotate.shx),it=new u,st=(it=(it=(it=it.multiply(ct.translate)).multiply(ct.skew)).multiply(ct.scale)).applyToRectangle(new l(Ae-ee*pt,Ie-he*Ve,me*Ye,ye*Xe)),gt=R.call(this,st),yt=[],It=0;It<gt.length;It+=1)yt.indexOf(gt[It])===-1&&yt.push(gt[It]);if(j(yt),this.autoPaging)for(var Gt=yt[0],nn=yt[yt.length-1],Dt=Gt;Dt<nn+1;Dt++){this.pdf.setPage(Dt);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pn=Dt===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=Dt===1?0:Ct+(Dt-2)*gn;if(this.ctx.clip_path.length!==0){var Fi=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ve,this.posX+this.margin[3],-xt+pn+this.ctx.prevPageLastElemOffset),W.call(this,"fill",!0),this.path=Fi}var ln=JSON.parse(JSON.stringify(st));ln=D([ln],this.posX+this.margin[3],-xt+pn+this.ctx.prevPageLastElemOffset)[0];var Sr=(Dt>Gt||Dt<nn)&&E.call(this);Sr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,gn,null).clip().discardPath()),this.pdf.addImage(q,"JPEG",ln.x,ln.y,ln.w,ln.h,null,null,mt),Sr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(q,"JPEG",st.x,st.y,st.w,st.h,null,null,mt)};var R=function(q,ee,he){var me=[];ee=ee||this.pdf.internal.pageSize.width,he=he||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ye=this.posY+this.ctx.prevPageLastElemOffset;switch(q.type){default:case"mt":case"lt":me.push(Math.floor((q.y+ye)/he)+1);break;case"arc":me.push(Math.floor((q.y+ye-q.radius)/he)+1),me.push(Math.floor((q.y+ye+q.radius)/he)+1);break;case"qct":var Ae=Te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x,q.y);me.push(Math.floor((Ae.y+ye)/he)+1),me.push(Math.floor((Ae.y+Ae.h+ye)/he)+1);break;case"bct":var Ie=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x2,q.y2,q.x,q.y);me.push(Math.floor((Ie.y+ye)/he)+1),me.push(Math.floor((Ie.y+Ie.h+ye)/he)+1);break;case"rect":me.push(Math.floor((q.y+ye)/he)+1),me.push(Math.floor((q.y+q.h+ye)/he)+1)}for(var Me=0;Me<me.length;Me+=1)for(;this.pdf.internal.getNumberOfPages()<me[Me];)I.call(this);return me},I=function(){var q=this.fillStyle,ee=this.strokeStyle,he=this.font,me=this.lineCap,ye=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=q,this.strokeStyle=ee,this.font=he,this.lineCap=me,this.lineWidth=ye,this.lineJoin=Ae},D=function(q,ee,he){for(var me=0;me<q.length;me++)switch(q[me].type){case"bct":q[me].x2+=ee,q[me].y2+=he;case"qct":q[me].x1+=ee,q[me].y1+=he;case"mt":case"lt":case"arc":default:q[me].x+=ee,q[me].y+=he}return q},j=function(q){return q.sort(function(ee,he){return ee-he})},X=function(q,ee){for(var he,me,ye=this.fillStyle,Ae=this.strokeStyle,Ie=this.lineCap,Me=this.lineWidth,nt=Math.abs(Me*this.ctx.transform.scaleX),He=this.lineJoin,Ye=JSON.parse(JSON.stringify(this.path)),Xe=JSON.parse(JSON.stringify(this.path)),pt=[],Ve=0;Ve<Xe.length;Ve++)if(Xe[Ve].x!==void 0)for(var ve=R.call(this,Xe[Ve]),ct=0;ct<ve.length;ct+=1)pt.indexOf(ve[ct])===-1&&pt.push(ve[ct]);for(var mt=0;mt<pt.length;mt++)for(;this.pdf.internal.getNumberOfPages()<pt[mt];)I.call(this);if(j(pt),this.autoPaging)for(var it=pt[0],st=pt[pt.length-1],gt=it;gt<st+1;gt++){this.pdf.setPage(gt),this.fillStyle=ye,this.strokeStyle=Ae,this.lineCap=Ie,this.lineWidth=nt,this.lineJoin=He;var yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],It=gt===1?this.posY+this.margin[0]:this.margin[0],Gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dt=gt===1?0:Gt+(gt-2)*nn;if(this.ctx.clip_path.length!==0){var dt=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(he,this.posX+this.margin[3],-Dt+It+this.ctx.prevPageLastElemOffset),W.call(this,q,!0),this.path=dt}if(me=JSON.parse(JSON.stringify(Ye)),this.path=D(me,this.posX+this.margin[3],-Dt+It+this.ctx.prevPageLastElemOffset),ee===!1||gt===0){var pn=(gt>it||gt<st)&&E.call(this);pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,nn,null).clip().discardPath()),W.call(this,q,ee),pn&&this.pdf.restoreGraphicsState()}this.lineWidth=Me}else this.lineWidth=nt,W.call(this,q,ee),this.lineWidth=Me;this.path=Ye},W=function(q,ee){if((q!=="stroke"||ee||!C.call(this))&&(q==="stroke"||ee||!v.call(this))){for(var he,me,ye=[],Ae=this.path,Ie=0;Ie<Ae.length;Ie++){var Me=Ae[Ie];switch(Me.type){case"begin":ye.push({begin:!0});break;case"close":ye.push({close:!0});break;case"mt":ye.push({start:Me,deltas:[],abs:[]});break;case"lt":var nt=ye.length;if(Ae[Ie-1]&&!isNaN(Ae[Ie-1].x)&&(he=[Me.x-Ae[Ie-1].x,Me.y-Ae[Ie-1].y],nt>0)){for(;nt>=0;nt--)if(ye[nt-1].close!==!0&&ye[nt-1].begin!==!0){ye[nt-1].deltas.push(he),ye[nt-1].abs.push(Me);break}}break;case"bct":he=[Me.x1-Ae[Ie-1].x,Me.y1-Ae[Ie-1].y,Me.x2-Ae[Ie-1].x,Me.y2-Ae[Ie-1].y,Me.x-Ae[Ie-1].x,Me.y-Ae[Ie-1].y],ye[ye.length-1].deltas.push(he);break;case"qct":var He=Ae[Ie-1].x+2/3*(Me.x1-Ae[Ie-1].x),Ye=Ae[Ie-1].y+2/3*(Me.y1-Ae[Ie-1].y),Xe=Me.x+2/3*(Me.x1-Me.x),pt=Me.y+2/3*(Me.y1-Me.y),Ve=Me.x,ve=Me.y;he=[He-Ae[Ie-1].x,Ye-Ae[Ie-1].y,Xe-Ae[Ie-1].x,pt-Ae[Ie-1].y,Ve-Ae[Ie-1].x,ve-Ae[Ie-1].y],ye[ye.length-1].deltas.push(he);break;case"arc":ye.push({deltas:[],abs:[],arc:!0}),Array.isArray(ye[ye.length-1].abs)&&ye[ye.length-1].abs.push(Me)}}me=ee?null:q==="stroke"?"stroke":"fill";for(var ct=!1,mt=0;mt<ye.length;mt++)if(ye[mt].arc)for(var it=ye[mt].abs,st=0;st<it.length;st++){var gt=it[st];gt.type==="arc"?P.call(this,gt.x,gt.y,gt.radius,gt.startAngle,gt.endAngle,gt.counterclockwise,void 0,ee,!ct):B.call(this,gt.x,gt.y),ct=!0}else if(ye[mt].close===!0)this.pdf.internal.out("h"),ct=!1;else if(ye[mt].begin!==!0){var yt=ye[mt].start.x,It=ye[mt].start.y;H.call(this,ye[mt].deltas,yt,It),ct=!0}me&&V.call(this,me),ee&&Y.call(this)}},ue=function(q){var ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,he=ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return q-he;case"top":return q+ee-he;case"hanging":return q+ee-2*he;case"middle":return q+ee/2-he;case"ideographic":return q;case"alphabetic":default:return q}},U=function(q){return q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var q=function(){};return q.colorStops=[],q.addColorStop=function(ee,he){this.colorStops.push([ee,he])},q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},q.isCanvasGradient=!0,q},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(q,ee,he,me,ye,Ae,Ie,Me,nt){for(var He=Q.call(this,he,me,ye,Ae),Ye=0;Ye<He.length;Ye++){var Xe=He[Ye];Ye===0&&(nt?O.call(this,Xe.x1+q,Xe.y1+ee):B.call(this,Xe.x1+q,Xe.y1+ee)),fe.call(this,q,ee,Xe.x2,Xe.y2,Xe.x3,Xe.y3,Xe.x4,Xe.y4)}Me?Y.call(this):V.call(this,Ie)},V=function(q){switch(q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Y=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(q,ee){this.pdf.internal.out(t(q)+" "+n(ee)+" m")},F=function(q){var ee;switch(q.align){case"right":case"end":ee="right";break;case"center":ee="center";break;case"left":case"start":default:ee="left"}var he=this.pdf.getTextDimensions(q.text),me=ue.call(this,q.y),ye=U.call(this,me)-he.h,Ae=this.ctx.transform.applyToPoint(new a(q.x,me)),Ie=this.ctx.transform.decompose(),Me=new u;Me=(Me=(Me=Me.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale);for(var nt,He,Ye,Xe=this.ctx.transform.applyToRectangle(new l(q.x,me,he.w,he.h)),pt=Me.applyToRectangle(new l(q.x,ye,he.w,he.h)),Ve=R.call(this,pt),ve=[],ct=0;ct<Ve.length;ct+=1)ve.indexOf(Ve[ct])===-1&&ve.push(Ve[ct]);if(j(ve),this.autoPaging)for(var mt=ve[0],it=ve[ve.length-1],st=mt;st<it+1;st++){this.pdf.setPage(st);var gt=st===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[2],Gt=It-this.margin[0],nn=this.pdf.internal.pageSize.width-this.margin[1],Dt=nn-this.margin[3],dt=st===1?0:yt+(st-2)*Gt;if(this.ctx.clip_path.length!==0){var pn=this.path;nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(nt,this.posX+this.margin[3],-1*dt+gt),W.call(this,"fill",!0),this.path=pn}var Ct=D([JSON.parse(JSON.stringify(pt))],this.posX+this.margin[3],-dt+gt+this.ctx.prevPageLastElemOffset)[0];q.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*q.scale),Ye=this.lineWidth,this.lineWidth=Ye*q.scale);var gn=this.autoPaging!=="text";if(gn||Ct.y+Ct.h<=It){if(gn||Ct.y>=gt&&Ct.x<=nn){var xt=gn?q.text:this.pdf.splitTextToSize(q.text,q.maxWidth||nn-Ct.x)[0],Fi=D([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-dt+gt+this.ctx.prevPageLastElemOffset)[0],ln=gn&&(st>mt||st<it)&&E.call(this);ln&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dt,Gt,null).clip().discardPath()),this.pdf.text(xt,Fi.x,Fi.y,{angle:q.angle,align:ee,renderingMode:q.renderingMode}),ln&&this.pdf.restoreGraphicsState()}}else Ct.y<It&&(this.ctx.prevPageLastElemOffset+=It-Ct.y);q.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Ye)}else q.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*q.scale),Ye=this.lineWidth,this.lineWidth=Ye*q.scale),this.pdf.text(q.text,Ae.x+this.posX,Ae.y+this.posY,{angle:q.angle,align:ee,renderingMode:q.renderingMode,maxWidth:q.maxWidth}),q.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Ye)},B=function(q,ee,he,me){he=he||0,me=me||0,this.pdf.internal.out(t(q+he)+" "+n(ee+me)+" l")},H=function(q,ee,he){return this.pdf.lines(q,ee,he,null,null)},fe=function(q,ee,he,me,ye,Ae,Ie,Me){this.pdf.internal.out([e(r(he+q)),e(s(me+ee)),e(r(ye+q)),e(s(Ae+ee)),e(r(Ie+q)),e(s(Me+ee)),"c"].join(" "))},Q=function(q,ee,he,me){for(var ye=2*Math.PI,Ae=Math.PI/2;ee>he;)ee-=ye;var Ie=Math.abs(he-ee);Ie<ye&&me&&(Ie=ye-Ie);for(var Me=[],nt=me?-1:1,He=ee;Ie>1e-5;){var Ye=He+nt*Math.min(Ie,Ae);Me.push(ce.call(this,q,He,Ye)),Ie-=Math.abs(Ye-He),He=Ye}return Me},ce=function(q,ee,he){var me=(he-ee)/2,ye=q*Math.cos(me),Ae=q*Math.sin(me),Ie=ye,Me=-Ae,nt=Ie*Ie+Me*Me,He=nt+Ie*ye+Me*Ae,Ye=4/3*(Math.sqrt(2*nt*He)-He)/(Ie*Ae-Me*ye),Xe=Ie-Ye*Me,pt=Me+Ye*Ie,Ve=Xe,ve=-pt,ct=me+ee,mt=Math.cos(ct),it=Math.sin(ct);return{x1:q*Math.cos(ee),y1:q*Math.sin(ee),x2:Xe*mt-pt*it,y2:Xe*it+pt*mt,x3:Ve*mt-ve*it,y3:Ve*it+ve*mt,x4:q*Math.cos(he),y4:q*Math.sin(he)}},ge=function(q){return 180*q/Math.PI},Te=function(q,ee,he,me,ye,Ae){var Ie=q+.5*(he-q),Me=ee+.5*(me-ee),nt=ye+.5*(he-ye),He=Ae+.5*(me-Ae),Ye=Math.min(q,ye,Ie,nt),Xe=Math.max(q,ye,Ie,nt),pt=Math.min(ee,Ae,Me,He),Ve=Math.max(ee,Ae,Me,He);return new l(Ye,pt,Xe-Ye,Ve-pt)},re=function(q,ee,he,me,ye,Ae,Ie,Me){var nt,He,Ye,Xe,pt,Ve,ve,ct,mt,it,st,gt,yt,It,Gt=he-q,nn=me-ee,Dt=ye-he,dt=Ae-me,pn=Ie-ye,Ct=Me-Ae;for(He=0;He<41;He++)mt=(ve=(Ye=q+(nt=He/40)*Gt)+nt*((pt=he+nt*Dt)-Ye))+nt*(pt+nt*(ye+nt*pn-pt)-ve),it=(ct=(Xe=ee+nt*nn)+nt*((Ve=me+nt*dt)-Xe))+nt*(Ve+nt*(Ae+nt*Ct-Ve)-ct),He==0?(st=mt,gt=it,yt=mt,It=it):(st=Math.min(st,mt),gt=Math.min(gt,it),yt=Math.max(yt,mt),It=Math.max(It,it));return new l(Math.round(st),Math.round(gt),Math.round(yt-st),Math.round(It-gt))},xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var q,ee,he=(q=this.ctx.lineDash,ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:q,lineDashOffset:ee}));this.prevLineDash!==he&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=he)}}})(Zt.API),function(i){var e=function(s){var a,l,u,d,f,p,y,v,C,E;for(l=[],u=0,d=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;d>u;u+=4)(f=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(E=f%85))/85)-(C=f%85))/85)-(v=f%85))/85)-(y=f%85))/85)%85,l.push(p+33,y+33,v+33,C+33,E+33)):l.push(122);return function(R,I){for(var D=I;D>0;D--)R.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},t=function(s){var a,l,u,d,f,p=String,y="length",v=255,C="charCodeAt",E="slice",R="replace";for(s[E](-2),s=s[E](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),u=[],d=0,f=(s+=a="uuuuu"[E](s[y]%5||5))[y];f>d;d+=5)l=52200625*(s[C](d)-33)+614125*(s[C](d+1)-33)+7225*(s[C](d+2)-33)+85*(s[C](d+3)-33)+(s[C](d+4)-33),u.push(v&l>>24,v&l>>16,v&l>>8,v&l);return function(I,D){for(var j=D;j>0;j--)I.pop()}(u,a[y]),p.fromCharCode.apply(p,u)},n=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var l="",u=0;u<s.length;u+=2)l+=String.fromCharCode("0x"+(s[u]+s[u+1]));return l},r=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return s=(a=iC(a)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};i.processDataByFilters=function(s,a){var l=0,u=s||"",d=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":u=t(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=n(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=r(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Zt.API),function(i){i.loadFile=function(e,t,n){return function(r,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=function(u,d,f){var p=new XMLHttpRequest,y=0,v=function(C){var E=C.length,R=[],I=String.fromCharCode;for(y=0;y<E;y+=1)R.push(I(255&C.charCodeAt(y)));return R.join("")};if(p.open("GET",u,!d),p.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(p.onload=function(){p.status===200?f(v(this.responseText)):f(void 0)}),p.send(null),d&&p.status===200)return v(p.responseText)}(r,s,a)}catch{}return l}(e,t,n)},i.loadImageFile=i.loadFile}(Zt.API),function(i){function e(){return(tn.html2canvas?Promise.resolve(tn.html2canvas):JE(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(tn.DOMPurify?Promise.resolve(tn.DOMPurify):JE(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var l=xi(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},r=function(a,l){var u=document.createElement(a);for(var d in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[d]=l.style[d];return u},s=function a(l){var u=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),d=a.convert(Promise.resolve(),u);return d=(d=d.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(u){return this.set({src:r("div",{innerHTML:a,dompurify:u})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function u(d,f){for(var p=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),y=d.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(u(y,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(p.width=d.width,p.height=d.height,p.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(p.value=d.value),p.addEventListener("load",function(){p.scrollTop=d.scrollTop,p.scrollLeft=d.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var y=0;y<d.length;++y){var v=d[y],C=v.src.find(function(E){return E.format==="truetype"});C&&u.addFont(C.url,v.ref.name,v.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(n(a)!=="object")return this;var l=Object.keys(a||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=a[u]};switch(u){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[u]=a[u]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var u=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(u):u})},s.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(a=a||Zt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,u,d){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,u,d){return this.setProgress(a?this.progress.val+a:null,l||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(a,l){var u=this;return this.thenCore(a,l,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,f).then(function(p){return u.updateProgress(1),p})})},s.prototype.thenCore=function(a,l,u){u=u||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=u.call(d,a,l);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(u){l=l.thenCore(u)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Zt.getPageSize=function(a,l,u){if(xi(a)==="object"){var d=a;a=d.orientation,l=d.unit||l,u=d.format||u}l=l||"mm",u=u||"a4",a=(""+(a||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var v,C=0,E=0;if(y.hasOwnProperty(p))C=y[p][1]/f,E=y[p][0]/f;else try{C=u[1],E=u[0]}catch{throw new Error("Invalid format: "+u)}if(a==="p"||a==="portrait")a="p",E>C&&(v=E,E=C,C=v);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",C>E&&(v=E,E=C,C=v)}return{width:E,height:C,unit:l,k:f,orientation:a}},i.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(uC):null;var u=new s(l);return l.worker?u:u.from(a).doCallback()}}(Zt.API),Zt.API.addJS=function(i){return M3=i,this.internal.events.subscribe("postPutResources",function(){Vx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Vx+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),P3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+M3+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Vx!==void 0&&P3!==void 0&&this.internal.out("/Names <</JavaScript "+Vx+" 0 R>>")}),this},function(i){var e;i.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),s=0;s<r.length;s++){var a=r[s],l=n.exec(a);if(l!=null){var u=l[1];t.internal.newObjectDeferredBegin(u,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(s=0;s<d;s++){var p=t.internal.newObject();f.push(p);var y=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<f.length;s++)t.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),i.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,r,s){var a={title:r,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var r=0;r<n.children.length;r++)this.genIds_r(n.children[r])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var u=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,r){for(var s=0;s<r.children.length;s++)n.count++,this.count_r(n,r.children[s]);return n.count}}])}(Zt.API),function(i){var e=[192,193,194,195,196,197,198,199];i.processJPEG=function(t,n,r,s,a,l){var u,d=this.decode.DCT_DECODE,f=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(u=function(p){for(var y,v=256*p.charCodeAt(4)+p.charCodeAt(5),C=p.length,E={width:0,height:0,numcomponents:1},R=4;R<C;R+=2){if(R+=v,e.indexOf(p.charCodeAt(R+1))!==-1){y=256*p.charCodeAt(R+5)+p.charCodeAt(R+6),E={width:256*p.charCodeAt(R+7)+p.charCodeAt(R+8),height:y,numcomponents:p.charCodeAt(R+9)};break}v=256*p.charCodeAt(R+2)+p.charCodeAt(R+3)}return E}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:t,width:u.width,height:u.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:r}}return f}}(Zt.API);var x0,Bx,D3,O3,F3,gj=function(){var i,e,t;function n(s){var a,l,u,d,f,p,y,v,C,E,R,I,D,j;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(a=this.readUInt32(),C=(function(){var X,W;for(W=[],X=0;X<4;++X)W.push(String.fromCharCode(this.data[this.pos++]));return W}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,p.delay=1e3*f/d,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,a-=4),s=(p!=null?p.data:void 0)||this.imgData,I=0;0<=a?I<a:I>a;0<=a?++I:--I)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((E=u-this.transparency.indexed.length)>0)for(D=0;0<=E?D<E:D>E;0<=E?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":y=(R=this.read(a)).indexOf(0),v=String.fromCharCode.apply(String,R.slice(0,y)),this.text[v]=String.fromCharCode.apply(String,R.slice(y+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var a,l;for(l=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),u=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(p,y,v,C){var E,R,I,D,j,X,W,ue,U,P,V,Y,O,F,B,H,fe,Q,ce,ge,Te,re=Math.ceil((d.width-p)/v),xe=Math.ceil((d.height-y)/C),q=d.width==re&&d.height==xe;for(F=a*re,Y=q?l:new Uint8Array(F*xe),X=s.length,O=0,R=0;O<xe&&u<X;){switch(s[u++]){case 0:for(D=fe=0;fe<F;D=fe+=1)Y[R++]=s[u++];break;case 1:for(D=Q=0;Q<F;D=Q+=1)E=s[u++],j=D<a?0:Y[R-a],Y[R++]=(E+j)%256;break;case 2:for(D=ce=0;ce<F;D=ce+=1)E=s[u++],I=(D-D%a)/a,B=O&&Y[(O-1)*F+I*a+D%a],Y[R++]=(B+E)%256;break;case 3:for(D=ge=0;ge<F;D=ge+=1)E=s[u++],I=(D-D%a)/a,j=D<a?0:Y[R-a],B=O&&Y[(O-1)*F+I*a+D%a],Y[R++]=(E+Math.floor((j+B)/2))%256;break;case 4:for(D=Te=0;Te<F;D=Te+=1)E=s[u++],I=(D-D%a)/a,j=D<a?0:Y[R-a],O===0?B=H=0:(B=Y[(O-1)*F+I*a+D%a],H=I&&Y[(O-1)*F+(I-1)*a+D%a]),W=j+B-H,ue=Math.abs(W-j),P=Math.abs(W-B),V=Math.abs(W-H),U=ue<=P&&ue<=V?j:P<=V?B:H,Y[R++]=(E+U)%256;break;default:throw new Error("Invalid filter algorithm: "+s[u-1])}if(!q){var ee=((y+O*C)*d.width+p)*a,he=O*F;for(D=0;D<re;D+=1){for(var me=0;me<a;me+=1)l[ee++]=Y[he++];ee+=(v-1)*a}}O++}}return s=Kz(s),d.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},n.prototype.decodePalette=function(){var s,a,l,u,d,f,p,y,v;for(l=this.palette,f=this.transparency.indexed||[],d=new Uint8Array((f.length||0)+l.length),u=0,s=0,a=p=0,y=l.length;p<y;a=p+=3)d[u++]=l[a],d[u++]=l[a+1],d[u++]=l[a+2],d[u++]=(v=f[s++])!=null?v:255;return d},n.prototype.copyToImageData=function(s,a){var l,u,d,f,p,y,v,C,E,R,I;if(u=this.colors,E=null,l=this.hasAlphaChannel,this.palette.length&&(E=(I=this._decodedPalette)!=null?I:this._decodedPalette=this.decodePalette(),u=4,l=!0),C=(d=s.data||s).length,p=E||a,f=y=0,u===1)for(;f<C;)v=E?4*a[f/4]:y,R=p[v++],d[f++]=R,d[f++]=R,d[f++]=R,d[f++]=l?p[v++]:255,y=v;else for(;f<C;)v=E?4*a[f/4]:y,d[f++]=p[v++],d[f++]=p[v++],d[f++]=p[v++],d[f++]=l?p[v++]:255,y=v},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var r=function(){if(Object.prototype.toString.call(tn)==="[object Window]"){try{e=tn.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),i=function(s){var a;if(r()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var a,l,u,d,f,p,y,v;if(this.animation){for(v=[],l=f=0,p=(y=this.animation.frames).length;f<p;l=++f)a=y[l],u=s.createImageData(a.width,a.height),d=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(u,d),a.imageData=u,v.push(a.image=i(u));return v}},n.prototype.renderFrame=function(s,a){var l,u,d;return l=(u=this.animation.frames)[a],d=u[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(s){var a,l,u,d,f,p,y=this;return l=0,p=this.animation,d=p.numFrames,u=p.frames,f=p.numPlays,(a=function(){var v,C;if(v=l++%d,C=u[v],y.renderFrame(s,v),d>1&&l/d<f)return y.animation._timeout=setTimeout(a,C.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var a,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function yj(i){var e=0;if(i[e++]!==71||i[e++]!==73||i[e++]!==70||i[e++]!==56||(i[e++]+1&253)!=56||i[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=i[e++]|i[e++]<<8,n=i[e++]|i[e++]<<8,r=i[e++],s=r>>7,a=1<<(7&r)+1;i[e++],i[e++];var l=null,u=null;s&&(l=e,u=a,e+=3*a);var d=!0,f=[],p=0,y=null,v=0,C=null;for(this.width=t,this.height=n;d&&e<i.length;)switch(i[e++]){case 33:switch(i[e++]){case 255:if(i[e]!==11||i[e+1]==78&&i[e+2]==69&&i[e+3]==84&&i[e+4]==83&&i[e+5]==67&&i[e+6]==65&&i[e+7]==80&&i[e+8]==69&&i[e+9]==50&&i[e+10]==46&&i[e+11]==48&&i[e+12]==3&&i[e+13]==1&&i[e+16]==0)e+=14,C=i[e++]|i[e++]<<8,e++;else for(e+=12;;){if(!((O=i[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;case 249:if(i[e++]!==4||i[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=i[e++];p=i[e++]|i[e++]<<8,y=i[e++],(1&E)==0&&(y=null),v=E>>2&7,e++;break;case 254:for(;;){if(!((O=i[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;default:throw new Error("Unknown graphic control label: 0x"+i[e-1].toString(16))}break;case 44:var R=i[e++]|i[e++]<<8,I=i[e++]|i[e++]<<8,D=i[e++]|i[e++]<<8,j=i[e++]|i[e++]<<8,X=i[e++],W=X>>6&1,ue=1<<(7&X)+1,U=l,P=u,V=!1;X>>7&&(V=!0,U=e,P=ue,e+=3*ue);var Y=e;for(e++;;){var O;if(!((O=i[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}f.push({x:R,y:I,width:D,height:j,has_local_palette:V,palette_offset:U,palette_size:P,data_offset:Y,data_length:e-Y,transparent_index:y,interlaced:!!W,delay:p,disposal:v});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+i[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return C},this.frameInfo=function(F){if(F<0||F>=f.length)throw new Error("Frame index out of range.");return f[F]},this.decodeAndBlitFrameBGRA=function(F,B){var H=this.frameInfo(F),fe=H.width*H.height,Q=new Uint8Array(fe);V3(i,H.data_offset,Q,fe);var ce=H.palette_offset,ge=H.transparent_index;ge===null&&(ge=256);var Te=H.width,re=t-Te,xe=Te,q=4*(H.y*t+H.x),ee=4*((H.y+H.height)*t+H.x),he=q,me=4*re;H.interlaced===!0&&(me+=4*t*7);for(var ye=8,Ae=0,Ie=Q.length;Ae<Ie;++Ae){var Me=Q[Ae];if(xe===0&&(xe=Te,(he+=me)>=ee&&(me=4*re+4*t*(ye-1),he=q+(Te+re)*(ye<<1),ye>>=1)),Me===ge)he+=4;else{var nt=i[ce+3*Me],He=i[ce+3*Me+1],Ye=i[ce+3*Me+2];B[he++]=Ye,B[he++]=He,B[he++]=nt,B[he++]=255}--xe}},this.decodeAndBlitFrameRGBA=function(F,B){var H=this.frameInfo(F),fe=H.width*H.height,Q=new Uint8Array(fe);V3(i,H.data_offset,Q,fe);var ce=H.palette_offset,ge=H.transparent_index;ge===null&&(ge=256);var Te=H.width,re=t-Te,xe=Te,q=4*(H.y*t+H.x),ee=4*((H.y+H.height)*t+H.x),he=q,me=4*re;H.interlaced===!0&&(me+=4*t*7);for(var ye=8,Ae=0,Ie=Q.length;Ae<Ie;++Ae){var Me=Q[Ae];if(xe===0&&(xe=Te,(he+=me)>=ee&&(me=4*re+4*t*(ye-1),he=q+(Te+re)*(ye<<1),ye>>=1)),Me===ge)he+=4;else{var nt=i[ce+3*Me],He=i[ce+3*Me+1],Ye=i[ce+3*Me+2];B[he++]=nt,B[he++]=He,B[he++]=Ye,B[he++]=255}--xe}}}function V3(i,e,t,n){for(var r=i[e++],s=1<<r,a=s+1,l=a+1,u=r+1,d=(1<<u)-1,f=0,p=0,y=0,v=i[e++],C=new Int32Array(4096),E=null;;){for(;f<16&&v!==0;)p|=i[e++]<<f,f+=8,v===1?v=i[e++]:--v;if(f<u)break;var R=p&d;if(p>>=u,f-=u,R!==s){if(R===a)break;for(var I=R<l?R:E,D=0,j=I;j>s;)j=C[j]>>8,++D;var X=j;if(y+D+(I!==R?1:0)>n)return void Di.log("Warning, gif stream longer than expected.");t[y++]=X;var W=y+=D;for(I!==R&&(t[y++]=X),j=I;D--;)j=C[j],t[--W]=255&j,j>>=8;E!==null&&l<4096&&(C[l++]=E<<8|X,l>=d+1&&u<12&&(++u,d=d<<1|1)),E=R}else l=a+1,d=(1<<(u=r+1))-1,E=null}return y!==n&&Di.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function hT(i){var e,t,n,r,s,a=Math.floor,l=new Array(64),u=new Array(64),d=new Array(64),f=new Array(64),p=new Array(65535),y=new Array(65535),v=new Array(64),C=new Array(64),E=[],R=0,I=7,D=new Array(64),j=new Array(64),X=new Array(64),W=new Array(256),ue=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],fe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(q,ee){for(var he=0,me=0,ye=new Array,Ae=1;Ae<=16;Ae++){for(var Ie=1;Ie<=q[Ae];Ie++)ye[ee[me]]=[],ye[ee[me]][0]=he,ye[ee[me]][1]=Ae,me++,he++;he*=2}return ye}function ce(q){for(var ee=q[0],he=q[1]-1;he>=0;)ee&1<<he&&(R|=1<<I),he--,--I<0&&(R==255?(ge(255),ge(0)):ge(R),I=7,R=0)}function ge(q){E.push(q)}function Te(q){ge(q>>8&255),ge(255&q)}function re(q,ee,he,me,ye){for(var Ae,Ie=ye[0],Me=ye[240],nt=function(it,st){var gt,yt,It,Gt,nn,Dt,dt,pn,Ct,gn,xt=0;for(Ct=0;Ct<8;++Ct){gt=it[xt],yt=it[xt+1],It=it[xt+2],Gt=it[xt+3],nn=it[xt+4],Dt=it[xt+5],dt=it[xt+6];var Fi=gt+(pn=it[xt+7]),ln=gt-pn,Sr=yt+dt,un=yt-dt,Wn=It+Dt,zr=It-Dt,In=Gt+nn,ta=Gt-nn,di=Fi+In,qi=Fi-In,hr=Sr+Wn,hi=Sr-Wn;it[xt]=di+hr,it[xt+4]=di-hr;var ut=.707106781*(hi+qi);it[xt+2]=qi+ut,it[xt+6]=qi-ut;var on=.382683433*((di=ta+zr)-(hi=un+ln)),Yt=.5411961*di+on,Fn=1.306562965*hi+on,Vt=.707106781*(hr=zr+un),Li=ln+Vt,wt=ln-Vt;it[xt+5]=wt+Yt,it[xt+3]=wt-Yt,it[xt+1]=Li+Fn,it[xt+7]=Li-Fn,xt+=8}for(xt=0,Ct=0;Ct<8;++Ct){gt=it[xt],yt=it[xt+8],It=it[xt+16],Gt=it[xt+24],nn=it[xt+32],Dt=it[xt+40],dt=it[xt+48];var li=gt+(pn=it[xt+56]),ui=gt-pn,Pi=yt+dt,$i=yt-dt,Qi=It+Dt,fr=It-Dt,Kl=Gt+nn,Ls=Gt-nn,jr=li+Kl,Tr=li-Kl,pr=Pi+Qi,Er=Pi-Qi;it[xt]=jr+pr,it[xt+32]=jr-pr;var Ai=.707106781*(Er+Tr);it[xt+16]=Tr+Ai,it[xt+48]=Tr-Ai;var Zn=.382683433*((jr=Ls+fr)-(Er=$i+ui)),So=.5411961*jr+Zn,To=1.306562965*Er+Zn,ms=.707106781*(pr=fr+$i),na=ui+ms,Wl=ui-ms;it[xt+40]=Wl+So,it[xt+24]=Wl-So,it[xt+8]=na+To,it[xt+56]=na-To,xt++}for(Ct=0;Ct<64;++Ct)gn=it[Ct]*st[Ct],v[Ct]=gn>0?gn+.5|0:gn-.5|0;return v}(q,ee),He=0;He<64;++He)C[U[He]]=nt[He];var Ye=C[0]-he;he=C[0],Ye==0?ce(me[0]):(ce(me[y[Ae=32767+Ye]]),ce(p[Ae]));for(var Xe=63;Xe>0&&C[Xe]==0;)Xe--;if(Xe==0)return ce(Ie),he;for(var pt,Ve=1;Ve<=Xe;){for(var ve=Ve;C[Ve]==0&&Ve<=Xe;)++Ve;var ct=Ve-ve;if(ct>=16){pt=ct>>4;for(var mt=1;mt<=pt;++mt)ce(Me);ct&=15}Ae=32767+C[Ve],ce(ye[(ct<<4)+y[Ae]]),ce(p[Ae]),Ve++}return Xe!=63&&ce(Ie),he}function xe(q){q=Math.min(Math.max(q,1),100),s!=q&&(function(ee){for(var he=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],me=0;me<64;me++){var ye=a((he[me]*ee+50)/100);ye=Math.min(Math.max(ye,1),255),l[U[me]]=ye}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ie=0;Ie<64;Ie++){var Me=a((Ae[Ie]*ee+50)/100);Me=Math.min(Math.max(Me,1),255),u[U[Ie]]=Me}for(var nt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,Ye=0;Ye<8;Ye++)for(var Xe=0;Xe<8;Xe++)d[He]=1/(l[U[He]]*nt[Ye]*nt[Xe]*8),f[He]=1/(u[U[He]]*nt[Ye]*nt[Xe]*8),He++}(q<50?Math.floor(5e3/q):Math.floor(200-2*q)),s=q)}this.encode=function(q,ee){ee&&xe(ee),E=new Array,R=0,I=7,Te(65496),Te(65504),Te(16),ge(74),ge(70),ge(73),ge(70),ge(0),ge(1),ge(1),ge(0),Te(1),Te(1),ge(0),ge(0),function(){Te(65499),Te(132),ge(0);for(var yt=0;yt<64;yt++)ge(l[yt]);ge(1);for(var It=0;It<64;It++)ge(u[It])}(),function(yt,It){Te(65472),Te(17),ge(8),Te(It),Te(yt),ge(3),ge(1),ge(17),ge(0),ge(2),ge(17),ge(1),ge(3),ge(17),ge(1)}(q.width,q.height),function(){Te(65476),Te(418),ge(0);for(var yt=0;yt<16;yt++)ge(P[yt+1]);for(var It=0;It<=11;It++)ge(V[It]);ge(16);for(var Gt=0;Gt<16;Gt++)ge(Y[Gt+1]);for(var nn=0;nn<=161;nn++)ge(O[nn]);ge(1);for(var Dt=0;Dt<16;Dt++)ge(F[Dt+1]);for(var dt=0;dt<=11;dt++)ge(B[dt]);ge(17);for(var pn=0;pn<16;pn++)ge(H[pn+1]);for(var Ct=0;Ct<=161;Ct++)ge(fe[Ct])}(),Te(65498),Te(12),ge(3),ge(1),ge(0),ge(2),ge(17),ge(3),ge(17),ge(0),ge(63),ge(0);var he=0,me=0,ye=0;R=0,I=7,this.encode.displayName="_encode_";for(var Ae,Ie,Me,nt,He,Ye,Xe,pt,Ve,ve=q.data,ct=q.width,mt=q.height,it=4*ct,st=0;st<mt;){for(Ae=0;Ae<it;){for(He=it*st+Ae,Xe=-1,pt=0,Ve=0;Ve<64;Ve++)Ye=He+(pt=Ve>>3)*it+(Xe=4*(7&Ve)),st+pt>=mt&&(Ye-=it*(st+1+pt-mt)),Ae+Xe>=it&&(Ye-=Ae+Xe-it+4),Ie=ve[Ye++],Me=ve[Ye++],nt=ve[Ye++],D[Ve]=(ue[Ie]+ue[Me+256>>0]+ue[nt+512>>0]>>16)-128,j[Ve]=(ue[Ie+768>>0]+ue[Me+1024>>0]+ue[nt+1280>>0]>>16)-128,X[Ve]=(ue[Ie+1280>>0]+ue[Me+1536>>0]+ue[nt+1792>>0]>>16)-128;he=re(D,d,he,e,n),me=re(j,f,me,t,r),ye=re(X,f,ye,t,r),Ae+=32}st+=8}if(I>=0){var gt=[];gt[1]=I+1,gt[0]=(1<<I+1)-1,ce(gt)}return Te(65497),new Uint8Array(E)},i=i||50,function(){for(var q=String.fromCharCode,ee=0;ee<256;ee++)W[ee]=q(ee)}(),e=Q(P,V),t=Q(F,B),n=Q(Y,O),r=Q(H,fe),function(){for(var q=1,ee=2,he=1;he<=15;he++){for(var me=q;me<ee;me++)y[32767+me]=he,p[32767+me]=[],p[32767+me][1]=he,p[32767+me][0]=me;for(var ye=-(ee-1);ye<=-q;ye++)y[32767+ye]=he,p[32767+ye]=[],p[32767+ye][1]=he,p[32767+ye][0]=ee-1+ye;q<<=1,ee<<=1}}(),function(){for(var q=0;q<256;q++)ue[q]=19595*q,ue[q+256>>0]=38470*q,ue[q+512>>0]=7471*q+32768,ue[q+768>>0]=-11059*q,ue[q+1024>>0]=-21709*q,ue[q+1280>>0]=32768*q+8421375,ue[q+1536>>0]=-27439*q,ue[q+1792>>0]=-5329*q}(),xe(i)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function xu(i,e){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function B3(i){function e(P){if(!P)throw Error("assert :P")}function t(P,V,Y){for(var O=0;4>O;O++)if(P[V+O]!=Y.charCodeAt(O))return!0;return!1}function n(P,V,Y,O,F){for(var B=0;B<F;B++)P[V+B]=Y[O+B]}function r(P,V,Y,O){for(var F=0;F<O;F++)P[V+F]=Y}function s(P){return new Int32Array(P)}function a(P,V){for(var Y=[],O=0;O<P;O++)Y.push(new V);return Y}function l(P,V){var Y=[];return function O(F,B,H){for(var fe=H[B],Q=0;Q<fe&&(F.push(H.length>B+1?[]:new V),!(H.length<B+1));Q++)O(F[Q],B+1,H)}(Y,0,P),Y}var u=function(){var P=this;function V(x,S){for(var L=1<<S-1>>>0;x&L;)L>>>=1;return L?(x&L-1)+L:x}function Y(x,S,L,z,J){e(!(z%L));do x[S+(z-=L)]=J;while(0<z)}function O(x,S,L,z,J){if(e(2328>=J),512>=J)var ie=s(512);else if((ie=s(J))==null)return 0;return function(se,ae,de,pe,Se,Fe){var De,Le,Ze=ae,$e=1<<de,Ee=s(16),Ne=s(16);for(e(Se!=0),e(pe!=null),e(se!=null),e(0<de),Le=0;Le<Se;++Le){if(15<pe[Le])return 0;++Ee[pe[Le]]}if(Ee[0]==Se)return 0;for(Ne[1]=0,De=1;15>De;++De){if(Ee[De]>1<<De)return 0;Ne[De+1]=Ne[De]+Ee[De]}for(Le=0;Le<Se;++Le)De=pe[Le],0<pe[Le]&&(Fe[Ne[De]++]=Le);if(Ne[15]==1)return(pe=new F).g=0,pe.value=Fe[0],Y(se,Ze,1,$e,pe),$e;var Ke,et=-1,Qe=$e-1,St=0,vt=1,Bt=1,_t=1<<de;for(Le=0,De=1,Se=2;De<=de;++De,Se<<=1){if(vt+=Bt<<=1,0>(Bt-=Ee[De]))return 0;for(;0<Ee[De];--Ee[De])(pe=new F).g=De,pe.value=Fe[Le++],Y(se,Ze+St,Se,_t,pe),St=V(St,De)}for(De=de+1,Se=2;15>=De;++De,Se<<=1){if(vt+=Bt<<=1,0>(Bt-=Ee[De]))return 0;for(;0<Ee[De];--Ee[De]){if(pe=new F,(St&Qe)!=et){for(Ze+=_t,Ke=1<<(et=De)-de;15>et&&!(0>=(Ke-=Ee[et]));)++et,Ke<<=1;$e+=_t=1<<(Ke=et-de),se[ae+(et=St&Qe)].g=Ke+de,se[ae+et].value=Ze-ae-et}pe.g=De-de,pe.value=Fe[Le++],Y(se,Ze+(St>>de),Se,_t,pe),St=V(St,De)}}return vt!=2*Ne[15]-1?0:$e}(x,S,L,z,J,ie)}function F(){this.value=this.g=0}function B(){this.value=this.g=0}function H(){this.G=a(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Nr,B)}function fe(x,S,L,z){e(x!=null),e(S!=null),e(2147483648>z),x.Ca=254,x.I=0,x.b=-8,x.Ka=0,x.oa=S,x.pa=L,x.Jd=S,x.Yc=L+z,x.Zc=4<=z?L+z-4+1:L,Ae(x)}function Q(x,S){for(var L=0;0<S--;)L|=Me(x,128)<<S;return L}function ce(x,S){var L=Q(x,S);return Ie(x)?-L:L}function ge(x,S,L,z){var J,ie=0;for(e(x!=null),e(S!=null),e(4294967288>z),x.Sb=z,x.Ra=0,x.u=0,x.h=0,4<z&&(z=4),J=0;J<z;++J)ie+=S[L+J]<<8*J;x.Ra=ie,x.bb=z,x.oa=S,x.pa=L}function Te(x){for(;8<=x.u&&x.bb<x.Sb;)x.Ra>>>=8,x.Ra+=x.oa[x.pa+x.bb]<<vd-8>>>0,++x.bb,x.u-=8;he(x)&&(x.h=1,x.u=0)}function re(x,S){if(e(0<=S),!x.h&&S<=yd){var L=ee(x)&ic[S];return x.u+=S,Te(x),L}return x.h=1,x.u=0}function xe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ee(x){return x.Ra>>>(x.u&vd-1)>>>0}function he(x){return e(x.bb<=x.Sb),x.h||x.bb==x.Sb&&x.u>vd}function me(x,S){x.u=S,x.h=he(x)}function ye(x){x.u>=Gh&&(e(x.u>=Gh),Te(x))}function Ae(x){e(x!=null&&x.oa!=null),x.pa<x.Zc?(x.I=(x.oa[x.pa++]|x.I<<8)>>>0,x.b+=8):(e(x!=null&&x.oa!=null),x.pa<x.Yc?(x.b+=8,x.I=x.oa[x.pa++]|x.I<<8):x.Ka?x.b=0:(x.I<<=8,x.b+=8,x.Ka=1))}function Ie(x){return Q(x,1)}function Me(x,S){var L=x.Ca;0>x.b&&Ae(x);var z=x.b,J=L*S>>>8,ie=(x.I>>>z>J)+0;for(ie?(L-=J,x.I-=J+1<<z>>>0):L=J+1,z=L,J=0;256<=z;)J+=8,z>>=8;return z=7^J+la[z],x.b-=z,x.Ca=(L<<z)-1,ie}function nt(x,S,L){x[S+0]=L>>24&255,x[S+1]=L>>16&255,x[S+2]=L>>8&255,x[S+3]=L>>0&255}function He(x,S){return x[S+0]<<0|x[S+1]<<8}function Ye(x,S){return He(x,S)|x[S+2]<<16}function Xe(x,S){return He(x,S)|He(x,S+2)<<16}function pt(x,S){var L=1<<S;return e(x!=null),e(0<S),x.X=s(L),x.X==null?0:(x.Mb=32-S,x.Xa=S,1)}function Ve(x,S){e(x!=null),e(S!=null),e(x.Xa==S.Xa),n(S.X,0,x.X,0,1<<S.Xa)}function ve(){this.X=[],this.Xa=this.Mb=0}function ct(x,S,L,z){e(L!=null),e(z!=null);var J=L[0],ie=z[0];return J==0&&(J=(x*ie+S/2)/S),ie==0&&(ie=(S*J+x/2)/x),0>=J||0>=ie?0:(L[0]=J,z[0]=ie,1)}function mt(x,S){return x+(1<<S)-1>>>S}function it(x,S){return((4278255360&x)+(4278255360&S)>>>0&4278255360)+((16711935&x)+(16711935&S)>>>0&16711935)>>>0}function st(x,S){P[S]=function(L,z,J,ie,se,ae,de){var pe;for(pe=0;pe<se;++pe){var Se=P[x](ae[de+pe-1],J,ie+pe);ae[de+pe]=it(L[z+pe],Se)}}}function gt(){this.ud=this.hd=this.jd=0}function yt(x,S){return((4278124286&(x^S))>>>1)+(x&S)>>>0}function It(x){return 0<=x&&256>x?x:0>x?0:255<x?255:void 0}function Gt(x,S){return It(x+(x-S+.5>>1))}function nn(x,S,L){return Math.abs(S-L)-Math.abs(x-L)}function Dt(x,S,L,z,J,ie,se){for(z=ie[se-1],L=0;L<J;++L)ie[se+L]=z=it(x[S+L],z)}function dt(x,S,L,z,J){var ie;for(ie=0;ie<L;++ie){var se=x[S+ie],ae=se>>8&255,de=16711935&(de=(de=16711935&se)+((ae<<16)+ae));z[J+ie]=(4278255360&se)+de>>>0}}function pn(x,S){S.jd=x>>0&255,S.hd=x>>8&255,S.ud=x>>16&255}function Ct(x,S,L,z,J,ie){var se;for(se=0;se<z;++se){var ae=S[L+se],de=ae>>>8,pe=ae,Se=255&(Se=(Se=ae>>>16)+((x.jd<<24>>24)*(de<<24>>24)>>>5));pe=255&(pe=(pe=pe+((x.hd<<24>>24)*(de<<24>>24)>>>5))+((x.ud<<24>>24)*(Se<<24>>24)>>>5)),J[ie+se]=(4278255360&ae)+(Se<<16)+pe}}function gn(x,S,L,z,J){P[S]=function(ie,se,ae,de,pe,Se,Fe,De,Le){for(de=Fe;de<De;++de)for(Fe=0;Fe<Le;++Fe)pe[Se++]=J(ae[z(ie[se++])])},P[x]=function(ie,se,ae,de,pe,Se,Fe){var De=8>>ie.b,Le=ie.Ea,Ze=ie.K[0],$e=ie.w;if(8>De)for(ie=(1<<ie.b)-1,$e=(1<<De)-1;se<ae;++se){var Ee,Ne=0;for(Ee=0;Ee<Le;++Ee)Ee&ie||(Ne=z(de[pe++])),Se[Fe++]=J(Ze[Ne&$e]),Ne>>=De}else P["VP8LMapColor"+L](de,pe,Ze,$e,Se,Fe,se,ae,Le)}}function xt(x,S,L,z,J){for(L=S+L;S<L;){var ie=x[S++];z[J++]=ie>>16&255,z[J++]=ie>>8&255,z[J++]=ie>>0&255}}function Fi(x,S,L,z,J){for(L=S+L;S<L;){var ie=x[S++];z[J++]=ie>>16&255,z[J++]=ie>>8&255,z[J++]=ie>>0&255,z[J++]=ie>>24&255}}function ln(x,S,L,z,J){for(L=S+L;S<L;){var ie=(se=x[S++])>>16&240|se>>12&15,se=se>>0&240|se>>28&15;z[J++]=ie,z[J++]=se}}function Sr(x,S,L,z,J){for(L=S+L;S<L;){var ie=(se=x[S++])>>16&248|se>>13&7,se=se>>5&224|se>>3&31;z[J++]=ie,z[J++]=se}}function un(x,S,L,z,J){for(L=S+L;S<L;){var ie=x[S++];z[J++]=ie>>0&255,z[J++]=ie>>8&255,z[J++]=ie>>16&255}}function Wn(x,S,L,z,J,ie){if(ie==0)for(L=S+L;S<L;)nt(z,((ie=x[S++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),J+=32;else n(z,J,x,S,L)}function zr(x,S){P[S][0]=P[x+"0"],P[S][1]=P[x+"1"],P[S][2]=P[x+"2"],P[S][3]=P[x+"3"],P[S][4]=P[x+"4"],P[S][5]=P[x+"5"],P[S][6]=P[x+"6"],P[S][7]=P[x+"7"],P[S][8]=P[x+"8"],P[S][9]=P[x+"9"],P[S][10]=P[x+"10"],P[S][11]=P[x+"11"],P[S][12]=P[x+"12"],P[S][13]=P[x+"13"],P[S][14]=P[x+"0"],P[S][15]=P[x+"0"]}function In(x){return x==zp||x==fc||x==lu||x==Qh}function ta(){this.eb=[],this.size=this.A=this.fb=0}function di(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ta,this.f.kb=new di,this.sd=null}function hr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function hi(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(x){return alert("todo:WebPSamplerProcessPlane"),x.T}function on(x,S){var L=x.T,z=S.ba.f.RGBA,J=z.eb,ie=z.fb+x.ka*z.A,se=Gr[S.ba.S],ae=x.y,de=x.O,pe=x.f,Se=x.N,Fe=x.ea,De=x.W,Le=S.cc,Ze=S.dc,$e=S.Mc,Ee=S.Nc,Ne=x.ka,Ke=x.ka+x.T,et=x.U,Qe=et+1>>1;for(Ne==0?se(ae,de,null,null,pe,Se,Fe,De,pe,Se,Fe,De,J,ie,null,null,et):(se(S.ec,S.fc,ae,de,Le,Ze,$e,Ee,pe,Se,Fe,De,J,ie-z.A,J,ie,et),++L);Ne+2<Ke;Ne+=2)Le=pe,Ze=Se,$e=Fe,Ee=De,Se+=x.Rc,De+=x.Rc,ie+=2*z.A,se(ae,(de+=2*x.fa)-x.fa,ae,de,Le,Ze,$e,Ee,pe,Se,Fe,De,J,ie-z.A,J,ie,et);return de+=x.fa,x.j+Ke<x.o?(n(S.ec,S.fc,ae,de,et),n(S.cc,S.dc,pe,Se,Qe),n(S.Mc,S.Nc,Fe,De,Qe),L--):1&Ke||se(ae,de,null,null,pe,Se,Fe,De,pe,Se,Fe,De,J,ie+z.A,null,null,et),L}function Yt(x,S,L){var z=x.F,J=[x.J];if(z!=null){var ie=x.U,se=S.ba.S,ae=se==Ad||se==lu;S=S.ba.f.RGBA;var de=[0],pe=x.ka;de[0]=x.T,x.Kb&&(pe==0?--de[0]:(--pe,J[0]-=x.width),x.j+x.ka+x.T==x.o&&(de[0]=x.o-x.j-pe));var Se=S.eb;pe=S.fb+pe*S.A,x=kn(z,J[0],x.width,ie,de,Se,pe+(ae?0:3),S.A),e(L==de),x&&In(se)&&Pa(Se,pe,ae,ie,de,S.A)}return 0}function Fn(x){var S=x.ma,L=S.ba.S,z=11>L,J=L==Wh||L==Up||L==Ad||L==ou||L==12||In(L);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!nc(S.Oa,x,J?11:12))return 0;if(J&&In(L)&&at(),x.da)alert("todo:use_scaling");else{if(z){if(S.Ib=ut,x.Kb){if(L=x.U+1>>1,S.memory=s(x.U+2*L),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+x.U,S.Mc=S.cc,S.Nc=S.dc+L,S.Ib=on,at()}}else alert("todo:EmitYUV");J&&(S.Jb=Yt,z&&Re())}if(z&&!D2){for(x=0;256>x;++x)O5[x]=89858*(x-128)+Ir>>Rl,$p[x]=-22014*(x-128)+Ir,Fv[x]=-45773*(x-128),Rr[x]=113618*(x-128)+Ir>>Rl;for(x=gc;x<Xg;++x)S=76283*(x-16)+Ir>>Rl,Hp[x-gc]=ti(S,255),Vv[x-gc]=ti(S+8>>4,15);D2=1}return 1}function Vt(x){var S=x.ma,L=x.U,z=x.T;return e(!(1&x.ka)),0>=L||0>=z?0:(L=S.Ib(x,S),S.Jb!=null&&S.Jb(x,S,L),S.Dc+=L,1)}function Li(x){x.ma.memory=null}function wt(x,S,L,z){return re(x,8)!=47?0:(S[0]=re(x,14)+1,L[0]=re(x,14)+1,z[0]=re(x,1),re(x,3)!=0?0:!x.h)}function li(x,S){if(4>x)return x+1;var L=x-2>>1;return(2+(1&x)<<L)+re(S,L)+1}function ui(x,S){return 120<S?S-120:1<=(L=((L=cu[S-1])>>4)*x+(8-(15&L)))?L:1;var L}function Pi(x,S,L){var z=ee(L),J=x[S+=255&z].g-8;return 0<J&&(me(L,L.u+8),z=ee(L),S+=x[S].value,S+=z&(1<<J)-1),me(L,L.u+x[S].g),x[S].value}function $i(x,S,L){return L.g+=x.g,L.value+=x.value<<S>>>0,e(8>=L.g),x.g}function Qi(x,S,L){var z=x.xc;return e((S=z==0?0:x.vc[x.md*(L>>z)+(S>>z)])<x.Wb),x.Ya[S]}function fr(x,S,L,z){var J=x.ab,ie=x.c*S,se=x.C;S=se+S;var ae=L,de=z;for(z=x.Ta,L=x.Ua;0<J--;){var pe=x.gc[J],Se=se,Fe=S,De=ae,Le=de,Ze=(de=z,ae=L,pe.Ea);switch(e(Se<Fe),e(Fe<=pe.nc),pe.hc){case 2:$g(De,Le,(Fe-Se)*Ze,de,ae);break;case 0:var $e=Se,Ee=Fe,Ne=de,Ke=ae,et=(_t=pe).Ea;$e==0&&(Dv(De,Le,null,null,1,Ne,Ke),Dt(De,Le+1,0,0,et-1,Ne,Ke+1),Le+=et,Ke+=et,++$e);for(var Qe=1<<_t.b,St=Qe-1,vt=mt(et,_t.b),Bt=_t.K,_t=_t.w+($e>>_t.b)*vt;$e<Ee;){var Hn=Bt,ni=_t,Tn=1;for(Vp(De,Le,Ne,Ke-et,1,Ne,Ke);Tn<et;){var An=(Tn&~St)+Qe;An>et&&(An=et),(0,ru[Hn[ni++]>>8&15])(De,Le+ +Tn,Ne,Ke+Tn-et,An-Tn,Ne,Ke+Tn),Tn=An}Le+=et,Ke+=et,++$e&St||(_t+=vt)}Fe!=pe.nc&&n(de,ae-Ze,de,ae+(Fe-Se-1)*Ze,Ze);break;case 1:for(Ze=De,Ee=Le,et=(De=pe.Ea)-(Ke=De&~(Ne=(Le=1<<pe.b)-1)),$e=mt(De,pe.b),Qe=pe.K,pe=pe.w+(Se>>pe.b)*$e;Se<Fe;){for(St=Qe,vt=pe,Bt=new gt,_t=Ee+Ke,Hn=Ee+De;Ee<_t;)pn(St[vt++],Bt),sc(Bt,Ze,Ee,Le,de,ae),Ee+=Le,ae+=Le;Ee<Hn&&(pn(St[vt++],Bt),sc(Bt,Ze,Ee,et,de,ae),Ee+=et,ae+=et),++Se&Ne||(pe+=$e)}break;case 3:if(De==de&&Le==ae&&0<pe.b){for(Ee=de,De=Ze=ae+(Fe-Se)*Ze-(Ke=(Fe-Se)*mt(pe.Ea,pe.b)),Le=de,Ne=ae,$e=[],Ke=(et=Ke)-1;0<=Ke;--Ke)$e[Ke]=Le[Ne+Ke];for(Ke=et-1;0<=Ke;--Ke)Ee[De+Ke]=$e[Ke];ro(pe,Se,Fe,de,Ze,de,ae)}else ro(pe,Se,Fe,De,Le,de,ae)}ae=z,de=L}de!=L&&n(z,L,ae,de,ie)}function Kl(x,S){var L=x.V,z=x.Ba+x.c*x.C,J=S-x.C;if(e(S<=x.l.o),e(16>=J),0<J){var ie=x.l,se=x.Ta,ae=x.Ua,de=ie.width;if(fr(x,J,L,z),J=ae=[ae],e((L=x.C)<(z=S)),e(ie.v<ie.va),z>ie.o&&(z=ie.o),L<ie.j){var pe=ie.j-L;L=ie.j,J[0]+=pe*de}if(L>=z?L=0:(J[0]+=4*ie.v,ie.ka=L-ie.j,ie.U=ie.va-ie.v,ie.T=z-L,L=1),L){if(ae=ae[0],11>(L=x.ca).S){var Se=L.f.RGBA,Fe=(z=L.S,J=ie.U,ie=ie.T,pe=Se.eb,Se.A),De=ie;for(Se=Se.fb+x.Ma*Se.A;0<De--;){var Le=se,Ze=ae,$e=J,Ee=pe,Ne=Se;switch(z){case _s:Ms(Le,Ze,$e,Ee,Ne);break;case Wh:os(Le,Ze,$e,Ee,Ne);break;case zp:os(Le,Ze,$e,Ee,Ne),Pa(Ee,Ne,0,$e,1,0);break;case Cl:Do(Le,Ze,$e,Ee,Ne);break;case Up:Wn(Le,Ze,$e,Ee,Ne,1);break;case fc:Wn(Le,Ze,$e,Ee,Ne,1),Pa(Ee,Ne,0,$e,1,0);break;case Ad:Wn(Le,Ze,$e,Ee,Ne,0);break;case lu:Wn(Le,Ze,$e,Ee,Ne,0),Pa(Ee,Ne,1,$e,1,0);break;case ou:ac(Le,Ze,$e,Ee,Ne);break;case Qh:ac(Le,Ze,$e,Ee,Ne),Nn(Ee,Ne,$e,1,0);break;case Gg:ua(Le,Ze,$e,Ee,Ne);break;default:e(0)}ae+=de,Se+=Fe}x.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");e(x.Ma<=L.height)}}x.C=S,e(x.C<=x.i)}function Ls(x){var S;if(0<x.ua)return 0;for(S=0;S<x.Wb;++S){var L=x.Ya[S].G,z=x.Ya[S].H;if(0<L[1][z[1]+0].g||0<L[2][z[2]+0].g||0<L[3][z[3]+0].g)return 0}return 1}function jr(x,S,L,z,J,ie){if(x.Z!=0){var se=x.qd,ae=x.rd;for(e(kl[x.Z]!=null);S<L;++S)kl[x.Z](se,ae,z,J,z,J,ie),se=z,ae=J,J+=ie;x.qd=se,x.rd=ae}}function Tr(x,S){var L=x.l.ma,z=L.Z==0||L.Z==1?x.l.j:x.C;if(z=x.C<z?z:x.C,e(S<=x.l.o),S>z){var J=x.l.width,ie=L.ca,se=L.tb+J*z,ae=x.V,de=x.Ba+x.c*z,pe=x.gc;e(x.ab==1),e(pe[0].hc==3),rc(pe[0],z,S,ae,de,ie,se),jr(L,z,S,ie,se,J)}x.C=x.Ma=S}function pr(x,S,L,z,J,ie,se){var ae=x.$/z,de=x.$%z,pe=x.m,Se=x.s,Fe=L+x.$,De=Fe;J=L+z*J;var Le=L+z*ie,Ze=280+Se.ua,$e=x.Pb?ae:16777216,Ee=0<Se.ua?Se.Wa:null,Ne=Se.wc,Ke=Fe<Le?Qi(Se,de,ae):null;e(x.C<ie),e(Le<=J);var et=!1;e:for(;;){for(;et||Fe<Le;){var Qe=0;if(ae>=$e){var St=Fe-L;e(($e=x).Pb),$e.wd=$e.m,$e.xd=St,0<$e.s.ua&&Ve($e.s.Wa,$e.s.vb),$e=ae+L2}if(de&Ne||(Ke=Qi(Se,de,ae)),e(Ke!=null),Ke.Qb&&(S[Fe]=Ke.qb,et=!0),!et)if(ye(pe),Ke.jc){Qe=pe,St=S;var vt=Fe,Bt=Ke.pd[ee(Qe)&Nr-1];e(Ke.jc),256>Bt.g?(me(Qe,Qe.u+Bt.g),St[vt]=Bt.value,Qe=0):(me(Qe,Qe.u+Bt.g-256),e(256<=Bt.value),Qe=Bt.value),Qe==0&&(et=!0)}else Qe=Pi(Ke.G[0],Ke.H[0],pe);if(pe.h)break;if(et||256>Qe){if(!et)if(Ke.nd)S[Fe]=(Ke.qb|Qe<<8)>>>0;else{if(ye(pe),et=Pi(Ke.G[1],Ke.H[1],pe),ye(pe),St=Pi(Ke.G[2],Ke.H[2],pe),vt=Pi(Ke.G[3],Ke.H[3],pe),pe.h)break;S[Fe]=(vt<<24|et<<16|Qe<<8|St)>>>0}if(et=!1,++Fe,++de>=z&&(de=0,++ae,se!=null&&ae<=ie&&!(ae%16)&&se(x,ae),Ee!=null))for(;De<Fe;)Qe=S[De++],Ee.X[(506832829*Qe&4294967295)>>>Ee.Mb]=Qe}else if(280>Qe){if(Qe=li(Qe-256,pe),St=Pi(Ke.G[4],Ke.H[4],pe),ye(pe),St=ui(z,St=li(St,pe)),pe.h)break;if(Fe-L<St||J-Fe<Qe)break e;for(vt=0;vt<Qe;++vt)S[Fe+vt]=S[Fe+vt-St];for(Fe+=Qe,de+=Qe;de>=z;)de-=z,++ae,se!=null&&ae<=ie&&!(ae%16)&&se(x,ae);if(e(Fe<=J),de&Ne&&(Ke=Qi(Se,de,ae)),Ee!=null)for(;De<Fe;)Qe=S[De++],Ee.X[(506832829*Qe&4294967295)>>>Ee.Mb]=Qe}else{if(!(Qe<Ze))break e;for(et=Qe-280,e(Ee!=null);De<Fe;)Qe=S[De++],Ee.X[(506832829*Qe&4294967295)>>>Ee.Mb]=Qe;Qe=Fe,e(!(et>>>(St=Ee).Xa)),S[Qe]=St.X[et],et=!0}et||e(pe.h==he(pe))}if(x.Pb&&pe.h&&Fe<J)e(x.m.h),x.a=5,x.m=x.wd,x.$=x.xd,0<x.s.ua&&Ve(x.s.vb,x.s.Wa);else{if(pe.h)break e;se!=null&&se(x,ae>ie?ie:ae),x.a=0,x.$=Fe-L}return 1}return x.a=3,0}function Er(x){e(x!=null),x.vc=null,x.yc=null,x.Ya=null;var S=x.Wa;S!=null&&(S.X=null),x.vb=null,e(x!=null)}function Ai(){var x=new $h;return x==null?null:(x.a=0,x.xb=Xh,zr("Predictor","VP8LPredictors"),zr("Predictor","VP8LPredictors_C"),zr("PredictorAdd","VP8LPredictorsAdd"),zr("PredictorAdd","VP8LPredictorsAdd_C"),$g=dt,sc=Ct,Ms=xt,os=Fi,ac=ln,ua=Sr,Do=un,P.VP8LMapColor32b=$r,P.VP8LMapColor8b=Bp,x)}function Zn(x,S,L,z,J){var ie=1,se=[x],ae=[S],de=z.m,pe=z.s,Se=null,Fe=0;e:for(;;){if(L)for(;ie&&re(de,1);){var De=se,Le=ae,Ze=z,$e=1,Ee=Ze.m,Ne=Ze.gc[Ze.ab],Ke=re(Ee,2);if(Ze.Oc&1<<Ke)ie=0;else{switch(Ze.Oc|=1<<Ke,Ne.hc=Ke,Ne.Ea=De[0],Ne.nc=Le[0],Ne.K=[null],++Ze.ab,e(4>=Ze.ab),Ke){case 0:case 1:Ne.b=re(Ee,3)+2,$e=Zn(mt(Ne.Ea,Ne.b),mt(Ne.nc,Ne.b),0,Ze,Ne.K),Ne.K=Ne.K[0];break;case 3:var et,Qe=re(Ee,8)+1,St=16<Qe?0:4<Qe?1:2<Qe?2:3;if(De[0]=mt(Ne.Ea,St),Ne.b=St,et=$e=Zn(Qe,1,0,Ze,Ne.K)){var vt,Bt=Qe,_t=Ne,Hn=1<<(8>>_t.b),ni=s(Hn);if(ni==null)et=0;else{var Tn=_t.K[0],An=_t.w;for(ni[0]=_t.K[0][0],vt=1;vt<1*Bt;++vt)ni[vt]=it(Tn[An+vt],ni[vt-1]);for(;vt<4*Hn;++vt)ni[vt]=0;_t.K[0]=null,_t.K[0]=ni,et=1}}$e=et;break;case 2:break;default:e(0)}ie=$e}}if(se=se[0],ae=ae[0],ie&&re(de,1)&&!(ie=1<=(Fe=re(de,4))&&11>=Fe)){z.a=3;break e}var pi;if(pi=ie)t:{var ii,dn,yi,$t=z,en=se,zn=ae,Gn=Fe,Yr=L,Lr=$t.m,ar=$t.s,or=[null],vr=1,lo=0,ri=Td[Gn];n:for(;;){if(Yr&&re(Lr,1)){var br=re(Lr,3)+2,Vo=mt(en,br),yc=mt(zn,br),Nd=Vo*yc;if(!Zn(Vo,yc,0,$t,or))break n;for(or=or[0],ar.xc=br,ii=0;ii<Nd;++ii){var vc=or[ii]>>8&65535;or[ii]=vc,vc>=vr&&(vr=vc+1)}}if(Lr.h)break n;for(dn=0;5>dn;++dn){var Vi=Ma[dn];!dn&&0<Gn&&(Vi+=1<<Gn),lo<Vi&&(lo=Vi)}var Gp=a(vr*ri,F),Jg=vr,Os=a(Jg,H);if(Os==null)var Hi=null;else e(65536>=Jg),Hi=Os;var kd=s(lo);if(Hi==null||kd==null||Gp==null){$t.a=1;break n}var bc=Gp;for(ii=yi=0;ii<vr;++ii){var da=Hi[ii],_c=da.G,ha=da.H,Yp=0,Zh=1,Zg=0;for(dn=0;5>dn;++dn){Vi=Ma[dn],_c[dn]=bc,ha[dn]=yi,!dn&&0<Gn&&(Vi+=1<<Gn);r:{var Kp,e0=Vi,Wp=$t,ef=kd,V2=bc,B2=yi,Qp=0,pu=Wp.m,V5=re(pu,1);if(r(ef,0,0,e0),V5){var U2=re(pu,1)+1,z2=re(pu,1),Bv=re(pu,z2==0?1:8);ef[Bv]=1,U2==2&&(ef[Bv=re(pu,8)]=1);var tf=1}else{var Uv=s(19),zv=re(pu,4)+4;if(19<zv){Wp.a=3;var Xp=0;break r}for(Kp=0;Kp<zv;++Kp)Uv[uu[Kp]]=re(pu,3);var t0=void 0,nf=void 0,j2=Wp,q2=Uv,mu=e0,Jp=ef,n0=0,Bo=j2.m,rf=8,jv=a(128,F);i:for(;O(jv,0,7,q2,19);){if(re(Bo,1)){var $2=2+2*re(Bo,3);if((t0=2+re(Bo,$2))>mu)break i}else t0=mu;for(nf=0;nf<mu&&t0--;){ye(Bo);var qv=jv[0+(127&ee(Bo))];me(Bo,Bo.u+qv.g);var Id=qv.value;if(16>Id)Jp[nf++]=Id,Id!=0&&(rf=Id);else{var H2=Id==16,$v=Id-16,Hv=oo[$v],Gv=re(Bo,Yg[$v])+Hv;if(nf+Gv>mu)break i;for(var G2=H2?rf:0;0<Gv--;)Jp[nf++]=G2}}n0=1;break i}n0||(j2.a=3),tf=n0}(tf=tf&&!pu.h)&&(Qp=O(V2,B2,8,ef,e0)),tf&&Qp!=0?Xp=Qp:(Wp.a=3,Xp=0)}if(Xp==0)break n;if(Zh&&Sd[dn]==1&&(Zh=bc[yi].g==0),Yp+=bc[yi].g,yi+=Xp,3>=dn){var Rd,i0=kd[0];for(Rd=1;Rd<Vi;++Rd)kd[Rd]>i0&&(i0=kd[Rd]);Zg+=i0}}if(da.nd=Zh,da.Qb=0,Zh&&(da.qb=(_c[3][ha[3]+0].value<<24|_c[1][ha[1]+0].value<<16|_c[2][ha[2]+0].value)>>>0,Yp==0&&256>_c[0][ha[0]+0].value&&(da.Qb=1,da.qb+=_c[0][ha[0]+0].value<<8)),da.jc=!da.Qb&&6>Zg,da.jc){var Zp,gu=da;for(Zp=0;Zp<Nr;++Zp){var Ll=Zp,yu=gu.pd[Ll],em=gu.G[0][gu.H[0]+Ll];256<=em.value?(yu.g=em.g+256,yu.value=em.value):(yu.g=0,yu.value=0,Ll>>=$i(em,8,yu),Ll>>=$i(gu.G[1][gu.H[1]+Ll],16,yu),Ll>>=$i(gu.G[2][gu.H[2]+Ll],0,yu),$i(gu.G[3][gu.H[3]+Ll],24,yu))}}}ar.vc=or,ar.Wb=vr,ar.Ya=Hi,ar.yc=Gp,pi=1;break t}pi=0}if(!(ie=pi)){z.a=3;break e}if(0<Fe){if(pe.ua=1<<Fe,!pt(pe.Wa,Fe)){z.a=1,ie=0;break e}}else pe.ua=0;var tm=z,Yv=se,Y2=ae,Kv=tm.s,Wv=Kv.xc;if(tm.c=Yv,tm.i=Y2,Kv.md=mt(Yv,Wv),Kv.wc=Wv==0?-1:(1<<Wv)-1,L){z.xb=M2;break e}if((Se=s(se*ae))==null){z.a=1,ie=0;break e}ie=(ie=pr(z,Se,0,se,ae,ae,null))&&!de.h;break e}return ie?(J!=null?J[0]=Se:(e(Se==null),e(L)),z.$=0,L||Er(pe)):Er(pe),ie}function So(x,S){var L=x.c*x.i,z=L+S+16*S;return e(x.c<=S),x.V=s(z),x.V==null?(x.Ta=null,x.Ua=0,x.a=1,0):(x.Ta=x.V,x.Ua=x.Ba+L+S,1)}function To(x,S){var L=x.C,z=S-L,J=x.V,ie=x.Ba+x.c*L;for(e(S<=x.l.o);0<z;){var se=16<z?16:z,ae=x.l.ma,de=x.l.width,pe=de*se,Se=ae.ca,Fe=ae.tb+de*L,De=x.Ta,Le=x.Ua;fr(x,se,J,ie),Ti(De,Le,Se,Fe,pe),jr(ae,L,L+se,Se,Fe,de),z-=se,J+=se*x.c,L+=se}e(L==S),x.C=x.Ma=S}function ms(){this.ub=this.yd=this.td=this.Rb=0}function na(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wl(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function ld(){this.Yb=function(){var x=[];return function S(L,z,J){for(var ie=J[z],se=0;se<ie&&(L.push(J.length>z+1?[]:0),!(J.length<z+1));se++)S(L[se],z+1,J)}(x,0,[3,11]),x}()}function Ql(){this.jb=s(3),this.Wc=l([4,8],ld),this.Xc=l([4,17],ld)}function Vh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ia(){this.ld=this.La=this.dd=this.tc=0}function Ra(){this.Na=this.la=0}function Cr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Eo(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Bh(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ia),this.Y=0,this.ya=Array(new Eo),this.aa=0,this.l=new Co}function Wa(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ku(){this.cb=this.a=0,this.sc="",this.m=new xe,this.Od=new ms,this.Kc=new na,this.ed=new Vh,this.Qa=new Wl,this.Ic=this.$c=this.Aa=0,this.D=new Bh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,xe),this.ia=0,this.pb=a(4,Cr),this.Pa=new Ql,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Wa),this.Hd=0,this.rb=Array(new Ra),this.sb=0,this.wa=Array(new Ia),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Eo),this.L=this.aa=0,this.gd=l([4,2],Ia),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Co(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ud(){var x=new Ku;return x!=null&&(x.a=0,x.sc="OK",x.cb=0,x.Xb=0,kr||(kr=Uh)),x}function Si(x,S,L){return x.a==0&&(x.a=S,x.sc=L,x.cb=0),0}function qr(x,S,L){return 3<=L&&x[S+0]==157&&x[S+1]==1&&x[S+2]==42}function Wu(x,S){if(x==null)return 0;if(x.a=0,x.sc="OK",S==null)return Si(x,2,"null VP8Io passed to VP8GetHeaders()");var L=S.data,z=S.w,J=S.ha;if(4>J)return Si(x,7,"Truncated header.");var ie=L[z+0]|L[z+1]<<8|L[z+2]<<16,se=x.Od;if(se.Rb=!(1&ie),se.td=ie>>1&7,se.yd=ie>>4&1,se.ub=ie>>5,3<se.td)return Si(x,3,"Incorrect keyframe parameters.");if(!se.yd)return Si(x,4,"Frame not displayable.");z+=3,J-=3;var ae=x.Kc;if(se.Rb){if(7>J)return Si(x,7,"cannot parse picture header");if(!qr(L,z,J))return Si(x,3,"Bad code word");ae.c=16383&(L[z+4]<<8|L[z+3]),ae.Td=L[z+4]>>6,ae.i=16383&(L[z+6]<<8|L[z+5]),ae.Ud=L[z+6]>>6,z+=7,J-=7,x.za=ae.c+15>>4,x.Ub=ae.i+15>>4,S.width=ae.c,S.height=ae.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,r((ie=x.Pa).jb,0,255,ie.jb.length),e((ie=x.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,r(ie.Zb,0,0,ie.Zb.length),r(ie.Lb,0,0,ie.Lb)}if(se.ub>J)return Si(x,7,"bad partition length");fe(ie=x.m,L,z,se.ub),z+=se.ub,J-=se.ub,se.Rb&&(ae.Ld=Ie(ie),ae.Kd=Ie(ie)),ae=x.Qa;var de,pe=x.Pa;if(e(ie!=null),e(ae!=null),ae.Cb=Ie(ie),ae.Cb){if(ae.Bb=Ie(ie),Ie(ie)){for(ae.Fb=Ie(ie),de=0;4>de;++de)ae.Zb[de]=Ie(ie)?ce(ie,7):0;for(de=0;4>de;++de)ae.Lb[de]=Ie(ie)?ce(ie,6):0}if(ae.Bb)for(de=0;3>de;++de)pe.jb[de]=Ie(ie)?Q(ie,8):255}else ae.Bb=0;if(ie.Ka)return Si(x,3,"cannot parse segment header");if((ae=x.ed).zd=Ie(ie),ae.Tb=Q(ie,6),ae.wb=Q(ie,3),ae.Pc=Ie(ie),ae.Pc&&Ie(ie)){for(pe=0;4>pe;++pe)Ie(ie)&&(ae.vd[pe]=ce(ie,6));for(pe=0;4>pe;++pe)Ie(ie)&&(ae.od[pe]=ce(ie,6))}if(x.L=ae.Tb==0?0:ae.zd?1:2,ie.Ka)return Si(x,3,"cannot parse filter header");var Se=J;if(J=de=z,z=de+Se,ae=Se,x.Xb=(1<<Q(x.m,2))-1,Se<3*(pe=x.Xb))L=7;else{for(de+=3*pe,ae-=3*pe,Se=0;Se<pe;++Se){var Fe=L[J+0]|L[J+1]<<8|L[J+2]<<16;Fe>ae&&(Fe=ae),fe(x.Jc[+Se],L,de,Fe),de+=Fe,ae-=Fe,J+=3}fe(x.Jc[+pe],L,de,ae),L=de<z?0:5}if(L!=0)return Si(x,L,"cannot parse partitions");for(L=Q(de=x.m,7),J=Ie(de)?ce(de,4):0,z=Ie(de)?ce(de,4):0,ae=Ie(de)?ce(de,4):0,pe=Ie(de)?ce(de,4):0,de=Ie(de)?ce(de,4):0,Se=x.Qa,Fe=0;4>Fe;++Fe){if(Se.Cb){var De=Se.Zb[Fe];Se.Fb||(De+=L)}else{if(0<Fe){x.pb[Fe]=x.pb[0];continue}De=L}var Le=x.pb[Fe];Le.Sc[0]=jp[ti(De+J,127)],Le.Sc[1]=qp[ti(De+0,127)],Le.Eb[0]=2*jp[ti(De+z,127)],Le.Eb[1]=101581*qp[ti(De+ae,127)]>>16,8>Le.Eb[1]&&(Le.Eb[1]=8),Le.Qc[0]=jp[ti(De+pe,117)],Le.Qc[1]=qp[ti(De+de,127)],Le.lc=De+de}if(!se.Rb)return Si(x,4,"Not a key frame.");for(Ie(ie),se=x.Pa,L=0;4>L;++L){for(J=0;8>J;++J)for(z=0;3>z;++z)for(ae=0;11>ae;++ae)pe=Me(ie,Ed[L][J][z][ae])?Q(ie,8):Nl[L][J][z][ae],se.Wc[L][J].Yb[z][ae]=pe;for(J=0;17>J;++J)se.Xc[L][J]=se.Wc[L][P2[J]]}return x.kc=Ie(ie),x.kc&&(x.Bd=Q(ie,8)),x.cb=1}function Uh(x,S,L,z,J,ie,se){var ae=S[J].Yb[L];for(L=0;16>J;++J){if(!Me(x,ae[L+0]))return J;for(;!Me(x,ae[L+1]);)if(ae=S[++J].Yb[0],L=0,J==16)return 16;var de=S[J+1].Yb;if(Me(x,ae[L+2])){var pe=x,Se=0;if(Me(pe,(De=ae)[(Fe=L)+3]))if(Me(pe,De[Fe+6])){for(ae=0,Fe=2*(Se=Me(pe,De[Fe+8]))+(De=Me(pe,De[Fe+9+Se])),Se=0,De=Zi[Fe];De[ae];++ae)Se+=Se+Me(pe,De[ae]);Se+=3+(8<<Fe)}else Me(pe,De[Fe+7])?(Se=7+2*Me(pe,165),Se+=Me(pe,145)):Se=5+Me(pe,159);else Se=Me(pe,De[Fe+4])?3+Me(pe,De[Fe+5]):2;ae=de[2]}else Se=1,ae=de[1];de=se+Qn[J],0>(pe=x).b&&Ae(pe);var Fe,De=pe.b,Le=(Fe=pe.Ca>>1)-(pe.I>>De)>>31;--pe.b,pe.Ca+=Le,pe.Ca|=1,pe.I-=(Fe+1&Le)<<De,ie[de]=((Se^Le)-Le)*z[(0<J)+0]}return 16}function fl(x){var S=x.rb[x.sb-1];S.la=0,S.Na=0,r(x.zc,0,0,x.zc.length),x.ja=0}function cd(x,S){if(x==null)return 0;if(S==null)return Si(x,2,"NULL VP8Io parameter in VP8Decode().");if(!x.cb&&!Wu(x,S))return 0;if(e(x.cb),S.ac==null||S.ac(S)){S.ob&&(x.L=0);var L=fu[x.L];if(x.L==2?(x.yb=0,x.zb=0):(x.yb=S.v-L>>4,x.zb=S.j-L>>4,0>x.yb&&(x.yb=0),0>x.zb&&(x.zb=0)),x.Va=S.o+15+L>>4,x.Hb=S.va+15+L>>4,x.Hb>x.za&&(x.Hb=x.za),x.Va>x.Ub&&(x.Va=x.Ub),0<x.L){var z=x.ed;for(L=0;4>L;++L){var J;if(x.Qa.Cb){var ie=x.Qa.Lb[L];x.Qa.Fb||(ie+=z.Tb)}else ie=z.Tb;for(J=0;1>=J;++J){var se=x.gd[L][J],ae=ie;if(z.Pc&&(ae+=z.vd[0],J&&(ae+=z.od[0])),0<(ae=0>ae?0:63<ae?63:ae)){var de=ae;0<z.wb&&(de=4<z.wb?de>>2:de>>1)>9-z.wb&&(de=9-z.wb),1>de&&(de=1),se.dd=de,se.tc=2*ae+de,se.ld=40<=ae?2:15<=ae?1:0}else se.tc=0;se.La=J}}}L=0}else Si(x,6,"Frame setup failed"),L=x.a;if(L=L==0){if(L){x.$c=0,0<x.Aa||(x.Ic=O2);e:{L=x.Ic,z=4*(de=x.za);var pe=32*de,Se=de+1,Fe=0<x.L?de*(0<x.Aa?2:1):0,De=(x.Aa==2?2:1)*de;if((se=z+832+(J=3*(16*L+fu[x.L])/2*pe)+(ie=x.Fa!=null&&0<x.Fa.length?x.Kc.c*x.Kc.i:0))!=se)L=0;else{if(se>x.Vb){if(x.Vb=0,x.Ec=s(se),x.Fc=0,x.Ec==null){L=Si(x,1,"no memory during frame initialization.");break e}x.Vb=se}se=x.Ec,ae=x.Fc,x.Ac=se,x.Bc=ae,ae+=z,x.Gd=a(pe,Wa),x.Hd=0,x.rb=a(Se+1,Ra),x.sb=1,x.wa=Fe?a(Fe,Ia):null,x.Y=0,x.D.Nb=0,x.D.wa=x.wa,x.D.Y=x.Y,0<x.Aa&&(x.D.Y+=de),e(!0),x.oc=se,x.pc=ae,ae+=832,x.ya=a(De,Eo),x.aa=0,x.D.ya=x.ya,x.D.aa=x.aa,x.Aa==2&&(x.D.aa+=de),x.R=16*de,x.B=8*de,de=(pe=fu[x.L])*x.R,pe=pe/2*x.B,x.sa=se,x.ta=ae+de,x.qa=x.sa,x.ra=x.ta+16*L*x.R+pe,x.Ha=x.qa,x.Ia=x.ra+8*L*x.B+pe,x.$c=0,ae+=J,x.mb=ie?se:null,x.nb=ie?ae:null,e(ae+ie<=x.Fc+x.Vb),fl(x),r(x.Ac,x.Bc,0,z),L=1}}if(L){if(S.ka=0,S.y=x.sa,S.O=x.ta,S.f=x.qa,S.N=x.ra,S.ea=x.Ha,S.Vd=x.Ia,S.fa=x.R,S.Rc=x.B,S.F=null,S.J=0,!au){for(L=-255;255>=L;++L)sr[255+L]=0>L?-L:L;for(L=-1020;1020>=L;++L)so[1020+L]=-128>L?-128:127<L?127:L;for(L=-112;112>=L;++L)dc[112+L]=-16>L?-16:15<L?15:L;for(L=-255;510>=L;++L)hc[255+L]=0>L?0:255<L?255:L;au=1}Tl=ia,Oo=ml,Fo=Qa,yr=ei,ca=gl,Xi=pl,bd=_l,El=Po,Yh=Zu,oc=md,lc=Ju,uc=Zl,_d=eu,Kh=xl,cc=La,su=vs,xd=gr,Ji=qh,Ds[0]=gs,Ds[1]=zh,Ds[2]=Za,Ds[3]=jh,Ds[4]=ra,Ds[5]=eo,Ds[6]=Ps,Ds[7]=sa,Ds[8]=Lo,Ds[9]=yl,du[0]=Xa,du[1]=hd,du[2]=ko,du[3]=Xu,du[4]=gi,du[5]=Ro,du[6]=Ja,Da[0]=to,Da[1]=dd,Da[2]=fd,Da[3]=aa,Da[4]=Rn,Da[5]=mr,Da[6]=vl,L=1}else L=0}L&&(L=function(Le,Ze){for(Le.M=0;Le.M<Le.Va;++Le.M){var $e,Ee=Le.Jc[Le.M&Le.Xb],Ne=Le.m,Ke=Le;for($e=0;$e<Ke.za;++$e){var et=Ne,Qe=Ke,St=Qe.Ac,vt=Qe.Bc+4*$e,Bt=Qe.zc,_t=Qe.ya[Qe.aa+$e];if(Qe.Qa.Bb?_t.$b=Me(et,Qe.Pa.jb[0])?2+Me(et,Qe.Pa.jb[2]):Me(et,Qe.Pa.jb[1]):_t.$b=0,Qe.kc&&(_t.Ad=Me(et,Qe.Bd)),_t.Za=!Me(et,145)+0,_t.Za){var Hn=_t.Ob,ni=0;for(Qe=0;4>Qe;++Qe){var Tn,An=Bt[0+Qe];for(Tn=0;4>Tn;++Tn){An=Ov[St[vt+Tn]][An];for(var pi=pc[Me(et,An[0])];0<pi;)pi=pc[2*pi+Me(et,An[pi])];An=-pi,St[vt+Tn]=An}n(Hn,ni,St,vt,4),ni+=4,Bt[0+Qe]=An}}else An=Me(et,156)?Me(et,128)?1:3:Me(et,163)?2:0,_t.Ob[0]=An,r(St,vt,An,4),r(Bt,0,An,4);_t.Dd=Me(et,142)?Me(et,114)?Me(et,183)?1:3:2:0}if(Ke.m.Ka)return Si(Le,7,"Premature end-of-partition0 encountered.");for(;Le.ja<Le.za;++Le.ja){if(Ke=Ee,et=(Ne=Le).rb[Ne.sb-1],St=Ne.rb[Ne.sb+Ne.ja],$e=Ne.ya[Ne.aa+Ne.ja],vt=Ne.kc?$e.Ad:0)et.la=St.la=0,$e.Za||(et.Na=St.Na=0),$e.Hc=0,$e.Gc=0,$e.ia=0;else{var ii,dn;if(et=St,St=Ke,vt=Ne.Pa.Xc,Bt=Ne.ya[Ne.aa+Ne.ja],_t=Ne.pb[Bt.$b],Qe=Bt.ad,Hn=0,ni=Ne.rb[Ne.sb-1],An=Tn=0,r(Qe,Hn,0,384),Bt.Za)var yi=0,$t=vt[3];else{pi=s(16);var en=et.Na+ni.Na;if(en=kr(St,vt[1],en,_t.Eb,0,pi,0),et.Na=ni.Na=(0<en)+0,1<en)Tl(pi,0,Qe,Hn);else{var zn=pi[0]+3>>3;for(pi=0;256>pi;pi+=16)Qe[Hn+pi]=zn}yi=1,$t=vt[0]}var Gn=15&et.la,Yr=15&ni.la;for(pi=0;4>pi;++pi){var Lr=1&Yr;for(zn=dn=0;4>zn;++zn)Gn=Gn>>1|(Lr=(en=kr(St,$t,en=Lr+(1&Gn),_t.Sc,yi,Qe,Hn))>yi)<<7,dn=dn<<2|(3<en?3:1<en?2:Qe[Hn+0]!=0),Hn+=16;Gn>>=4,Yr=Yr>>1|Lr<<7,Tn=(Tn<<8|dn)>>>0}for($t=Gn,yi=Yr>>4,ii=0;4>ii;ii+=2){for(dn=0,Gn=et.la>>4+ii,Yr=ni.la>>4+ii,pi=0;2>pi;++pi){for(Lr=1&Yr,zn=0;2>zn;++zn)en=Lr+(1&Gn),Gn=Gn>>1|(Lr=0<(en=kr(St,vt[2],en,_t.Qc,0,Qe,Hn)))<<3,dn=dn<<2|(3<en?3:1<en?2:Qe[Hn+0]!=0),Hn+=16;Gn>>=2,Yr=Yr>>1|Lr<<5}An|=dn<<4*ii,$t|=Gn<<4<<ii,yi|=(240&Yr)<<ii}et.la=$t,ni.la=yi,Bt.Hc=Tn,Bt.Gc=An,Bt.ia=43690&An?0:_t.ia,vt=!(Tn|An)}if(0<Ne.L&&(Ne.wa[Ne.Y+Ne.ja]=Ne.gd[$e.$b][$e.Za],Ne.wa[Ne.Y+Ne.ja].La|=!vt),Ke.Ka)return Si(Le,7,"Premature end-of-file encountered.")}if(fl(Le),Ne=Ze,Ke=1,$e=(Ee=Le).D,et=0<Ee.L&&Ee.M>=Ee.zb&&Ee.M<=Ee.Va,Ee.Aa==0)e:{if($e.M=Ee.M,$e.uc=et,oa(Ee,$e),Ke=1,$e=(dn=Ee.D).Nb,et=(An=fu[Ee.L])*Ee.R,St=An/2*Ee.B,pi=16*$e*Ee.R,zn=8*$e*Ee.B,vt=Ee.sa,Bt=Ee.ta-et+pi,_t=Ee.qa,Qe=Ee.ra-St+zn,Hn=Ee.Ha,ni=Ee.Ia-St+zn,Yr=(Gn=dn.M)==0,Tn=Gn>=Ee.Va-1,Ee.Aa==2&&oa(Ee,dn),dn.uc)for(Lr=(en=Ee).D.M,e(en.D.uc),dn=en.yb;dn<en.Hb;++dn){yi=dn,$t=Lr;var ar=(or=(Vi=en).D).Nb;ii=Vi.R;var or=or.wa[or.Y+yi],vr=Vi.sa,lo=Vi.ta+16*ar*ii+16*yi,ri=or.dd,br=or.tc;if(br!=0)if(e(3<=br),Vi.L==1)0<yi&&su(vr,lo,ii,br+4),or.La&&Ji(vr,lo,ii,br),0<$t&&cc(vr,lo,ii,br+4),or.La&&xd(vr,lo,ii,br);else{var Vo=Vi.B,yc=Vi.qa,Nd=Vi.ra+8*ar*Vo+8*yi,vc=Vi.Ha,Vi=Vi.Ia+8*ar*Vo+8*yi;ar=or.ld,0<yi&&(El(vr,lo,ii,br+4,ri,ar),oc(yc,Nd,vc,Vi,Vo,br+4,ri,ar)),or.La&&(uc(vr,lo,ii,br,ri,ar),Kh(yc,Nd,vc,Vi,Vo,br,ri,ar)),0<$t&&(bd(vr,lo,ii,br+4,ri,ar),Yh(yc,Nd,vc,Vi,Vo,br+4,ri,ar)),or.La&&(lc(vr,lo,ii,br,ri,ar),_d(yc,Nd,vc,Vi,Vo,br,ri,ar))}}if(Ee.ia&&alert("todo:DitherRow"),Ne.put!=null){if(dn=16*Gn,Gn=16*(Gn+1),Yr?(Ne.y=Ee.sa,Ne.O=Ee.ta+pi,Ne.f=Ee.qa,Ne.N=Ee.ra+zn,Ne.ea=Ee.Ha,Ne.W=Ee.Ia+zn):(dn-=An,Ne.y=vt,Ne.O=Bt,Ne.f=_t,Ne.N=Qe,Ne.ea=Hn,Ne.W=ni),Tn||(Gn-=An),Gn>Ne.o&&(Gn=Ne.o),Ne.F=null,Ne.J=null,Ee.Fa!=null&&0<Ee.Fa.length&&dn<Gn&&(Ne.J=tc(Ee,Ne,dn,Gn-dn),Ne.F=Ee.mb,Ne.F==null&&Ne.F.length==0)){Ke=Si(Ee,3,"Could not decode alpha data.");break e}dn<Ne.j&&(An=Ne.j-dn,dn=Ne.j,e(!(1&An)),Ne.O+=Ee.R*An,Ne.N+=Ee.B*(An>>1),Ne.W+=Ee.B*(An>>1),Ne.F!=null&&(Ne.J+=Ne.width*An)),dn<Gn&&(Ne.O+=Ne.v,Ne.N+=Ne.v>>1,Ne.W+=Ne.v>>1,Ne.F!=null&&(Ne.J+=Ne.v),Ne.ka=dn-Ne.j,Ne.U=Ne.va-Ne.v,Ne.T=Gn-dn,Ke=Ne.put(Ne))}$e+1!=Ee.Ic||Tn||(n(Ee.sa,Ee.ta-et,vt,Bt+16*Ee.R,et),n(Ee.qa,Ee.ra-St,_t,Qe+8*Ee.B,St),n(Ee.Ha,Ee.Ia-St,Hn,ni+8*Ee.B,St))}if(!Ke)return Si(Le,6,"Output aborted.")}return 1}(x,S)),S.bc!=null&&S.bc(S),L&=1}return L?(x.cb=0,L):0}function rs(x,S,L,z,J){J=x[S+L+32*z]+(J>>3),x[S+L+32*z]=-256&J?0>J?0:255:J}function Qu(x,S,L,z,J,ie){rs(x,S,0,L,z+J),rs(x,S,1,L,z+ie),rs(x,S,2,L,z-ie),rs(x,S,3,L,z-J)}function Un(x){return(20091*x>>16)+x}function ss(x,S,L,z){var J,ie=0,se=s(16);for(J=0;4>J;++J){var ae=x[S+0]+x[S+8],de=x[S+0]-x[S+8],pe=(35468*x[S+4]>>16)-Un(x[S+12]),Se=Un(x[S+4])+(35468*x[S+12]>>16);se[ie+0]=ae+Se,se[ie+1]=de+pe,se[ie+2]=de-pe,se[ie+3]=ae-Se,ie+=4,S++}for(J=ie=0;4>J;++J)ae=(x=se[ie+0]+4)+se[ie+8],de=x-se[ie+8],pe=(35468*se[ie+4]>>16)-Un(se[ie+12]),rs(L,z,0,0,ae+(Se=Un(se[ie+4])+(35468*se[ie+12]>>16))),rs(L,z,1,0,de+pe),rs(L,z,2,0,de-pe),rs(L,z,3,0,ae-Se),ie++,z+=32}function pl(x,S,L,z){var J=x[S+0]+4,ie=35468*x[S+4]>>16,se=Un(x[S+4]),ae=35468*x[S+1]>>16;Qu(L,z,0,J+se,x=Un(x[S+1]),ae),Qu(L,z,1,J+ie,x,ae),Qu(L,z,2,J-ie,x,ae),Qu(L,z,3,J-se,x,ae)}function ml(x,S,L,z,J){ss(x,S,L,z),J&&ss(x,S+16,L,z+4)}function Qa(x,S,L,z){Oo(x,S+0,L,z,1),Oo(x,S+32,L,z+128,1)}function ei(x,S,L,z){var J;for(x=x[S+0]+4,J=0;4>J;++J)for(S=0;4>S;++S)rs(L,z,S,J,x)}function gl(x,S,L,z){x[S+0]&&yr(x,S+0,L,z),x[S+16]&&yr(x,S+16,L,z+4),x[S+32]&&yr(x,S+32,L,z+128),x[S+48]&&yr(x,S+48,L,z+128+4)}function ia(x,S,L,z){var J,ie=s(16);for(J=0;4>J;++J){var se=x[S+0+J]+x[S+12+J],ae=x[S+4+J]+x[S+8+J],de=x[S+4+J]-x[S+8+J],pe=x[S+0+J]-x[S+12+J];ie[0+J]=se+ae,ie[8+J]=se-ae,ie[4+J]=pe+de,ie[12+J]=pe-de}for(J=0;4>J;++J)se=(x=ie[0+4*J]+3)+ie[3+4*J],ae=ie[1+4*J]+ie[2+4*J],de=ie[1+4*J]-ie[2+4*J],pe=x-ie[3+4*J],L[z+0]=se+ae>>3,L[z+16]=pe+de>>3,L[z+32]=se-ae>>3,L[z+48]=pe-de>>3,z+=64}function No(x,S,L){var z,J=S-32,ie=Hr,se=255-x[J-1];for(z=0;z<L;++z){var ae,de=ie,pe=se+x[S-1];for(ae=0;ae<L;++ae)x[S+ae]=de[pe+x[J+ae]];S+=32}}function zh(x,S){No(x,S,4)}function dd(x,S){No(x,S,8)}function hd(x,S){No(x,S,16)}function ko(x,S){var L;for(L=0;16>L;++L)n(x,S+32*L,x,S-32,16)}function Xu(x,S){var L;for(L=16;0<L;--L)r(x,S,x[S-1],16),S+=32}function Io(x,S,L){var z;for(z=0;16>z;++z)r(S,L+32*z,x,16)}function Xa(x,S){var L,z=16;for(L=0;16>L;++L)z+=x[S-1+32*L]+x[S+L-32];Io(z>>5,x,S)}function gi(x,S){var L,z=8;for(L=0;16>L;++L)z+=x[S-1+32*L];Io(z>>4,x,S)}function Ro(x,S){var L,z=8;for(L=0;16>L;++L)z+=x[S+L-32];Io(z>>4,x,S)}function Ja(x,S){Io(128,x,S)}function Kt(x,S,L){return x+2*S+L+2>>2}function Za(x,S){var L,z=S-32;for(z=new Uint8Array([Kt(x[z-1],x[z+0],x[z+1]),Kt(x[z+0],x[z+1],x[z+2]),Kt(x[z+1],x[z+2],x[z+3]),Kt(x[z+2],x[z+3],x[z+4])]),L=0;4>L;++L)n(x,S+32*L,z,0,z.length)}function jh(x,S){var L=x[S-1],z=x[S-1+32],J=x[S-1+64],ie=x[S-1+96];nt(x,S+0,16843009*Kt(x[S-1-32],L,z)),nt(x,S+32,16843009*Kt(L,z,J)),nt(x,S+64,16843009*Kt(z,J,ie)),nt(x,S+96,16843009*Kt(J,ie,ie))}function gs(x,S){var L,z=4;for(L=0;4>L;++L)z+=x[S+L-32]+x[S-1+32*L];for(z>>=3,L=0;4>L;++L)r(x,S+32*L,z,4)}function ra(x,S){var L=x[S-1+0],z=x[S-1+32],J=x[S-1+64],ie=x[S-1-32],se=x[S+0-32],ae=x[S+1-32],de=x[S+2-32],pe=x[S+3-32];x[S+0+96]=Kt(z,J,x[S-1+96]),x[S+1+96]=x[S+0+64]=Kt(L,z,J),x[S+2+96]=x[S+1+64]=x[S+0+32]=Kt(ie,L,z),x[S+3+96]=x[S+2+64]=x[S+1+32]=x[S+0+0]=Kt(se,ie,L),x[S+3+64]=x[S+2+32]=x[S+1+0]=Kt(ae,se,ie),x[S+3+32]=x[S+2+0]=Kt(de,ae,se),x[S+3+0]=Kt(pe,de,ae)}function Ps(x,S){var L=x[S+1-32],z=x[S+2-32],J=x[S+3-32],ie=x[S+4-32],se=x[S+5-32],ae=x[S+6-32],de=x[S+7-32];x[S+0+0]=Kt(x[S+0-32],L,z),x[S+1+0]=x[S+0+32]=Kt(L,z,J),x[S+2+0]=x[S+1+32]=x[S+0+64]=Kt(z,J,ie),x[S+3+0]=x[S+2+32]=x[S+1+64]=x[S+0+96]=Kt(J,ie,se),x[S+3+32]=x[S+2+64]=x[S+1+96]=Kt(ie,se,ae),x[S+3+64]=x[S+2+96]=Kt(se,ae,de),x[S+3+96]=Kt(ae,de,de)}function eo(x,S){var L=x[S-1+0],z=x[S-1+32],J=x[S-1+64],ie=x[S-1-32],se=x[S+0-32],ae=x[S+1-32],de=x[S+2-32],pe=x[S+3-32];x[S+0+0]=x[S+1+64]=ie+se+1>>1,x[S+1+0]=x[S+2+64]=se+ae+1>>1,x[S+2+0]=x[S+3+64]=ae+de+1>>1,x[S+3+0]=de+pe+1>>1,x[S+0+96]=Kt(J,z,L),x[S+0+64]=Kt(z,L,ie),x[S+0+32]=x[S+1+96]=Kt(L,ie,se),x[S+1+32]=x[S+2+96]=Kt(ie,se,ae),x[S+2+32]=x[S+3+96]=Kt(se,ae,de),x[S+3+32]=Kt(ae,de,pe)}function sa(x,S){var L=x[S+0-32],z=x[S+1-32],J=x[S+2-32],ie=x[S+3-32],se=x[S+4-32],ae=x[S+5-32],de=x[S+6-32],pe=x[S+7-32];x[S+0+0]=L+z+1>>1,x[S+1+0]=x[S+0+64]=z+J+1>>1,x[S+2+0]=x[S+1+64]=J+ie+1>>1,x[S+3+0]=x[S+2+64]=ie+se+1>>1,x[S+0+32]=Kt(L,z,J),x[S+1+32]=x[S+0+96]=Kt(z,J,ie),x[S+2+32]=x[S+1+96]=Kt(J,ie,se),x[S+3+32]=x[S+2+96]=Kt(ie,se,ae),x[S+3+64]=Kt(se,ae,de),x[S+3+96]=Kt(ae,de,pe)}function yl(x,S){var L=x[S-1+0],z=x[S-1+32],J=x[S-1+64],ie=x[S-1+96];x[S+0+0]=L+z+1>>1,x[S+2+0]=x[S+0+32]=z+J+1>>1,x[S+2+32]=x[S+0+64]=J+ie+1>>1,x[S+1+0]=Kt(L,z,J),x[S+3+0]=x[S+1+32]=Kt(z,J,ie),x[S+3+32]=x[S+1+64]=Kt(J,ie,ie),x[S+3+64]=x[S+2+64]=x[S+0+96]=x[S+1+96]=x[S+2+96]=x[S+3+96]=ie}function Lo(x,S){var L=x[S-1+0],z=x[S-1+32],J=x[S-1+64],ie=x[S-1+96],se=x[S-1-32],ae=x[S+0-32],de=x[S+1-32],pe=x[S+2-32];x[S+0+0]=x[S+2+32]=L+se+1>>1,x[S+0+32]=x[S+2+64]=z+L+1>>1,x[S+0+64]=x[S+2+96]=J+z+1>>1,x[S+0+96]=ie+J+1>>1,x[S+3+0]=Kt(ae,de,pe),x[S+2+0]=Kt(se,ae,de),x[S+1+0]=x[S+3+32]=Kt(L,se,ae),x[S+1+32]=x[S+3+64]=Kt(z,L,se),x[S+1+64]=x[S+3+96]=Kt(J,z,L),x[S+1+96]=Kt(ie,J,z)}function fd(x,S){var L;for(L=0;8>L;++L)n(x,S+32*L,x,S-32,8)}function aa(x,S){var L;for(L=0;8>L;++L)r(x,S,x[S-1],8),S+=32}function ys(x,S,L){var z;for(z=0;8>z;++z)r(S,L+32*z,x,8)}function to(x,S){var L,z=8;for(L=0;8>L;++L)z+=x[S+L-32]+x[S-1+32*L];ys(z>>4,x,S)}function mr(x,S){var L,z=4;for(L=0;8>L;++L)z+=x[S+L-32];ys(z>>3,x,S)}function Rn(x,S){var L,z=4;for(L=0;8>L;++L)z+=x[S-1+32*L];ys(z>>3,x,S)}function vl(x,S){ys(128,x,S)}function no(x,S,L){var z=x[S-L],J=x[S+0],ie=3*(J-z)+Hg[1020+x[S-2*L]-x[S+L]],se=wd[112+(ie+4>>3)];x[S-L]=Hr[255+z+wd[112+(ie+3>>3)]],x[S+0]=Hr[255+J-se]}function pd(x,S,L,z){var J=x[S+0],ie=x[S+L];return ao[255+x[S-2*L]-x[S-L]]>z||ao[255+ie-J]>z}function Xl(x,S,L,z){return 4*ao[255+x[S-L]-x[S+0]]+ao[255+x[S-2*L]-x[S+L]]<=z}function Jl(x,S,L,z,J){var ie=x[S-3*L],se=x[S-2*L],ae=x[S-L],de=x[S+0],pe=x[S+L],Se=x[S+2*L],Fe=x[S+3*L];return 4*ao[255+ae-de]+ao[255+se-pe]>z?0:ao[255+x[S-4*L]-ie]<=J&&ao[255+ie-se]<=J&&ao[255+se-ae]<=J&&ao[255+Fe-Se]<=J&&ao[255+Se-pe]<=J&&ao[255+pe-de]<=J}function La(x,S,L,z){var J=2*z+1;for(z=0;16>z;++z)Xl(x,S+z,L,J)&&no(x,S+z,L)}function vs(x,S,L,z){var J=2*z+1;for(z=0;16>z;++z)Xl(x,S+z*L,1,J)&&no(x,S+z*L,1)}function gr(x,S,L,z){var J;for(J=3;0<J;--J)La(x,S+=4*L,L,z)}function qh(x,S,L,z){var J;for(J=3;0<J;--J)vs(x,S+=4,L,z)}function bl(x,S,L,z,J,ie,se,ae){for(ie=2*ie+1;0<J--;){if(Jl(x,S,L,ie,se))if(pd(x,S,L,ae))no(x,S,L);else{var de=x,pe=S,Se=L,Fe=de[pe-2*Se],De=de[pe-Se],Le=de[pe+0],Ze=de[pe+Se],$e=de[pe+2*Se],Ee=27*(Ke=Hg[1020+3*(Le-De)+Hg[1020+Fe-Ze]])+63>>7,Ne=18*Ke+63>>7,Ke=9*Ke+63>>7;de[pe-3*Se]=Hr[255+de[pe-3*Se]+Ke],de[pe-2*Se]=Hr[255+Fe+Ne],de[pe-Se]=Hr[255+De+Ee],de[pe+0]=Hr[255+Le-Ee],de[pe+Se]=Hr[255+Ze-Ne],de[pe+2*Se]=Hr[255+$e-Ke]}S+=z}}function as(x,S,L,z,J,ie,se,ae){for(ie=2*ie+1;0<J--;){if(Jl(x,S,L,ie,se))if(pd(x,S,L,ae))no(x,S,L);else{var de=x,pe=S,Se=L,Fe=de[pe-Se],De=de[pe+0],Le=de[pe+Se],Ze=wd[112+(($e=3*(De-Fe))+4>>3)],$e=wd[112+($e+3>>3)],Ee=Ze+1>>1;de[pe-2*Se]=Hr[255+de[pe-2*Se]+Ee],de[pe-Se]=Hr[255+Fe+$e],de[pe+0]=Hr[255+De-Ze],de[pe+Se]=Hr[255+Le-Ee]}S+=z}}function _l(x,S,L,z,J,ie){bl(x,S,L,1,16,z,J,ie)}function Po(x,S,L,z,J,ie){bl(x,S,1,L,16,z,J,ie)}function Ju(x,S,L,z,J,ie){var se;for(se=3;0<se;--se)as(x,S+=4*L,L,1,16,z,J,ie)}function Zl(x,S,L,z,J,ie){var se;for(se=3;0<se;--se)as(x,S+=4,1,L,16,z,J,ie)}function Zu(x,S,L,z,J,ie,se,ae){bl(x,S,J,1,8,ie,se,ae),bl(L,z,J,1,8,ie,se,ae)}function md(x,S,L,z,J,ie,se,ae){bl(x,S,1,J,8,ie,se,ae),bl(L,z,1,J,8,ie,se,ae)}function eu(x,S,L,z,J,ie,se,ae){as(x,S+4*J,J,1,8,ie,se,ae),as(L,z+4*J,J,1,8,ie,se,ae)}function xl(x,S,L,z,J,ie,se,ae){as(x,S+4,1,J,8,ie,se,ae),as(L,z+4,1,J,8,ie,se,ae)}function tu(){this.ba=new qi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new hi,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ec(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function wl(){this.ua=0,this.Wa=new ve,this.vb=new ve,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new F}function $h(){this.xb=this.a=0,this.l=new Co,this.ca=new qi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new wl,this.ab=0,this.gc=a(4,nu),this.Oc=0}function Mo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Co,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Al(x,S,L,z,J,ie,se){for(x=x==null?0:x[S+0],S=0;S<se;++S)J[ie+S]=x+L[z+S]&255,x=J[ie+S]}function iu(x,S,L,z,J,ie,se){var ae;if(x==null)Al(null,null,L,z,J,ie,se);else for(ae=0;ae<se;++ae)J[ie+ae]=x[S+ae]+L[z+ae]&255}function bs(x,S,L,z,J,ie,se){if(x==null)Al(null,null,L,z,J,ie,se);else{var ae,de=x[S+0],pe=de,Se=de;for(ae=0;ae<se;++ae)pe=Se+(de=x[S+ae])-pe,Se=L[z+ae]+(-256&pe?0>pe?0:255:pe)&255,pe=de,J[ie+ae]=Se}}function tc(x,S,L,z){var J=S.width,ie=S.o;if(e(x!=null&&S!=null),0>L||0>=z||L+z>ie)return null;if(!x.Cc){if(x.ga==null){var se;if(x.ga=new Mo,(se=x.ga==null)||(se=S.width*S.o,e(x.Gb.length==0),x.Gb=s(se),x.Uc=0,x.Gb==null?se=0:(x.mb=x.Gb,x.nb=x.Uc,x.rc=null,se=1),se=!se),!se){se=x.ga;var ae=x.Fa,de=x.P,pe=x.qc,Se=x.mb,Fe=x.nb,De=de+1,Le=pe-1,Ze=se.l;if(e(ae!=null&&Se!=null&&S!=null),kl[0]=null,kl[1]=Al,kl[2]=iu,kl[3]=bs,se.ca=Se,se.tb=Fe,se.c=S.width,se.i=S.height,e(0<se.c&&0<se.i),1>=pe)S=0;else if(se.$a=ae[de+0]>>0&3,se.Z=ae[de+0]>>2&3,se.Lc=ae[de+0]>>4&3,de=ae[de+0]>>6&3,0>se.$a||1<se.$a||4<=se.Z||1<se.Lc||de)S=0;else if(Ze.put=Vt,Ze.ac=Fn,Ze.bc=Li,Ze.ma=se,Ze.width=S.width,Ze.height=S.height,Ze.Da=S.Da,Ze.v=S.v,Ze.va=S.va,Ze.j=S.j,Ze.o=S.o,se.$a)e:{e(se.$a==1),S=Ai();t:for(;;){if(S==null){S=0;break e}if(e(se!=null),se.mc=S,S.c=se.c,S.i=se.i,S.l=se.l,S.l.ma=se,S.l.width=se.c,S.l.height=se.i,S.a=0,ge(S.m,ae,De,Le),!Zn(se.c,se.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&Ls(S.s)?(se.ic=1,ae=S.c*S.i,S.Ta=null,S.Ua=0,S.V=s(ae),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(se.ic=0,S=So(S,se.c)),!S))break t;S=1;break e}se.mc=null,S=0}else S=Le>=se.c*se.i;se=!S}if(se)return null;x.ga.Lc!=1?x.Ga=0:z=ie-L}e(x.ga!=null),e(L+z<=ie);e:{if(S=(ae=x.ga).c,ie=ae.l.o,ae.$a==0){if(De=x.rc,Le=x.Vc,Ze=x.Fa,de=x.P+1+L*S,pe=x.mb,Se=x.nb+L*S,e(de<=x.P+x.qc),ae.Z!=0)for(e(kl[ae.Z]!=null),se=0;se<z;++se)kl[ae.Z](De,Le,Ze,de,pe,Se,S),De=pe,Le=Se,Se+=S,de+=S;else for(se=0;se<z;++se)n(pe,Se,Ze,de,S),De=pe,Le=Se,Se+=S,de+=S;x.rc=De,x.Vc=Le}else{if(e(ae.mc!=null),S=L+z,e((se=ae.mc)!=null),e(S<=se.i),se.C>=S)S=1;else if(ae.ic||Re(),ae.ic){ae=se.V,De=se.Ba,Le=se.c;var $e=se.i,Ee=(Ze=1,de=se.$/Le,pe=se.$%Le,Se=se.m,Fe=se.s,se.$),Ne=Le*$e,Ke=Le*S,et=Fe.wc,Qe=Ee<Ke?Qi(Fe,pe,de):null;e(Ee<=Ne),e(S<=$e),e(Ls(Fe));t:for(;;){for(;!Se.h&&Ee<Ke;){if(pe&et||(Qe=Qi(Fe,pe,de)),e(Qe!=null),ye(Se),256>($e=Pi(Qe.G[0],Qe.H[0],Se)))ae[De+Ee]=$e,++Ee,++pe>=Le&&(pe=0,++de<=S&&!(de%16)&&Tr(se,de));else{if(!(280>$e)){Ze=0;break t}$e=li($e-256,Se);var St,vt=Pi(Qe.G[4],Qe.H[4],Se);if(ye(Se),!(Ee>=(vt=ui(Le,vt=li(vt,Se)))&&Ne-Ee>=$e)){Ze=0;break t}for(St=0;St<$e;++St)ae[De+Ee+St]=ae[De+Ee+St-vt];for(Ee+=$e,pe+=$e;pe>=Le;)pe-=Le,++de<=S&&!(de%16)&&Tr(se,de);Ee<Ke&&pe&et&&(Qe=Qi(Fe,pe,de))}e(Se.h==he(Se))}Tr(se,de>S?S:de);break t}!Ze||Se.h&&Ee<Ne?(Ze=0,se.a=Se.h?5:3):se.$=Ee,S=Ze}else S=pr(se,se.V,se.Ba,se.c,se.i,S,To);if(!S){z=0;break e}}L+z>=ie&&(x.Cc=1),z=1}if(!z)return null;if(x.Cc&&((z=x.ga)!=null&&(z.mc=null),x.ga=null,0<x.Ga))return alert("todo:WebPDequantizeLevels"),null}return x.nb+L*J}function k(x,S,L,z,J,ie){for(;0<J--;){var se,ae=x,de=S+(L?1:0),pe=x,Se=S+(L?0:3);for(se=0;se<z;++se){var Fe=pe[Se+4*se];Fe!=255&&(Fe*=32897,ae[de+4*se+0]=ae[de+4*se+0]*Fe>>23,ae[de+4*se+1]=ae[de+4*se+1]*Fe>>23,ae[de+4*se+2]=ae[de+4*se+2]*Fe>>23)}S+=ie}}function Z(x,S,L,z,J){for(;0<z--;){var ie;for(ie=0;ie<L;++ie){var se=x[S+2*ie+0],ae=15&(pe=x[S+2*ie+1]),de=4369*ae,pe=(240&pe|pe>>4)*de>>16;x[S+2*ie+0]=(240&se|se>>4)*de>>16&240|(15&se|se<<4)*de>>16>>4&15,x[S+2*ie+1]=240&pe|ae}S+=J}}function be(x,S,L,z,J,ie,se,ae){var de,pe,Se=255;for(pe=0;pe<J;++pe){for(de=0;de<z;++de){var Fe=x[S+de];ie[se+4*de]=Fe,Se&=Fe}S+=L,se+=ae}return Se!=255}function we(x,S,L,z,J){var ie;for(ie=0;ie<J;++ie)L[z+ie]=x[S+ie]>>8}function Re(){Pa=k,Nn=Z,kn=be,Ti=we}function Ge(x,S,L){P[x]=function(z,J,ie,se,ae,de,pe,Se,Fe,De,Le,Ze,$e,Ee,Ne,Ke,et){var Qe,St=et-1>>1,vt=ae[de+0]|pe[Se+0]<<16,Bt=Fe[De+0]|Le[Ze+0]<<16;e(z!=null);var _t=3*vt+Bt+131074>>2;for(S(z[J+0],255&_t,_t>>16,$e,Ee),ie!=null&&(_t=3*Bt+vt+131074>>2,S(ie[se+0],255&_t,_t>>16,Ne,Ke)),Qe=1;Qe<=St;++Qe){var Hn=ae[de+Qe]|pe[Se+Qe]<<16,ni=Fe[De+Qe]|Le[Ze+Qe]<<16,Tn=vt+Hn+Bt+ni+524296,An=Tn+2*(Hn+Bt)>>3;_t=An+vt>>1,vt=(Tn=Tn+2*(vt+ni)>>3)+Hn>>1,S(z[J+2*Qe-1],255&_t,_t>>16,$e,Ee+(2*Qe-1)*L),S(z[J+2*Qe-0],255&vt,vt>>16,$e,Ee+(2*Qe-0)*L),ie!=null&&(_t=Tn+Bt>>1,vt=An+ni>>1,S(ie[se+2*Qe-1],255&_t,_t>>16,Ne,Ke+(2*Qe-1)*L),S(ie[se+2*Qe+0],255&vt,vt>>16,Ne,Ke+(2*Qe+0)*L)),vt=Hn,Bt=ni}1&et||(_t=3*vt+Bt+131074>>2,S(z[J+et-1],255&_t,_t>>16,$e,Ee+(et-1)*L),ie!=null&&(_t=3*Bt+vt+131074>>2,S(ie[se+et-1],255&_t,_t>>16,Ne,Ke+(et-1)*L)))}}function at(){Gr[_s]=hu,Gr[Wh]=Il,Gr[Cl]=mc,Gr[Up]=Kg,Gr[Ad]=Wg,Gr[ou]=Jh,Gr[Gg]=Qg,Gr[zp]=Il,Gr[fc]=Kg,Gr[lu]=Wg,Gr[Qh]=Jh}function bt(x){return x&-16384?0>x?0:255:x>>D5}function w(x,S){return bt((19077*x>>8)+(26149*S>>8)-14234)}function M(x,S,L){return bt((19077*x>>8)-(6419*S>>8)-(13320*L>>8)+8708)}function $(x,S){return bt((19077*x>>8)+(33050*S>>8)-17685)}function oe(x,S,L,z,J){z[J+0]=w(x,L),z[J+1]=M(x,S,L),z[J+2]=$(x,S)}function ke(x,S,L,z,J){z[J+0]=$(x,S),z[J+1]=M(x,S,L),z[J+2]=w(x,L)}function Be(x,S,L,z,J){var ie=M(x,S,L);S=ie<<3&224|$(x,S)>>3,z[J+0]=248&w(x,L)|ie>>5,z[J+1]=S}function ot(x,S,L,z,J){var ie=240&$(x,S)|15;z[J+0]=240&w(x,L)|M(x,S,L)>>4,z[J+1]=ie}function Wt(x,S,L,z,J){z[J+0]=255,oe(x,S,L,z,J+1)}function Ln(x,S,L,z,J){ke(x,S,L,z,J),z[J+3]=255}function cn(x,S,L,z,J){oe(x,S,L,z,J),z[J+3]=255}function ti(x,S){return 0>x?0:x>S?S:x}function fi(x,S,L){P[x]=function(z,J,ie,se,ae,de,pe,Se,Fe){for(var De=Se+(-2&Fe)*L;Se!=De;)S(z[J+0],ie[se+0],ae[de+0],pe,Se),S(z[J+1],ie[se+0],ae[de+0],pe,Se+L),J+=2,++se,++de,Se+=2*L;1&Fe&&S(z[J+0],ie[se+0],ae[de+0],pe,Se)}}function io(x,S,L){return L==0?x==0?S==0?6:5:S==0?4:0:L}function rr(x,S,L,z,J){switch(x>>>30){case 3:Oo(S,L,z,J,0);break;case 2:Xi(S,L,z,J);break;case 1:yr(S,L,z,J)}}function oa(x,S){var L,z,J=S.M,ie=S.Nb,se=x.oc,ae=x.pc+40,de=x.oc,pe=x.pc+584,Se=x.oc,Fe=x.pc+600;for(L=0;16>L;++L)se[ae+32*L-1]=129;for(L=0;8>L;++L)de[pe+32*L-1]=129,Se[Fe+32*L-1]=129;for(0<J?se[ae-1-32]=de[pe-1-32]=Se[Fe-1-32]=129:(r(se,ae-32-1,127,21),r(de,pe-32-1,127,9),r(Se,Fe-32-1,127,9)),z=0;z<x.za;++z){var De=S.ya[S.aa+z];if(0<z){for(L=-1;16>L;++L)n(se,ae+32*L-4,se,ae+32*L+12,4);for(L=-1;8>L;++L)n(de,pe+32*L-4,de,pe+32*L+4,4),n(Se,Fe+32*L-4,Se,Fe+32*L+4,4)}var Le=x.Gd,Ze=x.Hd+z,$e=De.ad,Ee=De.Hc;if(0<J&&(n(se,ae-32,Le[Ze].y,0,16),n(de,pe-32,Le[Ze].f,0,8),n(Se,Fe-32,Le[Ze].ea,0,8)),De.Za){var Ne=se,Ke=ae-32+16;for(0<J&&(z>=x.za-1?r(Ne,Ke,Le[Ze].y[15],4):n(Ne,Ke,Le[Ze+1].y,0,4)),L=0;4>L;L++)Ne[Ke+128+L]=Ne[Ke+256+L]=Ne[Ke+384+L]=Ne[Ke+0+L];for(L=0;16>L;++L,Ee<<=2)Ne=se,Ke=ae+Cd[L],Ds[De.Ob[L]](Ne,Ke),rr(Ee,$e,16*+L,Ne,Ke)}else if(Ne=io(z,J,De.Ob[0]),du[Ne](se,ae),Ee!=0)for(L=0;16>L;++L,Ee<<=2)rr(Ee,$e,16*+L,se,ae+Cd[L]);for(L=De.Gc,Ne=io(z,J,De.Dd),Da[Ne](de,pe),Da[Ne](Se,Fe),Ee=$e,Ne=de,Ke=pe,255&(De=L>>0)&&(170&De?Fo(Ee,256,Ne,Ke):ca(Ee,256,Ne,Ke)),De=Se,Ee=Fe,255&(L>>=8)&&(170&L?Fo($e,320,De,Ee):ca($e,320,De,Ee)),J<x.Ub-1&&(n(Le[Ze].y,0,se,ae+480,16),n(Le[Ze].f,0,de,pe+224,8),n(Le[Ze].ea,0,Se,Fe+224,8)),L=8*ie*x.B,Le=x.sa,Ze=x.ta+16*z+16*ie*x.R,$e=x.qa,De=x.ra+8*z+L,Ee=x.Ha,Ne=x.Ia+8*z+L,L=0;16>L;++L)n(Le,Ze+L*x.R,se,ae+32*L,16);for(L=0;8>L;++L)n($e,De+L*x.B,de,pe+32*L,8),n(Ee,Ne+L*x.B,Se,Fe+32*L,8)}}function Sl(x,S,L,z,J,ie,se,ae,de){var pe=[0],Se=[0],Fe=0,De=de!=null?de.kd:0,Le=de??new ec;if(x==null||12>L)return 7;Le.data=x,Le.w=S,Le.ha=L,S=[S],L=[L],Le.gb=[Le.gb];e:{var Ze=S,$e=L,Ee=Le.gb;if(e(x!=null),e($e!=null),e(Ee!=null),Ee[0]=0,12<=$e[0]&&!t(x,Ze[0],"RIFF")){if(t(x,Ze[0]+8,"WEBP")){Ee=3;break e}var Ne=Xe(x,Ze[0]+4);if(12>Ne||4294967286<Ne){Ee=3;break e}if(De&&Ne>$e[0]-8){Ee=7;break e}Ee[0]=Ne,Ze[0]+=12,$e[0]-=12}Ee=0}if(Ee!=0)return Ee;for(Ne=0<Le.gb[0],L=L[0];;){e:{var Ke=x;$e=S,Ee=L;var et=pe,Qe=Se,St=Ze=[0];if((_t=Fe=[Fe])[0]=0,8>Ee[0])Ee=7;else{if(!t(Ke,$e[0],"VP8X")){if(Xe(Ke,$e[0]+4)!=10){Ee=3;break e}if(18>Ee[0]){Ee=7;break e}var vt=Xe(Ke,$e[0]+8),Bt=1+Ye(Ke,$e[0]+12);if(2147483648<=Bt*(Ke=1+Ye(Ke,$e[0]+15))){Ee=3;break e}St!=null&&(St[0]=vt),et!=null&&(et[0]=Bt),Qe!=null&&(Qe[0]=Ke),$e[0]+=18,Ee[0]-=18,_t[0]=1}Ee=0}}if(Fe=Fe[0],Ze=Ze[0],Ee!=0)return Ee;if($e=!!(2&Ze),!Ne&&Fe)return 3;if(ie!=null&&(ie[0]=!!(16&Ze)),se!=null&&(se[0]=$e),ae!=null&&(ae[0]=0),se=pe[0],Ze=Se[0],Fe&&$e&&de==null){Ee=0;break}if(4>L){Ee=7;break}if(Ne&&Fe||!Ne&&!Fe&&!t(x,S[0],"ALPH")){L=[L],Le.na=[Le.na],Le.P=[Le.P],Le.Sa=[Le.Sa];e:{vt=x,Ee=S,Ne=L;var _t=Le.gb;et=Le.na,Qe=Le.P,St=Le.Sa,Bt=22,e(vt!=null),e(Ne!=null),Ke=Ee[0];var Hn=Ne[0];for(e(et!=null),e(St!=null),et[0]=null,Qe[0]=null,St[0]=0;;){if(Ee[0]=Ke,Ne[0]=Hn,8>Hn){Ee=7;break e}var ni=Xe(vt,Ke+4);if(4294967286<ni){Ee=3;break e}var Tn=8+ni+1&-2;if(Bt+=Tn,0<_t&&Bt>_t){Ee=3;break e}if(!t(vt,Ke,"VP8 ")||!t(vt,Ke,"VP8L")){Ee=0;break e}if(Hn[0]<Tn){Ee=7;break e}t(vt,Ke,"ALPH")||(et[0]=vt,Qe[0]=Ke+8,St[0]=ni),Ke+=Tn,Hn-=Tn}}if(L=L[0],Le.na=Le.na[0],Le.P=Le.P[0],Le.Sa=Le.Sa[0],Ee!=0)break}L=[L],Le.Ja=[Le.Ja],Le.xa=[Le.xa];e:if(_t=x,Ee=S,Ne=L,et=Le.gb[0],Qe=Le.Ja,St=Le.xa,vt=Ee[0],Ke=!t(_t,vt,"VP8 "),Bt=!t(_t,vt,"VP8L"),e(_t!=null),e(Ne!=null),e(Qe!=null),e(St!=null),8>Ne[0])Ee=7;else{if(Ke||Bt){if(_t=Xe(_t,vt+4),12<=et&&_t>et-12){Ee=3;break e}if(De&&_t>Ne[0]-8){Ee=7;break e}Qe[0]=_t,Ee[0]+=8,Ne[0]-=8,St[0]=Bt}else St[0]=5<=Ne[0]&&_t[vt+0]==47&&!(_t[vt+4]>>5),Qe[0]=Ne[0];Ee=0}if(L=L[0],Le.Ja=Le.Ja[0],Le.xa=Le.xa[0],S=S[0],Ee!=0)break;if(4294967286<Le.Ja)return 3;if(ae==null||$e||(ae[0]=Le.xa?2:1),se=[se],Ze=[Ze],Le.xa){if(5>L){Ee=7;break}ae=se,De=Ze,$e=ie,x==null||5>L?x=0:5<=L&&x[S+0]==47&&!(x[S+4]>>5)?(Ne=[0],_t=[0],et=[0],ge(Qe=new q,x,S,L),wt(Qe,Ne,_t,et)?(ae!=null&&(ae[0]=Ne[0]),De!=null&&(De[0]=_t[0]),$e!=null&&($e[0]=et[0]),x=1):x=0):x=0}else{if(10>L){Ee=7;break}ae=Ze,x==null||10>L||!qr(x,S+3,L-3)?x=0:(De=x[S+0]|x[S+1]<<8|x[S+2]<<16,$e=16383&(x[S+7]<<8|x[S+6]),x=16383&(x[S+9]<<8|x[S+8]),1&De||3<(De>>1&7)||!(De>>4&1)||De>>5>=Le.Ja||!$e||!x?x=0:(se&&(se[0]=$e),ae&&(ae[0]=x),x=1))}if(!x||(se=se[0],Ze=Ze[0],Fe&&(pe[0]!=se||Se[0]!=Ze)))return 3;de!=null&&(de[0]=Le,de.offset=S-de.w,e(4294967286>S-de.w),e(de.offset==de.ha-L));break}return Ee==0||Ee==7&&Fe&&de==null?(ie!=null&&(ie[0]|=Le.na!=null&&0<Le.na.length),z!=null&&(z[0]=se),J!=null&&(J[0]=Ze),0):Ee}function nc(x,S,L){var z=S.width,J=S.height,ie=0,se=0,ae=z,de=J;if(S.Da=x!=null&&0<x.Da,S.Da&&(ae=x.cd,de=x.bd,ie=x.v,se=x.j,11>L||(ie&=-2,se&=-2),0>ie||0>se||0>=ae||0>=de||ie+ae>z||se+de>J))return 0;if(S.v=ie,S.j=se,S.va=ie+ae,S.o=se+de,S.U=ae,S.T=de,S.da=x!=null&&0<x.da,S.da){if(!ct(ae,de,L=[x.ib],ie=[x.hb]))return 0;S.ib=L[0],S.hb=ie[0]}return S.ob=x!=null&&x.ob,S.Kb=x==null||!x.Sd,S.da&&(S.ob=S.ib<3*z/4&&S.hb<3*J/4,S.Kb=0),1}function Hh(x){if(x==null)return 2;if(11>x.S){var S=x.f.RGBA;S.fb+=(x.height-1)*S.A,S.A=-S.A}else S=x.f.kb,x=x.height,S.O+=(x-1)*S.fa,S.fa=-S.fa,S.N+=(x-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(x-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(x-1)*S.lb,S.lb=-S.lb);return 0}function gd(x,S,L,z){if(z==null||0>=x||0>=S)return 2;if(L!=null){if(L.Da){var J=L.cd,ie=L.bd,se=-2&L.v,ae=-2&L.j;if(0>se||0>ae||0>=J||0>=ie||se+J>x||ae+ie>S)return 2;x=J,S=ie}if(L.da){if(!ct(x,S,J=[L.ib],ie=[L.hb]))return 2;x=J[0],S=ie[0]}}z.width=x,z.height=S;e:{var de=z.width,pe=z.height;if(x=z.S,0>=de||0>=pe||!(x>=_s&&13>x))x=2;else{if(0>=z.Rd&&z.sd==null){se=ie=J=S=0;var Se=(ae=de*F2[x])*pe;if(11>x||(ie=(pe+1)/2*(S=(de+1)/2),x==12&&(se=(J=de)*pe)),(pe=s(Se+2*ie+se))==null){x=1;break e}z.sd=pe,11>x?((de=z.f.RGBA).eb=pe,de.fb=0,de.A=ae,de.size=Se):((de=z.f.kb).y=pe,de.O=0,de.fa=ae,de.Fd=Se,de.f=pe,de.N=0+Se,de.Ab=S,de.Cd=ie,de.ea=pe,de.W=0+Se+ie,de.Db=S,de.Ed=ie,x==12&&(de.F=pe,de.J=0+Se+2*ie),de.Tc=se,de.lb=J)}if(S=1,J=z.S,ie=z.width,se=z.height,J>=_s&&13>J)if(11>J)x=z.f.RGBA,S&=(ae=Math.abs(x.A))*(se-1)+ie<=x.size,S&=ae>=ie*F2[J],S&=x.eb!=null;else{x=z.f.kb,ae=(ie+1)/2,Se=(se+1)/2,de=Math.abs(x.fa),pe=Math.abs(x.Ab);var Fe=Math.abs(x.Db),De=Math.abs(x.lb),Le=De*(se-1)+ie;S&=de*(se-1)+ie<=x.Fd,S&=pe*(Se-1)+ae<=x.Cd,S=(S&=Fe*(Se-1)+ae<=x.Ed)&de>=ie&pe>=ae&Fe>=ae,S&=x.y!=null,S&=x.f!=null,S&=x.ea!=null,J==12&&(S&=De>=ie,S&=Le<=x.Tc,S&=x.F!=null)}else S=0;x=S?0:2}}return x!=0||L!=null&&L.fd&&(x=Hh(z)),x}var Nr=64,ic=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],yd=24,vd=32,Gh=8,la=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(x){return x},P.Predictor2=function(x,S,L){return S[L+0]},P.Predictor3=function(x,S,L){return S[L+1]},P.Predictor4=function(x,S,L){return S[L-1]},P.Predictor5=function(x,S,L){return yt(yt(x,S[L+1]),S[L+0])},P.Predictor6=function(x,S,L){return yt(x,S[L-1])},P.Predictor7=function(x,S,L){return yt(x,S[L+0])},P.Predictor8=function(x,S,L){return yt(S[L-1],S[L+0])},P.Predictor9=function(x,S,L){return yt(S[L+0],S[L+1])},P.Predictor10=function(x,S,L){return yt(yt(x,S[L-1]),yt(S[L+0],S[L+1]))},P.Predictor11=function(x,S,L){var z=S[L+0];return 0>=nn(z>>24&255,x>>24&255,(S=S[L-1])>>24&255)+nn(z>>16&255,x>>16&255,S>>16&255)+nn(z>>8&255,x>>8&255,S>>8&255)+nn(255&z,255&x,255&S)?z:x},P.Predictor12=function(x,S,L){var z=S[L+0];return(It((x>>24&255)+(z>>24&255)-((S=S[L-1])>>24&255))<<24|It((x>>16&255)+(z>>16&255)-(S>>16&255))<<16|It((x>>8&255)+(z>>8&255)-(S>>8&255))<<8|It((255&x)+(255&z)-(255&S)))>>>0},P.Predictor13=function(x,S,L){var z=S[L-1];return(Gt((x=yt(x,S[L+0]))>>24&255,z>>24&255)<<24|Gt(x>>16&255,z>>16&255)<<16|Gt(x>>8&255,z>>8&255)<<8|Gt(x>>0&255,z>>0&255))>>>0};var Dv=P.PredictorAdd0;P.PredictorAdd1=Dt,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var Vp=P.PredictorAdd2;gn("ColorIndexInverseTransform","MapARGB","32b",function(x){return x>>8&255},function(x){return x}),gn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(x){return x},function(x){return x>>8&255});var $g,ro=P.ColorIndexInverseTransform,$r=P.MapARGB,rc=P.VP8LColorIndexInverseTransformAlpha,Bp=P.MapAlpha,ru=P.VP8LPredictorsAdd=[];ru.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var sc,Ms,os,ac,ua,Do,Tl,Oo,Xi,Fo,yr,ca,bd,El,Yh,oc,lc,uc,_d,Kh,cc,su,xd,Ji,Pa,Nn,kn,Ti,sr=s(511),so=s(2041),dc=s(225),hc=s(767),au=0,Hg=so,wd=dc,Hr=hc,ao=sr,_s=0,Wh=1,Cl=2,Up=3,Ad=4,ou=5,Gg=6,zp=7,fc=8,lu=9,Qh=10,Yg=[2,3,7],oo=[3,3,11],Ma=[280,256,256,256,40],Sd=[0,1,1,1,0],uu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],cu=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Td=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],L2=8,jp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],qp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],kr=null,Zi=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Qn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],pc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Nl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ov=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ed=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],P2=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],du=[],Ds=[],Da=[],M2=1,Xh=2,kl=[],Gr=[];Ge("UpsampleRgbLinePair",oe,3),Ge("UpsampleBgrLinePair",ke,3),Ge("UpsampleRgbaLinePair",cn,4),Ge("UpsampleBgraLinePair",Ln,4),Ge("UpsampleArgbLinePair",Wt,4),Ge("UpsampleRgba4444LinePair",ot,2),Ge("UpsampleRgb565LinePair",Be,2);var hu=P.UpsampleRgbLinePair,mc=P.UpsampleBgrLinePair,Il=P.UpsampleRgbaLinePair,Kg=P.UpsampleBgraLinePair,Wg=P.UpsampleArgbLinePair,Jh=P.UpsampleRgba4444LinePair,Qg=P.UpsampleRgb565LinePair,Rl=16,Ir=1<<Rl-1,gc=-227,Xg=482,D5=6,D2=0,O5=s(256),Rr=s(256),Fv=s(256),$p=s(256),Hp=s(Xg-gc),Vv=s(Xg-gc);fi("YuvToRgbRow",oe,3),fi("YuvToBgrRow",ke,3),fi("YuvToRgbaRow",cn,4),fi("YuvToBgraRow",Ln,4),fi("YuvToArgbRow",Wt,4),fi("YuvToRgba4444Row",ot,2),fi("YuvToRgb565Row",Be,2);var Cd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fu=[0,2,8],F5=[8,7,6,4,4,2,2,2,1,1,1,1],O2=1;this.WebPDecodeRGBA=function(x,S,L,z,J){var ie=Wh,se=new tu,ae=new qi;se.ba=ae,ae.S=ie,ae.width=[ae.width],ae.height=[ae.height];var de=ae.width,pe=ae.height,Se=new hr;if(Se==null||x==null)var Fe=2;else e(Se!=null),Fe=Sl(x,S,L,Se.width,Se.height,Se.Pd,Se.Qd,Se.format,null);if(Fe!=0?de=0:(de!=null&&(de[0]=Se.width[0]),pe!=null&&(pe[0]=Se.height[0]),de=1),de){ae.width=ae.width[0],ae.height=ae.height[0],z!=null&&(z[0]=ae.width),J!=null&&(J[0]=ae.height);e:{if(z=new Co,(J=new ec).data=x,J.w=S,J.ha=L,J.kd=1,S=[0],e(J!=null),((x=Sl(J.data,J.w,J.ha,null,null,null,S,null,J))==0||x==7)&&S[0]&&(x=4),(S=x)==0){if(e(se!=null),z.data=J.data,z.w=J.w+J.offset,z.ha=J.ha-J.offset,z.put=Vt,z.ac=Fn,z.bc=Li,z.ma=se,J.xa){if((x=Ai())==null){se=1;break e}if(function(De,Le){var Ze=[0],$e=[0],Ee=[0];t:for(;;){if(De==null)return 0;if(Le==null)return De.a=2,0;if(De.l=Le,De.a=0,ge(De.m,Le.data,Le.w,Le.ha),!wt(De.m,Ze,$e,Ee)){De.a=3;break t}if(De.xb=Xh,Le.width=Ze[0],Le.height=$e[0],!Zn(Ze[0],$e[0],1,De,null))break t;return 1}return e(De.a!=0),0}(x,z)){if(z=(S=gd(z.width,z.height,se.Oa,se.ba))==0){t:{z=x;n:for(;;){if(z==null){z=0;break t}if(e(z.s.yc!=null),e(z.s.Ya!=null),e(0<z.s.Wb),e((L=z.l)!=null),e((J=L.ma)!=null),z.xb!=0){if(z.ca=J.ba,z.tb=J.tb,e(z.ca!=null),!nc(J.Oa,L,Up)){z.a=2;break n}if(!So(z,L.width)||L.da)break n;if((L.da||In(z.ca.S))&&Re(),11>z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),z.ca.f.kb.F!=null&&Re()),z.Pb&&0<z.s.ua&&z.s.vb.X==null&&!pt(z.s.vb,z.s.Wa.Xa)){z.a=1;break n}z.xb=0}if(!pr(z,z.V,z.Ba,z.c,z.i,L.o,Kl))break n;J.Dc=z.Ma,z=1;break t}e(z.a!=0),z=0}z=!z}z&&(S=x.a)}else S=x.a}else{if((x=new ud)==null){se=1;break e}if(x.Fa=J.na,x.P=J.P,x.qc=J.Sa,Wu(x,z)){if((S=gd(z.width,z.height,se.Oa,se.ba))==0){if(x.Aa=0,L=se.Oa,e((J=x)!=null),L!=null){if(0<(de=0>(de=L.Md)?0:100<de?255:255*de/100)){for(pe=Se=0;4>pe;++pe)12>(Fe=J.pb[pe]).lc&&(Fe.ia=de*F5[0>Fe.lc?0:Fe.lc]>>3),Se|=Fe.ia;Se&&(alert("todo:VP8InitRandom"),J.ia=1)}J.Ga=L.Id,100<J.Ga?J.Ga=100:0>J.Ga&&(J.Ga=0)}cd(x,z)||(S=x.a)}}else S=x.a}S==0&&se.Oa!=null&&se.Oa.fd&&(S=Hh(se.ba))}se=S}ie=se!=0?null:11>ie?ae.f.RGBA.eb:ae.f.kb.y}else ie=null;return ie};var F2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(P,V){for(var Y="",O=0;O<4;O++)Y+=String.fromCharCode(P[V++]);return Y}function f(P,V){return(P[V+0]<<0|P[V+1]<<8|P[V+2]<<16)>>>0}function p(P,V){return(P[V+0]<<0|P[V+1]<<8|P[V+2]<<16|P[V+3]<<24)>>>0}new u;var y=[0],v=[0],C=[],E=new u,R=i,I=function(P,V){var Y={},O=0,F=!1,B=0,H=0;if(Y.frames=[],!function(ee,he,me,ye){for(var Ae=0;Ae<ye;Ae++)if(ee[he+Ae]!=me.charCodeAt(Ae))return!0;return!1}(P,V,"RIFF",4)){for(p(P,V+=4),V+=8;V<P.length;){var fe=d(P,V),Q=p(P,V+=4);V+=4;var ce=Q+(1&Q);switch(fe){case"VP8 ":case"VP8L":Y.frames[O]===void 0&&(Y.frames[O]={}),(re=Y.frames[O]).src_off=F?H:V-8,re.src_size=B+Q+8,O++,F&&(F=!1,B=0,H=0);break;case"VP8X":(re=Y.header={}).feature_flags=P[V];var ge=V+4;re.canvas_width=1+f(P,ge),ge+=3,re.canvas_height=1+f(P,ge),ge+=3;break;case"ALPH":F=!0,B=ce+8,H=V-8;break;case"ANIM":(re=Y.header).bgcolor=p(P,V),ge=V+4,re.loop_count=(xe=P)[(q=ge)+0]<<0|xe[q+1]<<8,ge+=2;break;case"ANMF":var Te,re;(re=Y.frames[O]={}).offset_x=2*f(P,V),V+=3,re.offset_y=2*f(P,V),V+=3,re.width=1+f(P,V),V+=3,re.height=1+f(P,V),V+=3,re.duration=f(P,V),V+=3,Te=P[V++],re.dispose=1&Te,re.blend=Te>>1&1}fe!="ANMF"&&(V+=ce)}var xe,q;return Y}}(R,0);I.response=R,I.rgbaoutput=!0,I.dataurl=!1;var D=I.header?I.header:null,j=I.frames?I.frames:null;if(D){D.loop_counter=D.loop_count,y=[D.canvas_height],v=[D.canvas_width];for(var X=0;X<j.length&&j[X].blend!=0;X++);}var W=j[0],ue=E.WebPDecodeRGBA(R,W.src_off,W.src_size,v,y);W.rgba=ue,W.imgwidth=v[0],W.imgheight=y[0];for(var U=0;U<v[0]*y[0]*4;U++)C[U]=ue[U];return this.width=v,this.height=y,this.data=C,this}(function(i){var e=function(){return typeof iC=="function"},t=function(y,v,C,E){var R=4,I=a;switch(E){case i.image_compression.FAST:R=1,I=s;break;case i.image_compression.MEDIUM:R=6,I=l;break;case i.image_compression.SLOW:R=9,I=u}y=n(y,v,C,I);var D=iC(y,{level:R});return i.__addimage__.arrayBufferToBinaryString(D)},n=function(y,v,C,E){for(var R,I,D,j=y.length/v,X=new Uint8Array(y.length+j),W=f(),ue=0;ue<j;ue+=1){if(D=ue*v,R=y.subarray(D,D+v),E)X.set(E(R,C,I),D+ue);else{for(var U,P=W.length,V=[];U<P;U+=1)V[U]=W[U](R,C,I);var Y=p(V.concat());X.set(V[Y],D+ue)}I=R}return X},r=function(y){var v=Array.apply([],y);return v.unshift(0),v},s=function(y,v){var C,E=[],R=y.length;E[0]=1;for(var I=0;I<R;I+=1)C=y[I-v]||0,E[I+1]=y[I]-C+256&255;return E},a=function(y,v,C){var E,R=[],I=y.length;R[0]=2;for(var D=0;D<I;D+=1)E=C&&C[D]||0,R[D+1]=y[D]-E+256&255;return R},l=function(y,v,C){var E,R,I=[],D=y.length;I[0]=3;for(var j=0;j<D;j+=1)E=y[j-v]||0,R=C&&C[j]||0,I[j+1]=y[j]+256-(E+R>>>1)&255;return I},u=function(y,v,C){var E,R,I,D,j=[],X=y.length;j[0]=4;for(var W=0;W<X;W+=1)E=y[W-v]||0,R=C&&C[W]||0,I=C&&C[W-v]||0,D=d(E,R,I),j[W+1]=y[W]-D+256&255;return j},d=function(y,v,C){if(y===v&&v===C)return y;var E=Math.abs(v-C),R=Math.abs(y-C),I=Math.abs(y+v-C-C);return E<=R&&E<=I?y:R<=I?v:C},f=function(){return[r,s,a,l,u]},p=function(y){var v=y.map(function(C){return C.reduce(function(E,R){return E+Math.abs(R)},0)});return v.indexOf(Math.min.apply(null,v))};i.processPNG=function(y,v,C,E){var R,I,D,j,X,W,ue,U,P,V,Y,O,F,B,H,fe=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(D=new gj(y)).imgData,I=D.bits,R=D.colorSpace,X=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){P=(U=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,Y=new Uint8Array(P*D.colors),V=new Uint8Array(P);var ce,ge=D.pixelBitlength-D.bits;for(B=0,H=0;B<P;B++){for(F=U[B],ce=0;ce<ge;)Y[H++]=F>>>ce&255,ce+=D.bits;V[B]=F>>>ce&255}}if(D.bits===16){P=(U=new Uint32Array(D.decodePixels().buffer)).length,Y=new Uint8Array(P*(32/D.pixelBitlength)*D.colors),V=new Uint8Array(P*(32/D.pixelBitlength)),O=D.colors>1,B=0,H=0;for(var Te=0;B<P;)F=U[B++],Y[H++]=F>>>0&255,O&&(Y[H++]=F>>>16&255,F=U[B++],Y[H++]=F>>>0&255),V[Te++]=F>>>16&255;I=8}E!==i.image_compression.NONE&&e()?(y=t(Y,D.width*D.colors,D.colors,E),ue=t(V,D.width,1,E)):(y=Y,ue=V,fe=void 0)}if(D.colorType===3&&(R=this.color_spaces.INDEXED,W=D.palette,D.transparency.indexed)){var re=D.transparency.indexed,xe=0;for(B=0,P=re.length;B<P;++B)xe+=re[B];if((xe/=255)===P-1&&re.indexOf(0)!==-1)j=[re.indexOf(0)];else if(xe!==P){for(U=D.decodePixels(),V=new Uint8Array(U.length),B=0,P=U.length;B<P;B++)V[B]=re[U[B]];ue=t(V,D.width,1)}}var q=function(ee){var he;switch(ee){case i.image_compression.FAST:he=11;break;case i.image_compression.MEDIUM:he=13;break;case i.image_compression.SLOW:he=14;break;default:he=12}return he}(E);return fe===this.decode.FLATE_DECODE&&(Q="/Predictor "+q+" "),Q+="/Colors "+X+" /BitsPerComponent "+I+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(ue&&this.__addimage__.isArrayBuffer(ue)||this.__addimage__.isArrayBufferView(ue))&&(ue=this.__addimage__.arrayBufferToBinaryString(ue)),{alias:C,data:y,index:v,filter:fe,decodeParameters:Q,transparency:j,palette:W,sMask:ue,predictor:q,width:D.width,height:D.height,bitsPerComponent:I,colorSpace:R}}}})(Zt.API),function(i){i.processGIF89A=function(e,t,n,r){var s=new yj(e),a=s.width,l=s.height,u=[];s.decodeAndBlitFrameRGBA(0,u);var d={data:u,width:a,height:l},f=new hT(100).encode(d,100);return i.processJPEG.call(this,f,t,n,r)},i.processGIF87A=i.processGIF89A}(Zt.API),xu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var e=0;e<i;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:n,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xu.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[i]()}catch(t){Di.log("bit decode error:"+t)}},xu.prototype.bit1=function(){var i,e=Math.ceil(this.width/8),t=e%4;for(i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,r=0;r<e;r++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*r*4,l=0;l<8&&8*r+l<this.width;l++){var u=this.palette[s>>7-l&1];this.data[a+4*l]=u.blue,this.data[a+4*l+1]=u.green,this.data[a+4*l+2]=u.red,this.data[a+4*l+3]=255}t!==0&&(this.pos+=4-t)}},xu.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),e=i%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<i;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*r*4,l=s>>4,u=15&s,d=this.palette[l];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*r+1>=this.width)break;d=this.palette[u],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},xu.prototype.bit8=function(){for(var i=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;if(r<this.palette.length){var a=this.palette[r];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}i!==0&&(this.pos+=4-i)}},xu.prototype.bit15=function(){for(var i=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,u=(s>>10&e)/e*255|0,d=s>>15?255:0,f=n*this.width*4+4*r;this.data[f]=u,this.data[f+1]=l,this.data[f+2]=a,this.data[f+3]=d}this.pos+=i}},xu.prototype.bit16=function(){for(var i=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&e)/e*255|0,u=(a>>5&t)/t*255|0,d=(a>>11)/e*255|0,f=r*this.width*4+4*s;this.data[f]=d,this.data[f+1]=u,this.data[f+2]=l,this.data[f+3]=255}this.pos+=i}},xu.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},xu.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=s,this.data[l+1]=r,this.data[l+2]=n,this.data[l+3]=a}},xu.prototype.getData=function(){return this.data},function(i){i.processBMP=function(e,t,n,r){var s=new xu(e,!1),a=s.width,l=s.height,u={data:s.getData(),width:a,height:l},d=new hT(100).encode(u,100);return i.processJPEG.call(this,d,t,n,r)}}(Zt.API),B3.prototype.getData=function(){return this.data},function(i){i.processWEBP=function(e,t,n,r){var s=new B3(e),a=s.width,l=s.height,u={data:s.getData(),width:a,height:l},d=new hT(100).encode(u,100);return i.processJPEG.call(this,d,t,n,r)}}(Zt.API),Zt.API.processRGBA=function(i,e,t){for(var n=i.data,r=n.length,s=new Uint8Array(r/4*3),a=new Uint8Array(r/4),l=0,u=0,d=0;d<r;d+=4){var f=n[d],p=n[d+1],y=n[d+2],v=n[d+3];s[l++]=f,s[l++]=p,s[l++]=y,a[u++]=v}var C=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:C,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},Zt.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},x0=Zt.API,Bx=x0.getCharWidthsArray=function(i,e){var t,n,r=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:r.metadata.Unicode.widths,u=l.fof?l.fof:1,d=e.kerning?e.kerning:r.metadata.Unicode.kerning,f=d.fof?d.fof:1,p=e.doKerning!==!1,y=0,v=i.length,C=0,E=l[0]||u,R=[];for(t=0;t<v;t++)n=i.charCodeAt(t),typeof r.metadata.widthOfString=="function"?R.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(y=p&&xi(d[n])==="object"&&!isNaN(parseInt(d[n][C],10))?d[n][C]/f:0,R.push((l[n]||E)/u+y)),C=n;return R},D3=x0.getStringUnitWidth=function(i,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return x0.processArabic&&(i=x0.processArabic(i)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(i,t,r)/t:Bx.apply(this,arguments).reduce(function(s,a){return s+a},0)},O3=function(i,e,t,n){for(var r=[],s=0,a=i.length,l=0;s!==a&&l+e[s]<t;)l+=e[s],s++;r.push(i.slice(0,s));var u=s;for(l=0;s!==a;)l+e[s]>n&&(r.push(i.slice(u,s)),l=0,u=s),l+=e[s],s++;return u!==s&&r.push(i.slice(u,s)),r},F3=function(i,e,t){t||(t={});var n,r,s,a,l,u,d,f=[],p=[f],y=t.textIndent||0,v=0,C=0,E=i.split(" "),R=Bx.apply(this,[" ",t])[0];if(u=t.lineIndent===-1?E[0].length+2:t.lineIndent||0){var I=Array(u).join(" "),D=[];E.map(function(X){(X=X.split(/\s*\n/)).length>1?D=D.concat(X.map(function(W,ue){return(ue&&W.length?`
`:"")+W})):D.push(X[0])}),E=D,u=D3.apply(this,[I,t])}for(s=0,a=E.length;s<a;s++){var j=0;if(n=E[s],u&&n[0]==`
`&&(n=n.substr(1),j=1),y+v+(C=(r=Bx.apply(this,[n,t])).reduce(function(X,W){return X+W},0))>e||j){if(C>e){for(l=O3.apply(this,[n,r,e-(y+v),e]),f.push(l.shift()),f=[l.pop()];l.length;)p.push([l.shift()]);C=r.slice(n.length-(f[0]?f[0].length:0)).reduce(function(X,W){return X+W},0)}else f=[n];p.push(f),y=C+u,v=R}else f.push(n),y+=v+C,v=R}return d=u?function(X,W){return(W?I:"")+X.join(" ")}:function(X){return X.join(" ")},p.map(d)},x0.splitTextToSize=function(i,e,t){var n,r=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(i)?i:String(i).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/r;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=t.lineIndent;var l,u,d=[];for(l=0,u=n.length;l<u;l++)d=d.concat(F3.apply(this,[n[l],a,s]));return d},function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},r=0;r<e.length;r++)t[e[r]]="0123456789abcdef"[r],n["0123456789abcdef"[r]]=e[r];var s=function(p){return"0x"+parseInt(p,10).toString(16)},a=i.__fontmetrics__.compress=function(p){var y,v,C,E,R=["{"];for(var I in p){if(y=p[I],isNaN(parseInt(I,10))?v="'"+I+"'":(I=parseInt(I,10),v=(v=s(I).slice(2)).slice(0,-1)+n[v.slice(-1)]),typeof y=="number")y<0?(C=s(y).slice(3),E="-"):(C=s(y).slice(2),E=""),C=E+C.slice(0,-1)+n[C.slice(-1)];else{if(xi(y)!=="object")throw new Error("Don't know what to do with value type "+xi(y)+".");C=a(y)}R.push(v+C)}return R.push("}"),R.join("")},l=i.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,v,C,E,R={},I=1,D=R,j=[],X="",W="",ue=p.length-1,U=1;U<ue;U+=1)(E=p[U])=="'"?y?(C=y.join(""),y=void 0):y=[]:y?y.push(E):E=="{"?(j.push([D,C]),D={},C=void 0):E=="}"?((v=j.pop())[0][v[1]]=D,C=void 0,D=v[0]):E=="-"?I=-1:C===void 0?t.hasOwnProperty(E)?(X+=t[E],C=parseInt(X,16)*I,I=1,X=""):X+=E:t.hasOwnProperty(E)?(W+=t[E],D[C]=parseInt(W,16)*I,I=1,C=void 0,W=""):W+=E;return R},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(p){var y=p.font,v=f.Unicode[y.postScriptName];v&&(y.metadata.Unicode={},y.metadata.Unicode.widths=v.widths,y.metadata.Unicode.kerning=v.kerning);var C=d.Unicode[y.postScriptName];C&&(y.metadata.Unicode.encoding=C,y.encoding=C.codePages[0])}])}(Zt.API),function(i){var e=function(t){for(var n=t.length,r=new Uint8Array(n),s=0;s<n;s++)r[s]=t.charCodeAt(s);return r};i.API.events.push(["addFont",function(t){var n=void 0,r=t.font,s=t.instance;if(!r.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(n=s.existsFileInVFS(r.postScriptName)===!1?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(ob(l)),a.metadata=i.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(r,n)}}])}(Zt),function(i){function e(){return(tn.canvg?Promise.resolve(tn.canvg):JE(()=>import("./index.es-BQqz2xKR.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Zt.API.addSvgAsImage=function(t,n,r,s,a,l,u,d){if(isNaN(n)||isNaN(r))throw Di.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Di.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=a;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then(function(C){return C.fromString(p,t,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(y)}).then(function(){v.addImage(f.toDataURL("image/jpeg",1),n,r,s,a,u,d)})}}(),Zt.API.putTotalPages=function(i){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(i,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(e,t);return this},Zt.API.viewerPreferences=function(i,e){var t;i=i||{},e=e||!1;var n,r,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),u=[],d=0,f=0,p=0;function y(C,E){var R,I=!1;for(R=0;R<C.length;R+=1)C[R]===E&&(I=!0);return I}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,i==="reset"||e===!0){var v=l.length;for(p=0;p<v;p+=1)t[l[p]].value=t[l[p]].defaultValue,t[l[p]].explicitSet=!1}if(xi(i)==="object"){for(r in i)if(s=i[r],y(l,r)&&s!==void 0){if(t[r].type==="boolean"&&typeof s=="boolean")t[r].value=s;else if(t[r].type==="name"&&y(t[r].valueSet,s))t[r].value=s;else if(t[r].type==="integer"&&Number.isInteger(s))t[r].value=s;else if(t[r].type==="array"){for(d=0;d<s.length;d+=1)if(n=!0,s[d].length===1&&typeof s[d][0]=="number")u.push(String(s[d]-1));else if(s[d].length>1){for(f=0;f<s[d].length;f+=1)typeof s[d][f]!="number"&&(n=!1);n===!0&&u.push([s[d][0]-1,s[d][1]-1].join(" "))}t[r].value="["+u.join(" ")+"]"}else t[r].value=t[r].defaultValue;t[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,E=[];for(C in t)t[C].explicitSet===!0&&(t[C].type==="name"?E.push("/"+C+" /"+t[C].value):E.push("/"+C+" "+t[C].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(i){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+a.length+l.length+r.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(r+s+a+l+u),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(n,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Zt.API),function(i){var e=i.API,t=e.pdfEscape16=function(s,a){for(var l,u=a.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],p=0,y=s.length;p<y;++p){if(l=a.metadata.characterToGlyph(s.charCodeAt(p)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=s.charCodeAt(p),u.indexOf(l)==-1&&(u.push(l),u.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(d[4-l.length],l)}return f.join("")},n=function(s){var a,l,u,d,f,p,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],p=0,y=(l=Object.keys(s).sort(function(v,C){return v-C})).length;p<y;p++)a=l[p],u.length>=100&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(d=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),u.push("<"+a+"><"+d+">"));return u.length&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var l=a.font,u=a.out,d=a.newObject,f=a.putStream;if(l.metadata instanceof i.API.TTFFont&&l.encoding==="Identity-H"){for(var p=l.metadata.Unicode.widths,y=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),v="",C=0;C<y.length;C++)v+=String.fromCharCode(y[C]);var E=d();f({data:v,addLength1:!0,objectId:E}),u("endobj");var R=d();f({data:n(l.metadata.toUnicode),addLength1:!0,objectId:R}),u("endobj");var I=d();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+P0(l.fontName)),u("/FontFile2 "+E+" 0 R"),u("/FontBBox "+i.API.PDFObject.convert(l.metadata.bbox)),u("/Flags "+l.metadata.flags),u("/StemV "+l.metadata.stemV),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u(">>"),u("endobj");var D=d();u("<<"),u("/Type /Font"),u("/BaseFont /"+P0(l.fontName)),u("/FontDescriptor "+I+" 0 R"),u("/W "+i.API.PDFObject.convert(p)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+l.encoding+")"),u(">>"),u(">>"),u("endobj"),l.objectNumber=d(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+R+" 0 R"),u("/BaseFont /"+P0(l.fontName)),u("/Encoding /"+l.encoding),u("/DescendantFonts ["+D+" 0 R]"),u(">>"),u("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var l=a.font,u=a.out,d=a.newObject,f=a.putStream;if(l.metadata instanceof i.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var p=l.metadata.rawData,y="",v=0;v<p.length;v++)y+=String.fromCharCode(p[v]);var C=d();f({data:y,addLength1:!0,objectId:C}),u("endobj");var E=d();f({data:n(l.metadata.toUnicode),addLength1:!0,objectId:E}),u("endobj");var R=d();u("<<"),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u("/StemV "+l.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+C+" 0 R"),u("/Flags 96"),u("/FontBBox "+i.API.PDFObject.convert(l.metadata.bbox)),u("/FontName /"+P0(l.fontName)),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u(">>"),u("endobj"),l.objectNumber=d();for(var I=0;I<l.metadata.hmtx.widths.length;I++)l.metadata.hmtx.widths[I]=parseInt(l.metadata.hmtx.widths[I]*(1e3/l.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+P0(l.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),u("endobj"),l.isAlreadyPutted=!0}})(s)}]);var r=function(s){var a,l=s.text||"",u=s.x,d=s.y,f=s.options||{},p=s.mutex||{},y=p.pdfEscape,v=p.activeFontKey,C=p.fonts,E=v,R="",I=0,D="",j=C[E].encoding;if(C[E].encoding!=="Identity-H")return{text:l,x:u,y:d,options:f,mutex:p};for(D=l,E=v,Array.isArray(l)&&(D=l[0]),I=0;I<D.length;I+=1)C[E].metadata.hasOwnProperty("cmap")&&(a=C[E].metadata.cmap.unicode.codeMap[D[I].charCodeAt(0)]),a||D[I].charCodeAt(0)<256&&C[E].metadata.hasOwnProperty("Unicode")?R+=D[I]:R+="";var X="";return parseInt(E.slice(1))<14||j==="WinAnsiEncoding"?X=y(R,E).split("").map(function(W){return W.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(X=t(R,C[E])),p.isHex=!0,{text:X,x:u,y:d,options:f,mutex:p}};e.events.push(["postProcessText",function(s){var a=s.text||"",l=[],u={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?l.push([r(Object.assign({},u,{text:a[d][0]})).text,a[d][1],a[d][2]]):l.push(r(Object.assign({},u,{text:a[d]})).text);s.text=l}else s.text=r(Object.assign({},u,{text:a})).text}])}(Zt),function(i){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},i.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},i.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Zt.API),function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(n){var r,s,a,l,u,d,f,p=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],I=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,j=0;this.__bidiEngine__={};var X=function(O){var F=O.charCodeAt(),B=F>>8,H=E[B];return H!==void 0?p[256*H+(255&F)]:B===252||B===253?"AL":I.test(B)?"L":B===8?"R":"N"},W=function(O){for(var F,B=0;B<O.length;B++){if((F=X(O.charAt(B)))==="L")return!1;if(F==="R")return!0}return!1},ue=function(O,F,B,H){var fe,Q,ce,ge,Te=F[H];switch(Te){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(Te="AN");break;case"AL":D=!0,Te="R";break;case"WS":Te="N";break;case"CS":H<1||H+1>=F.length||(fe=B[H-1])!=="EN"&&fe!=="AN"||(Q=F[H+1])!=="EN"&&Q!=="AN"?Te="N":D&&(Q="AN"),Te=Q===fe?Q:"N";break;case"ES":Te=(fe=H>0?B[H-1]:"B")==="EN"&&H+1<F.length&&F[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&B[H-1]==="EN"){Te="EN";break}if(D){Te="N";break}for(ce=H+1,ge=F.length;ce<ge&&F[ce]==="ET";)ce++;Te=ce<ge&&F[ce]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for(ge=F.length,ce=H+1;ce<ge&&F[ce]==="NSM";)ce++;if(ce<ge){var re=O[H],xe=re>=1425&&re<=2303||re===64286;if(fe=F[ce],xe&&(fe==="R"||fe==="AL")){Te="R";break}}}Te=H<1||(fe=F[H-1])==="B"?"N":B[H-1];break;case"B":D=!1,r=!0,Te=j;break;case"S":s=!0,Te="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":Te="N"}return Te},U=function(O,F,B){var H=O.split("");return B&&P(H,B,{hiLevel:j}),H.reverse(),F&&F.reverse(),H.join("")},P=function(O,F,B){var H,fe,Q,ce,ge,Te=-1,re=O.length,xe=0,q=[],ee=j?v:y,he=[];for(D=!1,r=!1,s=!1,fe=0;fe<re;fe++)he[fe]=X(O[fe]);for(Q=0;Q<re;Q++){if(ge=xe,q[Q]=ue(O,he,q,Q),H=240&(xe=ee[ge][C[q[Q]]]),xe&=15,F[Q]=ce=ee[xe][5],H>0)if(H===16){for(fe=Te;fe<Q;fe++)F[fe]=1;Te=-1}else Te=-1;if(ee[xe][6])Te===-1&&(Te=Q);else if(Te>-1){for(fe=Te;fe<Q;fe++)F[fe]=ce;Te=-1}he[Q]==="B"&&(F[Q]=0),B.hiLevel|=ce}s&&function(me,ye,Ae){for(var Ie=0;Ie<Ae;Ie++)if(me[Ie]==="S"){ye[Ie]=j;for(var Me=Ie-1;Me>=0&&me[Me]==="WS";Me--)ye[Me]=j}}(he,F,re)},V=function(O,F,B,H,fe){if(!(fe.hiLevel<O)){if(O===1&&j===1&&!r)return F.reverse(),void(B&&B.reverse());for(var Q,ce,ge,Te,re=F.length,xe=0;xe<re;){if(H[xe]>=O){for(ge=xe+1;ge<re&&H[ge]>=O;)ge++;for(Te=xe,ce=ge-1;Te<ce;Te++,ce--)Q=F[Te],F[Te]=F[ce],F[ce]=Q,B&&(Q=B[Te],B[Te]=B[ce],B[ce]=Q);xe=ge}xe++}}},Y=function(O,F,B){var H=O.split(""),fe={hiLevel:j};return B||(B=[]),P(H,B,fe),function(Q,ce,ge){if(ge.hiLevel!==0&&f)for(var Te,re=0;re<Q.length;re++)ce[re]===1&&(Te=R.indexOf(Q[re]))>=0&&(Q[re]=R[Te+1])}(H,B,fe),V(2,H,F,B,fe),V(1,H,F,B,fe),H.join("")};return this.__bidiEngine__.doBidiReorder=function(O,F,B){if(function(fe,Q){if(Q)for(var ce=0;ce<fe.length;ce++)Q[ce]=ce;l===void 0&&(l=W(fe)),d===void 0&&(d=W(fe))}(O,F),a||!u||d)if(a&&u&&l^d)j=l?1:0,O=U(O,F,B);else if(!a&&u&&d)j=l?1:0,O=Y(O,F,B),O=U(O,F);else if(!a||l||u||d){if(a&&!u&&l^d)O=U(O,F),l?(j=0,O=Y(O,F,B)):(j=1,O=Y(O,F,B),O=U(O,F));else if(a&&l&&!u&&d)j=1,O=Y(O,F,B),O=U(O,F);else if(!a&&!u&&l^d){var H=f;l?(j=1,O=Y(O,F,B),j=0,f=!1,O=Y(O,F,B),f=H):(j=0,O=Y(O,F,B),O=U(O,F),j=1,f=!1,O=Y(O,F,B),f=H,O=U(O,F))}}else j=0,O=Y(O,F,B);else j=l?1:0,O=Y(O,F,B);return O},this.__bidiEngine__.setOptions=function(O){O&&(a=O.isInputVisual,u=O.isOutputVisual,l=O.isInputRtl,d=O.isOutputRtl,f=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(n){var r=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(r)==="[object Array]"){var l=0;for(a=[],l=0;l<r.length;l+=1)Object.prototype.toString.call(r[l])==="[object Array]"?a.push([t.doBidiReorder(r[l][0]),r[l][1],r[l][2]]):a.push([t.doBidiReorder(r[l])]);n.text=a}else n.text=t.doBidiReorder(r);t.setOptions({isInputVisual:!0})}])}(Zt),Zt.API.TTFFont=function(){function i(e){var t;if(this.rawData=e,t=this.contents=new Ep(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Lj(this),this.registerTTF()}return i.open=function(e){return new i(e)},i.prototype.parse=function(){return this.directory=new vj(this.contents),this.head=new _j(this),this.name=new Tj(this),this.cmap=new rO(this),this.toUnicode={},this.hhea=new xj(this),this.maxp=new Ej(this),this.hmtx=new Cj(this),this.post=new Aj(this),this.os2=new wj(this),this.loca=new Rj(this),this.glyf=new Nj(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var e,t,n,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,u,d;for(d=[],a=0,l=(u=this.bbox).length;a<l;a++)e=u[a],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),(32768&(t=r>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},i.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},i.prototype.widthOfString=function(e,t,n){var r,s,a,l;for(a=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)r=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return a*(t/1e3)},i.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},i}();var Yu,Ep=function(){function i(e){this.data=e??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(e){return this.data[this.pos++]=e},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},i.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},i.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},i.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},i.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(e){return this.writeInt16(e)},i.prototype.readLongLong=function(){var e,t,n,r,s,a,l,u;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^s)+65536*(255^a)+256*(255^l)+(255^u)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*s+65536*a+256*l+u},i.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(e){return this.writeInt32(e)},i.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},i.prototype.write=function(e){var t,n,r,s;for(s=[],n=0,r=e.length;n<r;n++)t=e[n],s.push(this.writeByte(t));return s},i}(),vj=function(){var i;function e(t){var n,r,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,s=this.tableCount;0<=s?r<s:r>s;r=0<=s?++r:--r)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,r,s,a,l,u,d,f,p,y,v,C,E;for(E in v=Object.keys(t).length,u=Math.log(2),p=16*Math.floor(Math.log(v)/u),a=Math.floor(p/u),f=16*v-p,(r=new Ep).writeInt(this.scalarType),r.writeShort(v),r.writeShort(p),r.writeShort(a),r.writeShort(f),s=16*v,d=r.pos+s,l=null,C=[],t)for(y=t[E],r.writeString(E),r.writeInt(i(y)),r.writeInt(d),r.writeInt(y.length),C=C.concat(y),E==="head"&&(l=d),d+=y.length;d%4;)C.push(0),d++;return r.write(C),n=2981146554-i(r.data),r.pos=l+8,r.writeUInt32(n),r.data},i=function(t){var n,r,s,a;for(t=sO.call(t);t.length%4;)t.push(0);for(s=new Ep(t),r=0,n=0,a=t.length;n<a;n=n+=4)r+=s.readUInt32();return 4294967295&r},e}(),bj={}.hasOwnProperty,ad=function(i,e){for(var t in e)bj.call(e,t)&&(i[t]=e[t]);function n(){this.constructor=i}return n.prototype=e.prototype,i.prototype=new n,i.__super__=e.prototype,i};Yu=function(){function i(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i}();var _j=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ad(e,Yu),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Ep).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),U3=function(){function i(e,t){var n,r,s,a,l,u,d,f,p,y,v,C,E,R,I,D,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(v=e.readUInt16(),y=v/2,e.pos+=6,s=function(){var X,W;for(W=[],u=X=0;0<=y?X<y:X>y;u=0<=y?++X:--X)W.push(e.readUInt16());return W}(),e.pos+=2,E=function(){var X,W;for(W=[],u=X=0;0<=y?X<y:X>y;u=0<=y?++X:--X)W.push(e.readUInt16());return W}(),d=function(){var X,W;for(W=[],u=X=0;0<=y?X<y:X>y;u=0<=y?++X:--X)W.push(e.readUInt16());return W}(),f=function(){var X,W;for(W=[],u=X=0;0<=y?X<y:X>y;u=0<=y?++X:--X)W.push(e.readUInt16());return W}(),r=(this.length-e.pos+this.offset)/2,l=function(){var X,W;for(W=[],u=X=0;0<=r?X<r:X>r;u=0<=r?++X:--X)W.push(e.readUInt16());return W}(),u=I=0,j=s.length;I<j;u=++I)for(R=s[u],n=D=C=E[u];C<=R?D<=R:D>=R;n=C<=R?++D:--D)f[u]===0?a=n+d[u]:(a=l[f[u]/2+(n-C)-(y-u)]||0)!==0&&(a+=d[u]),this.codeMap[n]=65535&a}e.pos=p}return i.encode=function(e,t){var n,r,s,a,l,u,d,f,p,y,v,C,E,R,I,D,j,X,W,ue,U,P,V,Y,O,F,B,H,fe,Q,ce,ge,Te,re,xe,q,ee,he,me,ye,Ae,Ie,Me,nt,He,Ye;switch(H=new Ep,a=Object.keys(e).sort(function(Xe,pt){return Xe-pt}),t){case"macroman":for(E=0,R=function(){var Xe=[];for(C=0;C<256;++C)Xe.push(0);return Xe}(),D={0:0},s={},fe=0,Te=a.length;fe<Te;fe++)D[Me=e[r=a[fe]]]==null&&(D[Me]=++E),s[r]={old:e[r],new:D[e[r]]},R[r]=D[e[r]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(R),{charMap:s,subtable:H.data,maxGlyphID:E+1};case"unicode":for(F=[],p=[],j=0,D={},n={},I=d=null,Q=0,re=a.length;Q<re;Q++)D[W=e[r=a[Q]]]==null&&(D[W]=++j),n[r]={old:W,new:D[W]},l=D[W]-r,I!=null&&l===d||(I&&p.push(I),F.push(r),d=l),I=r;for(I&&p.push(I),p.push(65535),F.push(65535),Y=2*(V=F.length),P=2*Math.pow(Math.log(V)/Math.LN2,2),y=Math.log(P/2)/Math.LN2,U=2*V-P,u=[],ue=[],v=[],C=ce=0,xe=F.length;ce<xe;C=++ce){if(O=F[C],f=p[C],O===65535){u.push(0),ue.push(0);break}if(O-(B=n[O].new)>=32768)for(u.push(0),ue.push(2*(v.length+V-C)),r=ge=O;O<=f?ge<=f:ge>=f;r=O<=f?++ge:--ge)v.push(n[r].new);else u.push(B-O),ue.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*V+2*v.length),H.writeUInt16(0),H.writeUInt16(Y),H.writeUInt16(P),H.writeUInt16(y),H.writeUInt16(U),Ae=0,q=p.length;Ae<q;Ae++)r=p[Ae],H.writeUInt16(r);for(H.writeUInt16(0),Ie=0,ee=F.length;Ie<ee;Ie++)r=F[Ie],H.writeUInt16(r);for(nt=0,he=u.length;nt<he;nt++)l=u[nt],H.writeUInt16(l);for(He=0,me=ue.length;He<me;He++)X=ue[He],H.writeUInt16(X);for(Ye=0,ye=v.length;Ye<ye;Ye++)E=v[Ye],H.writeUInt16(E);return{charMap:n,subtable:H.data,maxGlyphID:j+1}}},i}(),rO=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ad(e,Yu),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n=new U3(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,s;return n==null&&(n="macroman"),r=U3.encode(t,n),(s=new Ep).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},e}(),xj=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ad(e,Yu),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),wj=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ad(e,Yu),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Aj=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ad(e,Yu),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(r=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)n=t.readByte(),s.push(this.names.push(t.readString(n)));return s;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 196608:break;case 262144:return this.map=(function(){var l,u,d;for(d=[],a=l=0,u=this.file.maxp.numGlyphs;0<=u?l<u:l>u;a=0<=u?++l:--l)d.push(t.readUInt32());return d}).call(this)}},e}(),Sj=function(i,e){this.raw=i,this.length=i.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Tj=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ad(e,Yu),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,s,a,l,u,d,f,p,y,v;for(t.pos=this.offset,t.readShort(),n=t.readShort(),u=t.readShort(),r=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+u+t.readShort()});for(d={},a=p=0,y=r.length;p<y;a=++p)s=r[a],t.pos=s.offset,f=t.readString(s.length),l=new Sj(f,s),d[v=s.nameID]==null&&(d[v]=[]),d[s.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),Ej=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ad(e,Yu),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Cj=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ad(e,Yu),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,s,a,l,u,d;for(t.pos=this.offset,this.metrics=[],n=0,u=this.file.hhea.numberOfMetrics;0<=u?n<u:n>u;n=0<=u?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,p;for(p=[],n=f=0;0<=s?f<s:f>s;n=0<=s?++f:--f)p.push(t.readInt16());return p}(),this.widths=(function(){var f,p,y,v;for(v=[],f=0,p=(y=this.metrics).length;f<p;f++)a=y[f],v.push(a.advance);return v}).call(this),r=this.widths[this.widths.length-1],d=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)d.push(this.widths.push(r));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),sO=[].slice,Nj=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ad(e,Yu),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,s,a,l,u,d,f,p,y;return t in this.cache?this.cache[t]:(a=this.file.loca,n=this.file.contents,r=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,l=(u=new Ep(n.read(s))).readShort(),f=u.readShort(),y=u.readShort(),d=u.readShort(),p=u.readShort(),this.cache[t]=l===-1?new Ij(u,f,y,d,p):new kj(u,l,f,y,d,p),this.cache[t]))},e.prototype.encode=function(t,n,r){var s,a,l,u,d;for(l=[],a=[],u=0,d=n.length;u<d;u++)s=t[n[u]],a.push(l.length),s&&(l=l.concat(s.encode(r)));return a.push(l.length),{table:l,offsets:a}},e}(),kj=function(){function i(e,t,n,r,s,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i}(),Ij=function(){function i(e,t,n,r,s){var a,l;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return i.prototype.encode=function(){var e,t,n;for(t=new Ep(sO.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},i}(),Rj=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ad(e,Yu),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),s=0,a=0,l=0;l<r.length;++l)if(r[l]=s,a<n.length&&n[a]==l){++a,r[l]=s;var u=this.offsets[l],d=this.offsets[l+1]-u;d>0&&(s+=d)}for(var f=new Array(4*r.length),p=0;p<r.length;++p)f[4*p+3]=255&r[p],f[4*p+2]=(65280&r[p])>>8,f[4*p+1]=(16711680&r[p])>>16,f[4*p]=(4278190080&r[p])>>24;return f},e}(),Lj=function(){function i(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var e,t,n,r,s;for(t in r=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[t],e[t]=r[n];return e},i.prototype.glyphsFor=function(e){var t,n,r,s,a,l,u;for(r={},a=0,l=e.length;a<l;a++)r[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],r)(n=r[s])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(s in u=this.glyphsFor(t))n=u[s],r[s]=n;return r},i.prototype.encode=function(e,t){var n,r,s,a,l,u,d,f,p,y,v,C,E,R,I;for(r in n=rO.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),v={0:0},I=n.charMap)v[(u=I[r]).old]=u.new;for(C in y=n.maxGlyphID,a)C in v||(v[C]=y++);return f=function(D){var j,X;for(j in X={},D)X[D[j]]=j;return X}(v),p=Object.keys(f).sort(function(D,j){return D-j}),E=function(){var D,j,X;for(X=[],D=0,j=p.length;D<j;D++)l=p[D],X.push(f[l]);return X}(),s=this.font.glyf.encode(a,E,v),d=this.font.loca.encode(s.offsets,E),R={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},i}();Zt.API.PDFObject=function(){var i;function e(){}return i=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,r,s,a;if(Array.isArray(t))return"["+function(){var l,u,d;for(d=[],l=0,u=t.length;l<u;l++)n=t[l],d.push(e.convert(n));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+i(t.getUTCFullYear(),4)+i(t.getUTCMonth(),2)+i(t.getUTCDate(),2)+i(t.getUTCHours(),2)+i(t.getUTCMinutes(),2)+i(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(r in s=["<<"],t)a=t[r],s.push("/"+r+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();const Pj=({questions:i,onSubmitQuiz:e,onCancel:t,isTimerEnabled:n=!1,totalTimeInSeconds:r=0,pdfSourceFilename:s,theme:a})=>{const[l,u]=qe.useState({}),[d,f]=qe.useState(r),[p,y]=qe.useState({}),v=qe.useRef(null),C=qe.useRef(null),E=n5(a);qe.useEffect(()=>{(async()=>{try{const Y=await fetch("./fonts/NotoSans-Regular.ttf");if(!Y.ok)return;const O=await Y.arrayBuffer();if(O.byteLength<1e3)return;let F="";const B=new Uint8Array(O),H=B.byteLength;for(let fe=0;fe<H;fe++)F+=String.fromCharCode(B[fe]);C.current=btoa(F),console.log("NotoSans fontu başarıyla yüklendi ve base64'e çevrildi.")}catch{C.current=null}})()},[]),qe.useEffect(()=>{u({}),f(r)},[i,r]),qe.useEffect(()=>(n&&d>0&&i.length>0?v.current=window.setInterval(()=>{f(V=>V<=1?(v.current&&clearInterval(v.current),I(!0),0):V-1)},1e3):d<=0&&n&&i.length>0&&I(!0),()=>{v.current&&clearInterval(v.current)}),[n,d,i.length]);const R=(V,Y)=>{u(O=>({...O,[V]:Y}))},I=(V=!1)=>{v.current&&clearInterval(v.current);const Y=Object.keys(l).length;!V&&Y<i.length&&!window.confirm("Tüm soruları yanıtlamadınız. Yine de bitirmek istediğinize emin misiniz?")||e(l)},D=()=>{v.current&&clearInterval(v.current),t()},j=()=>{if(!i||i.length===0){alert("Sınavda soru bulunmadığı için PDF oluşturulamıyor.");return}try{const V=new Zt({orientation:"p",unit:"mm",format:"a4"});let Y="Helvetica";if(C.current)try{V.addFileToVFS("NotoSans-Regular.ttf",C.current),V.addFont("NotoSans-Regular.ttf","NotoSans","normal"),V.setFont("NotoSans","normal"),V.getTextWidth("test string with NotoSans"),Y="NotoSans",console.log("NotoSans fontu PDF'e başarıyla gömüldü ve kullanılabilir.")}catch(q){console.error("NotoSans fontunu PDF'e gömerken veya test ederken hata:",q),Y="Helvetica",V.setFont(Y,"normal")}else Y="Helvetica",V.setFont(Y,"normal");const O=q=>{Y==="NotoSans"?V.setFont("NotoSans","normal"):V.setFont("Helvetica",q)},F=V.internal.pageSize.height,B=V.internal.pageSize.width,H=15;let fe=H;const Q=7,ce=10,ge=5;V.setFontSize(16),O("bold");const Te=s?`${s.replace(/\.pdf$/i,"")} Sınavı`:"Oluşturulan Sınav",re=V.getTextWidth(Te);V.text(Te,(B-re)/2,fe),fe+=Q*2.5,V.setFontSize(12),O("normal"),i.forEach((q,ee)=>{const he=V.splitTextToSize(q.question,B-H*2).length;let me=q.options.length*Q;q.subtopic&&(me+=Q),fe+he*Q+me+ce>F-H&&(V.addPage(),fe=H,V.setFontSize(10),O("normal"),V.text(`Sayfa ${V.getNumberOfPages()}`,B-H-10,H-5),V.setFontSize(12)),O("bold");const ye=`Soru ${ee+1}:`;V.text(ye,H,fe),O("normal");const Ae=H+V.getTextWidth(ye)+1,Ie=B-Ae-H,Me=V.splitTextToSize(q.question,Ie);if(V.text(Me,Ae,fe),fe+=Me.length*Q,q.subtopic){fe+=ge/2.5,O("italic"),V.setFontSize(10);const nt=`Alt Konu: ${q.subtopic}`,He=V.splitTextToSize(nt,B-H*2);V.text(He,H,fe),fe+=He.length*(Q-1.5),V.setFontSize(12),O("normal"),fe+=ge/2}else fe+=ge*.8;O("normal"),q.options.forEach((nt,He)=>{fe+Q>F-H&&(V.addPage(),fe=H,V.setFontSize(10),O("normal"),V.text(`Sayfa ${V.getNumberOfPages()}`,B-H-10,H-5),V.setFontSize(12)),O("normal");const Ye=`${String.fromCharCode(65+He)}) `,Xe=H+7,pt=B-Xe-H-V.getTextWidth(Ye),Ve=V.splitTextToSize(nt,pt);V.text(Ye,Xe,fe),V.text(Ve,Xe+V.getTextWidth(Ye),fe),fe+=Ve.length*Q}),fe+=ce});const xe=(s?s.replace(/\.pdf$/i,"").replace(/[^a-z0-9ğüşıöçĞÜŞİÖÇ\s_.-]/gi,"_"):"sınav")+"_quiz.pdf";V.save(xe)}catch(V){console.error("PDF oluşturulurken hata:",V),alert(`PDF oluşturulurken bir hata oluştu: ${V.message}. Lütfen konsolu kontrol edin.`)}},X=qe.useMemo(()=>Object.keys(l).length,[l]),W=i.length,ue=W>0?X/W*100:0,U=V=>{const Y=Math.floor(V/60),O=V%60;return`${Y.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`},P=V=>{y(Y=>({...Y,[V]:!Y[V]}))};return!i||i.length===0?T.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-8 text-center ${E.text.muted}`,children:[T.jsx("i",{className:`fas fa-box-open text-5xl mb-6 ${E.text.accent}`}),T.jsx("p",{className:`text-xl font-semibold mb-2 ${E.text.secondary}`,children:"Sınav Yüklenemedi"}),T.jsx("p",{className:`mb-8 ${E.text.muted}`,children:"Görüntülenecek soru bulunamadı. Lütfen geri dönüp tekrar deneyin."}),T.jsxs("button",{onClick:D,className:`px-6 py-3 text-white rounded-lg transition-colors shadow-md font-medium flex items-center ${E.bg.button.primary}`,children:[T.jsx("i",{className:"fas fa-arrow-left mr-2"})," Ana Sayfaya Dön"]})]}):T.jsxs("div",{className:`w-full h-full flex flex-col ${E.bg.secondary} ${E.text.secondary}`,children:[T.jsxs("header",{className:`p-3 sm:p-5 border-b sticky top-0 z-20 shadow-sm ${E.border.primary} ${E.bg.primary}`,children:[T.jsxs("div",{className:"flex items-center justify-between mb-3",children:[T.jsx("div",{className:"flex items-center",children:T.jsxs("button",{onClick:D,className:`flex items-center text-base sm:text-lg transition-colors touch-target ${E.text.secondary} hover:${E.text.primary.replace("text-","hover:text-")}`,title:"Sınavdan Çık","aria-label":"Sınavdan çık ve ana sayfaya dön",children:[T.jsx("i",{className:"fas fa-chevron-left mr-1.5 sm:mr-2 text-lg sm:text-xl"}),T.jsx("span",{className:"font-medium hidden sm:inline",children:"Sınav"})]})}),T.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[T.jsxs("button",{onClick:j,className:`px-2 sm:px-3 py-1.5 rounded-md transition-colors text-xs sm:text-sm font-medium flex items-center shadow-sm touch-target ${E.bg.button.secondary} ${E.text.secondary}`,title:"Sınavı PDF Olarak İndir","aria-label":"Sınavı PDF olarak indir",children:[T.jsx("i",{className:`fas fa-file-pdf mr-1 sm:mr-2 ${a==="dark"?"text-red-400":"text-red-500"}`}),T.jsx("span",{className:"hidden sm:inline",children:"PDF İndir"})]}),n&&T.jsxs("div",{className:`text-xs sm:text-sm font-medium p-1.5 px-2 sm:px-3 rounded-md flex items-center shadow-sm ${d<=60?a==="dark"?"bg-red-500/20 text-red-300 ring-1 ring-red-500/50":"bg-red-100 text-red-600 ring-1 ring-red-300":a==="dark"?"bg-secondary-700 text-gray-300":"bg-gray-100 text-gray-700"}`,children:[T.jsx("i",{className:"far fa-clock mr-1 sm:mr-2"}),T.jsx("span",{className:"text-xs sm:text-sm",children:U(d)})]}),T.jsxs("div",{className:`text-xs sm:text-sm font-medium p-1.5 px-2 sm:px-3 rounded-md shadow-sm whitespace-nowrap ${a==="dark"?"text-gray-400 bg-secondary-700":"text-gray-500 bg-gray-100"}`,children:[T.jsxs("span",{className:"hidden sm:inline",children:[X," / ",W," yanıtlandı"]}),T.jsxs("span",{className:"sm:hidden",children:[X,"/",W]})]})]})]}),T.jsx("div",{className:`w-full rounded-full h-1.5 ${a==="dark"?"bg-secondary-700":"bg-gray-200"}`,children:T.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full transition-all duration-300 ease-out",style:{width:`${ue}%`},role:"progressbar","aria-valuenow":ue,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`${Math.round(ue)}% tamamlandı`})})]}),T.jsxs("main",{id:"quiz-main-content",className:"flex-grow overflow-y-auto p-3 sm:p-6 space-y-4 sm:space-y-6 min-h-0 relative",children:[i.map((V,Y)=>{const O=`question-${V.id}`,F=a==="dark";return T.jsxs("section",{"aria-labelledby":`${O}-text`,className:`p-4 sm:p-6 rounded-xl shadow-lg ring-1 ${F?"bg-secondary-800 ring-secondary-700/50":"bg-white ring-gray-200"}`,children:[T.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-3 sm:mb-3.5 gap-2 sm:gap-3",children:[T.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[T.jsxs("h2",{className:`text-xs font-semibold uppercase tracking-wider px-2.5 py-1 rounded-full whitespace-nowrap ${F?"text-blue-400 bg-blue-500/10":"text-blue-600 bg-blue-100"}`,children:["Soru ",Y+1," / ",W]}),V.explanation&&T.jsxs("button",{onClick:()=>P(V.id),className:`text-xs font-medium px-2.5 py-1 rounded-full transition-colors flex items-center gap-1 touch-target ${p[V.id]?F?"text-green-400 bg-green-500/20 hover:bg-green-500/30":"text-green-700 bg-green-100 hover:bg-green-200":F?"text-gray-400 bg-gray-500/20 hover:bg-gray-500/30":"text-gray-600 bg-gray-100 hover:bg-gray-200"}`,title:p[V.id]?"Açıklamayı Gizle":"Açıklamayı Göster","aria-label":`Soru ${Y+1} açıklaması ${p[V.id]?"gizle":"göster"}`,children:[T.jsx("i",{className:`fas ${p[V.id]?"fa-eye-slash":"fa-lightbulb"}`}),T.jsx("span",{className:"hidden sm:inline",children:p[V.id]?"Gizle":"Açıklama"})]})]}),V.subtopic&&T.jsxs("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full self-start sm:self-auto ${F?"text-purple-400 bg-purple-500/10":"text-purple-600 bg-purple-100"}`,children:[T.jsx("i",{className:"fas fa-tags mr-1 sm:mr-1.5 opacity-70"}),T.jsx("span",{className:"truncate max-w-[150px] sm:max-w-none",children:V.subtopic})]})]}),T.jsx("p",{id:`${O}-text`,className:`text-sm sm:text-base lg:text-lg font-medium mb-4 sm:mb-5 leading-relaxed ${F?"text-gray-100":"text-gray-800"}`,children:V.question}),V.explanation&&p[V.id]&&T.jsx("div",{className:`mb-5 p-4 rounded-lg border-l-4 ${F?"bg-blue-500/10 border-blue-400 text-blue-200":"bg-blue-50 border-blue-400 text-blue-800"}`,children:T.jsxs("div",{className:"flex items-start gap-2",children:[T.jsx("i",{className:`fas fa-info-circle mt-0.5 ${F?"text-blue-400":"text-blue-600"}`}),T.jsxs("div",{children:[T.jsx("h3",{className:`font-semibold text-sm mb-2 ${F?"text-blue-300":"text-blue-700"}`,children:"Açıklama:"}),T.jsx("p",{className:`text-sm leading-relaxed ${F?"text-blue-200":"text-blue-700"}`,children:V.explanation})]})]})}),T.jsx("div",{role:"radiogroup","aria-labelledby":`${O}-text`,className:"space-y-2.5 sm:space-y-3",children:V.options.map((B,H)=>{const fe=l[V.id]===H,Q=`${V.id}-option-${H}`,ce=()=>{let Te="flex items-center p-3 sm:p-3.5 border-2 rounded-lg cursor-pointer transition-all duration-150 ease-in-out transform hover:scale-[1.01] touch-target ";return fe?Te+=F?"bg-blue-600 border-blue-500 text-white shadow-md":"bg-blue-500 border-blue-500 text-white shadow-md":Te+=F?"bg-secondary-700/80 border-secondary-600 hover:border-blue-500/70 text-gray-300":"bg-gray-50 border-gray-300 hover:border-blue-400 text-gray-700",Te},ge=()=>{const Te="focus-within:ring-2 focus-within:ring-offset-2 ",re=F?"focus-within:ring-offset-secondary-800":"focus-within:ring-offset-white",xe=F?"focus-within:ring-blue-400":"focus-within:ring-blue-500";return Te+re+" "+xe};return T.jsxs("label",{htmlFor:Q,className:`${ce()} ${ge()}`,children:[T.jsx("span",{className:`w-4 h-4 sm:w-5 sm:h-5 rounded-full border-2 flex-shrink-0 mr-3 flex items-center justify-center transition-colors ${fe?"border-blue-300 bg-blue-400":F?"border-gray-500 group-hover:border-blue-400":"border-gray-400 group-hover:border-blue-400"}`,children:fe&&T.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-white rounded-full"})}),T.jsx("input",{type:"radio",id:Q,name:`question-${V.id}`,value:H,checked:fe,onChange:()=>R(V.id,H),className:"sr-only","aria-label":`Seçenek ${H+1}: ${B}`}),T.jsx("span",{className:"text-sm sm:text-base flex-grow min-w-0 break-words leading-relaxed",children:B}),fe&&T.jsx("i",{className:"fas fa-check-circle ml-auto text-blue-200 text-base sm:text-lg"})]},Q)})})]},V.id)}),T.jsx("div",{className:`mt-6 sm:mt-8 mb-4 pt-4 border-t ${a==="dark"?"border-secondary-700/50":"border-gray-200"}`,children:T.jsxs("button",{onClick:()=>I(!1),disabled:W===0,className:`w-full px-4 sm:px-6 py-3 sm:py-3.5 text-white rounded-lg font-semibold shadow-lg focus:outline-none focus:ring-2 focus:ring-opacity-70 text-sm sm:text-base flex items-center justify-center disabled:opacity-60 disabled:cursor-not-allowed touch-target ${a==="dark"?"bg-green-600 hover:bg-green-700 focus:ring-green-500":"bg-green-500 hover:bg-green-600 focus:ring-green-500"}`,"aria-label":"Sınavı Bitir ve Sonuçları Gör",children:[T.jsx("span",{children:"Sınavı Bitir"}),T.jsx("i",{className:"fas fa-check-circle ml-2 text-base sm:text-lg"})]})})]})]})},Mj=Oi.memo(Pj),Dj=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Oj=Oi.memo(Dj),Fj=({className:i})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i||"w-6 h-6",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Vj=Oi.memo(Fj),Bj=({questions:i,userAnswers:e,onRestart:t,onSaveResult:n,onDeleteSpecificResult:r,onLoginToSave:s,onFinish:a,isViewingSaved:l=!1,pdfName:u,savedAt:d,quizId:f,theme:p,isUserLoggedIn:y=!1})=>{const[v,C]=qe.useState({}),E=U=>{C(P=>({...P,[U]:!P[U]}))},I=(()=>{let U=0;return i.forEach(P=>{e[P.id]===P.correctAnswerIndex&&U++}),U})(),D=i.length,j=D>0?Math.round(I/D*100):0,W=(()=>{const U=p==="dark";return j>=75?{text:U?"text-green-400":"text-green-600",border:U?"border-green-500/50":"border-green-500",bg:U?"bg-green-500/10":"bg-green-50"}:j>=50?{text:U?"text-yellow-400":"text-yellow-600",border:U?"border-yellow-500/50":"border-yellow-500",bg:U?"bg-yellow-500/10":"bg-yellow-50"}:{text:U?"text-red-400":"text-red-600",border:U?"border-red-500/50":"border-red-500",bg:U?"bg-red-500/10":"bg-red-50"}})(),ue=()=>r?"Sınav Listesine Dön":l?"Ana Sayfa":l?"Yeni Sınav Oluştur":y?"Sınavlarıma Git":"Ana Sayfa";return T.jsxs("div",{className:`w-full max-w-4xl p-4 sm:p-6 md:p-8 rounded-xl shadow-2xl ${V6(p)}`,children:[T.jsx("h2",{className:`text-2xl sm:text-3xl font-bold text-center mb-2 ${bo(p,"primary")}`,children:"Sınav Sonucu"}),l&&u&&T.jsxs("p",{className:`text-center text-xs sm:text-sm mb-1 px-2 ${bo(p,"muted")}`,children:[T.jsx("span",{className:"hidden sm:inline",children:"PDF Kaynağı: "}),T.jsx("span",{className:"font-medium",children:u})]}),l&&d&&T.jsxs("p",{className:`text-center text-xs mb-4 ${bo(p,"muted")}`,children:[T.jsx("span",{className:"hidden sm:inline",children:"Kaydedilme Tarihi: "}),new Date(d).toLocaleString("tr-TR")]}),T.jsxs("div",{className:`text-center mb-6 sm:mb-8 p-4 sm:p-6 rounded-lg ${W.bg} border-2 ${W.border}`,children:[T.jsxs("p",{className:`text-3xl sm:text-4xl lg:text-5xl font-extrabold mb-2 ${W.text}`,children:[j,"%"]}),T.jsxs("p",{className:`text-base sm:text-lg lg:text-xl ${bo(p,"secondary")}`,children:[T.jsxs("span",{className:"block sm:inline",children:[I," / ",D]}),T.jsx("span",{className:"hidden sm:inline",children:" "}),T.jsx("span",{className:"block sm:inline",children:"doğru cevap"})]})]}),T.jsx("div",{className:"space-y-4 sm:space-y-6 mb-6 sm:mb-8 max-h-[50vh] overflow-y-auto pr-2 custom-scrollbar-results",children:i.map((U,P)=>{const V=e[U.id],Y=V===U.correctAnswerIndex,O=p==="dark",F=Y?O?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200":O?"bg-red-500/10 border-red-500/30":"bg-red-50 border-red-200";return T.jsxs("div",{className:`p-3 sm:p-4 border rounded-lg ${F}`,children:[T.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-2 sm:mb-1 gap-2",children:[T.jsxs("p",{className:`font-semibold text-sm sm:text-base pr-2 ${bo(p,"primary")}`,children:[T.jsxs("span",{className:"font-bold",children:["Soru ",P+1,":"]})," ",U.question]}),U.explanation&&T.jsxs("button",{onClick:()=>E(U.id),className:`self-start sm:ml-3 px-2 py-1 text-xs rounded-md transition-colors flex items-center gap-1 flex-shrink-0 touch-target ${v[U.id]?O?"text-blue-300 bg-blue-500/20 hover:bg-blue-500/30":"text-blue-700 bg-blue-100 hover:bg-blue-200":O?"text-gray-400 bg-gray-500/20 hover:bg-gray-500/30":"text-gray-600 bg-gray-100 hover:bg-gray-200"}`,title:v[U.id]?"Açıklamayı Gizle":"Açıklamayı Göster",children:[T.jsx("i",{className:`fas ${v[U.id]?"fa-eye-slash":"fa-lightbulb"}`}),T.jsx("span",{className:"hidden sm:inline",children:v[U.id]?"Gizle":"Açıklama"})]})]}),U.subtopic&&T.jsxs("p",{className:`text-xs mb-2 italic font-medium ${p==="dark"?"text-primary-400":"text-primary-600"}`,children:[T.jsx("i",{className:"fas fa-tag mr-1 opacity-70"}),"Alt Konu: ",U.subtopic]}),T.jsxs("ul",{className:"list-none space-y-1.5 sm:space-y-1 pl-0",children:[U.options.map((B,H)=>{const fe=p==="dark",Q=H===U.correctAnswerIndex,ce=V===H;let ge="flex items-start p-2 rounded text-xs sm:text-sm leading-relaxed ";return Q?ge+=fe?"font-bold text-green-300":"font-bold text-green-700":ge+=fe?"text-gray-300":"text-gray-700",ce&&!Y&&(ge+=fe?" text-red-300 line-through":" text-red-700 line-through"),ce&&Y?ge+=fe?" bg-green-500/20":" bg-green-100":ce&&!Y&&!Q&&(ge+=fe?" bg-red-500/20":" bg-red-100"),T.jsxs("li",{className:ge,children:[Q&&T.jsx(Oj,{className:`w-4 h-4 sm:w-5 sm:h-5 mr-2 mt-0.5 flex-shrink-0 ${fe?"text-green-400":"text-green-500"}`}),ce&&!Q&&T.jsx(Vj,{className:`w-4 h-4 sm:w-5 sm:h-5 mr-2 mt-0.5 flex-shrink-0 ${fe?"text-red-400":"text-red-500"}`}),!(Q||ce&&!Q)&&T.jsx("span",{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 mt-0.5 flex-shrink-0"}),T.jsx("span",{className:"min-w-0 break-words flex-grow",children:B}),ce&&T.jsxs("span",{className:"ml-2 text-xs italic whitespace-nowrap hidden sm:inline",children:["(",Y?"Sizin Cevabınız - Doğru":"Sizin Cevabınız - Yanlış",")"]}),ce&&T.jsxs("span",{className:"ml-1 text-xs italic sm:hidden",children:["(",Y?"Doğru":"Yanlış",")"]}),!ce&&Q&&V!==void 0&&T.jsx("span",{className:"ml-2 text-xs italic whitespace-nowrap hidden sm:inline",children:"(Doğru Cevap)"}),V===void 0&&Q&&T.jsx("span",{className:"ml-2 text-xs italic whitespace-nowrap hidden sm:inline",children:"(Doğru Cevap)"})]},H)}),e[U.id]===void 0&&T.jsx("li",{className:`mt-1 text-xs italic ${p==="dark"?"text-yellow-400":"text-yellow-600"}`,children:"Bu soru cevaplanmadı."})]}),U.explanation&&v[U.id]&&T.jsx("div",{className:`mt-3 p-3 rounded-md border ${O?"bg-blue-500/10 border-blue-500/30 text-blue-200":"bg-blue-50 border-blue-200 text-blue-800"}`,children:T.jsxs("div",{className:"flex items-start gap-2",children:[T.jsx("i",{className:`fas fa-lightbulb mt-1 flex-shrink-0 ${O?"text-blue-400":"text-blue-600"}`}),T.jsxs("div",{children:[T.jsx("h4",{className:`font-medium text-sm mb-1 ${O?"text-blue-300":"text-blue-700"}`,children:"Açıklama:"}),T.jsx("p",{className:`text-sm leading-relaxed ${O?"text-blue-200":"text-blue-800"}`,children:U.explanation})]})]})})]},U.id)})}),T.jsxs("div",{className:"text-center space-y-3 md:space-y-0 md:flex md:justify-center md:gap-4",children:[T.jsxs("button",{onClick:()=>{l||!a?t():a()},className:`w-full md:w-auto px-6 sm:px-8 py-3 rounded-lg font-semibold shadow-lg text-base sm:text-lg focus:ring-2 focus:ring-opacity-50 touch-target ${J1(p,"primary")}`,children:[T.jsx("i",{className:"fas fa-redo-alt mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:ue()}),T.jsx("span",{className:"sm:hidden",children:r?"Sınav Listesi":l?"Ana Sayfa":y?"Sınavlarım":"Ana Sayfa"})]}),!l&&n&&y&&T.jsxs("button",{onClick:n,className:`w-full md:w-auto px-6 sm:px-8 py-3 rounded-lg font-semibold shadow-lg text-base sm:text-lg focus:ring-2 focus:ring-opacity-50 touch-target ${J1(p,"success")}`,children:[T.jsx("i",{className:"fas fa-save mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Sonuçları Kaydet"}),T.jsx("span",{className:"sm:hidden",children:"Kaydet"})]}),!l&&!y&&s&&T.jsxs("button",{onClick:s,className:`w-full md:w-auto px-6 sm:px-8 py-3 rounded-lg font-semibold shadow-lg text-base sm:text-lg focus:ring-2 focus:ring-opacity-50 touch-target ${J1(p,"primary")}`,children:[T.jsx("i",{className:"fas fa-user-plus mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Kayıt Et"}),T.jsx("span",{className:"sm:hidden",children:"Kayıt Et"})]}),l&&r&&f&&T.jsxs("button",{onClick:()=>r(f),className:`w-full md:w-auto px-6 sm:px-8 py-3 rounded-lg font-semibold shadow-lg text-base sm:text-lg focus:ring-2 focus:ring-opacity-50 touch-target ${J1(p,"danger")}`,children:[T.jsx("i",{className:"fas fa-trash-alt mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Kayıtlı Sonucu Sil"}),T.jsx("span",{className:"sm:hidden",children:"Sil"})]})]}),T.jsx("style",{children:`
        .custom-scrollbar-results::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar-results::-webkit-scrollbar-track {
          background: var(--scrollbar-track-color); 
          border-radius: 10px;
        }
        .custom-scrollbar-results::-webkit-scrollbar-thumb {
          background: var(--scrollbar-thumb-color); 
          border-radius: 10px;
        }
        .custom-scrollbar-results::-webkit-scrollbar-thumb:hover {
          background: var(--scrollbar-thumb-hover-color);
        }
        .custom-scrollbar-results {
          scrollbar-width: thin;
          scrollbar-color: var(--scrollbar-thumb-color) var(--scrollbar-track-color);
        }
      `})]})},z3=Oi.memo(Bj),Uj=({message:i,onRetry:e,theme:t})=>T.jsx("div",{className:`border-l-4 p-3 sm:p-4 rounded-md shadow-md ${t==="dark"?"bg-red-500/10 border-red-400 text-red-300":"bg-red-50 border-red-500 text-red-700"}`,role:"alert",children:T.jsxs("div",{className:"flex",children:[T.jsx("div",{className:"py-1 flex-shrink-0",children:T.jsx("svg",{className:`fill-current h-5 w-5 sm:h-6 sm:w-6 mr-3 sm:mr-4 ${t==="dark"?"text-red-400":"text-red-500"}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:T.jsx("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zM11.414 10l2.829-2.828a1 1 0 1 0-1.414-1.414L10 8.586 7.172 5.757a1 1 0 0 0-1.414 1.414L8.586 10l-2.829 2.828a1 1 0 1 0 1.414 1.414L10 11.414l2.828 2.829a1 1 0 0 0 1.414-1.414L11.414 10z"})})}),T.jsxs("div",{className:"flex-grow min-w-0",children:[T.jsx("p",{className:"font-bold text-sm sm:text-base",children:"Bir Hata Oluştu"}),T.jsx("p",{className:"text-xs sm:text-sm leading-relaxed break-words",children:i}),e&&T.jsx("button",{onClick:e,className:"mt-2 px-3 sm:px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded transition-colors text-xs sm:text-sm touch-target",children:"Tekrar Dene"})]})]})}),N1=Oi.memo(Uj),fT=[{key:"file_upload",title:"Dosya Yükleme",icon:"fas fa-file-upload",description:"Dosya Yükleme",subDescription:"Sınav oluşturmak için bir dosya yükleyin."},{key:"subtopic_selection",title:"Alt Konular",icon:"fas fa-list-ul",description:"Alt Konu Seçimi",subDescription:"Sınavınız için odaklanmak istediğiniz alt konuları seçin (isteğe bağlı)."},{key:"preferences",title:"Tercihler",icon:"fas fa-sliders-h",description:"Sınav Ayarları",subDescription:"Soru sayısı ve zorluk seviyesi gibi sınav ayarlarını yapın."}],zj=[{key:"course_selection",title:"Ders Seçimi",icon:"fas fa-layer-group",description:"Ders Seçimi",subDescription:"Kişiselleştirilmiş sınavınız için bir ders seçin veya yeni bir ders oluşturun."},{key:"personalized_quiz_type_selection",title:"Sınav Türü",icon:"fas fa-cogs",description:"Sınav Türü Seçimi",subDescription:"Kişiselleştirilmiş sınavınız için bir tür seçin (Kapsamlı, Yeni Konular, Zayıf Konular)."}],jj=({currentStageKey:i,progress:e,children:t,onBack:n,quizMode:r,currentPersonalizedQuizType:s,theme:a})=>{const l=i==="generating"?"preferences":i,u=r==="personalized"&&s==="weak_topics"?fT.filter(R=>R.key!=="file_upload"):fT,d=r==="personalized"?[...zj,...u]:fT,f=d.findIndex(R=>R.key===l);let p=d.find(R=>R.key===l)||d[0],y=p.description,v=p.subDescription;r==="personalized"?p.key==="course_selection"?(y="Ders Seçimi",v="Kişiselleştirilmiş sınavınız için bir ders seçin veya oluşturun."):p.key==="personalized_quiz_type_selection"?(y="Kişisel Sınav Türü",v="Sınavınız için bir tür seçin: Kapsamlı, Yeni Konular veya Zayıf Konular."):p.key==="file_upload"?(y="Kişisel Sınav İçin Dosya",v="Seçtiğiniz ders ve sınav türü için temel olacak bir PDF dosyası yükleyin."):p.key==="subtopic_selection"?(y=s==="weak_topics"?"Zayıf Konu Seçimi":"Kişisel Sınav Konuları",v=s==="weak_topics"?"Sınavınızda odaklanmak istediğiniz zayıf konuları seçin.":"Kişiselleştirilmiş sınavınızda odaklanılacak alt konuları belirleyin."):p.key==="preferences"&&(y=s==="weak_topics"?"Zayıf Konular Sınav Ayarları":"Kişisel Sınav Ayarları",v=s==="weak_topics"?"Seçtiğiniz zayıf konular için sınav ayarlarını yapın.":"Soru sayısı ve zorluk seviyesi gibi kişiselleştirilmiş sınav ayarlarını yapın."):p.key==="file_upload"?(y="Hızlı Sınav İçin Dosya",v="Hızlı sınavınız için bir PDF dosyası yükleyin."):p.key==="subtopic_selection"?(y="Hızlı Sınav Konuları",v="Hızlı sınavınızda odaklanılacak alt konuları belirleyin (isteğe bağlı)."):p.key==="preferences"&&(y="Hızlı Sınav Ayarları",v="Soru sayısı ve zorluk seviyesi gibi hızlı sınav ayarlarını yapın."),i==="generating"&&(y="Sınav Oluşturuluyor",v="Lütfen bekleyin, yapay zeka sınavınızı hazırlıyor...");const C=r==="personalized"?"Kişiselleştirilmiş Sınav Oluşturma":"Hızlı Sınav Oluşturma",E=r==="personalized"?"Size özel sınav oluşturma süreci":"Anında sınav oluşturma süreci";return T.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6 w-full h-full",children:[T.jsxs("div",{className:`w-full lg:w-1/3 xl:w-1/4 p-4 sm:p-5 rounded-xl shadow-lg flex flex-col ${a==="dark"?"bg-secondary-800":"bg-white"}`,children:[T.jsxs("div",{className:"flex items-center mb-4 sm:mb-5",children:[T.jsx("div",{className:`p-2.5 rounded-lg mr-3 ${a==="dark"?"bg-primary-500/20":"bg-primary-100"}`,children:T.jsx("i",{className:`fas ${r==="personalized"?"fa-user-graduate":"fa-bolt"} text-lg ${a==="dark"?"text-primary-400":"text-primary-600"}`})}),T.jsxs("div",{children:[T.jsx("h2",{className:`text-lg sm:text-xl font-semibold ${a==="dark"?"text-white":"text-gray-800"}`,children:C}),T.jsx("p",{className:`text-xs ${a==="dark"?"text-gray-400":"text-gray-500"}`,children:E})]})]}),T.jsx("nav",{className:"space-y-2 flex-grow",children:d.map((R,I)=>{const D=R.key===l,j=I<f,X=i==="generating"&&R.key==="preferences"?"generating":R.key;let W="Bekliyor",ue="text-gray-500";D?(W=X==="generating"?"Oluşturuluyor...":"Devam Ediyor",ue=a==="dark"?"text-blue-400":"text-blue-600"):j&&(W="Tamamlandı",ue=a==="dark"?"text-green-400":"text-green-600");let U=!1;if(r==="personalized"&&s==="weak_topics"&&R.key==="file_upload"){const P=d.findIndex(V=>V.key==="personalized_quiz_type_selection");f>P&&(U=!0,W="Atlandı",ue=a==="dark"?"text-gray-400":"text-gray-500")}return T.jsx("div",{className:`p-3 rounded-lg transition-all duration-200 ease-in-out ${D?a==="dark"?"bg-blue-600 shadow-md":"bg-blue-500 shadow-md":j||U?a==="dark"?"bg-secondary-700/50 opacity-70":"bg-gray-100 opacity-70":a==="dark"?"bg-secondary-700/50 hover:bg-secondary-700":"bg-gray-100 hover:bg-gray-200"}`,children:T.jsxs("div",{className:"flex items-center",children:[T.jsx("div",{className:`p-1.5 rounded-md mr-3 flex items-center justify-center ${D?a==="dark"?"bg-blue-500":"bg-blue-400":j||U?a==="dark"?"bg-green-500/30":"bg-green-100":a==="dark"?"bg-secondary-600":"bg-gray-200"}`,children:T.jsx("i",{className:`${R.icon} text-sm ${D?"text-white":j||U?U?a==="dark"?"text-gray-500":"text-gray-400":a==="dark"?"text-green-300":"text-green-500":a==="dark"?"text-gray-400":"text-gray-500"}`})}),T.jsxs("div",{className:"flex-grow",children:[T.jsx("h3",{className:`text-sm font-medium ${D?"text-white":a==="dark"?"text-gray-200":"text-gray-800"}`,children:R.title}),T.jsx("p",{className:`text-xs ${ue}`,children:W})]}),D&&X!=="generating"&&T.jsx("i",{className:"fas fa-arrow-right text-white ml-auto text-sm"}),D&&X==="generating"&&T.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin ml-auto"}),(j||U)&&!D&&T.jsx("i",{className:`fas text-sm ${U?"fa-minus-circle":"fa-check-circle"} ${U?a==="dark"?"text-gray-500":"text-gray-400":a==="dark"?"text-green-400":"text-green-500"} ml-auto`})]})},R.key)})}),T.jsxs("div",{className:"mt-auto pt-4",children:[T.jsxs("p",{className:`text-xs mb-1 text-right ${a==="dark"?"text-gray-400":"text-gray-500"}`,children:[Math.round(e),"% Tamamlandı"]}),T.jsx("div",{className:`w-full rounded-full h-2 ${a==="dark"?"bg-secondary-700":"bg-gray-200"}`,children:T.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${e}%`}})})]})]}),T.jsxs("div",{className:`w-full lg:w-2/3 xl:w-3/4 p-4 sm:p-6 rounded-xl shadow-lg flex flex-col ${a==="dark"?"bg-secondary-800":"bg-white"}`,children:[T.jsxs("div",{className:"flex justify-between items-center mb-1",children:[T.jsx("h2",{className:`text-lg sm:text-xl font-semibold ${a==="dark"?"text-white":"text-gray-800"}`,children:y}),n&&i!=="generating"&&T.jsxs("button",{onClick:n,className:`text-xs sm:text-sm transition-colors flex items-center ${a==="dark"?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"}`,"aria-label":"Geri dön",children:[T.jsx("i",{className:"fas fa-arrow-left mr-1 text-xs"})," Geri"]})]}),T.jsx("p",{className:`text-xs sm:text-sm mb-4 ${a==="dark"?"text-gray-400":"text-gray-500"}`,children:v}),T.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-layout pr-2",children:t})]}),T.jsx("style",{children:`
        .custom-scrollbar-layout::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar-layout::-webkit-scrollbar-track {
          background: var(--scrollbar-track-color);
          border-radius: 10px;
        }
        .custom-scrollbar-layout::-webkit-scrollbar-thumb {
          background: var(--scrollbar-thumb-color);
          border-radius: 10px;
        }
        .custom-scrollbar-layout::-webkit-scrollbar-thumb:hover {
          background: var(--scrollbar-thumb-hover-color);
        }
        .custom-scrollbar-layout {
          scrollbar-width: thin;
          scrollbar-color: var(--scrollbar-thumb-color) var(--scrollbar-track-color);
        }
      `})]})},qj=Oi.memo(jj);class $j extends qe.Component{constructor(){super(...arguments),this.state={hasError:!1,error:void 0,errorInfo:void 0},this.handleRetry=()=>{if(console.log("ErrorBoundary: handleRetry called."),this.props.onReset){console.log("ErrorBoundary: Calling onReset prop.");try{this.props.onReset(),this.setState({hasError:!1,error:void 0,errorInfo:void 0})}catch(e){console.error("ErrorBoundary: Error occurred during onReset execution:",e),window.location.reload()}}else console.warn("ErrorBoundary: No onReset handler provided. Reloading page."),window.location.reload()}}static getDerivedStateFromError(e){return console.error("ErrorBoundary: getDerivedStateFromError caught an error:",e),{hasError:!0,error:e,errorInfo:void 0}}componentDidCatch(e,t){console.error("ErrorBoundary: componentDidCatch caught an error:",e,t),this.setState({errorInfo:t})}render(){var e,t,n,r;if(this.state.hasError){const s=((e=this.state.error)==null?void 0:e.name)||"Hata",a=((t=this.state.error)==null?void 0:t.message)||"Bilinmeyen bir hata oluştu.",l=((n=this.state.errorInfo)==null?void 0:n.componentStack)||((r=this.state.error)==null?void 0:r.stack);return T.jsx("div",{style:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",backgroundColor:"#0f172a",color:"#e2e8f0",padding:"20px",border:"1px solid #334155",borderRadius:"0px",textAlign:"center",fontFamily:"sans-serif",boxSizing:"border-box",zIndex:9999998,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflowY:"auto"},children:T.jsxs("div",{style:{maxWidth:"700px",width:"90%"},children:[" ",T.jsxs("h2",{style:{color:"#f8fafc",fontSize:"1.6em",marginBottom:"15px",display:"flex",alignItems:"center",justifyContent:"center"},children:[T.jsx("svg",{"aria-hidden":"true",style:{width:"28px",height:"28px",marginRight:"12px",fill:"#f43f5e"},viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.216 3.031-1.742 3.031H4.42c-1.526 0-2.492-1.697-1.742-3.031l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1.75-2.5a.75.75 0 000 1.5h3.5a.75.75 0 000-1.5h-3.5z",clipRule:"evenodd"})}),"Uygulamada Bir Sorun Oluştu (React Sınırı)"]}),T.jsxs("div",{style:{backgroundColor:"#1e293b",padding:"15px",borderRadius:"6px",marginBottom:"20px",textAlign:"left"},children:[T.jsxs("p",{style:{color:"#fecaca",marginBottom:"8px",fontWeight:"bold"},children:[s,": ",a]}),l&&T.jsxs("details",{style:{marginBottom:"10px"},children:[T.jsx("summary",{style:{color:"#60a5fa",cursor:"pointer",outline:"none"},children:"Hata Detayları (Geliştiriciler İçin)"}),T.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",backgroundColor:"#020617",color:"#94a3b8",padding:"10px",marginTop:"8px",borderRadius:"4px",maxHeight:"200px",overflowY:"auto",fontSize:"0.85em",border:"1px solid #334155"},children:l})]})]}),T.jsx("p",{style:{color:"#94a3b8",marginBottom:"25px",fontSize:"0.9em"},children:"Lütfen bu sorunu geliştirme ekibine bildirin. Tarayıcınızın konsolunu kontrol etmek de yardımcı olabilir."}),this.props.onReset&&T.jsx("button",{onClick:this.handleRetry,style:{padding:"12px 25px",backgroundColor:"#0ea5e9",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1em",fontWeight:"500",transition:"background-color 0.2s ease",marginRight:"10px"},onMouseOver:u=>u.currentTarget.style.backgroundColor="#0284c7",onMouseOut:u=>u.currentTarget.style.backgroundColor="#0ea5e9",title:"Uygulamayı sıfırlamayı dene",children:"Tekrar Dene / Ana Sayfaya Dön"}),T.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"12px 25px",backgroundColor:this.props.onReset?"#64748b":"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1em",fontWeight:"500",transition:"background-color 0.2s ease"},onMouseOver:u=>u.currentTarget.style.backgroundColor=this.props.onReset?"#475569":"#dc2626",onMouseOut:u=>u.currentTarget.style.backgroundColor=this.props.onReset?"#64748b":"#ef4444",title:"Sayfayı yeniden yükle",children:"Sayfayı Yenile"})]})})}return this.props.children}}const Hj=({iconClass:i,title:e,message:t,actionButton:n,theme:r})=>T.jsxs("div",{className:`flex flex-col items-center justify-center text-center p-4 sm:p-8 md:p-12 h-full rounded-lg shadow-xl ring-1 ${r==="dark"?"bg-secondary-800 ring-secondary-700/50":"bg-white ring-gray-200"}`,children:[T.jsx("div",{className:`p-4 sm:p-5 rounded-full mb-4 sm:mb-6 ${r==="dark"?"bg-primary-500/10":"bg-primary-100"}`,children:T.jsx("i",{className:`${i} text-4xl sm:text-5xl md:text-6xl ${r==="dark"?"text-primary-400":"text-primary-500"}`})}),T.jsx("h2",{className:`text-lg sm:text-xl md:text-2xl font-semibold mb-2 px-2 ${r==="dark"?"text-white":"text-gray-800"}`,children:e}),T.jsx("p",{className:`max-w-md mb-6 sm:mb-8 text-sm sm:text-base leading-relaxed px-2 ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:t}),n&&T.jsxs("button",{onClick:n.onClick,className:`px-4 sm:px-6 py-3 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity shadow-md flex items-center justify-center text-sm sm:text-base touch-target ${n.gradientClasses||"bg-gradient-to-r from-primary-500 to-primary-600"}`,children:[n.iconClass&&T.jsx("i",{className:`${n.iconClass} mr-2`}),n.text]})]}),cv=Oi.memo(Hj),Gj=({savedQuizzes:i,onViewQuiz:e,onAddNewQuiz:t,onAddNewPersonalizedQuiz:n,theme:r})=>{const[s,a]=qe.useState(""),l=(i||[]).filter(d=>(d.pdfName||`Sınav ${new Date(d.savedAt).toLocaleDateString()}`).toLowerCase().includes(s.toLowerCase())).sort((d,f)=>f.savedAt-d.savedAt),u=d=>new Date(d).toLocaleString("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return T.jsxs("div",{className:"w-full h-full flex flex-col p-0",children:[T.jsxs("div",{className:"mb-4 sm:mb-6 px-1",children:[T.jsx("h1",{className:`text-2xl sm:text-3xl font-bold mb-1 ${r==="dark"?"text-white":"text-gray-900"}`,children:"Sınavlarım"}),T.jsx("p",{className:`text-sm sm:text-base ${r==="dark"?"text-gray-400":"text-gray-500"}`,children:"Geçmiş sınavlarınızı görüntüleyin ve yeni sınavlar oluşturun."})]}),T.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col gap-3 sm:gap-4 px-1",children:[T.jsxs("div",{className:"relative w-full",children:[T.jsx("input",{type:"text",placeholder:"Sınav ara...",value:s,onChange:d=>a(d.target.value),className:`w-full p-3 pl-10 border rounded-lg focus:ring-primary-500 focus:border-primary-500 touch-target ${r==="dark"?"bg-secondary-800 border-secondary-700 text-gray-200 placeholder-gray-500":"bg-white border-gray-300 text-gray-800 placeholder-gray-400"}`,"aria-label":"Sınav arama"}),T.jsx("i",{className:`fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 ${r==="dark"?"text-gray-500":"text-gray-400"}`})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[T.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[T.jsx("select",{className:`appearance-none w-full p-3 pr-10 border rounded-lg focus:ring-primary-500 focus:border-primary-500 touch-target ${r==="dark"?"bg-secondary-800 border-secondary-700 text-gray-200":"bg-white border-gray-300 text-gray-800"}`,"aria-label":"Sınav türüne göre filtrele",defaultValue:"all",children:T.jsx("option",{value:"all",children:"Tüm Sınavlar"})}),T.jsx("i",{className:`fas fa-chevron-down absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none ${r==="dark"?"text-gray-500":"text-gray-400"}`})]}),T.jsxs("button",{onClick:t,className:"flex-1 sm:flex-none px-4 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity shadow-md flex items-center justify-center text-sm touch-target",title:"Yeni Hızlı Sınav Oluştur",children:[T.jsx("i",{className:"fas fa-bolt mr-2"})," Hızlı Sınav"]}),n&&T.jsxs("button",{onClick:n,className:"flex-1 sm:flex-none px-4 py-3 bg-gradient-to-r from-pink-500 to-fuchsia-600 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity shadow-md flex items-center justify-center text-sm touch-target",title:"Yeni Kişiselleştirilmiş Sınav Oluştur",children:[T.jsx("i",{className:"fas fa-user-cog mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Kişisel Sınav"}),T.jsx("span",{className:"sm:hidden",children:"Kişisel"})]})]})]}),T.jsxs("div",{className:`flex-grow overflow-y-auto rounded-lg shadow-xl ring-1 ${r==="dark"?"bg-secondary-800 ring-secondary-700/50":"bg-white ring-gray-200"}`,children:[l.length===0?T.jsx(cv,{iconClass:"fas fa-folder-open",title:"Henüz Kaydedilmiş Sınav Yok",message:"Oluşturduğunuz sınavların sonuçları burada listelenir. Hemen yeni bir tane oluşturun!",theme:r,actionButton:n?{text:"Yeni Kişisel Sınav Oluştur",onClick:n,iconClass:"fas fa-user-cog",gradientClasses:"bg-gradient-to-r from-pink-500 to-fuchsia-600"}:{text:"Yeni Hızlı Sınav Oluştur",onClick:t,iconClass:"fas fa-bolt",gradientClasses:"bg-gradient-to-r from-cyan-500 to-blue-600"}}):T.jsx("div",{className:"block lg:hidden",children:l.map(d=>T.jsxs("div",{className:`p-4 border-b ${r==="dark"?"border-secondary-700":"border-gray-200"} last:border-b-0`,children:[T.jsxs("div",{className:"flex items-start justify-between mb-2",children:[T.jsxs("div",{className:"flex-1 min-w-0 mr-3",children:[T.jsx("h3",{className:`text-sm font-medium truncate ${r==="dark"?"text-white":"text-gray-900"}`,title:d.pdfName||`Sınav (${u(d.savedAt).split(" ")[0]})`,children:d.pdfName||`Sınav (${u(d.savedAt).split(" ")[0]})`}),T.jsxs("p",{className:`text-xs ${r==="dark"?"text-gray-400":"text-gray-500"}`,children:[d.totalQuestions," Soru"]})]}),T.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full flex-shrink-0
                                   ${d.quizType==="Kişiselleştirilmiş Sınav"?r==="dark"?"bg-purple-500/20 text-purple-300":"bg-purple-100 text-purple-700":r==="dark"?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-700"}`,children:d.quizType==="Kişiselleştirilmiş Sınav"?"Kişisel":"Hızlı"})]}),T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("p",{className:`text-xs ${r==="dark"?"text-gray-400":"text-gray-500"}`,children:u(d.savedAt)}),T.jsx("p",{className:`text-sm font-medium ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:`${d.score}/${d.totalQuestions} (%${Math.round(d.score/d.totalQuestions*100)})`})]}),T.jsx("button",{onClick:()=>e(d),className:"px-3 py-2 text-xs font-medium rounded-lg transition-colors touch-target bg-primary-600 hover:bg-primary-700 text-white","aria-label":`'${d.pdfName||"Bu sınavı"}' görüntüle`,children:"Görüntüle"})]})]},d.id))}),l.length>0&&T.jsxs("table",{className:`hidden lg:table w-full min-w-full divide-y ${r==="dark"?"divide-secondary-700":"divide-gray-200"}`,children:[T.jsx("thead",{className:`sticky top-0 z-10 ${r==="dark"?"bg-secondary-700/50":"bg-gray-50"}`,children:T.jsxs("tr",{children:[T.jsx("th",{scope:"col",className:`px-6 py-3.5 text-left text-xs font-semibold uppercase tracking-wider ${r==="dark"?"text-gray-300":"text-gray-500"}`,children:"Sinav"}),T.jsx("th",{scope:"col",className:`px-6 py-3.5 text-left text-xs font-semibold uppercase tracking-wider ${r==="dark"?"text-gray-300":"text-gray-500"}`,children:"Tür"}),T.jsx("th",{scope:"col",className:`px-6 py-3.5 text-left text-xs font-semibold uppercase tracking-wider ${r==="dark"?"text-gray-300":"text-gray-500"}`,children:"Tarih"}),T.jsx("th",{scope:"col",className:`px-6 py-3.5 text-left text-xs font-semibold uppercase tracking-wider ${r==="dark"?"text-gray-300":"text-gray-500"}`,children:"Skor"}),T.jsx("th",{scope:"col",className:`px-6 py-3.5 text-left text-xs font-semibold uppercase tracking-wider ${r==="dark"?"text-gray-300":"text-gray-500"}`,children:"İşlemler"})]})}),T.jsx("tbody",{className:`divide-y ${r==="dark"?"divide-secondary-700":"divide-gray-200"}`,children:l.map(d=>T.jsxs("tr",{className:`transition-colors duration-150 ${r==="dark"?"hover:bg-secondary-700/30":"hover:bg-gray-50"}`,children:[T.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.jsxs("div",{className:"flex items-center",children:[T.jsx("div",{className:`mr-3 flex-shrink-0 ${r==="dark"?"text-blue-400":"text-blue-500"}`,children:T.jsx("i",{className:"fas fa-file-alt text-xl"})}),T.jsxs("div",{className:"min-w-0",children:[T.jsx("div",{className:`text-sm font-medium truncate max-w-xs md:max-w-sm ${r==="dark"?"text-white":"text-gray-900"}`,title:d.pdfName||`Sınav (${u(d.savedAt).split(" ")[0]})`,children:d.pdfName||`Sınav (${u(d.savedAt).split(" ")[0]})`}),T.jsxs("div",{className:`text-xs ${r==="dark"?"text-gray-400":"text-gray-500"}`,children:[d.totalQuestions," Soru"]})]})]})}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.jsx("span",{className:`px-2.5 py-1 inline-flex text-xs leading-5 font-semibold rounded-full 
                                     ${d.quizType==="Kişiselleştirilmiş Sınav"?r==="dark"?"bg-purple-500/20 text-purple-300":"bg-purple-100 text-purple-700":r==="dark"?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-700"}`,children:d.quizType||"Hızlı Sınav"})}),T.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:u(d.savedAt)}),T.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${r==="dark"?"text-gray-300":"text-gray-600"}`,children:`${d.score}/${d.totalQuestions} (%${Math.round(d.score/d.totalQuestions*100)})`}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:T.jsx("button",{onClick:()=>e(d),className:`transition-colors touch-target ${r==="dark"?"text-primary-400 hover:text-primary-300":"text-primary-600 hover:text-primary-500"}`,"aria-label":`'${d.pdfName||"Bu sınavı"}' görüntüle`,children:"Sonucu Görüntüle"})})]},d.id))})]})]})]})},Yj=Oi.memo(Gj),Kj=({objectives:i,allCourses:e=[],filterByCourse:t,onBack:n,onDeleteObjectives:r,theme:s})=>{const[a,l]=qe.useState(""),[u,d]=qe.useState("all"),[f,p]=qe.useState("all"),[y,v]=qe.useState([]),[C,E]=qe.useState(!1),R=B=>{switch(B){case"pending":return s==="dark"?"bg-yellow-500/20 text-yellow-300 border-yellow-500/30":"bg-yellow-100 text-yellow-700 border-yellow-300";case"success":return s==="dark"?"bg-green-500/20 text-green-300 border-green-500/30":"bg-green-100 text-green-700 border-green-300";case"failure":return s==="dark"?"bg-red-500/20 text-red-300 border-red-500/30":"bg-red-100 text-red-700 border-red-300";case"intermediate":return s==="dark"?"bg-blue-500/20 text-blue-300 border-blue-500/30":"bg-blue-100 text-blue-700 border-blue-300";default:return s==="dark"?"bg-gray-500/20 text-gray-300 border-gray-500/30":"bg-gray-100 text-gray-700 border-gray-300"}},I=B=>{switch(B){case"pending":return"Beklemede";case"success":return"Başarılı";case"failure":return"Başarısız";case"intermediate":return"Orta Seviye";default:return B}},D=qe.useMemo(()=>(i||[]).filter(B=>{if(!(t?B.courseId===t.id:f==="all"||B.courseId===f)||!(u==="all"||B.status===u))return!1;if(a){const Q=a.toLowerCase(),ce=B.name.toLowerCase().includes(Q),ge=B.sourcePdfName.toLowerCase().includes(Q),Te=t&&t.name?t.name.toLowerCase().includes(Q):!1,re=!t&&B.courseName?B.courseName.toLowerCase().includes(Q):!1;return ce||ge||Te||re}return!0}).sort((B,H)=>H.updatedAt-B.updatedAt),[i,t,f,u,a]),j=B=>new Date(B).toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),X=t?`"${t.name}" Dersinin Öğrenme Hedefleri`:"Tüm Öğrenme Hedeflerim",W=t?"Bu derse ait kişiselleştirilmiş sınavlardan çıkarılan hedefler.":"Tüm kişiselleştirilmiş sınavlarınızdan çıkarılan ve takip ettiğiniz öğrenme hedefleri.",ue=t?"Dersler Sayfasına Dön":"Ana Sayfaya Dön",U=t?"fas fa-layer-group":"fas fa-arrow-left",P=(B,H)=>{v(fe=>H?[...fe,B]:fe.filter(Q=>Q!==B))},V=()=>{y.length===D.length?v([]):v(D.map(B=>B.id))},Y=async()=>{if(!r||y.length===0)return;const B=y.length===1?"Bu öğrenme hedefini silmek istediğinizden emin misiniz?":`${y.length} öğrenme hedefini silmek istediğinizden emin misiniz?`;if(window.confirm(B)){E(!0);try{await r(y)&&v([])}catch(H){console.error("Silme işleminde hata:",H)}finally{E(!1)}}},O=()=>[{value:"all",label:"Tüm Durumlar"},{value:"pending",label:"Beklemede"},{value:"success",label:"Başarılı"},{value:"failure",label:"Başarısız"},{value:"intermediate",label:"Orta Seviye"}],F=()=>{const B=[{value:"all",label:"Tüm Dersler"}];return t||e.filter(fe=>i.some(Q=>Q.courseId===fe.id)).forEach(fe=>{B.push({value:fe.id,label:fe.name})}),B};return T.jsxs("div",{className:`w-full h-full flex flex-col p-0 ${s==="dark"?"text-gray-200":"text-gray-800"}`,children:[T.jsxs("div",{className:"mb-6 px-1 flex justify-between items-center",children:[T.jsxs("div",{children:[T.jsx("h1",{className:`text-2xl md:text-3xl font-bold mb-1 ${s==="dark"?"text-white":"text-gray-900"}`,children:X}),T.jsx("p",{className:`text-sm md:text-base ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:W})]}),n&&T.jsxs("button",{onClick:n,className:`px-4 py-2 rounded-lg transition-colors flex items-center whitespace-nowrap ${s==="dark"?"bg-secondary-700 hover:bg-secondary-600 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,"aria-label":ue,children:[T.jsx("i",{className:`${U} mr-2`})," ",ue]})]}),T.jsxs("div",{className:"mb-6 space-y-4 px-1",children:[T.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[T.jsxs("div",{className:"relative flex-grow lg:max-w-md",children:[T.jsx("input",{type:"text",placeholder:"Hedef, PDF veya ders adı ara...",value:a,onChange:B=>l(B.target.value),className:`w-full p-3 pl-10 border rounded-lg focus:ring-primary-500 focus:border-primary-500 ${s==="dark"?"bg-secondary-800 border-secondary-700 text-gray-200 placeholder-gray-500":"bg-white border-gray-300 text-gray-800 placeholder-gray-400"}`,"aria-label":"Hedef arama"}),T.jsx("i",{className:`fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 ${s==="dark"?"text-gray-500":"text-gray-400"}`})]}),r&&y.length>0&&T.jsxs("button",{onClick:Y,disabled:C,className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center whitespace-nowrap ${C?"opacity-50 cursor-not-allowed":s==="dark"?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,children:[T.jsx("i",{className:`fas ${C?"fa-spinner fa-spin":"fa-trash"} mr-2`}),C?"Siliniyor...":`Seçilenleri Sil (${y.length})`]})]}),T.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:`block text-sm font-medium mb-1 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"Durum Filtresi"}),T.jsx("select",{value:u,onChange:B=>d(B.target.value),className:`w-full p-2 border rounded-md focus:ring-primary-500 focus:border-primary-500 ${s==="dark"?"bg-secondary-800 border-secondary-700 text-gray-200":"bg-white border-gray-300 text-gray-800"}`,children:O().map(B=>T.jsx("option",{value:B.value,children:B.label},B.value))})]}),!t&&T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:`block text-sm font-medium mb-1 ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"Ders Filtresi"}),T.jsx("select",{value:f,onChange:B=>p(B.target.value),className:`w-full p-2 border rounded-md focus:ring-primary-500 focus:border-primary-500 ${s==="dark"?"bg-secondary-800 border-secondary-700 text-gray-200":"bg-white border-gray-300 text-gray-800"}`,children:F().map(B=>T.jsx("option",{value:B.value,children:B.label},B.value))})]})]})]}),T.jsx("div",{className:`flex-grow overflow-y-auto rounded-lg shadow-xl ring-1 ${s==="dark"?"bg-secondary-800 ring-secondary-700/50":"bg-white ring-gray-200"}`,children:D.length===0?T.jsx(cv,{iconClass:"fas fa-bullseye-pointer",title:t?"Bu Derse Ait Hedef Bulunmuyor":"Henüz Öğrenme Hedefi Yok",message:t?"Bu ders için kişiselleştirilmiş sınavlar oluşturduğunuzda hedefler burada listelenecektir.":"Kişiselleştirilmiş sınavlar oluşturduğunuzda, belirlenen alt konular burada hedefleriniz olarak listelenir. Yeni bir kişisel sınav oluşturarak başlayabilirsiniz.",actionButton:!t&&n?{text:"Ana Sayfaya Dön",onClick:n,iconClass:"fas fa-home"}:void 0,theme:s}):T.jsxs("table",{className:`w-full min-w-full divide-y ${s==="dark"?"divide-secondary-700":"divide-gray-200"}`,children:[T.jsx("thead",{className:`sticky top-0 z-10 ${s==="dark"?"bg-secondary-700/50":"bg-gray-50"}`,children:T.jsxs("tr",{children:[r&&T.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left",children:T.jsx("input",{type:"checkbox",checked:D.length>0&&y.length===D.length,onChange:V,className:`rounded border focus:ring-primary-500 ${s==="dark"?"bg-secondary-800 border-secondary-600 text-primary-500":"bg-white border-gray-300 text-primary-500"}`,"aria-label":"Tümünü seç"})}),T.jsx("th",{scope:"col",className:`px-6 py-3.5 text-left text-xs font-semibold uppercase tracking-wider ${s==="dark"?"text-gray-300":"text-gray-500"}`,children:"Hedef Adı"}),T.jsx("th",{scope:"col",className:`px-6 py-3.5 text-left text-xs font-semibold uppercase tracking-wider ${s==="dark"?"text-gray-300":"text-gray-500"}`,children:"Durum"}),T.jsx("th",{scope:"col",className:`px-6 py-3.5 text-left text-xs font-semibold uppercase tracking-wider ${s==="dark"?"text-gray-300":"text-gray-500"}`,children:"Kaynak PDF"}),!t&&T.jsx("th",{scope:"col",className:`px-6 py-3.5 text-left text-xs font-semibold uppercase tracking-wider ${s==="dark"?"text-gray-300":"text-gray-500"}`,children:"Ders"}),T.jsx("th",{scope:"col",className:`px-6 py-3.5 text-left text-xs font-semibold uppercase tracking-wider ${s==="dark"?"text-gray-300":"text-gray-500"}`,children:"Son Güncelleme"}),r&&T.jsx("th",{scope:"col",className:`px-6 py-3.5 text-left text-xs font-semibold uppercase tracking-wider ${s==="dark"?"text-gray-300":"text-gray-500"}`,children:"İşlemler"})]})}),T.jsx("tbody",{className:`divide-y ${s==="dark"?"divide-secondary-700":"divide-gray-200"}`,children:D.map(B=>T.jsxs("tr",{className:`transition-colors duration-150 ${s==="dark"?"hover:bg-secondary-700/30":"hover:bg-gray-50"} ${y.includes(B.id)?s==="dark"?"bg-secondary-700/20":"bg-blue-50":""}`,children:[r&&T.jsx("td",{className:"px-6 py-4",children:T.jsx("input",{type:"checkbox",checked:y.includes(B.id),onChange:H=>P(B.id,H.target.checked),className:`rounded border focus:ring-primary-500 ${s==="dark"?"bg-secondary-800 border-secondary-600 text-primary-500":"bg-white border-gray-300 text-primary-500"}`,"aria-label":`${B.name} seç`})}),T.jsx("td",{className:"px-6 py-4 whitespace-normal break-words",children:T.jsx("div",{className:`text-sm font-medium ${s==="dark"?"text-white":"text-gray-900"}`,children:B.name})}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.jsx("span",{className:`px-2.5 py-1 inline-flex text-xs leading-5 font-semibold rounded-full border ${R(B.status)}`,children:I(B.status)})}),T.jsx("td",{className:`px-6 py-4 whitespace-normal break-words text-sm ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:B.sourcePdfName}),!t&&T.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:B.courseName||T.jsx("span",{className:"italic opacity-60",children:"Belirtilmemiş"})}),T.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:j(B.updatedAt)}),r&&T.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.jsx("button",{onClick:()=>{window.confirm("Bu öğrenme hedefini silmek istediğinizden emin misiniz?")&&r([B.id])},className:`text-sm font-medium transition-colors ${s==="dark"?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-900"}`,"aria-label":`${B.name} sil`,children:T.jsx("i",{className:"fas fa-trash"})})})]},B.id))})]})})]})},Wj=Oi.memo(Kj),wu=Oi.memo(({title:i,value:e,icon:t,iconColorClass:n,iconBgClass:r,subValue:s,theme:a})=>{const l=a==="dark"?"text-primary-400":"text-primary-600",u=a==="dark"?"bg-primary-500/10":"bg-primary-100";return T.jsxs("div",{className:`p-5 rounded-xl shadow-lg flex items-center space-x-4 ring-1 min-h-[100px] hover:shadow-xl transition-all duration-300 group ${a==="dark"?"bg-secondary-800 ring-secondary-700/50 hover:ring-primary-700/50":"bg-white ring-gray-200 hover:ring-primary-200"}`,children:[T.jsx("div",{className:`p-3.5 rounded-lg ${r||u} ${n||l} self-start mt-1 group-hover:scale-110 transition-transform duration-300`,children:T.jsx("i",{className:`${t} text-2xl sm:text-3xl`})}),T.jsxs("div",{className:"flex-grow",children:[T.jsx("p",{className:`text-sm transition-colors ${a==="dark"?"text-gray-400 group-hover:text-gray-300":"text-gray-500 group-hover:text-gray-600"}`,children:i}),T.jsx("p",{className:`text-2xl font-bold transition-colors ${a==="dark"?"text-white group-hover:text-primary-400":"text-gray-900 group-hover:text-primary-600"}`,children:e}),s&&T.jsx("p",{className:`text-xs mt-0.5 transition-colors ${a==="dark"?"text-gray-400 group-hover:text-gray-300":"text-gray-500 group-hover:text-gray-600"}`,children:s})]})]})}),Qj=({percentage:i,color:e,label:t,title:n})=>T.jsx("div",{style:{"--p":`${i}%`,"--c":e},className:"pie-segment flex-shrink-0",title:`${n}: ${i.toFixed(1)}%`,children:i>5&&T.jsx("span",{className:"pie-label",children:t})}),Xj=({savedQuizzes:i,allCourses:e,learningObjectives:t,onBack:n,theme:r})=>{var P,V,Y,O,F,B;const[s,a]=qe.useState("all"),[l,u]=qe.useState("all"),[d,f]=qe.useState("all"),p=qe.useMemo(()=>(i||[]).filter(H=>{if(!(s==="all"||H.courseId===s)||l!=="all"&&(l==="quick"&&H.quizType!=="Hızlı Sınav"||l==="personalized_all"&&H.quizType!=="Kişiselleştirilmiş Sınav"||l==="personalized_comprehensive"&&(H.quizType!=="Kişiselleştirilmiş Sınav"||H.personalizedQuizType!=="comprehensive")||l==="personalized_new_topics"&&(H.quizType!=="Kişiselleştirilmiş Sınav"||H.personalizedQuizType!=="new_topics")||l==="personalized_weak_topics"&&(H.quizType!=="Kişiselleştirilmiş Sınav"||H.personalizedQuizType!=="weak_topics")))return!1;if(d!=="all"){const Q=Date.now(),ce=H.savedAt,ge=Q-ce;switch(d){case"last_hour":if(ge>60*60*1e3)return!1;break;case"last_day":if(ge>24*60*60*1e3)return!1;break;case"last_3_days":if(ge>3*24*60*60*1e3)return!1;break;case"last_week":if(ge>7*24*60*60*1e3)return!1;break;case"last_month":if(ge>30*24*60*60*1e3)return!1;break}}return!0}),[i,s,l,d]),y=qe.useMemo(()=>s==="all"?t||[]:(t||[]).filter(H=>H.courseId===s),[t,s]),v=qe.useMemo(()=>{if(p.length===0)return{totalQuizzes:0,averageScore:0,highestScore:0,lowestScore:0,totalQuestionsAnswered:0,totalCorrectAnswers:0,passedQuizzes:0,failedQuizzes:0};let H=0,fe=0,Q=100,ce=0,ge=0,Te=0,re=0;return p.forEach(xe=>{const q=xe.totalQuestions>0?xe.score/xe.totalQuestions*100:0;H+=q,ce+=xe.totalQuestions,ge+=xe.score,q>=60?Te++:re++,q>fe&&(fe=q),q<Q&&(Q=q)}),{totalQuizzes:p.length,averageScore:Math.round(H/p.length),highestScore:Math.round(fe),lowestScore:Math.round(Q===100?Math.min(...p.map(xe=>xe.totalQuestions>0?xe.score/xe.totalQuestions*100:0)):Q),totalQuestionsAnswered:ce,totalCorrectAnswers:ge,passedQuizzes:Te,failedQuizzes:re}},[p]),C=qe.useMemo(()=>{const H={quick:{count:0,totalScore:0,scores:[]},personalized_comprehensive:{count:0,totalScore:0,scores:[]},personalized_new_topics:{count:0,totalScore:0,scores:[]},personalized_weak_topics:{count:0,totalScore:0,scores:[]},personalized_other:{count:0,totalScore:0,scores:[]}};p.forEach(Q=>{const ce=Q.totalQuestions>0?Q.score/Q.totalQuestions*100:0;if(Q.quizType==="Hızlı Sınav")H.quick.count++,H.quick.totalScore+=ce,H.quick.scores.push(ce);else if(Q.quizType==="Kişiselleştirilmiş Sınav"){const ge=Q.personalizedQuizType;ge==="comprehensive"?(H.personalized_comprehensive.count++,H.personalized_comprehensive.totalScore+=ce,H.personalized_comprehensive.scores.push(ce)):ge==="new_topics"?(H.personalized_new_topics.count++,H.personalized_new_topics.totalScore+=ce,H.personalized_new_topics.scores.push(ce)):ge==="weak_topics"?(H.personalized_weak_topics.count++,H.personalized_weak_topics.totalScore+=ce,H.personalized_weak_topics.scores.push(ce)):(H.personalized_other.count++,H.personalized_other.totalScore+=ce,H.personalized_other.scores.push(ce))}});const fe=Q=>H[Q].count>0?Math.round(H[Q].totalScore/H[Q].count):0;return{quick:{count:H.quick.count,averageScore:fe("quick")},personalized_comprehensive:{count:H.personalized_comprehensive.count,averageScore:fe("personalized_comprehensive")},personalized_new_topics:{count:H.personalized_new_topics.count,averageScore:fe("personalized_new_topics")},personalized_weak_topics:{count:H.personalized_weak_topics.count,averageScore:fe("personalized_weak_topics")},personalized_other:{count:H.personalized_other.count,averageScore:fe("personalized_other")},totalPersonalized:H.personalized_comprehensive.count+H.personalized_new_topics.count+H.personalized_weak_topics.count+H.personalized_other.count,averagePersonalizedScore:H.personalized_comprehensive.count+H.personalized_new_topics.count+H.personalized_weak_topics.count+H.personalized_other.count>0?Math.round((H.personalized_comprehensive.totalScore+H.personalized_new_topics.totalScore+H.personalized_weak_topics.totalScore+H.personalized_other.totalScore)/(H.personalized_comprehensive.count+H.personalized_new_topics.count+H.personalized_weak_topics.count+H.personalized_other.count)):0}},[p]),E=qe.useMemo(()=>{const H={pending:0,success:0,failure:0,intermediate:0};y.forEach(Q=>{H[Q.status]++});const fe=y.length;return{totalLOs:fe,counts:H,percentages:{pending:fe>0?H.pending/fe*100:0,success:fe>0?H.success/fe*100:0,failure:fe>0?H.failure/fe*100:0,intermediate:fe>0?H.intermediate/fe*100:0}}},[y]),R=qe.useMemo(()=>[...p].sort((H,fe)=>H.savedAt-fe.savedAt),[p]),I=H=>{const fe=H.totalQuestions>0?H.score/H.totalQuestions*100:0;let Q="",ce="",ge="";if(H.quizType==="Kişiselleştirilmiş Sınav")switch(ce="Kişisel",H.personalizedQuizType){case"comprehensive":Q="bg-purple-500",ge="Kapsamlı";break;case"new_topics":Q="bg-pink-500",ge="Yeni Konular";break;case"weak_topics":Q="bg-fuchsia-500",ge="Zayıf Konular";break;default:Q="bg-indigo-500",ge="Diğer Kişisel"}else ce="Hızlı",Q="bg-cyan-500";return fe<50?{color:`${Q} opacity-60`,typeLabel:ce,specificTypeLabel:ge}:fe<75?{color:`${Q} opacity-80`,typeLabel:ce,specificTypeLabel:ge}:{color:Q,typeLabel:ce,specificTypeLabel:ge}},D=(H,fe=!1)=>fe?new Date(H).toLocaleString("tr-TR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):new Date(H).toLocaleDateString("tr-TR",{day:"2-digit",month:"short"}),j=H=>{switch(H){case"pending":return"Beklemede";case"success":return"Başarılı";case"failure":return"Başarısız";case"intermediate":return"Orta";default:return H}},X=H=>{switch(H){case"success":return"#22c55e";case"failure":return"#ef4444";case"intermediate":return"#3b82f6";case"pending":return"#f59e0b";default:return"#6b7280"}},W=[{value:"all",label:"Tüm Sınav Türleri"},{value:"quick",label:"Hızlı Sınavlar"},{value:"personalized_all",label:"Tüm Kişiselleştirilmiş"},{value:"personalized_comprehensive",label:"Kişisel - Kapsamlı"},{value:"personalized_new_topics",label:"Kişisel - Yeni Konular"},{value:"personalized_weak_topics",label:"Kişisel - Zayıf Konular"}],ue=[{value:"all",label:"Tüm Zamanlar",icon:"fas fa-infinity"},{value:"last_hour",label:"Son 1 Saat",icon:"fas fa-clock"},{value:"last_day",label:"Son 1 Gün",icon:"fas fa-calendar-day"},{value:"last_3_days",label:"Son 3 Gün",icon:"fas fa-calendar-days"},{value:"last_week",label:"Son 1 Hafta",icon:"fas fa-calendar-week"},{value:"last_month",label:"Son 1 Ay",icon:"fas fa-calendar"}],U={comprehensive:"Kapsamlı",new_topics:"Yeni Konular",weak_topics:"Zayıf Konular"};return T.jsxs("div",{className:`w-full h-full flex flex-col p-0 ${r==="dark"?"text-gray-200":"text-gray-800"}`,children:[T.jsxs("div",{className:"mb-6 px-1 flex flex-col sm:flex-row sm:justify-between sm:items-center",children:[T.jsxs("div",{className:"mb-3 sm:mb-0",children:[T.jsx("h1",{className:`text-2xl sm:text-3xl font-bold mb-1 ${r==="dark"?"text-white":"text-gray-900"}`,children:"Performans Analizi"}),T.jsx("p",{className:`${r==="dark"?"text-gray-400":"text-gray-500"}`,children:"Sınav performansınızı ve öğrenme ilerlemenizi takip edin."})]}),n&&T.jsxs("button",{onClick:n,className:`px-4 py-2 rounded-lg transition-colors flex items-center self-start sm:self-center ${r==="dark"?"bg-secondary-700 hover:bg-secondary-600 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,"aria-label":"Ana Sayfaya Dön",children:[T.jsx("i",{className:"fas fa-arrow-left mr-2"})," Ana Sayfa"]})]}),T.jsxs("section",{className:`mb-6 p-4 sm:p-5 rounded-xl shadow-lg ring-1 ${r==="dark"?"bg-secondary-800 ring-secondary-700/50":"bg-white ring-gray-200"}`,children:[T.jsxs("h2",{className:`text-lg font-semibold mb-4 flex items-center ${r==="dark"?"text-white":"text-gray-800"}`,children:[T.jsx("i",{className:`fas fa-filter mr-2 ${r==="dark"?"text-primary-400":"text-primary-600"}`}),"Filtreler"]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[T.jsxs("div",{children:[T.jsxs("label",{htmlFor:"courseFilter",className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:[T.jsx("i",{className:`fas fa-book mr-1.5 ${r==="dark"?"text-primary-400":"text-primary-600"}`}),"Ders Seçin"]}),T.jsxs("select",{id:"courseFilter",value:s,onChange:H=>a(H.target.value),className:`w-full p-2.5 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors ${r==="dark"?"bg-secondary-700 border-secondary-600 text-gray-200":"bg-gray-50 border-gray-300 text-gray-800"}`,children:[T.jsx("option",{value:"all",children:"Tüm Dersler"}),e.map(H=>T.jsx("option",{value:H.id,children:H.name},H.id))]})]}),T.jsxs("div",{children:[T.jsxs("label",{htmlFor:"quizTypeFilter",className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:[T.jsx("i",{className:`fas fa-graduation-cap mr-1.5 ${r==="dark"?"text-primary-400":"text-primary-600"}`}),"Sınav Türü Seçin"]}),T.jsx("select",{id:"quizTypeFilter",value:l,onChange:H=>u(H.target.value),className:`w-full p-2.5 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors ${r==="dark"?"bg-secondary-700 border-secondary-600 text-gray-200":"bg-gray-50 border-gray-300 text-gray-800"}`,children:W.map(H=>T.jsx("option",{value:H.value,children:H.label},H.value))})]}),T.jsxs("div",{children:[T.jsxs("label",{htmlFor:"timeFilter",className:`block text-sm font-medium mb-2 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:[T.jsx("i",{className:`fas fa-clock mr-1.5 ${r==="dark"?"text-primary-400":"text-primary-600"}`}),"Zaman Aralığı"]}),T.jsx("select",{id:"timeFilter",value:d,onChange:H=>f(H.target.value),className:`w-full p-2.5 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors ${r==="dark"?"bg-secondary-700 border-secondary-600 text-gray-200":"bg-gray-50 border-gray-300 text-gray-800"}`,children:ue.map(H=>T.jsx("option",{value:H.value,children:H.label},H.value))})]})]}),T.jsx("div",{className:`mt-4 pt-3 border-t ${r==="dark"?"border-secondary-600":"border-gray-200"}`,children:T.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[s!=="all"&&T.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r==="dark"?"bg-primary-900 text-primary-300":"bg-primary-100 text-primary-800"}`,children:[T.jsx("i",{className:"fas fa-book mr-1"}),((P=e.find(H=>H.id===s))==null?void 0:P.name)||"Ders"]}),l!=="all"&&T.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r==="dark"?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800"}`,children:[T.jsx("i",{className:"fas fa-graduation-cap mr-1"}),((V=W.find(H=>H.value===l))==null?void 0:V.label)||"Sınav Türü"]}),d!=="all"&&T.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r==="dark"?"bg-green-900 text-green-300":"bg-green-100 text-green-800"}`,children:[T.jsx("i",{className:`${((Y=ue.find(H=>H.value===d))==null?void 0:Y.icon)||"fas fa-clock"} mr-1`}),((O=ue.find(H=>H.value===d))==null?void 0:O.label)||"Zaman"]}),s==="all"&&l==="all"&&d==="all"&&T.jsx("span",{className:`${r==="dark"?"text-gray-400":"text-gray-500"}`})]})})]}),i.length===0?T.jsx(cv,{iconClass:"fas fa-chart-pie",title:"Veri Yok",message:"Performans analizi için henüz kaydedilmiş sınav verisi bulunmamaktadır. Sınavları tamamladıkça verileriniz burada görünecektir.",actionButton:n?{text:"Ana Sayfaya Dön",onClick:n,iconClass:"fas fa-home"}:void 0,theme:r}):p.length===0&&i.length>0?T.jsx(cv,{iconClass:"fas fa-filter",title:"Filtre Sonucu Boş",message:"Seçtiğiniz filtre kriterlerine uygun sınav bulunamadı. Lütfen filtrelerinizi değiştirerek tekrar deneyin.",theme:r}):T.jsxs("div",{className:"flex-grow overflow-y-auto space-y-8 custom-scrollbar pr-1 pb-4",children:[T.jsxs("section",{children:[T.jsxs("h2",{className:`text-xl font-semibold mb-4 px-1 flex items-center ${r==="dark"?"text-white":"text-gray-900"}`,children:[T.jsx("i",{className:`fas fa-chart-line mr-2 ${r==="dark"?"text-primary-400":"text-primary-600"}`}),"Genel Filtrelenmiş İstatistikler"]}),T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[T.jsx(wu,{title:"Toplam Sınav",value:v.totalQuizzes,icon:"fas fa-graduation-cap",iconColorClass:r==="dark"?"text-primary-400":"text-primary-600",iconBgClass:r==="dark"?"bg-primary-500/10":"bg-primary-100",theme:r}),T.jsx(wu,{title:"Ortalama Skor",value:`${v.averageScore}%`,icon:"fas fa-percentage",iconColorClass:r==="dark"?"text-blue-400":"text-blue-600",iconBgClass:r==="dark"?"bg-blue-500/10":"bg-blue-100",theme:r}),T.jsx(wu,{title:"En Yüksek Skor",value:`${v.highestScore}%`,icon:"fas fa-arrow-trend-up",iconColorClass:r==="dark"?"text-green-400":"text-green-600",iconBgClass:r==="dark"?"bg-green-500/10":"bg-green-100",theme:r}),T.jsx(wu,{title:"En Düşük Skor",value:`${v.lowestScore}%`,icon:"fas fa-arrow-trend-down",iconColorClass:r==="dark"?"text-red-400":"text-red-600",iconBgClass:r==="dark"?"bg-red-500/10":"bg-red-100",theme:r}),T.jsx(wu,{title:"Toplam Soru",value:v.totalQuestionsAnswered,icon:"fas fa-question-circle",iconColorClass:r==="dark"?"text-indigo-400":"text-indigo-600",iconBgClass:r==="dark"?"bg-indigo-500/10":"bg-indigo-100",subValue:`${v.totalCorrectAnswers} doğru`,theme:r}),T.jsx(wu,{title:"Doğruluk Oranı",value:v.totalQuestionsAnswered>0?`${Math.round(v.totalCorrectAnswers/v.totalQuestionsAnswered*100)}%`:"0%",icon:"fas fa-bullseye",iconColorClass:r==="dark"?"text-purple-400":"text-purple-600",iconBgClass:r==="dark"?"bg-purple-500/10":"bg-purple-100",subValue:`${v.totalCorrectAnswers}/${v.totalQuestionsAnswered}`,theme:r}),T.jsx(wu,{title:"Başarılı Sınav",value:v.passedQuizzes,icon:"fas fa-check-circle",iconColorClass:r==="dark"?"text-emerald-400":"text-emerald-600",iconBgClass:r==="dark"?"bg-emerald-500/10":"bg-emerald-100",subValue:`≥60% (${v.totalQuizzes>0?Math.round(v.passedQuizzes/v.totalQuizzes*100):0}%)`,theme:r}),T.jsx(wu,{title:"Başarısız Sınav",value:v.failedQuizzes,icon:"fas fa-times-circle",iconColorClass:r==="dark"?"text-orange-400":"text-orange-600",iconBgClass:r==="dark"?"bg-orange-500/10":"bg-orange-100",subValue:`<60% (${v.totalQuizzes>0?Math.round(v.failedQuizzes/v.totalQuizzes*100):0}%)`,theme:r})]})]}),T.jsxs("section",{className:`p-5 sm:p-6 rounded-xl shadow-lg ring-1 ${r==="dark"?"bg-secondary-800 ring-secondary-700/50":"bg-white ring-gray-200"}`,children:[T.jsxs("h2",{className:`text-xl font-semibold mb-5 flex items-center ${r==="dark"?"text-white":"text-gray-900"}`,children:[T.jsx("i",{className:`fas fa-layer-group mr-2 ${r==="dark"?"text-primary-400":"text-primary-600"}`}),"Sınav Türü Detayları (Filtrelenmiş)"]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5",children:[C.quick.count>0&&T.jsx(wu,{title:"Hızlı Sınavlar",value:C.quick.count,subValue:`Ort. Skor: ${C.quick.averageScore}%`,icon:"fas fa-bolt",iconColorClass:r==="dark"?"text-cyan-400":"text-cyan-600",iconBgClass:r==="dark"?"bg-cyan-500/10":"bg-cyan-100",theme:r}),C.totalPersonalized>0&&T.jsx(wu,{title:"Kişiselleştirilmiş Sınavlar (Toplam)",value:C.totalPersonalized,subValue:`Ort. Skor: ${C.averagePersonalizedScore}%`,icon:"fas fa-user-cog",iconColorClass:r==="dark"?"text-purple-400":"text-purple-600",iconBgClass:r==="dark"?"bg-purple-500/10":"bg-purple-100",theme:r}),Object.entries(U).map(([H,fe])=>{const Q=`personalized_${H}`,ce=C[Q];return ce&&ce.count>0?T.jsx(wu,{title:`Kişisel - ${fe}`,value:ce.count,subValue:`Ort. Skor: ${ce.averageScore}%`,icon:H==="comprehensive"?"fas fa-book-reader":H==="new_topics"?"fas fa-lightbulb":"fas fa-crosshairs",iconColorClass:H==="comprehensive"?r==="dark"?"text-purple-300":"text-purple-500":H==="new_topics"?r==="dark"?"text-pink-300":"text-pink-500":r==="dark"?"text-fuchsia-300":"text-fuchsia-500",iconBgClass:H==="comprehensive"?r==="dark"?"bg-purple-500/15":"bg-purple-100":H==="new_topics"?r==="dark"?"bg-pink-500/15":"bg-pink-100":r==="dark"?"bg-fuchsia-500/15":"bg-fuchsia-100",theme:r},Q):null})]})]}),(s!=="all"||E.totalLOs>0)&&T.jsxs("section",{className:`p-5 sm:p-6 rounded-xl shadow-lg ring-1 ${r==="dark"?"bg-secondary-800 ring-secondary-700/50":"bg-white ring-gray-200"}`,children:[T.jsxs("h2",{className:`text-xl font-semibold mb-5 flex items-center ${r==="dark"?"text-white":"text-gray-900"}`,children:[T.jsx("i",{className:`fas fa-target mr-2 ${r==="dark"?"text-primary-400":"text-primary-600"}`}),"Öğrenme Hedefleri Analizi ",s!=="all"&&e.find(H=>H.id===s)?`(${(F=e.find(H=>H.id===s))==null?void 0:F.name})`:"(Tüm Dersler)"]}),E.totalLOs>0?T.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[T.jsxs("div",{className:"w-full md:w-1/2",children:[T.jsxs("p",{className:`text-lg font-medium mb-1 ${r==="dark"?"text-gray-300":"text-gray-700"}`,children:["Toplam Hedef: ",T.jsx("span",{className:`font-bold ${r==="dark"?"text-primary-400":"text-primary-600"}`,children:E.totalLOs})]}),T.jsx("ul",{className:"space-y-1.5 text-sm",children:Object.keys(E.counts).map(H=>T.jsxs("li",{className:`flex justify-between items-center p-2 rounded-md ${r==="dark"?"bg-secondary-700/50":"bg-gray-50"}`,children:[T.jsxs("span",{className:`${r==="dark"?"text-gray-300":"text-gray-700"}`,children:[j(H),":"]}),T.jsxs("span",{className:`font-semibold ${r==="dark"?"text-white":"text-gray-800"}`,children:[E.counts[H]," (",E.percentages[H].toFixed(1),"%)"]})]},H))})]}),T.jsx("div",{className:"w-full md:w-1/2",children:T.jsx("div",{className:"pie-chart-container relative mx-auto my-4",title:"Öğrenme Hedefi Durum Dağılımı",children:Object.keys(E.percentages).map(H=>E.percentages[H]>0&&T.jsx(Qj,{percentage:E.percentages[H],color:X(H),label:j(H).substring(0,1),title:j(H)},H))})})]}):T.jsx("p",{className:`${r==="dark"?"text-gray-400":"text-gray-500"}`,children:"Bu ders için henüz öğrenme hedefi bulunmuyor veya hiç kişiselleştirilmiş sınav oluşturulmamış."})]}),T.jsxs("section",{className:`p-5 sm:p-6 rounded-xl shadow-lg ring-1 ${r==="dark"?"bg-secondary-800 ring-secondary-700/50":"bg-white ring-gray-200"}`,children:[T.jsxs("h2",{className:`text-xl font-semibold mb-6 flex items-center ${r==="dark"?"text-white":"text-gray-900"}`,children:[T.jsx("i",{className:`fas fa-chart-area mr-2 ${r==="dark"?"text-primary-400":"text-primary-600"}`}),"Sınav Skorları Zaman Çizelgesi (Filtrelenmiş)"]}),R.length>0?T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:`p-3 rounded-lg ${r==="dark"?"bg-secondary-700/30":"bg-gray-50"}`,children:T.jsxs("div",{className:`flex flex-wrap items-center gap-3 text-sm ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:[T.jsxs("span",{className:"flex items-center",children:[T.jsx("i",{className:`fas fa-info-circle mr-1.5 ${r==="dark"?"text-primary-400":"text-primary-600"}`}),T.jsx("strong",{children:R.length})," sınav gösteriliyor"]}),d!=="all"&&T.jsxs("span",{className:"flex items-center",children:[T.jsx("i",{className:`fas fa-clock mr-1.5 ${r==="dark"?"text-green-400":"text-green-600"}`}),(B=ue.find(H=>H.value===d))==null?void 0:B.label]}),T.jsxs("span",{className:"flex items-center",children:[T.jsx("i",{className:`fas fa-calendar-alt mr-1.5 ${r==="dark"?"text-blue-400":"text-blue-600"}`}),D(Math.min(...R.map(H=>H.savedAt)))," - ",D(Math.max(...R.map(H=>H.savedAt)))]})]})}),T.jsx("div",{className:`flex items-end space-x-1.5 h-72 p-4 rounded-lg overflow-x-auto custom-scrollbar-chart ${r==="dark"?"bg-secondary-700/30":"bg-gray-100"}`,children:R.map(H=>{const fe=H.totalQuestions>0?H.score/H.totalQuestions*100:0,Q=Math.max(5,fe),{color:ce,typeLabel:ge,specificTypeLabel:Te}=I(H),re=`${H.pdfName||(H.courseName?`${H.courseName} Sınavı`:"Sınav")}
Tür: ${ge}${Te?" - "+Te:""}
Tarih: ${D(H.savedAt,!0)}
Skor: ${Math.round(fe)}% (${H.score}/${H.totalQuestions})`;return T.jsxs("div",{className:"flex flex-col items-center flex-shrink-0 w-12 group relative",title:re,children:[T.jsx("div",{className:`w-8 rounded-t-md transition-all duration-300 ease-out ${ce} group-hover:opacity-75 group-hover:scale-105`,style:{height:`${Q}%`},"aria-label":`Sınav skoru: ${Math.round(fe)}%`}),T.jsx("div",{className:`text-xs mt-1.5 whitespace-nowrap group-hover:font-semibold transition-colors ${r==="dark"?"text-gray-400 group-hover:text-primary-300":"text-gray-500 group-hover:text-primary-600"}`,children:D(H.savedAt)})]},H.id)})})]}):T.jsxs("div",{className:"text-center py-12",children:[T.jsx("i",{className:`fas fa-chart-line text-4xl mb-4 ${r==="dark"?"text-gray-600":"text-gray-400"}`}),T.jsx("p",{className:`text-lg ${r==="dark"?"text-gray-400":"text-gray-500"}`,children:"Zaman çizelgesi için filtrelenmiş veri yok."}),d!=="all"&&T.jsx("p",{className:`text-sm mt-2 ${r==="dark"?"text-gray-500":"text-gray-400"}`,children:"Daha geniş bir zaman aralığı seçmeyi deneyin."})]})]})]}),T.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: var(--scrollbar-track-color); border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb-color); border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-thumb-hover-color); }
        .custom-scrollbar { scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb-color) var(--scrollbar-track-color); }

        .custom-scrollbar-chart::-webkit-scrollbar { height: 8px; width: 8px; }
        .custom-scrollbar-chart::-webkit-scrollbar-track { background: var(--scrollbar-track-color); border-radius: 10px; }
        .custom-scrollbar-chart::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb-color); border-radius: 10px; }
        .custom-scrollbar-chart::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-thumb-hover-color); }
        .custom-scrollbar-chart { scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb-color) var(--scrollbar-track-color); }
        
        @property --p { syntax: '<percentage>'; inherits: true; initial-value: 0%; }
        .pie-chart-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(
                var(--c, #6b7280) var(--p, 0%) 
            ); /* Default for remaining part */
            position: relative;
        }
        .pie-chart-container::before { /* Makes it a donut */
            content: "";
            position: absolute;
            inset: 30%; /* Adjust for donut thickness */
            border-radius: 50%;
            background: var(--bg-color-pie-center, white); /* Use CSS var for dark/light mode compatibility */
            
        }
        html.dark .pie-chart-container::before {
             --bg-color-pie-center: #1e293b; /* secondary-800 */
        }
        html:not(.dark) .pie-chart-container::before {
             --bg-color-pie-center: white;
        }

        .pie-segment {
            width: 100%; height: 100%; border-radius: 50%;
            background: conic-gradient(var(--c) var(--p), transparent 0);
            position: absolute; top:0; left:0;
            display: flex; align-items: center; justify-content: center;
        }
        .pie-label {
            font-size: 0.6rem; color: white; text-shadow: 0 0 2px rgba(0,0,0,0.5);
            transform: rotate(calc(var(--p) / 2)); /* Basic attempt to center label, might need adjustment */
        }
      `})]})},Jj=Oi.memo(Xj),j3=Oi.memo(({achievement:i,theme:e})=>{const{title:t,description:n,icon:r,isUnlocked:s,unlockedDate:a,progress:l,category:u}=i,d=l&&s?l.current/l.target*100:s?100:0;return T.jsxs("div",{className:`relative p-4 sm:p-6 rounded-xl shadow-lg ring-1 flex flex-col transition-all duration-300 ease-in-out transform hover:scale-[1.02] touch-target
      ${s?e==="dark"?"bg-secondary-800 ring-secondary-700/50":"bg-white ring-gray-200":e==="dark"?"bg-secondary-800/60 ring-secondary-700/30 opacity-70":"bg-gray-100 ring-gray-200 opacity-70"}`,children:[s&&u&&T.jsx("span",{className:`absolute top-2 sm:top-3 right-2 sm:right-3 px-2 py-0.5 text-xs font-semibold rounded-full 
          ${u==="Sınavlar"?e==="dark"?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-700":u==="Performans"?e==="dark"?"bg-green-500/20 text-green-300":"bg-green-100 text-green-700":u==="Öğrenme"?e==="dark"?"bg-purple-500/20 text-purple-300":"bg-purple-100 text-purple-700":e==="dark"?"bg-gray-500/20 text-gray-300":"bg-gray-100 text-gray-700"}`,children:u}),T.jsxs("div",{className:"flex items-center mb-3 sm:mb-4",children:[T.jsx("div",{className:`p-2 sm:p-3 rounded-lg mr-3 sm:mr-4 flex-shrink-0 ${s?e==="dark"?"bg-gradient-to-br from-yellow-500 to-amber-600":"bg-gradient-to-br from-yellow-400 to-amber-500":e==="dark"?"bg-secondary-700":"bg-gray-200"}`,children:T.jsx("i",{className:`${r} text-2xl sm:text-3xl ${s?"text-white":e==="dark"?"text-gray-500":"text-gray-400"}`})}),T.jsx("div",{className:"flex-grow min-w-0",children:T.jsx("h3",{className:`text-lg sm:text-xl font-semibold leading-tight ${s?e==="dark"?"text-white":"text-gray-900":e==="dark"?"text-gray-400":"text-gray-500"}`,children:t})})]}),T.jsx("p",{className:`text-xs sm:text-sm mb-3 sm:mb-4 flex-grow leading-relaxed ${s?e==="dark"?"text-gray-300":"text-gray-600":e==="dark"?"text-gray-500":"text-gray-400"}`,children:n}),l&&T.jsxs("div",{className:"mb-3",children:[T.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[T.jsx("span",{className:s?e==="dark"?"text-yellow-400":"text-yellow-600":e==="dark"?"text-gray-500":"text-gray-400",children:"İlerleme"}),T.jsxs("span",{className:s?e==="dark"?"text-white":"text-gray-800":e==="dark"?"text-gray-500":"text-gray-400",children:[l.current," / ",l.target]})]}),T.jsx("div",{className:`w-full rounded-full h-2.5 ${e==="dark"?"bg-secondary-700":"bg-gray-200"}`,children:T.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ease-out ${s?d===100?"bg-green-500":"bg-yellow-500":e==="dark"?"bg-secondary-600":"bg-gray-300"}`,style:{width:`${d}%`}})})]}),T.jsx("div",{className:"mt-auto text-xs",children:s?T.jsxs("p",{className:e==="dark"?"text-green-400 flex items-center":"text-green-600 flex items-center",children:[T.jsx("i",{className:"fas fa-check-circle mr-1.5"})," Kilidi Açıldı",a&&` - ${new Date(a).toLocaleDateString("tr-TR")}`]}):T.jsxs("p",{className:e==="dark"?"text-gray-500 flex items-center":"text-gray-400 flex items-center",children:[T.jsx("i",{className:"fas fa-lock mr-1.5"})," Kilitli"]})})]})}),Zj=({achievements:i,onBack:e,theme:t})=>{const n=i.filter(s=>s.isUnlocked),r=i.filter(s=>!s.isUnlocked);return T.jsxs("div",{className:`w-full h-full flex flex-col p-0 ${t==="dark"?"text-gray-200":"text-gray-800"}`,children:[T.jsxs("div",{className:"mb-4 sm:mb-6 px-1 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[T.jsxs("div",{className:"flex-grow",children:[T.jsx("h1",{className:`text-2xl sm:text-3xl font-bold mb-1 ${t==="dark"?"text-white":"text-gray-900"}`,children:"Başarılarım"}),T.jsxs("p",{className:`text-sm sm:text-base ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:[n.length," / ",i.length," başarı kilidi açıldı"]})]}),e&&T.jsxs("button",{onClick:e,className:`px-3 sm:px-4 py-2 rounded-lg transition-colors flex items-center text-sm sm:text-base self-start sm:self-auto touch-target ${t==="dark"?"bg-secondary-700 hover:bg-secondary-600 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,"aria-label":"Ana Sayfaya Dön",children:[T.jsx("i",{className:"fas fa-arrow-left mr-1 sm:mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Ana Sayfa"}),T.jsx("span",{className:"sm:hidden",children:"Geri"})]})]}),i.length===0?T.jsx(cv,{iconClass:"fas fa-trophy",title:"Henüz Başarım Yok",message:"Uygulamayı kullandıkça ve hedeflerinize ulaştıkça başarılarınız burada görünecektir. Yeni sınavlar oluşturarak ve öğrenme hedeflerinizi tamamlayarak başlayın!",theme:t,actionButton:e?{text:"Ana Sayfaya Dön",onClick:e,iconClass:"fas fa-home"}:void 0}):T.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.map(s=>T.jsx(j3,{achievement:s,theme:t},s.title)),r.map(s=>T.jsx(j3,{achievement:s,theme:t},s.title))]})]})},eq=Oi.memo(({icon:i,tag:e,title:t,description:n,buttonText:r,buttonIcon:s,buttonGradientClasses:a,premium:l,onClick:u,theme:d})=>{const f=d==="dark",p=()=>{let v="group relative p-4 sm:p-6 rounded-3xl shadow-xl flex flex-col h-full transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl border backdrop-blur-sm overflow-hidden ";return l?v+=f?"bg-gradient-to-br from-purple-900/80 via-pink-900/80 to-indigo-900/80 border-purple-500/30 hover:border-purple-400/50":"bg-gradient-to-br from-purple-50 via-pink-50 to-indigo-50 border-purple-200 hover:border-purple-300":v+=f?"bg-secondary-800/90 border-secondary-700 hover:border-primary-500/50":"bg-white border-gray-200 hover:border-primary-300",v},y=()=>l?f?"bg-gradient-to-br from-purple-600 to-pink-600 text-white":"bg-gradient-to-br from-purple-500 to-pink-500 text-white":f?"bg-gradient-to-br from-primary-600 to-primary-700 text-white":"bg-gradient-to-br from-primary-500 to-primary-600 text-white";return T.jsxs("div",{className:p(),children:[T.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-10",children:T.jsx("div",{className:`w-full h-full rounded-full ${l?"bg-gradient-to-br from-purple-400 to-pink-400":"bg-gradient-to-br from-primary-400 to-primary-500"} transform translate-x-16 -translate-y-16`})}),T.jsxs("div",{className:"relative z-10",children:[T.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-4 space-y-2 sm:space-y-0",children:[T.jsx("div",{className:`p-3 rounded-2xl shadow-lg ${y()}`,children:T.jsx("i",{className:`${i} text-xl sm:text-2xl`})}),e&&T.jsx("span",{className:`px-3 py-1.5 text-xs font-bold rounded-full self-start shadow-sm ${e.bgColorClass} ${e.colorClass} border ${f?"border-white/20":"border-black/10"}`,children:e.text})]}),T.jsxs("div",{className:"flex-1 flex flex-col",children:[T.jsx("h3",{className:`text-lg sm:text-xl lg:text-2xl font-bold mb-3 ${l?f?"text-purple-100":"text-purple-900":f?"text-white":"text-gray-900"}`,children:t}),T.jsx("p",{className:`text-sm sm:text-base lg:text-lg mb-6 flex-grow leading-relaxed ${l?f?"text-purple-200":"text-purple-700":f?"text-gray-300":"text-gray-600"}`,children:n}),T.jsxs("button",{onClick:u,className:`group/btn relative w-full flex items-center justify-center px-5 py-3 rounded-xl text-white font-bold shadow-lg transition-all duration-300 hover:scale-[1.02] hover:shadow-xl text-sm sm:text-base overflow-hidden ${a}`,children:[T.jsx("div",{className:"absolute inset-0 bg-white/20 transform -skew-x-12 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-transform duration-700"}),T.jsxs("div",{className:"relative flex items-center gap-2",children:[T.jsx("i",{className:`${s} text-base`}),T.jsx("span",{children:r}),T.jsx("i",{className:"fas fa-arrow-right text-sm transition-transform duration-300 group-hover/btn:translate-x-1"})]})]})]})]})]})}),tq=({features:i,onStartQuizFlow:e,theme:t})=>{const n=t==="dark",r=i.map(a=>({...a,theme:t,onClick:a.title==="Hızlı Sınav"?()=>e("quick"):()=>e("personalized")})),s=()=>n?"bg-gradient-to-br from-secondary-900 via-secondary-800 to-secondary-900":"bg-gradient-to-br from-gray-50 via-white to-blue-50";return T.jsxs("div",{className:`min-h-full ${s()} relative overflow-hidden`,children:[T.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[T.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 opacity-5",children:T.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-primary-400 to-primary-600 transform -translate-x-1/2 -translate-y-1/2"})}),T.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 opacity-5",children:T.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-purple-400 to-pink-600 transform translate-x-1/3 translate-y-1/3"})}),T.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 opacity-3",children:T.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-teal-400 to-blue-600 transform -translate-x-1/2 -translate-y-1/2"})})]}),T.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 xl:px-12 py-4 sm:py-6 lg:py-8",children:[T.jsxs("section",{className:"text-center mb-6 sm:mb-8 lg:mb-10",children:[T.jsxs("div",{className:"mb-4 sm:mb-6",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 rounded-full bg-gradient-to-br from-purple-600 via-blue-600 to-teal-500 shadow-2xl mb-4",children:T.jsx("i",{className:"fas fa-robot text-2xl sm:text-3xl lg:text-4xl text-white"})}),T.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-black mb-3",children:T.jsx("span",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-teal-500 bg-clip-text text-transparent",children:"AI Quiz"})}),T.jsx("h2",{className:`text-lg sm:text-xl lg:text-2xl xl:text-3xl font-bold mb-4 ${n?"text-white":"text-gray-800"}`,children:"Yapay Zeka Quiz Platformu"})]}),T.jsxs("div",{className:"max-w-4xl mx-auto",children:[T.jsxs("p",{className:`text-sm sm:text-base lg:text-lg xl:text-xl leading-relaxed font-medium px-4 sm:px-6 mb-6 ${n?"text-gray-300":"text-gray-600"}`,children:["Bilgi seviyenizi ölçün, eksiklerinizi tespit edin ve öğrenme sürecinizi"," ",T.jsx("span",{className:"font-bold bg-gradient-to-r from-primary-500 to-primary-600 bg-clip-text text-transparent",children:"kişiselleştirilmiş bir deneyimle"})," ","optimize edin."]}),T.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-4 sm:gap-6 lg:gap-8 mb-6",children:[T.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[T.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-green-400 to-green-500"}),T.jsx("span",{className:n?"text-gray-400":"text-gray-600",children:"PDF Desteği"})]}),T.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[T.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-blue-400 to-blue-500"}),T.jsx("span",{className:n?"text-gray-400":"text-gray-600",children:"Kişiselleştirilmiş"})]}),T.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[T.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-purple-400 to-purple-500"}),T.jsx("span",{className:n?"text-gray-400":"text-gray-600",children:"Performans Analizi"})]})]})]})]}),T.jsxs("section",{children:[T.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[T.jsx("h3",{className:`text-xl sm:text-2xl lg:text-3xl font-bold mb-2 ${n?"text-white":"text-gray-800"}`,children:"Sınav Türünü Seçin"}),T.jsx("p",{className:`text-sm sm:text-base max-w-2xl mx-auto ${n?"text-gray-400":"text-gray-600"}`,children:"İhtiyacınıza uygun sınav türünü seçerek öğrenme sürecinizi başlatın"})]}),T.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 lg:gap-8 max-w-6xl mx-auto",children:r.map((a,l)=>T.jsx("div",{className:"transform transition-all duration-300",style:{animationDelay:`${l*200}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:T.jsx(eq,{...a})},a.title))})]}),T.jsx("section",{className:"text-center mt-6 sm:mt-8 lg:mt-10",children:T.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs sm:text-sm font-medium ${n?"bg-secondary-800/50 text-gray-300 border border-secondary-600":"bg-white/80 text-gray-600 border border-gray-200"}`,children:[T.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),T.jsx("span",{children:"Hemen başlayın - Kayıt gerekmez!"})]})})]}),T.jsx("style",{children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        /* Touch feedback for mobile */
        @media (hover: none) and (pointer: coarse) {
          .group:active {
            transform: scale(0.98);
          }
        }
        
        /* Smooth scroll behavior */
        html {
          scroll-behavior: smooth;
        }
      `})]})},nq=Oi.memo(tq),Ux=Oi.memo(({icon:i,text:e,isActive:t,isBottom:n,onClick:r,isCollapsed:s,showBadge:a,theme:l})=>{const u=l==="dark",d=()=>{let p="w-full flex items-center space-x-2 rounded-lg transition-all duration-200 ease-in-out group relative sidebar-item-hover ";return t?p+="bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-lg shadow-primary-500/25 ":p+=u?"text-gray-300 hover:bg-secondary-700 hover:text-white ":"text-gray-600 hover:bg-gray-100 hover:text-gray-800 ",p+=s?"justify-center px-2 py-2":"px-3 py-2",p},f=()=>{let p=`${i} text-xs transition-colors `;return t?p+="text-white":p+=u?"text-primary-400 group-hover:text-primary-300":"text-primary-600 group-hover:text-primary-700",p};return T.jsxs("button",{onClick:r,className:d(),"aria-current":t?"page":void 0,title:s?e:void 0,children:[T.jsx("div",{className:`flex items-center justify-center w-4 h-4 ${s?"mx-auto":""}`,children:T.jsx("i",{className:f()})}),!s&&T.jsx("span",{className:"font-medium text-xs",children:e}),!s&&t&&a&&T.jsx("div",{className:"ml-auto flex items-center",children:T.jsx("div",{className:"w-2 h-2 bg-white rounded-full shadow-sm"})}),t&&T.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white rounded-r-full"})]})}),iq=({appState:i,isCollapsed:e,onToggleCollapse:t,onNavigateToDashboard:n,onNavigateToQuizList:r,onNavigateToLearningObjectives:s,onNavigateToPerformanceAnalysis:a,onNavigateToAchievements:l,onNavigateToCourses:u,onNavigateToSettings:d,currentUser:f,onNavigateToProfile:p,onNavigateToLogin:y,onLogout:v,theme:C})=>{const E=D=>{D.requiresAuth&&!f?y():D.onClick&&D.onClick()},R=[{icon:"fas fa-home",text:"Ana Sayfa",appStateLink:"dashboard_main",onClick:n},{icon:"fas fa-layer-group",text:"Derslerim",appStateLink:"viewing_courses_list",onClick:u,requiresAuth:!0},{icon:"fas fa-clipboard-list",text:"Sınavlarım",appStateLink:["viewing_quiz_list","viewing_specific_saved_result"],onClick:r,requiresAuth:!0},{icon:"fas fa-bullseye",text:"Öğrenme Hedeflerim",appStateLink:["viewing_learning_objectives","viewing_course_learning_objectives"],onClick:s,requiresAuth:!0},{icon:"fas fa-chart-line",text:"Performans Analizi",appStateLink:"viewing_performance_analysis",onClick:a,requiresAuth:!0},{icon:"fas fa-trophy",text:"Başarılarım",appStateLink:"viewing_achievements",onClick:l,requiresAuth:!0}],I=(D,j)=>{if(D){const X=D.split(" ");return X.length>1?`${X[0][0]}${X[X.length-1][0]}`.toUpperCase():D.substring(0,2).toUpperCase()}return j?j.substring(0,2).toUpperCase():"??"};return T.jsxs("aside",{className:`flex flex-col shadow-2xl shrink-0 transition-all duration-300 ease-in-out fixed top-0 left-0 h-full z-50 border-r ${e?"w-16":"w-64"} ${C==="dark"?"bg-secondary-800 border-secondary-700":"bg-white border-gray-200"} lg:relative lg:translate-x-0 ${e?"-translate-x-full lg:translate-x-0":"translate-x-0"}`,children:[!e&&T.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:t}),T.jsxs("div",{className:`relative z-50 flex flex-col h-full ${C==="dark"?"bg-secondary-800":"bg-white"}`,children:[T.jsxs("div",{className:`relative p-3 border-b ${e?"px-2":"px-3"} ${C==="dark"?"border-secondary-700":"border-gray-200"}`,children:[T.jsxs("div",{className:`flex items-center ${e?"justify-center":"space-x-2"}`,children:[T.jsx("div",{className:`p-2 bg-gradient-to-br from-purple-600 via-blue-600 to-teal-500 rounded-lg shadow-md ${e?"mb-0":""}`,children:T.jsx("i",{className:"fas fa-robot text-lg text-white"})}),!e&&T.jsxs("div",{className:"flex-grow",children:[T.jsx("h1",{className:`text-base font-bold ${C==="dark"?"text-white":"text-gray-800"}`,children:"AI Quiz"}),T.jsx("p",{className:`text-xs ${C==="dark"?"text-gray-400":"text-gray-500"}`,children:"Quiz Platformu"})]})]}),T.jsx("button",{onClick:t,className:`absolute top-1/2 -translate-y-1/2 transform hover:bg-primary-500 hover:text-white w-6 h-6 rounded-full flex items-center justify-center focus:outline-none shadow-md transition-all duration-200 hover:scale-110 -right-3 ${C==="dark"?"bg-secondary-800 text-gray-300 border-secondary-600":"bg-white text-gray-600 border-gray-200"} border lg:block hidden`,"aria-label":e?"Kenar çubuğunu genişlet":"Kenar çubuğunu daralt",title:e?"Genişlet":"Daralt",children:T.jsx("i",{className:`fas ${e?"fa-chevron-right":"fa-chevron-left"} text-xs`})}),!e&&T.jsx("button",{onClick:t,className:`absolute top-1/2 -translate-y-1/2 transform w-6 h-6 rounded-full flex items-center justify-center focus:outline-none transition-all duration-200 -right-3 lg:hidden ${C==="dark"?"bg-secondary-700 text-gray-300 hover:bg-secondary-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"aria-label":"Kenar çubuğunu kapat",children:T.jsx("i",{className:"fas fa-times text-xs"})})]}),T.jsx("nav",{className:"flex-grow flex flex-col px-2 py-3 space-y-1 overflow-y-auto custom-scrollbar-sidebar",children:R.map(D=>{const j=Array.isArray(D.appStateLink)?D.appStateLink.includes(i):i===D.appStateLink;return T.jsx(Ux,{icon:D.icon,text:D.text,isActive:j,onClick:()=>E(D),isCollapsed:e,showBadge:!0,theme:C},D.text)})}),T.jsx("div",{className:`border-t p-2 space-y-1 ${C==="dark"?"border-secondary-700":"border-gray-200"}`,children:f?T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:`flex items-center p-2 rounded-lg transition-all duration-200 cursor-pointer group ${e?"justify-center":""} ${C==="dark"?"hover:bg-secondary-700":"hover:bg-gray-100"}`,onClick:p,title:e?f.displayName||f.email||"Profil":"Profili Görüntüle",children:[T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 via-pink-500 to-blue-500 flex items-center justify-center text-white font-semibold text-xs shadow-md",children:I(f.displayName,f.email)}),T.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 bg-green-400 border rounded-full ${C==="dark"?"border-secondary-800":"border-white"}`})]}),!e&&T.jsxs("div",{className:"ml-2 flex-grow min-w-0",children:[T.jsx("p",{className:`text-xs font-semibold truncate ${C==="dark"?"text-white":"text-gray-800"}`,children:f.displayName||"Kullanıcı"}),T.jsx("p",{className:`text-xs truncate ${C==="dark"?"text-gray-400":"text-gray-500"}`,children:f.email})]}),!e&&T.jsx("i",{className:"fas fa-chevron-right text-xs text-gray-400 group-hover:text-primary-500 transition-colors"})]}),T.jsx(Ux,{icon:"fas fa-cog",text:"Ayarlar",isActive:i==="viewing_settings",onClick:d,isCollapsed:e,isBottom:!0,showBadge:!1,theme:C}),T.jsx(Ux,{icon:"fas fa-sign-out-alt",text:"Çıkış Yap",onClick:v,isCollapsed:e,isBottom:!0,showBadge:!1,theme:C})]}):T.jsx(Ux,{icon:"fas fa-sign-in-alt",text:"Giriş Yap / Kayıt Ol",onClick:y,isCollapsed:e,isBottom:!0,showBadge:!1,theme:C})})]}),T.jsx("style",{children:`
        .custom-scrollbar-sidebar::-webkit-scrollbar {
          width: 4px;
        }
        .custom-scrollbar-sidebar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar-sidebar::-webkit-scrollbar-thumb {
          background: rgba(156, 163, 175, 0.3);
          border-radius: 10px;
        }
        .custom-scrollbar-sidebar::-webkit-scrollbar-thumb:hover {
          background: rgba(156, 163, 175, 0.5);
        }
        .custom-scrollbar-sidebar {
          scrollbar-width: thin;
          scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
        }
        
        /* Smooth hover animations */
        .sidebar-item-hover {
          transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .sidebar-item-hover:hover {
          transform: translateX(2px);
        }
      `})]})},q3=Oi.memo(iq),rq=({isOpen:i,onClick:e,theme:t})=>T.jsx("button",{onClick:e,className:`lg:hidden fixed top-4 left-4 z-50 p-3 rounded-lg shadow-lg transition-all duration-200 ${t==="dark"?"bg-secondary-800 text-white border border-secondary-600 hover:bg-secondary-700":"bg-white text-gray-800 border border-gray-200 hover:bg-gray-50"}`,"aria-label":i?"Menüyü kapat":"Menüyü aç",children:T.jsxs("div",{className:"w-5 h-5 flex flex-col justify-center items-center",children:[T.jsx("span",{className:`bg-current h-0.5 w-5 rounded-sm transform transition duration-300 ease-in-out ${i?"rotate-45 translate-y-1.5":""}`}),T.jsx("span",{className:`bg-current h-0.5 w-5 rounded-sm my-1 transition duration-300 ease-in-out ${i?"opacity-0":"opacity-100"}`}),T.jsx("span",{className:`bg-current h-0.5 w-5 rounded-sm transform transition duration-300 ease-in-out ${i?"-rotate-45 -translate-y-1.5":""}`})]})}),sq=Oi.memo(rq),aq=({courses:i,learningObjectives:e,onAddCourse:t,onDeleteCourse:n,onViewCourseLOs:r,onBack:s,theme:a})=>{const[l,u]=qe.useState(""),[d,f]=qe.useState(!1),[p,y]=qe.useState(""),v=()=>{l.trim()&&(t(l.trim()),u(""),f(!1))},C=I=>e.filter(D=>D.courseId===I).length,E=(i||[]).filter(I=>I.name.toLowerCase().includes(p.toLowerCase())).sort((I,D)=>D.createdAt-I.createdAt),R=I=>new Date(I).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"});return T.jsxs("div",{className:`w-full h-full flex flex-col p-0 ${a==="dark"?"text-gray-200":"text-gray-800"}`,children:[T.jsxs("div",{className:"mb-4 sm:mb-6 px-1 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("h1",{className:`text-2xl sm:text-3xl font-bold mb-1 ${a==="dark"?"text-white":"text-gray-900"}`,children:"Derslerim"}),T.jsx("p",{className:`text-sm sm:text-base ${a==="dark"?"text-gray-400":"text-gray-500"}`,children:"Oluşturduğunuz dersleri yönetin ve kişiselleştirilmiş sınavlar için kullanın."})]}),s&&!d&&T.jsxs("button",{onClick:s,className:`px-3 sm:px-4 py-2 rounded-lg transition-colors flex items-center text-sm touch-target ${a==="dark"?"bg-secondary-700 hover:bg-secondary-600 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,"aria-label":"Ana Sayfaya Dön",children:[T.jsx("i",{className:"fas fa-arrow-left mr-1 sm:mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Ana Sayfa"}),T.jsx("span",{className:"sm:hidden",children:"Geri"})]})]}),d?T.jsxs("div",{className:`mb-6 p-6 rounded-lg shadow-xl ring-1 transition-all duration-300 ease-in-out ${a==="dark"?"bg-secondary-800 ring-secondary-700/50":"bg-white ring-gray-200"}`,children:[T.jsx("h2",{className:`text-xl font-semibold mb-4 ${a==="dark"?"text-white":"text-gray-900"}`,children:"Yeni Ders Oluştur"}),T.jsxs("div",{className:"flex items-center space-x-3",children:[T.jsx("input",{type:"text",value:l,onChange:I=>u(I.target.value),placeholder:"Ders adı (örn: Matematik 101)",className:`flex-grow p-3 border rounded-lg focus:ring-primary-500 focus:border-primary-500 ${a==="dark"?"bg-secondary-700 border-secondary-600 text-gray-200 placeholder-gray-500":"bg-gray-50 border-gray-300 text-gray-800 placeholder-gray-400"}`,"aria-label":"Yeni ders adı"}),T.jsxs("button",{onClick:v,disabled:!l.trim(),className:`px-5 py-3 text-white rounded-lg disabled:opacity-50 flex items-center font-medium ${a==="dark"?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600"}`,children:[T.jsx("i",{className:"fas fa-plus mr-2"})," Oluştur"]}),T.jsxs("button",{onClick:()=>{f(!1),u("")},className:`px-5 py-3 rounded-lg flex items-center font-medium ${a==="dark"?"bg-secondary-600 hover:bg-secondary-500 text-gray-300":"bg-gray-300 hover:bg-gray-400 text-gray-700"}`,children:[T.jsx("i",{className:"fas fa-times mr-2"})," İptal"]})]})]}):T.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 px-1",children:[T.jsxs("div",{className:"relative flex-grow sm:max-w-xs md:max-w-sm",children:[T.jsx("input",{type:"text",placeholder:"Ders ara...",value:p,onChange:I=>y(I.target.value),className:`w-full p-3 pl-10 border rounded-lg focus:ring-primary-500 focus:border-primary-500 ${a==="dark"?"bg-secondary-800 border-secondary-700 text-gray-200 placeholder-gray-500":"bg-white border-gray-300 text-gray-800 placeholder-gray-400"}`,"aria-label":"Ders arama"}),T.jsx("i",{className:`fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 ${a==="dark"?"text-gray-500":"text-gray-400"}`})]}),T.jsxs("button",{onClick:()=>f(!0),className:"px-5 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity shadow-md flex items-center justify-center",children:[T.jsx("i",{className:"fas fa-plus mr-2"})," Yeni Ders Oluştur"]})]}),T.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar-courses pr-1",children:E.length===0&&!d?T.jsx(cv,{iconClass:"fas fa-layer-group",title:"Henüz Ders Oluşturulmadı",message:"Kişiselleştirilmiş sınavlar ve öğrenme hedefleri için dersler oluşturarak öğrenme deneyiminizi organize edin.",theme:a,actionButton:{text:"Yeni Ders Oluştur",onClick:()=>f(!0),iconClass:"fas fa-plus",gradientClasses:"bg-gradient-to-r from-blue-500 to-purple-600"}}):T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 px-1",children:E.map(I=>{const D=C(I.id);return T.jsxs("div",{className:`p-5 rounded-xl shadow-lg hover:shadow-2xl ring-1 flex flex-col justify-between cursor-pointer transition-all duration-200 ease-in-out hover:ring-primary-500 hover:scale-[1.02] ${a==="dark"?"bg-secondary-800 ring-secondary-700/50":"bg-white ring-gray-200"}`,onClick:()=>r(I),role:"button",tabIndex:0,onKeyPress:j=>j.key==="Enter"&&r(I),"aria-label":`${I.name} ders detaylarını gör`,children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex justify-between items-start mb-2",children:[T.jsx("i",{className:`fas fa-chalkboard-teacher text-2xl sm:text-3xl opacity-80 ${a==="dark"?"text-primary-400":"text-primary-500"}`}),T.jsx("button",{onClick:j=>{j.stopPropagation(),n(I.id)},className:`text-red-500/70 hover:text-red-400 p-1.5 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 ${a==="dark"?"hover:bg-red-500/10":"hover:bg-red-100"}`,"aria-label":`'${I.name}' dersini sil`,title:"Dersi Sil",children:T.jsx("i",{className:"fas fa-trash-alt text-base"})})]}),T.jsx("h3",{className:`text-lg font-semibold mb-1.5 truncate ${a==="dark"?"text-white":"text-gray-900"}`,title:I.name,children:I.name}),T.jsxs("p",{className:`text-xs mb-3 ${a==="dark"?"text-gray-400":"text-gray-500"}`,children:["Oluşturulma: ",R(I.createdAt)]})]}),T.jsxs("div",{className:`mt-3 pt-3 border-t flex justify-between items-center text-sm ${a==="dark"?"border-secondary-700":"border-gray-200"}`,children:[T.jsxs("span",{className:`flex items-center ${a==="dark"?"text-gray-300":"text-gray-600"}`,children:[T.jsx("i",{className:`fas fa-bullseye mr-2 ${a==="dark"?"text-blue-400":"text-blue-500"}`})," ",D," Öğrenme Hedefi"]}),T.jsxs("span",{className:`text-xs font-medium ${a==="dark"?"text-primary-400 group-hover:text-primary-300":"text-primary-600 group-hover:text-primary-500"}`,children:["Detaylar ",T.jsx("i",{className:"fas fa-arrow-right ml-1 text-xs"})]})]})]},I.id)})})}),T.jsx("style",{children:`
        .custom-scrollbar-courses::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar-courses::-webkit-scrollbar-track {
          background: var(--scrollbar-track-color);
        }
        .custom-scrollbar-courses::-webkit-scrollbar-thumb {
          background: var(--scrollbar-thumb-color);
          border-radius: 10px;
        }
        .custom-scrollbar-courses::-webkit-scrollbar-thumb:hover {
          background: var(--scrollbar-thumb-hover-color);
        }
        .custom-scrollbar-courses {
          scrollbar-width: thin;
          scrollbar-color: var(--scrollbar-thumb-color) var(--scrollbar-track-color);
        }
      `})]})},oq=Oi.memo(aq),lq=({courses:i,onCourseSelected:e,onNewCourseCreated:t,onCancel:n,theme:r})=>{const[s,a]=qe.useState(""),[l,u]=qe.useState(""),[d,f]=qe.useState(!1);qe.useEffect(()=>{i.length===0?f(!0):!d&&i.length>0},[i,d,s]);const p=R=>{a(R),u(""),f(!1)},y=()=>{f(R=>(R||a(""),!R)),d||u("")},v=R=>{u(R.target.value),s&&a(""),d||f(!0)},C=()=>{s&&!d?e(s):d&&l.trim()&&t(l.trim())},E=s&&!d||d&&l.trim().length>0;return T.jsxs("div",{className:"w-full max-w-lg mx-auto p-4 md:p-0",children:[T.jsx("h2",{className:`text-lg sm:text-xl font-semibold mb-4 sm:mb-6 text-left ${r==="dark"?"text-gray-100":"text-gray-800"}`,children:"Çalışmak istediğiniz dersi seçin"}),i.length>0&&T.jsx("div",{className:"mb-4",children:T.jsxs("select",{id:"existing-course-select",value:s,onChange:R=>p(R.target.value),className:`w-full p-3 sm:p-3.5 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-base touch-target ${r==="dark"?"bg-secondary-700 border-secondary-600 text-gray-200 placeholder-gray-500":"bg-gray-50 border-gray-300 text-gray-800 placeholder-gray-400"}`,children:[T.jsx("option",{value:"",disabled:s!=="",children:"Mevcut bir ders seçin..."}),i.map(R=>T.jsx("option",{value:R.id,children:R.name},R.id))]})}),T.jsxs("button",{onClick:y,className:`w-full flex items-center justify-center p-3 sm:p-3.5 mb-4 border-2 border-dashed rounded-lg transition-colors touch-target ${d?`border-primary-500 ${r==="dark"?"text-primary-400 bg-primary-500/10":"text-primary-600 bg-primary-50"}`:`${r==="dark"?"border-secondary-500 text-gray-400 hover:border-primary-400 hover:text-primary-400":"border-gray-400 text-gray-500 hover:border-primary-500 hover:text-primary-600"}`}`,children:[T.jsx("i",{className:`fas ${d?"fa-minus-circle":"fa-plus-circle"} mr-2 sm:mr-2.5`}),T.jsx("span",{className:"text-sm sm:text-base",children:d&&i.length>0?"Veya Yeni Ders Oluştur":"Yeni Ders Oluştur"})]}),d&&T.jsx("div",{className:"mb-4 sm:mb-6",children:T.jsx("input",{type:"text",id:"new-course-name",value:l,onChange:v,placeholder:"Yeni ders adını yazın (örn: İleri Cebir)",className:`w-full p-3 sm:p-3.5 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-base touch-target ${r==="dark"?"bg-secondary-700 border-secondary-600 text-gray-200 placeholder-gray-500":"bg-gray-50 border-gray-300 text-gray-800 placeholder-gray-400"}`,"aria-label":"Yeni ders adı"})}),T.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center mt-8 sm:mt-10 gap-3 sm:gap-0",children:[T.jsxs("button",{onClick:n,className:`px-6 sm:px-7 py-3 transition-colors text-base flex items-center justify-center sm:justify-start touch-target ${r==="dark"?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-800"}`,"aria-label":"Geri dön",children:[T.jsx("i",{className:"fas fa-arrow-left mr-2"})," Geri"]}),T.jsxs("button",{onClick:C,disabled:!E,className:`px-6 sm:px-7 py-3 text-white rounded-lg font-semibold shadow-md disabled:opacity-60 disabled:cursor-not-allowed text-base flex items-center justify-center touch-target ${r==="dark"?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,"aria-label":"Devam et",children:["Devam Et ",T.jsx("i",{className:"fas fa-arrow-right ml-2"})]})]})]})},$3=Oi.memo(lq),uq=({learningObjectives:i,currentCourseId:e,onQuizTypeSelected:t,onBack:n,theme:r})=>{const[s,a]=qe.useState(null),l=qe.useMemo(()=>e?i.filter(p=>p.courseId===e&&(p.status==="failure"||p.status==="intermediate"||p.status==="pending")).length:0,[i,e]),d=[{type:"comprehensive",title:"Kapsamlı Sınav",description:"Hem zayıf olduğunuz konuları pekiştirin hem de belgedeki yeni konuları öğrenin. PDF yüklemeniz gerekecektir.",icon:"fas fa-book-reader",disabledText:qe.useMemo(()=>e?i.some(p=>p.courseId===e):!1,[i,e])?void 0:"Bu ders için henüz öğrenme hedefi bulunmuyor. Kapsamlı sınav oluşturabilmek için önce 'Yeni Konular' sınavı ile veya diğer sınavlardan dersinize öğrenme hedefleri eklenmelidir."},{type:"new_topics",title:"Yeni Konular Sınavı",description:"Yükleyeceğiniz PDF belgesinden tamamen yeni konular öğrenin ve test edin. Bu konular öğrenme hedeflerinize eklenecektir.",icon:"fas fa-lightbulb"},{type:"weak_topics",title:"Zayıf Konular Sınavı",description:`Sadece bu dersteki mevcut zayıf öğrenme hedeflerinize odaklanın. ${l>0?"("+l+" zayıf hedef bulundu)":""}. Belge yüklemeniz gerekmez.`,icon:"fas fa-crosshairs",disabledText:l===0?"Bu ders için zayıf konu bulunmuyor. Bu seçeneği kullanmak için önce bu derse ait sınavlarda bazı konularda düşük başarı elde etmelisiniz veya yeni konular eklemelisiniz.":void 0}];qe.useEffect(()=>{const p=d.filter(y=>!y.disabledText);if(p.length===1&&p[0].type,s){const y=d.find(v=>v.type===s);y!=null&&y.disabledText&&a(null)}},[d,s]);const f=()=>{s&&t(s)};return T.jsxs("div",{className:"w-full max-w-xl mx-auto p-4 md:p-0",children:[T.jsx("h2",{className:`text-lg sm:text-xl font-semibold mb-4 sm:mb-6 text-left ${r==="dark"?"text-gray-100":"text-gray-800"}`,children:"Kişiselleştirilmiş Sınav Türünü Seçin"}),T.jsx("p",{className:`text-sm mb-6 sm:mb-8 ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:"Öğrenme hedeflerinize en uygun sınav türünü seçerek deneyiminizi kişiselleştirin."}),T.jsx("div",{className:"space-y-3 sm:space-y-4",children:d.map(({type:p,title:y,description:v,icon:C,disabledText:E})=>{const R=!!E;return T.jsxs("label",{htmlFor:`quiz-type-${p}`,className:`flex flex-col p-4 sm:p-5 border-2 rounded-lg cursor-pointer transition-all duration-200 ease-in-out touch-target ${s===p?`${r==="dark"?"bg-primary-600 border-primary-500":"bg-primary-500 border-primary-600"} text-white shadow-xl scale-[1.02]`:R?`${r==="dark"?"bg-secondary-800 border-secondary-700 text-gray-500":"bg-gray-100 border-gray-300 text-gray-400"} opacity-60 cursor-not-allowed`:`${r==="dark"?"bg-secondary-800 border-secondary-600 hover:border-primary-400 text-gray-200":"bg-white border-gray-300 hover:border-primary-500 text-gray-700"} hover:shadow-lg`}`,title:R?E:y,children:[T.jsxs("div",{className:"flex items-center mb-2",children:[T.jsx("div",{className:`p-2 rounded-md mr-3 text-base sm:text-lg flex-shrink-0 ${s===p?r==="dark"?"bg-primary-500":"bg-primary-400":R?r==="dark"?"bg-secondary-700":"bg-gray-200":r==="dark"?"bg-primary-500/20":"bg-primary-100"}`,children:T.jsx("i",{className:`${C} ${s===p?"text-white":R?r==="dark"?"text-gray-600":"text-gray-400":r==="dark"?"text-primary-400":"text-primary-600"}`})}),T.jsx("h3",{className:`font-semibold text-base sm:text-lg flex-1 ${s===p||r==="dark"?"text-white":"text-gray-800"}`,children:y}),T.jsx("input",{type:"radio",id:`quiz-type-${p}`,name:"personalizedQuizType",value:p,checked:s===p,onChange:()=>!R&&a(p),className:`ml-3 form-radio h-5 w-5 focus:ring-transparent focus:ring-offset-0 bg-transparent border-transparent flex-shrink-0 ${r==="dark"?"text-primary-200":"text-primary-300"}`,disabled:R,style:s===p?{filter:"brightness(2)"}:{},"aria-label":y})]}),T.jsx("p",{className:`text-sm leading-relaxed ${s===p?r==="dark"?"text-primary-200":"text-primary-100":R?r==="dark"?"text-gray-600":"text-gray-500":r==="dark"?"text-gray-400":"text-gray-600"}`,children:v}),R&&T.jsx("p",{className:`mt-2 text-xs leading-relaxed ${r==="dark"?"text-yellow-400":"text-yellow-600"}`,children:E})]},p)})}),T.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center mt-8 sm:mt-10 gap-3 sm:gap-0",children:[T.jsxs("button",{onClick:n,className:`px-6 sm:px-7 py-3 transition-colors text-base flex items-center justify-center sm:justify-start touch-target ${r==="dark"?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-800"}`,"aria-label":"Geri dön",children:[T.jsx("i",{className:"fas fa-arrow-left mr-2"})," Geri"]}),T.jsxs("button",{onClick:f,disabled:!s,className:`px-6 sm:px-7 py-3 text-white rounded-lg font-semibold shadow-md disabled:opacity-60 disabled:cursor-not-allowed text-base flex items-center justify-center touch-target ${r==="dark"?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,"aria-label":"Devam et",children:["Devam Et ",T.jsx("i",{className:"fas fa-arrow-right ml-2"})]})]})]})},H3=Oi.memo(uq),cq=({currentSettings:i,onSaveSettings:e,onBack:t,appConfigDefaults:n,theme:r})=>{const[s,a]=qe.useState(i.defaultTimerEnabled),[l,u]=qe.useState(i.secondsPerQuestion),[d,f]=qe.useState(i.numOptionsPerQuestion),[p,y]=qe.useState(i.theme),[v,C]=qe.useState(!1);qe.useEffect(()=>{a(i.defaultTimerEnabled),u(i.secondsPerQuestion),f(i.numOptionsPerQuestion),y(i.theme)},[i]);const E=()=>{const j={defaultTimerEnabled:s,secondsPerQuestion:Number(l),numOptionsPerQuestion:Number(d),theme:p};e(j),C(!0),setTimeout(()=>C(!1),3e3)},R=()=>{const j={defaultTimerEnabled:n.defaultTimerEnabled,secondsPerQuestion:n.secondsPerQuestion,numOptionsPerQuestion:n.numOptionsPerQuestion,theme:n.theme==="light"||n.theme==="dark"?n.theme:"dark"};a(j.defaultTimerEnabled),u(j.secondsPerQuestion),f(j.numOptionsPerQuestion),y(j.theme),e(j),C(!0),setTimeout(()=>C(!1),3e3)},I=n5(r),D=({title:j,children:X})=>T.jsxs("section",{className:`p-4 sm:p-6 rounded-xl shadow-lg ring-1 ${I.bg.secondary} ${I.ring.primary}`,children:[T.jsx("h2",{className:`text-lg sm:text-xl font-semibold mb-4 sm:mb-5 ${I.text.primary}`,children:j}),T.jsx("div",{className:"space-y-4 sm:space-y-5",children:X})]});return T.jsxs("div",{className:`w-full h-full flex flex-col p-0 ${I.text.secondary}`,children:[T.jsxs("div",{className:"mb-4 sm:mb-6 px-1 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[T.jsxs("div",{className:"flex-grow",children:[T.jsx("h1",{className:`text-2xl sm:text-3xl font-bold mb-1 ${I.text.primary}`,children:"Uygulama Ayarları"}),T.jsx("p",{className:`text-sm sm:text-base ${I.text.muted}`,children:"Sınav varsayılanlarını ve diğer uygulama tercihlerini yapılandırın."})]}),t&&T.jsxs("button",{onClick:t,className:`px-3 sm:px-4 py-2 rounded-lg transition-colors flex items-center text-sm sm:text-base self-start sm:self-auto touch-target ${I.bg.button.secondary} ${I.text.secondary}`,"aria-label":"Ana Sayfaya Dön",children:[T.jsx("i",{className:"fas fa-arrow-left mr-1 sm:mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Ana Sayfa"}),T.jsx("span",{className:"sm:hidden",children:"Geri"})]})]}),T.jsxs("div",{className:`flex-grow overflow-y-auto rounded-lg shadow-xl ring-1 p-4 sm:p-6 md:p-8 space-y-6 sm:space-y-8 custom-scrollbar-settings pr-2 ${I.bg.card} ${I.ring.primary}`,children:[T.jsx(D,{title:"Görünüm Ayarları",children:T.jsxs("div",{children:[T.jsx("label",{htmlFor:"theme-select",className:`block text-sm font-medium mb-2 ${I.text.secondary}`,children:"Tema Seçimi"}),T.jsxs("select",{id:"theme-select",value:p,onChange:j=>y(j.target.value),className:`w-full sm:max-w-xs p-3 sm:p-2.5 rounded-lg text-base sm:text-sm touch-target ${I.bg.input} ${I.border.input} ${I.text.primary} ${I.ring.focus}`,children:[T.jsx("option",{value:"light",children:"Açık Mod"}),T.jsx("option",{value:"dark",children:"Karanlık Mod"})]}),T.jsx("p",{className:`mt-2 text-xs ${I.text.muted}`,children:"Uygulamanın genel renk temasını seçin."})]})}),T.jsxs(D,{title:"Zamanlayıcı Ayarları",children:[T.jsxs("div",{children:[T.jsxs("label",{htmlFor:"defaultTimerEnabled",className:"flex items-start sm:items-center cursor-pointer touch-target",children:[T.jsx("input",{id:"defaultTimerEnabled",type:"checkbox",checked:s,onChange:j=>a(j.target.checked),className:`form-checkbox h-5 w-5 sm:h-4 sm:w-4 text-primary-600 rounded focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 mt-0.5 sm:mt-0 flex-shrink-0 ${I.bg.input} ${I.border.input}`}),T.jsx("span",{className:`ml-3 text-sm sm:text-sm font-medium leading-relaxed ${I.text.secondary}`,children:"Sınav Zamanlayıcısını Varsayılan Olarak Etkinleştir"})]}),T.jsx("p",{className:`ml-8 mt-2 text-xs leading-relaxed ${I.text.muted}`,children:"Bu ayar, yeni bir sınav başlatırken zamanlayıcının başlangıç durumunu belirler."})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"secondsPerQuestion",className:`block text-sm font-medium mb-2 ${I.text.secondary}`,children:"Soru Başına Süre (Saniye)"}),T.jsx("input",{id:"secondsPerQuestion",type:"number",min:"10",max:"600",step:"5",value:l,onChange:j=>u(parseInt(j.target.value,10)),className:`w-full sm:max-w-xs p-3 sm:p-2.5 rounded-lg text-base sm:text-sm touch-target ${I.bg.input} ${I.border.input} ${I.text.primary} ${I.ring.focus}`,"aria-describedby":"secondsPerQuestionHelp"}),T.jsx("p",{id:"secondsPerQuestionHelp",className:`mt-2 text-xs leading-relaxed ${I.text.muted}`,children:"Zamanlayıcı etkinleştirildiğinde her soru için varsayılan süre (10-600 saniye)."})]})]}),T.jsx(D,{title:"Soru Ayarları",children:T.jsxs("div",{children:[T.jsx("label",{htmlFor:"numOptionsPerQuestion",className:`block text-sm font-medium mb-2 ${I.text.secondary}`,children:"Soru Başına Seçenek Sayısı"}),T.jsxs("select",{id:"numOptionsPerQuestion",value:d,onChange:j=>f(parseInt(j.target.value,10)),className:`w-full sm:max-w-xs p-3 sm:p-2.5 rounded-lg text-base sm:text-sm touch-target ${I.bg.input} ${I.border.input} ${I.text.primary} ${I.ring.focus}`,"aria-describedby":"numOptionsHelp",children:[T.jsx("option",{value:"2",children:"2 Seçenek"}),T.jsx("option",{value:"3",children:"3 Seçenek"}),T.jsx("option",{value:"4",children:"4 Seçenek"}),T.jsx("option",{value:"5",children:"5 Seçenek"}),T.jsx("option",{value:"6",children:"6 Seçenek"})]}),T.jsx("p",{id:"numOptionsHelp",className:`mt-2 text-xs leading-relaxed ${I.text.muted}`,children:"Her çoktan seçmeli soru için varsayılan seçenek sayısı."})]})}),T.jsxs("div",{className:`pt-6 sm:pt-8 mt-4 border-t flex flex-col sm:flex-row justify-end items-stretch sm:items-center space-y-3 sm:space-y-0 sm:space-x-4 ${I.border.primary}`,children:[v&&T.jsxs("div",{className:`text-sm px-3 py-2 rounded-md flex items-center order-first sm:order-none sm:mr-auto ${r==="dark"?"text-green-400 bg-green-500/10":"text-green-600 bg-green-100"}`,children:[T.jsx("i",{className:"fas fa-check-circle mr-2"}),"Ayarlar başarıyla kaydedildi!"]}),T.jsxs("button",{onClick:R,className:`w-full sm:w-auto px-4 sm:px-6 py-3 sm:py-2.5 text-white rounded-lg font-medium shadow-md text-sm flex items-center justify-center touch-target ${I.bg.button.warning}`,"aria-label":"Ayarları Varsayılana Sıfırla",children:[T.jsx("i",{className:"fas fa-undo-alt mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Varsayılana Sıfırla"}),T.jsx("span",{className:"sm:hidden",children:"Sıfırla"})]}),T.jsxs("button",{onClick:E,className:`w-full sm:w-auto px-6 sm:px-8 py-3 text-white rounded-lg font-semibold shadow-lg text-base flex items-center justify-center touch-target ${I.bg.button.primary}`,"aria-label":"Ayarları Kaydet",children:[T.jsx("i",{className:"fas fa-save mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Ayarları Kaydet"}),T.jsx("span",{className:"sm:hidden",children:"Kaydet"})]})]})]}),T.jsx("style",{children:`
        .custom-scrollbar-settings::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar-settings::-webkit-scrollbar-track {
          background: var(--scrollbar-track-color);
          border-radius: 10px;
        }
        .custom-scrollbar-settings::-webkit-scrollbar-thumb {
          background: var(--scrollbar-thumb-color);
          border-radius: 10px;
        }
        .custom-scrollbar-settings::-webkit-scrollbar-thumb:hover {
          background: var(--scrollbar-thumb-hover-color);
        }
        .custom-scrollbar-settings {
          scrollbar-width: thin;
          scrollbar-color: var(--scrollbar-thumb-color) var(--scrollbar-track-color);
        }
      `})]})},dq=Oi.memo(cq);var G3={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},hq=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const r=i[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[t++];e[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[t++],a=i[t++],l=i[t++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const s=i[t++],a=i[t++];e[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},oO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],a=r+1<i.length,l=a?i[r+1]:0,u=r+2<i.length,d=u?i[r+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let y=(l&15)<<2|d>>6,v=d&63;u||(v=64,a||(y=64)),n.push(t[f],t[p],t[y],t[v])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(aO(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):hq(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=t[i.charAt(r++)],l=r<i.length?t[i.charAt(r)]:0;++r;const d=r<i.length?t[i.charAt(r)]:64;++r;const p=r<i.length?t[i.charAt(r)]:64;if(++r,s==null||l==null||d==null||p==null)throw new fq;const y=s<<2|l>>4;if(n.push(y),d!==64){const v=l<<4&240|d>>2;if(n.push(v),p!==64){const C=d<<6&192|p;n.push(C)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class fq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pq=function(i){const e=aO(i);return oO.encodeByteArray(e,!0)},rA=function(i){return pq(i).replace(/\./g,"")},lO=function(i){try{return oO.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq=()=>mq().__FIREBASE_DEFAULTS__,yq=()=>{if(typeof process>"u"||typeof G3>"u")return;const i=G3.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},vq=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&lO(i[1]);return e&&JSON.parse(e)},a5=()=>{try{return gq()||yq()||vq()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},uO=i=>{var e,t;return(t=(e=a5())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},bq=i=>{const e=uO(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},cO=()=>{var i;return(i=a5())===null||i===void 0?void 0:i.config},dO=i=>{var e;return(e=a5())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xq(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[rA(JSON.stringify(t)),rA(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wq(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Na())}function Aq(){var i;const e=(i=a5())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Sq(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Tq(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Eq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Cq(){const i=Na();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Nq(){return!Aq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kq(){try{return typeof indexedDB=="object"}catch{return!1}}function Iq(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq="FirebaseError";class Dh extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Rq,Object.setPrototypeOf(this,Dh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,p2.prototype.create)}}class p2{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?Lq(s,n):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Dh(r,l,n)}}function Lq(i,e){return i.replace(Pq,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const Pq=/\{\$([^}]+)}/g;function Mq(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function sA(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const s=i[r],a=e[r];if(Y3(s)&&Y3(a)){if(!sA(s,a))return!1}else if(s!==a)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function Y3(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Z1(i){const e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,s]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function eb(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function Dq(i,e){const t=new Oq(i,e);return t.subscribe.bind(t)}class Oq{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");Fq(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=pT),r.error===void 0&&(r.error=pT),r.complete===void 0&&(r.complete=pT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fq(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function pT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(i){return i&&i._delegate?i._delegate:i}class Ng{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new _q;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Uq(e))try{this.getOrInitializeService({instanceIdentifier:dm})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(e=dm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dm){return this.instances.has(e)}getOptions(e=dm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Bq(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=dm){return this.component?this.component.multipleInstances?e:dm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bq(i){return i===dm?void 0:i}function Uq(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vq(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(qn||(qn={}));const jq={debug:qn.DEBUG,verbose:qn.VERBOSE,info:qn.INFO,warn:qn.WARN,error:qn.ERROR,silent:qn.SILENT},qq=qn.INFO,$q={[qn.DEBUG]:"log",[qn.VERBOSE]:"log",[qn.INFO]:"info",[qn.WARN]:"warn",[qn.ERROR]:"error"},Hq=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),r=$q[e];if(r)console[r](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vN{constructor(e){this.name=e,this._logLevel=qq,this._logHandler=Hq,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qn.DEBUG,...e),this._logHandler(this,qn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qn.VERBOSE,...e),this._logHandler(this,qn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qn.INFO,...e),this._logHandler(this,qn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qn.WARN,...e),this._logHandler(this,qn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qn.ERROR,...e),this._logHandler(this,qn.ERROR,...e)}}const Gq=(i,e)=>e.some(t=>i instanceof t);let K3,W3;function Yq(){return K3||(K3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kq(){return W3||(W3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hO=new WeakMap,cC=new WeakMap,fO=new WeakMap,mT=new WeakMap,bN=new WeakMap;function Wq(i){const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",a)},s=()=>{t(yp(i.result)),r()},a=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&hO.set(t,i)}).catch(()=>{}),bN.set(e,i),e}function Qq(i){if(cC.has(i))return;const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",a),i.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",a),i.addEventListener("abort",a)});cC.set(i,e)}let dC={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return cC.get(i);if(e==="objectStoreNames")return i.objectStoreNames||fO.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yp(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Xq(i){dC=i(dC)}function Jq(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(gT(this),e,...t);return fO.set(n,e.sort?e.sort():[e]),yp(n)}:Kq().includes(i)?function(...e){return i.apply(gT(this),e),yp(hO.get(this))}:function(...e){return yp(i.apply(gT(this),e))}}function Zq(i){return typeof i=="function"?Jq(i):(i instanceof IDBTransaction&&Qq(i),Gq(i,Yq())?new Proxy(i,dC):i)}function yp(i){if(i instanceof IDBRequest)return Wq(i);if(mT.has(i))return mT.get(i);const e=Zq(i);return e!==i&&(mT.set(i,e),bN.set(e,i)),e}const gT=i=>bN.get(i);function e$(i,e,{blocked:t,upgrade:n,blocking:r,terminated:s}={}){const a=indexedDB.open(i,e),l=yp(a);return n&&a.addEventListener("upgradeneeded",u=>{n(yp(a.result),u.oldVersion,u.newVersion,yp(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const t$=["get","getKey","getAll","getAllKeys","count"],n$=["put","add","delete","clear"],yT=new Map;function Q3(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(yT.get(e))return yT.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=n$.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||t$.includes(t)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[t](...l),r&&u.done]))[0]};return yT.set(e,s),s}Xq(i=>({...i,get:(e,t,n)=>Q3(e,t)||i.get(e,t,n),has:(e,t)=>!!Q3(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(r$(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function r$(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hC="@firebase/app",X3="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new vN("@firebase/app"),s$="@firebase/app-compat",a$="@firebase/analytics-compat",o$="@firebase/analytics",l$="@firebase/app-check-compat",u$="@firebase/app-check",c$="@firebase/auth",d$="@firebase/auth-compat",h$="@firebase/database",f$="@firebase/data-connect",p$="@firebase/database-compat",m$="@firebase/functions",g$="@firebase/functions-compat",y$="@firebase/installations",v$="@firebase/installations-compat",b$="@firebase/messaging",_$="@firebase/messaging-compat",x$="@firebase/performance",w$="@firebase/performance-compat",A$="@firebase/remote-config",S$="@firebase/remote-config-compat",T$="@firebase/storage",E$="@firebase/storage-compat",C$="@firebase/firestore",N$="@firebase/vertexai-preview",k$="@firebase/firestore-compat",I$="firebase",R$="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="[DEFAULT]",L$={[hC]:"fire-core",[s$]:"fire-core-compat",[o$]:"fire-analytics",[a$]:"fire-analytics-compat",[u$]:"fire-app-check",[l$]:"fire-app-check-compat",[c$]:"fire-auth",[d$]:"fire-auth-compat",[h$]:"fire-rtdb",[f$]:"fire-data-connect",[p$]:"fire-rtdb-compat",[m$]:"fire-fn",[g$]:"fire-fn-compat",[y$]:"fire-iid",[v$]:"fire-iid-compat",[b$]:"fire-fcm",[_$]:"fire-fcm-compat",[x$]:"fire-perf",[w$]:"fire-perf-compat",[A$]:"fire-rc",[S$]:"fire-rc-compat",[T$]:"fire-gcs",[E$]:"fire-gcs-compat",[C$]:"fire-fst",[k$]:"fire-fst-compat",[N$]:"fire-vertex","fire-js":"fire-js",[I$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=new Map,P$=new Map,pC=new Map;function J3(i,e){try{i.container.addComponent(e)}catch(t){kh.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function dv(i){const e=i.name;if(pC.has(e))return kh.debug(`There were multiple attempts to register component ${e}.`),!1;pC.set(e,i);for(const t of aA.values())J3(t,i);for(const t of P$.values())J3(t,i);return!0}function _N(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Gc(i){return i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vp=new p2("app","Firebase",M$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ng("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vp.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=R$;function pO(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n=Object.assign({name:fC,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw vp.create("bad-app-name",{appName:String(r)});if(t||(t=cO()),!t)throw vp.create("no-options");const s=aA.get(r);if(s){if(sA(t,s.options)&&sA(n,s.config))return s;throw vp.create("duplicate-app",{appName:r})}const a=new zq(r);for(const u of pC.values())a.addComponent(u);const l=new D$(t,n,a);return aA.set(r,l),l}function mO(i=fC){const e=aA.get(i);if(!e&&i===fC&&cO())return pO();if(!e)throw vp.create("no-app",{appName:i});return e}function bp(i,e,t){var n;let r=(n=L$[i])!==null&&n!==void 0?n:i;t&&(r+=`-${t}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kh.warn(l.join(" "));return}dv(new Ng(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$="firebase-heartbeat-database",F$=1,wb="firebase-heartbeat-store";let vT=null;function gO(){return vT||(vT=e$(O$,F$,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(wb)}catch(t){console.warn(t)}}}}).catch(i=>{throw vp.create("idb-open",{originalErrorMessage:i.message})})),vT}async function V$(i){try{const t=(await gO()).transaction(wb),n=await t.objectStore(wb).get(yO(i));return await t.done,n}catch(e){if(e instanceof Dh)kh.warn(e.message);else{const t=vp.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kh.warn(t.message)}}}async function Z3(i,e){try{const n=(await gO()).transaction(wb,"readwrite");await n.objectStore(wb).put(e,yO(i)),await n.done}catch(t){if(t instanceof Dh)kh.warn(t.message);else{const n=vp.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});kh.warn(n.message)}}}function yO(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$=1024,U$=30*24*60*60*1e3;class z${constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new q$(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=e4();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=U$}),this._storage.overwrite(this._heartbeatsCache))}catch(n){kh.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=e4(),{heartbeatsToSend:n,unsentEntries:r}=j$(this._heartbeatsCache.heartbeats),s=rA(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return kh.warn(t),""}}}function e4(){return new Date().toISOString().substring(0,10)}function j$(i,e=B$){const t=[];let n=i.slice();for(const r of i){const s=t.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),t4(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),t4(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class q${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kq()?Iq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await V$(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Z3(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Z3(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function t4(i){return rA(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(i){dv(new Ng("platform-logger",e=>new i$(e),"PRIVATE")),dv(new Ng("heartbeat",e=>new z$(e),"PRIVATE")),bp(hC,X3,i),bp(hC,X3,"esm2017"),bp("fire-js","")}$$("");function xN(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}function vO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const H$=vO,bO=new p2("auth","Firebase",vO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=new vN("@firebase/auth");function G$(i,...e){oA.logLevel<=qn.WARN&&oA.warn(`Auth (${Ev}): ${i}`,...e)}function Iw(i,...e){oA.logLevel<=qn.ERROR&&oA.error(`Auth (${Ev}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(i,...e){throw wN(i,...e)}function Xc(i,...e){return wN(i,...e)}function _O(i,e,t){const n=Object.assign(Object.assign({},H$()),{[e]:t});return new p2("auth","Firebase",n).create(e,{appName:i.name})}function Sh(i){return _O(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wN(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return bO.create(i,...e)}function an(i,e,...t){if(!i)throw wN(e,...t)}function xh(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Iw(e),new Error(e)}function Ih(i,e){i||xh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function Y$(){return n4()==="http:"||n4()==="https:"}function n4(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y$()||Tq()||"connection"in navigator)?navigator.onLine:!0}function W$(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ih(t>e,"Short delay should be less than long delay!"),this.isMobile=wq()||Eq()}get(){return K$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(i,e){Ih(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$=new g2(3e4,6e4);function Oh(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function od(i,e,t,n,r={}){return wO(i,r,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const l=m2(Object.assign({key:i.config.apiKey},a)).slice(1),u=await i._getAdditionalHeaders();u["Content-Type"]="application/json",i.languageCode&&(u["X-Firebase-Locale"]=i.languageCode);const d=Object.assign({method:e,headers:u},s);return Sq()||(d.referrerPolicy="no-referrer"),xO.fetch()(AO(i,i.config.apiHost,t,l),d)})}async function wO(i,e,t){i._canInitEmulator=!1;const n=Object.assign(Object.assign({},Q$),e);try{const r=new Z$(i),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw zx(i,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw zx(i,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw zx(i,"email-already-in-use",a);if(u==="USER_DISABLED")throw zx(i,"user-disabled",a);const f=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _O(i,f,d);qu(i,f)}}catch(r){if(r instanceof Dh)throw r;qu(i,"network-request-failed",{message:String(r)})}}async function y2(i,e,t,n,r={}){const s=await od(i,e,t,n,r);return"mfaPendingCredential"in s&&qu(i,"multi-factor-auth-required",{_serverResponse:s}),s}function AO(i,e,t,n){const r=`${e}${t}?${n}`;return i.config.emulator?AN(i.config,r):`${i.config.apiScheme}://${r}`}function J$(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Z${constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Xc(this.auth,"network-request-failed")),X$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zx(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=Xc(i,e,n);return r.customData._tokenResponse=t,r}function i4(i){return i!==void 0&&i.enterprise!==void 0}class eH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return J$(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function tH(i,e){return od(i,"GET","/v2/recaptchaConfig",Oh(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nH(i,e){return od(i,"POST","/v1/accounts:delete",e)}async function SO(i,e){return od(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iH(i,e=!1){const t=is(i),n=await t.getIdToken(e),r=SN(n);an(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:n,authTime:lb(bT(r.auth_time)),issuedAtTime:lb(bT(r.iat)),expirationTime:lb(bT(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function bT(i){return Number(i)*1e3}function SN(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return Iw("JWT malformed, contained fewer than 3 sections"),null;try{const r=lO(t);return r?JSON.parse(r):(Iw("Failed to decode base64 JWT payload"),null)}catch(r){return Iw("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function r4(i){const e=SN(i);return an(e,"internal-error"),an(typeof e.exp<"u","internal-error"),an(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hv(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Dh&&rH(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function rH({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lb(this.lastLoginAt),this.creationTime=lb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(i){var e;const t=i.auth,n=await i.getIdToken(),r=await hv(i,SO(t,{idToken:n}));an(r==null?void 0:r.users.length,t,"internal-error");const s=r.users[0];i._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?TO(s.providerUserInfo):[],l=oH(i.providerData,a),u=i.isAnonymous,d=!(i.email&&s.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new gC(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(i,p)}async function aH(i){const e=is(i);await lA(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oH(i,e){return[...i.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function TO(i){return i.map(e=>{var{providerId:t}=e,n=xN(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lH(i,e){const t=await wO(i,{},async()=>{const n=m2({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=i.config,a=AO(i,r,"/v1/token",`key=${s}`),l=await i._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",xO.fetch()(a,{method:"POST",headers:l,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function uH(i,e){return od(i,"POST","/v2/accounts:revokeToken",Oh(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){an(e.idToken,"internal-error"),an(typeof e.idToken<"u","internal-error"),an(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){an(e.length!==0,"internal-error");const t=r4(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(an(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await lH(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,a=new X0;return n&&(an(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),r&&(an(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(an(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new X0,this.toJSON())}_performRefresh(){return xh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(i,e){an(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class wh{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=xN(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gC(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await hv(this,this.stsTokenManager.getToken(this.auth,e));return an(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return iH(this,e)}reload(){return aH(this)}_assign(e){this!==e&&(an(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await lA(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gc(this.auth.app))return Promise.reject(Sh(this.auth));const e=await this.getIdToken();return await hv(this,nH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,a,l,u,d,f;const p=(n=t.displayName)!==null&&n!==void 0?n:void 0,y=(r=t.email)!==null&&r!==void 0?r:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,C=(a=t.photoURL)!==null&&a!==void 0?a:void 0,E=(l=t.tenantId)!==null&&l!==void 0?l:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,I=(d=t.createdAt)!==null&&d!==void 0?d:void 0,D=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:j,emailVerified:X,isAnonymous:W,providerData:ue,stsTokenManager:U}=t;an(j&&U,e,"internal-error");const P=X0.fromJSON(this.name,U);an(typeof j=="string",e,"internal-error"),Af(p,e.name),Af(y,e.name),an(typeof X=="boolean",e,"internal-error"),an(typeof W=="boolean",e,"internal-error"),Af(v,e.name),Af(C,e.name),Af(E,e.name),Af(R,e.name),Af(I,e.name),Af(D,e.name);const V=new wh({uid:j,auth:e,email:y,emailVerified:X,displayName:p,isAnonymous:W,photoURL:C,phoneNumber:v,tenantId:E,stsTokenManager:P,createdAt:I,lastLoginAt:D});return ue&&Array.isArray(ue)&&(V.providerData=ue.map(Y=>Object.assign({},Y))),R&&(V._redirectEventId=R),V}static async _fromIdTokenResponse(e,t,n=!1){const r=new X0;r.updateFromServerResponse(t);const s=new wh({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await lA(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];an(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?TO(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new X0;l.updateFromIdToken(n);const u=new wh({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new gC(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=new Map;function Ah(i){Ih(i instanceof Function,"Expected a class definition");let e=s4.get(i);return e?(Ih(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,s4.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}EO.type="NONE";const a4=EO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(i,e,t){return`firebase:${i}:${e}:${t}`}class J0{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Rw(this.userKey,r.apiKey,s),this.fullPersistenceKey=Rw("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wh._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new J0(Ah(a4),e,n);const r=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||Ah(a4);const a=Rw(n,e.config.apiKey,e.name);let l=null;for(const d of t)try{const f=await d._get(a);if(f){const p=wh._fromJSON(e,f);d!==s&&(l=p),s=d;break}}catch{}const u=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new J0(s,e,n):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new J0(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LO(e))return"Blackberry";if(PO(e))return"Webos";if(NO(e))return"Safari";if((e.includes("chrome/")||kO(e))&&!e.includes("edge/"))return"Chrome";if(RO(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function CO(i=Na()){return/firefox\//i.test(i)}function NO(i=Na()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kO(i=Na()){return/crios\//i.test(i)}function IO(i=Na()){return/iemobile/i.test(i)}function RO(i=Na()){return/android/i.test(i)}function LO(i=Na()){return/blackberry/i.test(i)}function PO(i=Na()){return/webos/i.test(i)}function TN(i=Na()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function cH(i=Na()){var e;return TN(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dH(){return Cq()&&document.documentMode===10}function MO(i=Na()){return TN(i)||RO(i)||PO(i)||LO(i)||/windows phone/i.test(i)||IO(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(i,e=[]){let t;switch(i){case"Browser":t=o4(Na());break;case"Worker":t=`${o4(Na())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ev}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((a,l)=>{try{const u=e(s);a(u)}catch(u){l(u)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fH(i,e={}){return od(i,"GET","/v2/passwordPolicy",Oh(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH=6;class mH{constructor(e){var t,n,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:pH,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l4(this),this.idTokenSubscription=new l4(this),this.beforeStateQueue=new hH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ah(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await J0.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await SO(this,{idToken:e}),n=await wh._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gc(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return an(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lA(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=W$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gc(this.app))return Promise.reject(Sh(this));const t=e?is(e):null;return t&&an(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&an(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gc(this.app)?Promise.reject(Sh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gc(this.app)?Promise.reject(Sh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ah(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fH(this),t=new mH(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new p2("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await uH(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ah(e)||this._popupRedirectResolver;an(t,this,"argument-error"),this.redirectPersistenceManager=await J0.create(this,[Ah(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(an(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,n,r);return()=>{a=!0,u()}}else{const u=e.addObserver(t);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&G$(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Dp(i){return is(i)}class l4{constructor(e){this.auth=e,this.observer=null,this.addObserver=Dq(t=>this.observer=t)}get next(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o5={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yH(i){o5=i}function OO(i){return o5.loadJS(i)}function vH(){return o5.recaptchaEnterpriseScript}function bH(){return o5.gapiScript}function _H(i){return`__${i}${Math.floor(Math.random()*1e6)}`}const xH="recaptcha-enterprise",wH="NO_RECAPTCHA";class AH{constructor(e){this.type=xH,this.auth=Dp(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{tH(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new eH(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(u=>{l(u)})})}function r(s,a,l){const u=window.grecaptcha;i4(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(wH)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{n(this.auth).then(l=>{if(!t&&i4(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=vH();u.length!==0&&(u+=l),OO(u).then(()=>{r(l,s,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function u4(i,e,t,n=!1){const r=new AH(i);let s;try{s=await r.verify(t)}catch{s=await r.verify(t,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function uA(i,e,t,n){var r;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await u4(i,e,t,t==="getOobCode");return n(i,s)}else return n(i,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await u4(i,e,t,t==="getOobCode");return n(i,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SH(i,e){const t=_N(i,"auth");if(t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if(sA(s,e??{}))return r;qu(r,"already-initialized")}return t.initialize({options:e})}function TH(i,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Ah);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function EH(i,e,t){const n=Dp(i);an(n._canInitEmulator,n,"emulator-config-failed"),an(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,s=FO(e),{host:a,port:l}=CH(e),u=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${a}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),NH()}function FO(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function CH(i){const e=FO(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const s=r[1];return{host:s,port:c4(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:c4(a)}}}function c4(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function NH(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xh("not implemented")}_getIdTokenResponse(e){return xh("not implemented")}_linkToIdToken(e,t){return xh("not implemented")}_getReauthenticationResolver(e){return xh("not implemented")}}async function kH(i,e){return od(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IH(i,e){return y2(i,"POST","/v1/accounts:signInWithPassword",Oh(i,e))}async function RH(i,e){return od(i,"POST","/v1/accounts:sendOobCode",Oh(i,e))}async function LH(i,e){return RH(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PH(i,e){return y2(i,"POST","/v1/accounts:signInWithEmailLink",Oh(i,e))}async function MH(i,e){return y2(i,"POST","/v1/accounts:signInWithEmailLink",Oh(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab extends EN{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ab(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ab(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uA(e,t,"signInWithPassword",IH);case"emailLink":return PH(e,{email:this._email,oobCode:this._password});default:qu(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uA(e,n,"signUpPassword",kH);case"emailLink":return MH(e,{idToken:t,email:this._email,oobCode:this._password});default:qu(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z0(i,e){return y2(i,"POST","/v1/accounts:signInWithIdp",Oh(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH="http://localhost";class kg extends EN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new kg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qu("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=xN(t,["providerId","signInMethod"]);if(!n||!r)return null;const a=new kg(n,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Z0(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Z0(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Z0(e,t)}buildRequest(){const e={requestUri:DH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=m2(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FH(i){const e=Z1(eb(i)).link,t=e?Z1(eb(e)).deep_link_id:null,n=Z1(eb(i)).deep_link_id;return(n?Z1(eb(n)).link:null)||n||t||e||i}class CN{constructor(e){var t,n,r,s,a,l;const u=Z1(eb(e)),d=(t=u.apiKey)!==null&&t!==void 0?t:null,f=(n=u.oobCode)!==null&&n!==void 0?n:null,p=OH((r=u.mode)!==null&&r!==void 0?r:null);an(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const t=FH(e);try{return new CN(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.providerId=Cv.PROVIDER_ID}static credential(e,t){return Ab._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=CN.parseLink(t);return an(n,"argument-error"),Ab._fromEmailAndCode(e,n.code,n.tenantId)}}Cv.PROVIDER_ID="password";Cv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2 extends VO{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends v2{constructor(){super("facebook.com")}static credential(e){return kg._fromParams({providerId:Cf.PROVIDER_ID,signInMethod:Cf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cf.credentialFromTaggedObject(e)}static credentialFromError(e){return Cf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cf.credential(e.oauthAccessToken)}catch{return null}}}Cf.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends v2{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return kg._fromParams({providerId:Nf.PROVIDER_ID,signInMethod:Nf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Nf.credentialFromTaggedObject(e)}static credentialFromError(e){return Nf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Nf.credential(t,n)}catch{return null}}}Nf.GOOGLE_SIGN_IN_METHOD="google.com";Nf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends v2{constructor(){super("github.com")}static credential(e){return kg._fromParams({providerId:kf.PROVIDER_ID,signInMethod:kf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kf.credentialFromTaggedObject(e)}static credentialFromError(e){return kf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kf.credential(e.oauthAccessToken)}catch{return null}}}kf.GITHUB_SIGN_IN_METHOD="github.com";kf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends v2{constructor(){super("twitter.com")}static credential(e,t){return kg._fromParams({providerId:If.PROVIDER_ID,signInMethod:If.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return If.credentialFromTaggedObject(e)}static credentialFromError(e){return If.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return If.credential(t,n)}catch{return null}}}If.TWITTER_SIGN_IN_METHOD="twitter.com";If.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VH(i,e){return y2(i,"POST","/v1/accounts:signUp",Oh(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const s=await wh._fromIdTokenResponse(e,n,r),a=d4(n);return new Ig({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=d4(n);return new Ig({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function d4(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA extends Dh{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,cA.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new cA(e,t,n,r)}}function BO(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cA._fromErrorAndOperation(i,s,e,n):s})}async function BH(i,e,t=!1){const n=await hv(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Ig._forOperation(i,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UH(i,e,t=!1){const{auth:n}=i;if(Gc(n.app))return Promise.reject(Sh(n));const r="reauthenticate";try{const s=await hv(i,BO(n,r,e,i),t);an(s.idToken,n,"internal-error");const a=SN(s.idToken);an(a,n,"internal-error");const{sub:l}=a;return an(i.uid===l,n,"user-mismatch"),Ig._forOperation(i,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&qu(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(i,e,t=!1){if(Gc(i.app))return Promise.reject(Sh(i));const n="signIn",r=await BO(i,n,e),s=await Ig._fromIdTokenResponse(i,n,r);return t||await i._updateCurrentUser(s.user),s}async function zH(i,e){return UO(Dp(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(i){const e=Dp(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jH(i,e,t){const n=Dp(i);await uA(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",LH)}async function qH(i,e,t){if(Gc(i.app))return Promise.reject(Sh(i));const n=Dp(i),a=await uA(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VH).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&zO(i),u}),l=await Ig._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(l.user),l}function $H(i,e,t){return Gc(i.app)?Promise.reject(Sh(i)):zH(is(i),Cv.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&zO(i),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HH(i,e){return od(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GH(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=is(i),s={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await hv(n,HH(n.auth,s));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const l=n.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function YH(i,e,t,n){return is(i).onIdTokenChanged(e,t,n)}function KH(i,e,t){return is(i).beforeAuthStateChanged(e,t)}function WH(i,e,t,n){return is(i).onAuthStateChanged(e,t,n)}function QH(i){return is(i).signOut()}const dA="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dA,"1"),this.storage.removeItem(dA),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH=1e3,JH=10;class qO extends jO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);dH()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,JH):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},XH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}qO.type="LOCAL";const ZH=qO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O extends jO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$O.type="SESSION";const HO=$O;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eG(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new l5(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const l=Array.from(a).map(async d=>d(t.origin,s)),u=await eG(l);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}l5.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const d=NN("",20);r.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:r,onMessage(p){const y=p;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(y.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(){return window}function nG(i){Jc().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(){return typeof Jc().WorkerGlobalScope<"u"&&typeof Jc().importScripts=="function"}async function iG(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rG(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function sG(){return GO()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO="firebaseLocalStorageDb",aG=1,hA="firebaseLocalStorage",KO="fbase_key";class b2{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function u5(i,e){return i.transaction([hA],e?"readwrite":"readonly").objectStore(hA)}function oG(){const i=indexedDB.deleteDatabase(YO);return new b2(i).toPromise()}function yC(){const i=indexedDB.open(YO,aG);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(hA,{keyPath:KO})}catch(r){t(r)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(hA)?e(n):(n.close(),await oG(),e(await yC()))})})}async function h4(i,e,t){const n=u5(i,!0).put({[KO]:e,value:t});return new b2(n).toPromise()}async function lG(i,e){const t=u5(i,!1).get(e),n=await new b2(t).toPromise();return n===void 0?null:n.value}function f4(i,e){const t=u5(i,!0).delete(e);return new b2(t).toPromise()}const uG=800,cG=3;class WO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yC(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>cG)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=l5._getInstance(sG()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await iG(),!this.activeServiceWorker)return;this.sender=new tG(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yC();return await h4(e,dA,"1"),await f4(e,dA),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>h4(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>lG(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>f4(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=u5(r,!1).getAll();return new b2(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WO.type="LOCAL";const dG=WO;new g2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hG(i,e){return e?Ah(e):(an(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN extends EN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Z0(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Z0(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Z0(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fG(i){return UO(i.auth,new kN(i),i.bypassAuthState)}function pG(i){const{auth:e,user:t}=i;return an(t,e,"internal-error"),UH(t,new kN(i),i.bypassAuthState)}async function mG(i){const{auth:e,user:t}=i;return an(t,e,"internal-error"),BH(t,new kN(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fG;case"linkViaPopup":case"linkViaRedirect":return mG;case"reauthViaPopup":case"reauthViaRedirect":return pG;default:qu(this.auth,"internal-error")}}resolve(e){Ih(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ih(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gG=new g2(2e3,1e4);class j0 extends QO{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,j0.currentPopupAction&&j0.currentPopupAction.cancel(),j0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return an(e,this.auth,"internal-error"),e}async onExecution(){Ih(this.filter.length===1,"Popup operations only handle one event");const e=NN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,j0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gG.get())};e()}}j0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG="pendingRedirect",Lw=new Map;class vG extends QO{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Lw.get(this.auth._key());if(!e){try{const n=await bG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Lw.set(this.auth._key(),e)}return this.bypassAuthState||Lw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bG(i,e){const t=wG(e),n=xG(i);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function _G(i,e){Lw.set(i._key(),e)}function xG(i){return Ah(i._redirectPersistence)}function wG(i){return Rw(yG,i.config.apiKey,i.name)}async function AG(i,e,t=!1){if(Gc(i.app))return Promise.reject(Sh(i));const n=Dp(i),r=hG(n,e),a=await new vG(n,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SG=10*60*1e3;class TG{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EG(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!XO(e)){const r=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Xc(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SG&&this.cachedEventUids.clear(),this.cachedEventUids.has(p4(e))}saveEventToCache(e){this.cachedEventUids.add(p4(e)),this.lastProcessedEventTime=Date.now()}}function p4(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function XO({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EG(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XO(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CG(i,e={}){return od(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kG=/^https?/;async function IG(i){if(i.config.emulator)return;const{authorizedDomains:e}=await CG(i);for(const t of e)try{if(RG(t))return}catch{}qu(i,"unauthorized-domain")}function RG(i){const e=mC(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const a=new URL(i);return a.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!kG.test(t))return!1;if(NG.test(i))return n===i;const r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LG=new g2(3e4,6e4);function m4(){const i=Jc().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function PG(i){return new Promise((e,t)=>{var n,r,s;function a(){m4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{m4(),t(Xc(i,"network-request-failed"))},timeout:LG.get()})}if(!((r=(n=Jc().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Jc().gapi)===null||s===void 0)&&s.load)a();else{const l=_H("iframefcb");return Jc()[l]=()=>{gapi.load?a():t(Xc(i,"network-request-failed"))},OO(`${bH()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw Pw=null,e})}let Pw=null;function MG(i){return Pw=Pw||PG(i),Pw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG=new g2(5e3,15e3),OG="__/auth/iframe",FG="emulator/auth/iframe",VG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UG(i){const e=i.config;an(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?AN(e,FG):`https://${i.config.authDomain}/${OG}`,n={apiKey:e.apiKey,appName:i.name,v:Ev},r=BG.get(i.config.apiHost);r&&(n.eid=r);const s=i._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${m2(n).slice(1)}`}async function zG(i){const e=await MG(i),t=Jc().gapi;return an(t,i,"internal-error"),e.open({where:document.body,url:UG(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VG,dontclear:!0},n=>new Promise(async(r,s)=>{await n.restyle({setHideOnLeave:!1});const a=Xc(i,"network-request-failed"),l=Jc().setTimeout(()=>{s(a)},DG.get());function u(){Jc().clearTimeout(l),r(n)}n.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qG=500,$G=600,HG="_blank",GG="http://localhost";class g4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YG(i,e,t,n=qG,r=$G){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u=Object.assign(Object.assign({},jG),{width:n.toString(),height:r.toString(),top:s,left:a}),d=Na().toLowerCase();t&&(l=kO(d)?HG:t),CO(d)&&(e=e||GG,u.scrollbars="yes");const f=Object.entries(u).reduce((y,[v,C])=>`${y}${v}=${C},`,"");if(cH(d)&&l!=="_self")return KG(e||"",l),new g4(null);const p=window.open(e||"",l,f);an(p,i,"popup-blocked");try{p.focus()}catch{}return new g4(p)}function KG(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WG="__/auth/handler",QG="emulator/auth/handler",XG=encodeURIComponent("fac");async function y4(i,e,t,n,r,s){an(i.config.authDomain,i,"auth-domain-config-required"),an(i.config.apiKey,i,"invalid-api-key");const a={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:Ev,eventId:r};if(e instanceof VO){e.setDefaultLanguage(i.languageCode),a.providerId=e.providerId||"",Mq(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof v2){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}i.tenantId&&(a.tid=i.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await i._getAppCheckToken(),d=u?`#${XG}=${encodeURIComponent(u)}`:"";return`${JG(i)}?${m2(l).slice(1)}${d}`}function JG({config:i}){return i.emulator?AN(i,QG):`https://${i.authDomain}/${WG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="webStorageSupport";class ZG{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HO,this._completeRedirectFn=AG,this._overrideRedirectResult=_G}async _openPopup(e,t,n,r){var s;Ih((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await y4(e,t,n,mC(),r);return YG(e,a,NN())}async _openRedirect(e,t,n,r){await this._originValidation(e);const s=await y4(e,t,n,mC(),r);return nG(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Ih(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await zG(e),n=new TG(e);return t.register("authEvent",r=>(an(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_T,{type:_T},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[_T];a!==void 0&&t(!!a),qu(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=IG(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return MO()||NO()||TN()}}const eY=ZG;var v4="@firebase/auth",b4="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nY(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iY(i){dv(new Ng("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=n.options;an(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:l,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DO(i)},d=new gH(n,r,s,u);return TH(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),dv(new Ng("auth-internal",e=>{const t=Dp(e.getProvider("auth").getImmediate());return(n=>new tY(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bp(v4,b4,nY(i)),bp(v4,b4,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rY=5*60,sY=dO("authIdTokenMaxAge")||rY;let _4=null;const aY=i=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>sY)return;const r=t==null?void 0:t.token;_4!==r&&(_4=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function oY(i=mO()){const e=_N(i,"auth");if(e.isInitialized())return e.getImmediate();const t=SH(i,{popupRedirectResolver:eY,persistence:[dG,ZH,HO]}),n=dO("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=aY(s.toString());KH(t,a,()=>a(t.currentUser)),YH(t,l=>a(l))}}const r=uO("auth");return r&&EH(t,`http://${r}`),t}function lY(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}yH({loadJS(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=r=>{const s=Xc("internal-error");s.customData=r,t(s)},n.type="text/javascript",n.charset="UTF-8",lY().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iY("Browser");var uY="firebase",cY="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bp(uY,cY,"app");var x4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sg,JO;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,P){function V(){}V.prototype=P.prototype,U.D=P.prototype,U.prototype=new V,U.prototype.constructor=U,U.C=function(Y,O,F){for(var B=Array(arguments.length-2),H=2;H<arguments.length;H++)B[H-2]=arguments[H];return P.prototype[O].apply(Y,B)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(U,P,V){V||(V=0);var Y=Array(16);if(typeof P=="string")for(var O=0;16>O;++O)Y[O]=P.charCodeAt(V++)|P.charCodeAt(V++)<<8|P.charCodeAt(V++)<<16|P.charCodeAt(V++)<<24;else for(O=0;16>O;++O)Y[O]=P[V++]|P[V++]<<8|P[V++]<<16|P[V++]<<24;P=U.g[0],V=U.g[1],O=U.g[2];var F=U.g[3],B=P+(F^V&(O^F))+Y[0]+3614090360&4294967295;P=V+(B<<7&4294967295|B>>>25),B=F+(O^P&(V^O))+Y[1]+3905402710&4294967295,F=P+(B<<12&4294967295|B>>>20),B=O+(V^F&(P^V))+Y[2]+606105819&4294967295,O=F+(B<<17&4294967295|B>>>15),B=V+(P^O&(F^P))+Y[3]+3250441966&4294967295,V=O+(B<<22&4294967295|B>>>10),B=P+(F^V&(O^F))+Y[4]+4118548399&4294967295,P=V+(B<<7&4294967295|B>>>25),B=F+(O^P&(V^O))+Y[5]+1200080426&4294967295,F=P+(B<<12&4294967295|B>>>20),B=O+(V^F&(P^V))+Y[6]+2821735955&4294967295,O=F+(B<<17&4294967295|B>>>15),B=V+(P^O&(F^P))+Y[7]+4249261313&4294967295,V=O+(B<<22&4294967295|B>>>10),B=P+(F^V&(O^F))+Y[8]+1770035416&4294967295,P=V+(B<<7&4294967295|B>>>25),B=F+(O^P&(V^O))+Y[9]+2336552879&4294967295,F=P+(B<<12&4294967295|B>>>20),B=O+(V^F&(P^V))+Y[10]+4294925233&4294967295,O=F+(B<<17&4294967295|B>>>15),B=V+(P^O&(F^P))+Y[11]+2304563134&4294967295,V=O+(B<<22&4294967295|B>>>10),B=P+(F^V&(O^F))+Y[12]+1804603682&4294967295,P=V+(B<<7&4294967295|B>>>25),B=F+(O^P&(V^O))+Y[13]+4254626195&4294967295,F=P+(B<<12&4294967295|B>>>20),B=O+(V^F&(P^V))+Y[14]+2792965006&4294967295,O=F+(B<<17&4294967295|B>>>15),B=V+(P^O&(F^P))+Y[15]+1236535329&4294967295,V=O+(B<<22&4294967295|B>>>10),B=P+(O^F&(V^O))+Y[1]+4129170786&4294967295,P=V+(B<<5&4294967295|B>>>27),B=F+(V^O&(P^V))+Y[6]+3225465664&4294967295,F=P+(B<<9&4294967295|B>>>23),B=O+(P^V&(F^P))+Y[11]+643717713&4294967295,O=F+(B<<14&4294967295|B>>>18),B=V+(F^P&(O^F))+Y[0]+3921069994&4294967295,V=O+(B<<20&4294967295|B>>>12),B=P+(O^F&(V^O))+Y[5]+3593408605&4294967295,P=V+(B<<5&4294967295|B>>>27),B=F+(V^O&(P^V))+Y[10]+38016083&4294967295,F=P+(B<<9&4294967295|B>>>23),B=O+(P^V&(F^P))+Y[15]+3634488961&4294967295,O=F+(B<<14&4294967295|B>>>18),B=V+(F^P&(O^F))+Y[4]+3889429448&4294967295,V=O+(B<<20&4294967295|B>>>12),B=P+(O^F&(V^O))+Y[9]+568446438&4294967295,P=V+(B<<5&4294967295|B>>>27),B=F+(V^O&(P^V))+Y[14]+3275163606&4294967295,F=P+(B<<9&4294967295|B>>>23),B=O+(P^V&(F^P))+Y[3]+4107603335&4294967295,O=F+(B<<14&4294967295|B>>>18),B=V+(F^P&(O^F))+Y[8]+1163531501&4294967295,V=O+(B<<20&4294967295|B>>>12),B=P+(O^F&(V^O))+Y[13]+2850285829&4294967295,P=V+(B<<5&4294967295|B>>>27),B=F+(V^O&(P^V))+Y[2]+4243563512&4294967295,F=P+(B<<9&4294967295|B>>>23),B=O+(P^V&(F^P))+Y[7]+1735328473&4294967295,O=F+(B<<14&4294967295|B>>>18),B=V+(F^P&(O^F))+Y[12]+2368359562&4294967295,V=O+(B<<20&4294967295|B>>>12),B=P+(V^O^F)+Y[5]+4294588738&4294967295,P=V+(B<<4&4294967295|B>>>28),B=F+(P^V^O)+Y[8]+2272392833&4294967295,F=P+(B<<11&4294967295|B>>>21),B=O+(F^P^V)+Y[11]+1839030562&4294967295,O=F+(B<<16&4294967295|B>>>16),B=V+(O^F^P)+Y[14]+4259657740&4294967295,V=O+(B<<23&4294967295|B>>>9),B=P+(V^O^F)+Y[1]+2763975236&4294967295,P=V+(B<<4&4294967295|B>>>28),B=F+(P^V^O)+Y[4]+1272893353&4294967295,F=P+(B<<11&4294967295|B>>>21),B=O+(F^P^V)+Y[7]+4139469664&4294967295,O=F+(B<<16&4294967295|B>>>16),B=V+(O^F^P)+Y[10]+3200236656&4294967295,V=O+(B<<23&4294967295|B>>>9),B=P+(V^O^F)+Y[13]+681279174&4294967295,P=V+(B<<4&4294967295|B>>>28),B=F+(P^V^O)+Y[0]+3936430074&4294967295,F=P+(B<<11&4294967295|B>>>21),B=O+(F^P^V)+Y[3]+3572445317&4294967295,O=F+(B<<16&4294967295|B>>>16),B=V+(O^F^P)+Y[6]+76029189&4294967295,V=O+(B<<23&4294967295|B>>>9),B=P+(V^O^F)+Y[9]+3654602809&4294967295,P=V+(B<<4&4294967295|B>>>28),B=F+(P^V^O)+Y[12]+3873151461&4294967295,F=P+(B<<11&4294967295|B>>>21),B=O+(F^P^V)+Y[15]+530742520&4294967295,O=F+(B<<16&4294967295|B>>>16),B=V+(O^F^P)+Y[2]+3299628645&4294967295,V=O+(B<<23&4294967295|B>>>9),B=P+(O^(V|~F))+Y[0]+4096336452&4294967295,P=V+(B<<6&4294967295|B>>>26),B=F+(V^(P|~O))+Y[7]+1126891415&4294967295,F=P+(B<<10&4294967295|B>>>22),B=O+(P^(F|~V))+Y[14]+2878612391&4294967295,O=F+(B<<15&4294967295|B>>>17),B=V+(F^(O|~P))+Y[5]+4237533241&4294967295,V=O+(B<<21&4294967295|B>>>11),B=P+(O^(V|~F))+Y[12]+1700485571&4294967295,P=V+(B<<6&4294967295|B>>>26),B=F+(V^(P|~O))+Y[3]+2399980690&4294967295,F=P+(B<<10&4294967295|B>>>22),B=O+(P^(F|~V))+Y[10]+4293915773&4294967295,O=F+(B<<15&4294967295|B>>>17),B=V+(F^(O|~P))+Y[1]+2240044497&4294967295,V=O+(B<<21&4294967295|B>>>11),B=P+(O^(V|~F))+Y[8]+1873313359&4294967295,P=V+(B<<6&4294967295|B>>>26),B=F+(V^(P|~O))+Y[15]+4264355552&4294967295,F=P+(B<<10&4294967295|B>>>22),B=O+(P^(F|~V))+Y[6]+2734768916&4294967295,O=F+(B<<15&4294967295|B>>>17),B=V+(F^(O|~P))+Y[13]+1309151649&4294967295,V=O+(B<<21&4294967295|B>>>11),B=P+(O^(V|~F))+Y[4]+4149444226&4294967295,P=V+(B<<6&4294967295|B>>>26),B=F+(V^(P|~O))+Y[11]+3174756917&4294967295,F=P+(B<<10&4294967295|B>>>22),B=O+(P^(F|~V))+Y[2]+718787259&4294967295,O=F+(B<<15&4294967295|B>>>17),B=V+(F^(O|~P))+Y[9]+3951481745&4294967295,U.g[0]=U.g[0]+P&4294967295,U.g[1]=U.g[1]+(O+(B<<21&4294967295|B>>>11))&4294967295,U.g[2]=U.g[2]+O&4294967295,U.g[3]=U.g[3]+F&4294967295}n.prototype.u=function(U,P){P===void 0&&(P=U.length);for(var V=P-this.blockSize,Y=this.B,O=this.h,F=0;F<P;){if(O==0)for(;F<=V;)r(this,U,F),F+=this.blockSize;if(typeof U=="string"){for(;F<P;)if(Y[O++]=U.charCodeAt(F++),O==this.blockSize){r(this,Y),O=0;break}}else for(;F<P;)if(Y[O++]=U[F++],O==this.blockSize){r(this,Y),O=0;break}}this.h=O,this.o+=P},n.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var P=1;P<U.length-8;++P)U[P]=0;var V=8*this.o;for(P=U.length-8;P<U.length;++P)U[P]=V&255,V/=256;for(this.u(U),U=Array(16),P=V=0;4>P;++P)for(var Y=0;32>Y;Y+=8)U[V++]=this.g[P]>>>Y&255;return U};function s(U,P){var V=l;return Object.prototype.hasOwnProperty.call(V,U)?V[U]:V[U]=P(U)}function a(U,P){this.h=P;for(var V=[],Y=!0,O=U.length-1;0<=O;O--){var F=U[O]|0;Y&&F==P||(V[O]=F,Y=!1)}this.g=V}var l={};function u(U){return-128<=U&&128>U?s(U,function(P){return new a([P|0],0>P?-1:0)}):new a([U|0],0>U?-1:0)}function d(U){if(isNaN(U)||!isFinite(U))return p;if(0>U)return R(d(-U));for(var P=[],V=1,Y=0;U>=V;Y++)P[Y]=U/V|0,V*=4294967296;return new a(P,0)}function f(U,P){if(U.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(U.charAt(0)=="-")return R(f(U.substring(1),P));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=d(Math.pow(P,8)),Y=p,O=0;O<U.length;O+=8){var F=Math.min(8,U.length-O),B=parseInt(U.substring(O,O+F),P);8>F?(F=d(Math.pow(P,F)),Y=Y.j(F).add(d(B))):(Y=Y.j(V),Y=Y.add(d(B)))}return Y}var p=u(0),y=u(1),v=u(16777216);i=a.prototype,i.m=function(){if(E(this))return-R(this).m();for(var U=0,P=1,V=0;V<this.g.length;V++){var Y=this.i(V);U+=(0<=Y?Y:4294967296+Y)*P,P*=4294967296}return U},i.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(C(this))return"0";if(E(this))return"-"+R(this).toString(U);for(var P=d(Math.pow(U,6)),V=this,Y="";;){var O=X(V,P).g;V=I(V,O.j(P));var F=((0<V.g.length?V.g[0]:V.h)>>>0).toString(U);if(V=O,C(V))return F+Y;for(;6>F.length;)F="0"+F;Y=F+Y}},i.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function C(U){if(U.h!=0)return!1;for(var P=0;P<U.g.length;P++)if(U.g[P]!=0)return!1;return!0}function E(U){return U.h==-1}i.l=function(U){return U=I(this,U),E(U)?-1:C(U)?0:1};function R(U){for(var P=U.g.length,V=[],Y=0;Y<P;Y++)V[Y]=~U.g[Y];return new a(V,~U.h).add(y)}i.abs=function(){return E(this)?R(this):this},i.add=function(U){for(var P=Math.max(this.g.length,U.g.length),V=[],Y=0,O=0;O<=P;O++){var F=Y+(this.i(O)&65535)+(U.i(O)&65535),B=(F>>>16)+(this.i(O)>>>16)+(U.i(O)>>>16);Y=B>>>16,F&=65535,B&=65535,V[O]=B<<16|F}return new a(V,V[V.length-1]&-2147483648?-1:0)};function I(U,P){return U.add(R(P))}i.j=function(U){if(C(this)||C(U))return p;if(E(this))return E(U)?R(this).j(R(U)):R(R(this).j(U));if(E(U))return R(this.j(R(U)));if(0>this.l(v)&&0>U.l(v))return d(this.m()*U.m());for(var P=this.g.length+U.g.length,V=[],Y=0;Y<2*P;Y++)V[Y]=0;for(Y=0;Y<this.g.length;Y++)for(var O=0;O<U.g.length;O++){var F=this.i(Y)>>>16,B=this.i(Y)&65535,H=U.i(O)>>>16,fe=U.i(O)&65535;V[2*Y+2*O]+=B*fe,D(V,2*Y+2*O),V[2*Y+2*O+1]+=F*fe,D(V,2*Y+2*O+1),V[2*Y+2*O+1]+=B*H,D(V,2*Y+2*O+1),V[2*Y+2*O+2]+=F*H,D(V,2*Y+2*O+2)}for(Y=0;Y<P;Y++)V[Y]=V[2*Y+1]<<16|V[2*Y];for(Y=P;Y<2*P;Y++)V[Y]=0;return new a(V,0)};function D(U,P){for(;(U[P]&65535)!=U[P];)U[P+1]+=U[P]>>>16,U[P]&=65535,P++}function j(U,P){this.g=U,this.h=P}function X(U,P){if(C(P))throw Error("division by zero");if(C(U))return new j(p,p);if(E(U))return P=X(R(U),P),new j(R(P.g),R(P.h));if(E(P))return P=X(U,R(P)),new j(R(P.g),P.h);if(30<U.g.length){if(E(U)||E(P))throw Error("slowDivide_ only works with positive integers.");for(var V=y,Y=P;0>=Y.l(U);)V=W(V),Y=W(Y);var O=ue(V,1),F=ue(Y,1);for(Y=ue(Y,2),V=ue(V,2);!C(Y);){var B=F.add(Y);0>=B.l(U)&&(O=O.add(V),F=B),Y=ue(Y,1),V=ue(V,1)}return P=I(U,O.j(P)),new j(O,P)}for(O=p;0<=U.l(P);){for(V=Math.max(1,Math.floor(U.m()/P.m())),Y=Math.ceil(Math.log(V)/Math.LN2),Y=48>=Y?1:Math.pow(2,Y-48),F=d(V),B=F.j(P);E(B)||0<B.l(U);)V-=Y,F=d(V),B=F.j(P);C(F)&&(F=y),O=O.add(F),U=I(U,B)}return new j(O,U)}i.A=function(U){return X(this,U).h},i.and=function(U){for(var P=Math.max(this.g.length,U.g.length),V=[],Y=0;Y<P;Y++)V[Y]=this.i(Y)&U.i(Y);return new a(V,this.h&U.h)},i.or=function(U){for(var P=Math.max(this.g.length,U.g.length),V=[],Y=0;Y<P;Y++)V[Y]=this.i(Y)|U.i(Y);return new a(V,this.h|U.h)},i.xor=function(U){for(var P=Math.max(this.g.length,U.g.length),V=[],Y=0;Y<P;Y++)V[Y]=this.i(Y)^U.i(Y);return new a(V,this.h^U.h)};function W(U){for(var P=U.g.length+1,V=[],Y=0;Y<P;Y++)V[Y]=U.i(Y)<<1|U.i(Y-1)>>>31;return new a(V,U.h)}function ue(U,P){var V=P>>5;P%=32;for(var Y=U.g.length-V,O=[],F=0;F<Y;F++)O[F]=0<P?U.i(F+V)>>>P|U.i(F+V+1)<<32-P:U.i(F+V);return new a(O,U.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,JO=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Sg=a}).apply(typeof x4<"u"?x4:typeof self<"u"?self:typeof window<"u"?window:{});var jx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZO,tb,eF,Mw,vC,tF,nF,iF;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,M,$){return w==Array.prototype||w==Object.prototype||(w[M]=$.value),w};function t(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof jx=="object"&&jx];for(var M=0;M<w.length;++M){var $=w[M];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var n=t(this);function r(w,M){if(M)e:{var $=n;w=w.split(".");for(var oe=0;oe<w.length-1;oe++){var ke=w[oe];if(!(ke in $))break e;$=$[ke]}w=w[w.length-1],oe=$[w],M=M(oe),M!=oe&&M!=null&&e($,w,{configurable:!0,writable:!0,value:M})}}function s(w,M){w instanceof String&&(w+="");var $=0,oe=!1,ke={next:function(){if(!oe&&$<w.length){var Be=$++;return{value:M(Be,w[Be]),done:!1}}return oe=!0,{done:!0,value:void 0}}};return ke[Symbol.iterator]=function(){return ke},ke}r("Array.prototype.values",function(w){return w||function(){return s(this,function(M,$){return $})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(w){var M=typeof w;return M=M!="object"?M:w?Array.isArray(w)?"array":M:"null",M=="array"||M=="object"&&typeof w.length=="number"}function d(w){var M=typeof w;return M=="object"&&w!=null||M=="function"}function f(w,M,$){return w.call.apply(w.bind,arguments)}function p(w,M,$){if(!w)throw Error();if(2<arguments.length){var oe=Array.prototype.slice.call(arguments,2);return function(){var ke=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ke,oe),w.apply(M,ke)}}return function(){return w.apply(M,arguments)}}function y(w,M,$){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function v(w,M){var $=Array.prototype.slice.call(arguments,1);return function(){var oe=$.slice();return oe.push.apply(oe,arguments),w.apply(this,oe)}}function C(w,M){function $(){}$.prototype=M.prototype,w.aa=M.prototype,w.prototype=new $,w.prototype.constructor=w,w.Qb=function(oe,ke,Be){for(var ot=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)ot[Wt-2]=arguments[Wt];return M.prototype[ke].apply(oe,ot)}}function E(w){const M=w.length;if(0<M){const $=Array(M);for(let oe=0;oe<M;oe++)$[oe]=w[oe];return $}return[]}function R(w,M){for(let $=1;$<arguments.length;$++){const oe=arguments[$];if(u(oe)){const ke=w.length||0,Be=oe.length||0;w.length=ke+Be;for(let ot=0;ot<Be;ot++)w[ke+ot]=oe[ot]}else w.push(oe)}}class I{constructor(M,$){this.i=M,this.j=$,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function D(w){return/^[\s\xa0]*$/.test(w)}function j(){var w=l.navigator;return w&&(w=w.userAgent)?w:""}function X(w){return X[" "](w),w}X[" "]=function(){};var W=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ue(w,M,$){for(const oe in w)M.call($,w[oe],oe,w)}function U(w,M){for(const $ in w)M.call(void 0,w[$],$,w)}function P(w){const M={};for(const $ in w)M[$]=w[$];return M}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(w,M){let $,oe;for(let ke=1;ke<arguments.length;ke++){oe=arguments[ke];for($ in oe)w[$]=oe[$];for(let Be=0;Be<V.length;Be++)$=V[Be],Object.prototype.hasOwnProperty.call(oe,$)&&(w[$]=oe[$])}}function O(w){var M=1;w=w.split(":");const $=[];for(;0<M&&w.length;)$.push(w.shift()),M--;return w.length&&$.push(w.join(":")),$}function F(w){l.setTimeout(()=>{throw w},0)}function B(){var w=Te;let M=null;return w.g&&(M=w.g,w.g=w.g.next,w.g||(w.h=null),M.next=null),M}class H{constructor(){this.h=this.g=null}add(M,$){const oe=fe.get();oe.set(M,$),this.h?this.h.next=oe:this.g=oe,this.h=oe}}var fe=new I(()=>new Q,w=>w.reset());class Q{constructor(){this.next=this.g=this.h=null}set(M,$){this.h=M,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ge=!1,Te=new H,re=()=>{const w=l.Promise.resolve(void 0);ce=()=>{w.then(xe)}};var xe=()=>{for(var w;w=B();){try{w.h.call(w.g)}catch($){F($)}var M=fe;M.j(w),100>M.h&&(M.h++,w.next=M.g,M.g=w)}ge=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(w,M){this.type=w,this.g=this.target=M,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var w=!1,M=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const $=()=>{};l.addEventListener("test",$,M),l.removeEventListener("test",$,M)}catch{}return w}();function me(w,M){if(ee.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var $=this.type=w.type,oe=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=M,M=w.relatedTarget){if(W){e:{try{X(M.nodeName);var ke=!0;break e}catch{}ke=!1}ke||(M=null)}}else $=="mouseover"?M=w.fromElement:$=="mouseout"&&(M=w.toElement);this.relatedTarget=M,oe?(this.clientX=oe.clientX!==void 0?oe.clientX:oe.pageX,this.clientY=oe.clientY!==void 0?oe.clientY:oe.pageY,this.screenX=oe.screenX||0,this.screenY=oe.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:ye[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&me.aa.h.call(this)}}C(me,ee);var ye={2:"touch",3:"pen",4:"mouse"};me.prototype.h=function(){me.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function Me(w,M,$,oe,ke){this.listener=w,this.proxy=null,this.src=M,this.type=$,this.capture=!!oe,this.ha=ke,this.key=++Ie,this.da=this.fa=!1}function nt(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function He(w){this.src=w,this.g={},this.h=0}He.prototype.add=function(w,M,$,oe,ke){var Be=w.toString();w=this.g[Be],w||(w=this.g[Be]=[],this.h++);var ot=Xe(w,M,oe,ke);return-1<ot?(M=w[ot],$||(M.fa=!1)):(M=new Me(M,this.src,Be,!!oe,ke),M.fa=$,w.push(M)),M};function Ye(w,M){var $=M.type;if($ in w.g){var oe=w.g[$],ke=Array.prototype.indexOf.call(oe,M,void 0),Be;(Be=0<=ke)&&Array.prototype.splice.call(oe,ke,1),Be&&(nt(M),w.g[$].length==0&&(delete w.g[$],w.h--))}}function Xe(w,M,$,oe){for(var ke=0;ke<w.length;++ke){var Be=w[ke];if(!Be.da&&Be.listener==M&&Be.capture==!!$&&Be.ha==oe)return ke}return-1}var pt="closure_lm_"+(1e6*Math.random()|0),Ve={};function ve(w,M,$,oe,ke){if(Array.isArray(M)){for(var Be=0;Be<M.length;Be++)ve(w,M[Be],$,oe,ke);return null}return $=nn($),w&&w[Ae]?w.K(M,$,d(oe)?!!oe.capture:!1,ke):ct(w,M,$,!1,oe,ke)}function ct(w,M,$,oe,ke,Be){if(!M)throw Error("Invalid event type");var ot=d(ke)?!!ke.capture:!!ke,Wt=It(w);if(Wt||(w[pt]=Wt=new He(w)),$=Wt.add(M,$,oe,ot,Be),$.proxy)return $;if(oe=mt(),$.proxy=oe,oe.src=w,oe.listener=$,w.addEventListener)he||(ke=ot),ke===void 0&&(ke=!1),w.addEventListener(M.toString(),oe,ke);else if(w.attachEvent)w.attachEvent(gt(M.toString()),oe);else if(w.addListener&&w.removeListener)w.addListener(oe);else throw Error("addEventListener and attachEvent are unavailable.");return $}function mt(){function w($){return M.call(w.src,w.listener,$)}const M=yt;return w}function it(w,M,$,oe,ke){if(Array.isArray(M))for(var Be=0;Be<M.length;Be++)it(w,M[Be],$,oe,ke);else oe=d(oe)?!!oe.capture:!!oe,$=nn($),w&&w[Ae]?(w=w.i,M=String(M).toString(),M in w.g&&(Be=w.g[M],$=Xe(Be,$,oe,ke),-1<$&&(nt(Be[$]),Array.prototype.splice.call(Be,$,1),Be.length==0&&(delete w.g[M],w.h--)))):w&&(w=It(w))&&(M=w.g[M.toString()],w=-1,M&&(w=Xe(M,$,oe,ke)),($=-1<w?M[w]:null)&&st($))}function st(w){if(typeof w!="number"&&w&&!w.da){var M=w.src;if(M&&M[Ae])Ye(M.i,w);else{var $=w.type,oe=w.proxy;M.removeEventListener?M.removeEventListener($,oe,w.capture):M.detachEvent?M.detachEvent(gt($),oe):M.addListener&&M.removeListener&&M.removeListener(oe),($=It(M))?(Ye($,w),$.h==0&&($.src=null,M[pt]=null)):nt(w)}}}function gt(w){return w in Ve?Ve[w]:Ve[w]="on"+w}function yt(w,M){if(w.da)w=!0;else{M=new me(M,this);var $=w.listener,oe=w.ha||w.src;w.fa&&st(w),w=$.call(oe,M)}return w}function It(w){return w=w[pt],w instanceof He?w:null}var Gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function nn(w){return typeof w=="function"?w:(w[Gt]||(w[Gt]=function(M){return w.handleEvent(M)}),w[Gt])}function Dt(){q.call(this),this.i=new He(this),this.M=this,this.F=null}C(Dt,q),Dt.prototype[Ae]=!0,Dt.prototype.removeEventListener=function(w,M,$,oe){it(this,w,M,$,oe)};function dt(w,M){var $,oe=w.F;if(oe)for($=[];oe;oe=oe.F)$.push(oe);if(w=w.M,oe=M.type||M,typeof M=="string")M=new ee(M,w);else if(M instanceof ee)M.target=M.target||w;else{var ke=M;M=new ee(oe,w),Y(M,ke)}if(ke=!0,$)for(var Be=$.length-1;0<=Be;Be--){var ot=M.g=$[Be];ke=pn(ot,oe,!0,M)&&ke}if(ot=M.g=w,ke=pn(ot,oe,!0,M)&&ke,ke=pn(ot,oe,!1,M)&&ke,$)for(Be=0;Be<$.length;Be++)ot=M.g=$[Be],ke=pn(ot,oe,!1,M)&&ke}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var w=this.i,M;for(M in w.g){for(var $=w.g[M],oe=0;oe<$.length;oe++)nt($[oe]);delete w.g[M],w.h--}}this.F=null},Dt.prototype.K=function(w,M,$,oe){return this.i.add(String(w),M,!1,$,oe)},Dt.prototype.L=function(w,M,$,oe){return this.i.add(String(w),M,!0,$,oe)};function pn(w,M,$,oe){if(M=w.i.g[String(M)],!M)return!0;M=M.concat();for(var ke=!0,Be=0;Be<M.length;++Be){var ot=M[Be];if(ot&&!ot.da&&ot.capture==$){var Wt=ot.listener,Ln=ot.ha||ot.src;ot.fa&&Ye(w.i,ot),ke=Wt.call(Ln,oe)!==!1&&ke}}return ke&&!oe.defaultPrevented}function Ct(w,M,$){if(typeof w=="function")$&&(w=y(w,$));else if(w&&typeof w.handleEvent=="function")w=y(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:l.setTimeout(w,M||0)}function gn(w){w.g=Ct(()=>{w.g=null,w.i&&(w.i=!1,gn(w))},w.l);const M=w.h;w.h=null,w.m.apply(null,M)}class xt extends q{constructor(M,$){super(),this.m=M,this.l=$,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:gn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(w){q.call(this),this.h=w,this.g={}}C(Fi,q);var ln=[];function Sr(w){ue(w.g,function(M,$){this.g.hasOwnProperty($)&&st(M)},w),w.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),Sr(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var un=l.JSON.stringify,Wn=l.JSON.parse,zr=class{stringify(w){return l.JSON.stringify(w,void 0)}parse(w){return l.JSON.parse(w,void 0)}};function In(){}In.prototype.h=null;function ta(w){return w.h||(w.h=w.i())}function di(){}var qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hr(){ee.call(this,"d")}C(hr,ee);function hi(){ee.call(this,"c")}C(hi,ee);var ut={},on=null;function Yt(){return on=on||new Dt}ut.La="serverreachability";function Fn(w){ee.call(this,ut.La,w)}C(Fn,ee);function Vt(w){const M=Yt();dt(M,new Fn(M))}ut.STAT_EVENT="statevent";function Li(w,M){ee.call(this,ut.STAT_EVENT,w),this.stat=M}C(Li,ee);function wt(w){const M=Yt();dt(M,new Li(M,w))}ut.Ma="timingevent";function li(w,M){ee.call(this,ut.Ma,w),this.size=M}C(li,ee);function ui(w,M){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){w()},M)}function Pi(){this.g=!0}Pi.prototype.xa=function(){this.g=!1};function $i(w,M,$,oe,ke,Be){w.info(function(){if(w.g)if(Be)for(var ot="",Wt=Be.split("&"),Ln=0;Ln<Wt.length;Ln++){var cn=Wt[Ln].split("=");if(1<cn.length){var ti=cn[0];cn=cn[1];var fi=ti.split("_");ot=2<=fi.length&&fi[1]=="type"?ot+(ti+"="+cn+"&"):ot+(ti+"=redacted&")}}else ot=null;else ot=Be;return"XMLHTTP REQ ("+oe+") [attempt "+ke+"]: "+M+`
`+$+`
`+ot})}function Qi(w,M,$,oe,ke,Be,ot){w.info(function(){return"XMLHTTP RESP ("+oe+") [ attempt "+ke+"]: "+M+`
`+$+`
`+Be+" "+ot})}function fr(w,M,$,oe){w.info(function(){return"XMLHTTP TEXT ("+M+"): "+Ls(w,$)+(oe?" "+oe:"")})}function Kl(w,M){w.info(function(){return"TIMEOUT: "+M})}Pi.prototype.info=function(){};function Ls(w,M){if(!w.g)return M;if(!M)return null;try{var $=JSON.parse(M);if($){for(w=0;w<$.length;w++)if(Array.isArray($[w])){var oe=$[w];if(!(2>oe.length)){var ke=oe[1];if(Array.isArray(ke)&&!(1>ke.length)){var Be=ke[0];if(Be!="noop"&&Be!="stop"&&Be!="close")for(var ot=1;ot<ke.length;ot++)ke[ot]=""}}}}return un($)}catch{return M}}var jr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pr;function Er(){}C(Er,In),Er.prototype.g=function(){return new XMLHttpRequest},Er.prototype.i=function(){return{}},pr=new Er;function Ai(w,M,$,oe){this.j=w,this.i=M,this.l=$,this.R=oe||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var So={},To={};function ms(w,M,$){w.L=1,w.v=gl(ss(M)),w.m=$,w.P=!0,na(w,null)}function na(w,M){w.F=Date.now(),Ql(w),w.A=ss(w.v);var $=w.A,oe=w.R;Array.isArray(oe)||(oe=[String(oe)]),Kt($.i,"t",oe),w.C=0,$=w.j.J,w.h=new Zn,w.g=Z(w.j,$?M:null,!w.m),0<w.O&&(w.M=new xt(y(w.Y,w,w.g),w.O)),M=w.U,$=w.g,oe=w.ca;var ke="readystatechange";Array.isArray(ke)||(ke&&(ln[0]=ke.toString()),ke=ln);for(var Be=0;Be<ke.length;Be++){var ot=ve($,ke[Be],oe||M.handleEvent,!1,M.h||M);if(!ot)break;M.g[ot.key]=ot}M=w.H?P(w.H):{},w.m?(w.u||(w.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,M)):(w.u="GET",w.g.ea(w.A,w.u,null,M)),Vt(),$i(w.i,w.u,w.A,w.l,w.R,w.m)}Ai.prototype.ca=function(w){w=w.target;const M=this.M;M&&gr(w)==3?M.j():this.Y(w)},Ai.prototype.Y=function(w){try{if(w==this.g)e:{const fi=gr(this.g);var M=this.g.Ba();const io=this.g.Z();if(!(3>fi)&&(fi!=3||this.g&&(this.h.h||this.g.oa()||qh(this.g)))){this.J||fi!=4||M==7||(M==8||0>=io?Vt(3):Vt(2)),Ia(this);var $=this.g.Z();this.X=$;t:if(Wl(this)){var oe=qh(this.g);w="";var ke=oe.length,Be=gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cr(this),Ra(this);var ot="";break t}this.h.i=new l.TextDecoder}for(M=0;M<ke;M++)this.h.h=!0,w+=this.h.i.decode(oe[M],{stream:!(Be&&M==ke-1)});oe.length=0,this.h.g+=w,this.C=0,ot=this.h.g}else ot=this.g.oa();if(this.o=$==200,Qi(this.i,this.u,this.A,this.l,this.R,fi,$),this.o){if(this.T&&!this.K){t:{if(this.g){var Wt,Ln=this.g;if((Wt=Ln.g?Ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Wt)){var cn=Wt;break t}}cn=null}if($=cn)fr(this.i,this.l,$,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eo(this,$);else{this.o=!1,this.s=3,wt(12),Cr(this),Ra(this);break e}}if(this.P){$=!0;let rr;for(;!this.J&&this.C<ot.length;)if(rr=ld(this,ot),rr==To){fi==4&&(this.s=4,wt(14),$=!1),fr(this.i,this.l,null,"[Incomplete Response]");break}else if(rr==So){this.s=4,wt(15),fr(this.i,this.l,ot,"[Invalid Chunk]"),$=!1;break}else fr(this.i,this.l,rr,null),Eo(this,rr);if(Wl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fi!=4||ot.length!=0||this.h.h||(this.s=1,wt(16),$=!1),this.o=this.o&&$,!$)fr(this.i,this.l,ot,"[Invalid Chunked Response]"),Cr(this),Ra(this);else if(0<ot.length&&!this.W){this.W=!0;var ti=this.j;ti.g==this&&ti.ba&&!ti.M&&(ti.j.info("Great, no buffering proxy detected. Bytes received: "+ot.length),wl(ti),ti.M=!0,wt(11))}}else fr(this.i,this.l,ot,null),Eo(this,ot);fi==4&&Cr(this),this.o&&!this.J&&(fi==4?Al(this.j,this):(this.o=!1,Ql(this)))}else bl(this.g),$==400&&0<ot.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Cr(this),Ra(this)}}}catch{}finally{}};function Wl(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function ld(w,M){var $=w.C,oe=M.indexOf(`
`,$);return oe==-1?To:($=Number(M.substring($,oe)),isNaN($)?So:(oe+=1,oe+$>M.length?To:(M=M.slice(oe,oe+$),w.C=oe+$,M)))}Ai.prototype.cancel=function(){this.J=!0,Cr(this)};function Ql(w){w.S=Date.now()+w.I,Vh(w,w.I)}function Vh(w,M){if(w.B!=null)throw Error("WatchDog timer not null");w.B=ui(y(w.ba,w),M)}function Ia(w){w.B&&(l.clearTimeout(w.B),w.B=null)}Ai.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(Kl(this.i,this.A),this.L!=2&&(Vt(),wt(17)),Cr(this),this.s=2,Ra(this)):Vh(this,this.S-w)};function Ra(w){w.j.G==0||w.J||Al(w.j,w)}function Cr(w){Ia(w);var M=w.M;M&&typeof M.ma=="function"&&M.ma(),w.M=null,Sr(w.U),w.g&&(M=w.g,w.g=null,M.abort(),M.ma())}function Eo(w,M){try{var $=w.j;if($.G!=0&&($.g==w||ud($.h,w))){if(!w.K&&ud($.h,w)&&$.G==3){try{var oe=$.Da.g.parse(M)}catch{oe=null}if(Array.isArray(oe)&&oe.length==3){var ke=oe;if(ke[0]==0){e:if(!$.u){if($.g)if($.g.F+3e3<w.F)Mo($),Ju($);else break e;nu($),wt(18)}}else $.za=ke[1],0<$.za-$.T&&37500>ke[2]&&$.F&&$.v==0&&!$.C&&($.C=ui(y($.Za,$),6e3));if(1>=Co($.h)&&$.ca){try{$.ca()}catch{}$.ca=void 0}}else bs($,11)}else if((w.K||$.g==w)&&Mo($),!D(M))for(ke=$.Da.g.parse(M),M=0;M<ke.length;M++){let cn=ke[M];if($.T=cn[0],cn=cn[1],$.G==2)if(cn[0]=="c"){$.K=cn[1],$.ia=cn[2];const ti=cn[3];ti!=null&&($.la=ti,$.j.info("VER="+$.la));const fi=cn[4];fi!=null&&($.Aa=fi,$.j.info("SVER="+$.Aa));const io=cn[5];io!=null&&typeof io=="number"&&0<io&&(oe=1.5*io,$.L=oe,$.j.info("backChannelRequestTimeoutMs_="+oe)),oe=$;const rr=w.g;if(rr){const oa=rr.g?rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oa){var Be=oe.h;Be.g||oa.indexOf("spdy")==-1&&oa.indexOf("quic")==-1&&oa.indexOf("h2")==-1||(Be.j=Be.l,Be.g=new Set,Be.h&&(Si(Be,Be.h),Be.h=null))}if(oe.D){const Sl=rr.g?rr.g.getResponseHeader("X-HTTP-Session-Id"):null;Sl&&(oe.ya=Sl,ei(oe.I,oe.D,Sl))}}$.G=3,$.l&&$.l.ua(),$.ba&&($.R=Date.now()-w.F,$.j.info("Handshake RTT: "+$.R+"ms")),oe=$;var ot=w;if(oe.qa=k(oe,oe.J?oe.ia:null,oe.W),ot.K){qr(oe.h,ot);var Wt=ot,Ln=oe.L;Ln&&(Wt.I=Ln),Wt.B&&(Ia(Wt),Ql(Wt)),oe.g=ot}else ec(oe);0<$.i.length&&Zu($)}else cn[0]!="stop"&&cn[0]!="close"||bs($,7);else $.G==3&&(cn[0]=="stop"||cn[0]=="close"?cn[0]=="stop"?bs($,7):Po($):cn[0]!="noop"&&$.l&&$.l.ta(cn),$.v=0)}}Vt(4)}catch{}}var Bh=class{constructor(w,M){this.g=w,this.map=M}};function Wa(w){this.l=w||10,l.PerformanceNavigationTiming?(w=l.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ku(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function Co(w){return w.h?1:w.g?w.g.size:0}function ud(w,M){return w.h?w.h==M:w.g?w.g.has(M):!1}function Si(w,M){w.g?w.g.add(M):w.h=M}function qr(w,M){w.h&&w.h==M?w.h=null:w.g&&w.g.has(M)&&w.g.delete(M)}Wa.prototype.cancel=function(){if(this.i=Wu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function Wu(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let M=w.i;for(const $ of w.g.values())M=M.concat($.D);return M}return E(w.i)}function Uh(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(u(w)){for(var M=[],$=w.length,oe=0;oe<$;oe++)M.push(w[oe]);return M}M=[],$=0;for(oe in w)M[$++]=w[oe];return M}function fl(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(u(w)||typeof w=="string"){var M=[];w=w.length;for(var $=0;$<w;$++)M.push($);return M}M=[],$=0;for(const oe in w)M[$++]=oe;return M}}}function cd(w,M){if(w.forEach&&typeof w.forEach=="function")w.forEach(M,void 0);else if(u(w)||typeof w=="string")Array.prototype.forEach.call(w,M,void 0);else for(var $=fl(w),oe=Uh(w),ke=oe.length,Be=0;Be<ke;Be++)M.call(void 0,oe[Be],$&&$[Be],w)}var rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qu(w,M){if(w){w=w.split("&");for(var $=0;$<w.length;$++){var oe=w[$].indexOf("="),ke=null;if(0<=oe){var Be=w[$].substring(0,oe);ke=w[$].substring(oe+1)}else Be=w[$];M(Be,ke?decodeURIComponent(ke.replace(/\+/g," ")):"")}}}function Un(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof Un){this.h=w.h,pl(this,w.j),this.o=w.o,this.g=w.g,ml(this,w.s),this.l=w.l;var M=w.i,$=new Xa;$.i=M.i,M.g&&($.g=new Map(M.g),$.h=M.h),Qa(this,$),this.m=w.m}else w&&(M=String(w).match(rs))?(this.h=!1,pl(this,M[1]||"",!0),this.o=ia(M[2]||""),this.g=ia(M[3]||"",!0),ml(this,M[4]),this.l=ia(M[5]||"",!0),Qa(this,M[6]||"",!0),this.m=ia(M[7]||"")):(this.h=!1,this.i=new Xa(null,this.h))}Un.prototype.toString=function(){var w=[],M=this.j;M&&w.push(No(M,dd,!0),":");var $=this.g;return($||M=="file")&&(w.push("//"),(M=this.o)&&w.push(No(M,dd,!0),"@"),w.push(encodeURIComponent(String($)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.s,$!=null&&w.push(":",String($))),($=this.l)&&(this.g&&$.charAt(0)!="/"&&w.push("/"),w.push(No($,$.charAt(0)=="/"?ko:hd,!0))),($=this.i.toString())&&w.push("?",$),($=this.m)&&w.push("#",No($,Io)),w.join("")};function ss(w){return new Un(w)}function pl(w,M,$){w.j=$?ia(M,!0):M,w.j&&(w.j=w.j.replace(/:$/,""))}function ml(w,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);w.s=M}else w.s=null}function Qa(w,M,$){M instanceof Xa?(w.i=M,jh(w.i,w.h)):($||(M=No(M,Xu)),w.i=new Xa(M,w.h))}function ei(w,M,$){w.i.set(M,$)}function gl(w){return ei(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function ia(w,M){return w?M?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function No(w,M,$){return typeof w=="string"?(w=encodeURI(w).replace(M,zh),$&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function zh(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var dd=/[#\/\?@]/g,hd=/[#\?:]/g,ko=/[#\?]/g,Xu=/[#\?@]/g,Io=/#/g;function Xa(w,M){this.h=this.g=null,this.i=w||null,this.j=!!M}function gi(w){w.g||(w.g=new Map,w.h=0,w.i&&Qu(w.i,function(M,$){w.add(decodeURIComponent(M.replace(/\+/g," ")),$)}))}i=Xa.prototype,i.add=function(w,M){gi(this),this.i=null,w=Za(this,w);var $=this.g.get(w);return $||this.g.set(w,$=[]),$.push(M),this.h+=1,this};function Ro(w,M){gi(w),M=Za(w,M),w.g.has(M)&&(w.i=null,w.h-=w.g.get(M).length,w.g.delete(M))}function Ja(w,M){return gi(w),M=Za(w,M),w.g.has(M)}i.forEach=function(w,M){gi(this),this.g.forEach(function($,oe){$.forEach(function(ke){w.call(M,ke,oe,this)},this)},this)},i.na=function(){gi(this);const w=Array.from(this.g.values()),M=Array.from(this.g.keys()),$=[];for(let oe=0;oe<M.length;oe++){const ke=w[oe];for(let Be=0;Be<ke.length;Be++)$.push(M[oe])}return $},i.V=function(w){gi(this);let M=[];if(typeof w=="string")Ja(this,w)&&(M=M.concat(this.g.get(Za(this,w))));else{w=Array.from(this.g.values());for(let $=0;$<w.length;$++)M=M.concat(w[$])}return M},i.set=function(w,M){return gi(this),this.i=null,w=Za(this,w),Ja(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[M]),this.h+=1,this},i.get=function(w,M){return w?(w=this.V(w),0<w.length?String(w[0]):M):M};function Kt(w,M,$){Ro(w,M),0<$.length&&(w.i=null,w.g.set(Za(w,M),E($)),w.h+=$.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],M=Array.from(this.g.keys());for(var $=0;$<M.length;$++){var oe=M[$];const Be=encodeURIComponent(String(oe)),ot=this.V(oe);for(oe=0;oe<ot.length;oe++){var ke=Be;ot[oe]!==""&&(ke+="="+encodeURIComponent(String(ot[oe]))),w.push(ke)}}return this.i=w.join("&")};function Za(w,M){return M=String(M),w.j&&(M=M.toLowerCase()),M}function jh(w,M){M&&!w.j&&(gi(w),w.i=null,w.g.forEach(function($,oe){var ke=oe.toLowerCase();oe!=ke&&(Ro(this,oe),Kt(this,ke,$))},w)),w.j=M}function gs(w,M){const $=new Pi;if(l.Image){const oe=new Image;oe.onload=v(Ps,$,"TestLoadImage: loaded",!0,M,oe),oe.onerror=v(Ps,$,"TestLoadImage: error",!1,M,oe),oe.onabort=v(Ps,$,"TestLoadImage: abort",!1,M,oe),oe.ontimeout=v(Ps,$,"TestLoadImage: timeout",!1,M,oe),l.setTimeout(function(){oe.ontimeout&&oe.ontimeout()},1e4),oe.src=w}else M(!1)}function ra(w,M){const $=new Pi,oe=new AbortController,ke=setTimeout(()=>{oe.abort(),Ps($,"TestPingServer: timeout",!1,M)},1e4);fetch(w,{signal:oe.signal}).then(Be=>{clearTimeout(ke),Be.ok?Ps($,"TestPingServer: ok",!0,M):Ps($,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(ke),Ps($,"TestPingServer: error",!1,M)})}function Ps(w,M,$,oe,ke){try{ke&&(ke.onload=null,ke.onerror=null,ke.onabort=null,ke.ontimeout=null),oe($)}catch{}}function eo(){this.g=new zr}function sa(w,M,$){const oe=$||"";try{cd(w,function(ke,Be){let ot=ke;d(ke)&&(ot=un(ke)),M.push(oe+Be+"="+encodeURIComponent(ot))})}catch(ke){throw M.push(oe+"type="+encodeURIComponent("_badmap")),ke}}function yl(w){this.l=w.Ub||null,this.j=w.eb||!1}C(yl,In),yl.prototype.g=function(){return new Lo(this.l,this.j)},yl.prototype.i=function(w){return function(){return w}}({});function Lo(w,M){Dt.call(this),this.D=w,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Lo,Dt),i=Lo.prototype,i.open=function(w,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=M,this.readyState=1,ys(this)},i.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(M.body=w),(this.D||l).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,aa(this)),this.readyState=0},i.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,ys(this)),this.g&&(this.readyState=3,ys(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fd(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function fd(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}i.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var M=w.value?w.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!w.done}))&&(this.response=this.responseText+=M)}w.done?aa(this):ys(this),this.readyState==3&&fd(this)}},i.Ra=function(w){this.g&&(this.response=this.responseText=w,aa(this))},i.Qa=function(w){this.g&&(this.response=w,aa(this))},i.ga=function(){this.g&&aa(this)};function aa(w){w.readyState=4,w.l=null,w.j=null,w.v=null,ys(w)}i.setRequestHeader=function(w,M){this.u.append(w,M)},i.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],M=this.h.entries();for(var $=M.next();!$.done;)$=$.value,w.push($[0]+": "+$[1]),$=M.next();return w.join(`\r
`)};function ys(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function to(w){let M="";return ue(w,function($,oe){M+=oe,M+=":",M+=$,M+=`\r
`}),M}function mr(w,M,$){e:{for(oe in $){var oe=!1;break e}oe=!0}oe||($=to($),typeof w=="string"?$!=null&&encodeURIComponent(String($)):ei(w,M,$))}function Rn(w){Dt.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Rn,Dt);var vl=/^https?$/i,no=["POST","PUT"];i=Rn.prototype,i.Ha=function(w){this.J=w},i.ea=function(w,M,$,oe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);M=M?M.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pr.g(),this.v=this.o?ta(this.o):ta(pr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(M,String(w),!0),this.B=!1}catch(Be){pd(this,Be);return}if(w=$||"",$=new Map(this.headers),oe)if(Object.getPrototypeOf(oe)===Object.prototype)for(var ke in oe)$.set(ke,oe[ke]);else if(typeof oe.keys=="function"&&typeof oe.get=="function")for(const Be of oe.keys())$.set(Be,oe.get(Be));else throw Error("Unknown input type for opt_headers: "+String(oe));oe=Array.from($.keys()).find(Be=>Be.toLowerCase()=="content-type"),ke=l.FormData&&w instanceof l.FormData,!(0<=Array.prototype.indexOf.call(no,M,void 0))||oe||ke||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Be,ot]of $)this.g.setRequestHeader(Be,ot);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vs(this),this.u=!0,this.g.send(w),this.u=!1}catch(Be){pd(this,Be)}};function pd(w,M){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=M,w.m=5,Xl(w),La(w)}function Xl(w){w.A||(w.A=!0,dt(w,"complete"),dt(w,"error"))}i.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,dt(this,"complete"),dt(this,"abort"),La(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),La(this,!0)),Rn.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Jl(this):this.bb())},i.bb=function(){Jl(this)};function Jl(w){if(w.h&&typeof a<"u"&&(!w.v[1]||gr(w)!=4||w.Z()!=2)){if(w.u&&gr(w)==4)Ct(w.Ea,0,w);else if(dt(w,"readystatechange"),gr(w)==4){w.h=!1;try{const ot=w.Z();e:switch(ot){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var $;if(!($=M)){var oe;if(oe=ot===0){var ke=String(w.D).match(rs)[1]||null;!ke&&l.self&&l.self.location&&(ke=l.self.location.protocol.slice(0,-1)),oe=!vl.test(ke?ke.toLowerCase():"")}$=oe}if($)dt(w,"complete"),dt(w,"success");else{w.m=6;try{var Be=2<gr(w)?w.g.statusText:""}catch{Be=""}w.l=Be+" ["+w.Z()+"]",Xl(w)}}finally{La(w)}}}}function La(w,M){if(w.g){vs(w);const $=w.g,oe=w.v[0]?()=>{}:null;w.g=null,w.v=null,M||dt(w,"ready");try{$.onreadystatechange=oe}catch{}}}function vs(w){w.I&&(l.clearTimeout(w.I),w.I=null)}i.isActive=function(){return!!this.g};function gr(w){return w.g?w.g.readyState:0}i.Z=function(){try{return 2<gr(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(w){if(this.g){var M=this.g.responseText;return w&&M.indexOf(w)==0&&(M=M.substring(w.length)),Wn(M)}};function qh(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function bl(w){const M={};w=(w.g&&2<=gr(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let oe=0;oe<w.length;oe++){if(D(w[oe]))continue;var $=O(w[oe]);const ke=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const Be=M[ke]||[];M[ke]=Be,Be.push($)}U(M,function(oe){return oe.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function as(w,M,$){return $&&$.internalChannelParams&&$.internalChannelParams[w]||M}function _l(w){this.Aa=0,this.i=[],this.j=new Pi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=as("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=as("baseRetryDelayMs",5e3,w),this.cb=as("retryDelaySeedMs",1e4,w),this.Wa=as("forwardChannelMaxRetries",2,w),this.wa=as("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new Wa(w&&w.concurrentRequestLimit),this.Da=new eo,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=_l.prototype,i.la=8,i.G=1,i.connect=function(w,M,$,oe){wt(0),this.W=w,this.H=M||{},$&&oe!==void 0&&(this.H.OSID=$,this.H.OAID=oe),this.F=this.X,this.I=k(this,null,this.W),Zu(this)};function Po(w){if(Zl(w),w.G==3){var M=w.U++,$=ss(w.I);if(ei($,"SID",w.K),ei($,"RID",M),ei($,"TYPE","terminate"),xl(w,$),M=new Ai(w,w.j,M),M.L=2,M.v=gl(ss($)),$=!1,l.navigator&&l.navigator.sendBeacon)try{$=l.navigator.sendBeacon(M.v.toString(),"")}catch{}!$&&l.Image&&(new Image().src=M.v,$=!0),$||(M.g=Z(M.j,null),M.g.ea(M.v)),M.F=Date.now(),Ql(M)}tc(w)}function Ju(w){w.g&&(wl(w),w.g.cancel(),w.g=null)}function Zl(w){Ju(w),w.u&&(l.clearTimeout(w.u),w.u=null),Mo(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&l.clearTimeout(w.s),w.s=null)}function Zu(w){if(!Ku(w.h)&&!w.s){w.s=!0;var M=w.Ga;ce||re(),ge||(ce(),ge=!0),Te.add(M,w),w.B=0}}function md(w,M){return Co(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=M.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=ui(y(w.Ga,w,M),iu(w,w.B)),w.B++,!0)}i.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const ke=new Ai(this,this.j,w);let Be=this.o;if(this.S&&(Be?(Be=P(Be),Y(Be,this.S)):Be=this.S),this.m!==null||this.O||(ke.H=Be,Be=null),this.P)e:{for(var M=0,$=0;$<this.i.length;$++){t:{var oe=this.i[$];if("__data__"in oe.map&&(oe=oe.map.__data__,typeof oe=="string")){oe=oe.length;break t}oe=void 0}if(oe===void 0)break;if(M+=oe,4096<M){M=$;break e}if(M===4096||$===this.i.length-1){M=$+1;break e}}M=1e3}else M=1e3;M=tu(this,ke,M),$=ss(this.I),ei($,"RID",w),ei($,"CVER",22),this.D&&ei($,"X-HTTP-Session-Id",this.D),xl(this,$),Be&&(this.O?M="headers="+encodeURIComponent(String(to(Be)))+"&"+M:this.m&&mr($,this.m,Be)),Si(this.h,ke),this.Ua&&ei($,"TYPE","init"),this.P?(ei($,"$req",M),ei($,"SID","null"),ke.T=!0,ms(ke,$,null)):ms(ke,$,M),this.G=2}}else this.G==3&&(w?eu(this,w):this.i.length==0||Ku(this.h)||eu(this))};function eu(w,M){var $;M?$=M.l:$=w.U++;const oe=ss(w.I);ei(oe,"SID",w.K),ei(oe,"RID",$),ei(oe,"AID",w.T),xl(w,oe),w.m&&w.o&&mr(oe,w.m,w.o),$=new Ai(w,w.j,$,w.B+1),w.m===null&&($.H=w.o),M&&(w.i=M.D.concat(w.i)),M=tu(w,$,1e3),$.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),Si(w.h,$),ms($,oe,M)}function xl(w,M){w.H&&ue(w.H,function($,oe){ei(M,oe,$)}),w.l&&cd({},function($,oe){ei(M,oe,$)})}function tu(w,M,$){$=Math.min(w.i.length,$);var oe=w.l?y(w.l.Na,w.l,w):null;e:{var ke=w.i;let Be=-1;for(;;){const ot=["count="+$];Be==-1?0<$?(Be=ke[0].g,ot.push("ofs="+Be)):Be=0:ot.push("ofs="+Be);let Wt=!0;for(let Ln=0;Ln<$;Ln++){let cn=ke[Ln].g;const ti=ke[Ln].map;if(cn-=Be,0>cn)Be=Math.max(0,ke[Ln].g-100),Wt=!1;else try{sa(ti,ot,"req"+cn+"_")}catch{oe&&oe(ti)}}if(Wt){oe=ot.join("&");break e}}}return w=w.i.splice(0,$),M.D=w,oe}function ec(w){if(!w.g&&!w.u){w.Y=1;var M=w.Fa;ce||re(),ge||(ce(),ge=!0),Te.add(M,w),w.v=0}}function nu(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=ui(y(w.Fa,w),iu(w,w.v)),w.v++,!0)}i.Fa=function(){if(this.u=null,$h(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=ui(y(this.ab,this),w)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Ju(this),$h(this))};function wl(w){w.A!=null&&(l.clearTimeout(w.A),w.A=null)}function $h(w){w.g=new Ai(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var M=ss(w.qa);ei(M,"RID","rpc"),ei(M,"SID",w.K),ei(M,"AID",w.T),ei(M,"CI",w.F?"0":"1"),!w.F&&w.ja&&ei(M,"TO",w.ja),ei(M,"TYPE","xmlhttp"),xl(w,M),w.m&&w.o&&mr(M,w.m,w.o),w.L&&(w.g.I=w.L);var $=w.g;w=w.ia,$.L=1,$.v=gl(ss(M)),$.m=null,$.P=!0,na($,w)}i.Za=function(){this.C!=null&&(this.C=null,Ju(this),nu(this),wt(19))};function Mo(w){w.C!=null&&(l.clearTimeout(w.C),w.C=null)}function Al(w,M){var $=null;if(w.g==M){Mo(w),wl(w),w.g=null;var oe=2}else if(ud(w.h,M))$=M.D,qr(w.h,M),oe=1;else return;if(w.G!=0){if(M.o)if(oe==1){$=M.m?M.m.length:0,M=Date.now()-M.F;var ke=w.B;oe=Yt(),dt(oe,new li(oe,$)),Zu(w)}else ec(w);else if(ke=M.s,ke==3||ke==0&&0<M.X||!(oe==1&&md(w,M)||oe==2&&nu(w)))switch($&&0<$.length&&(M=w.h,M.i=M.i.concat($)),ke){case 1:bs(w,5);break;case 4:bs(w,10);break;case 3:bs(w,6);break;default:bs(w,2)}}}function iu(w,M){let $=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||($*=2),$*M}function bs(w,M){if(w.j.info("Error code "+M),M==2){var $=y(w.fb,w),oe=w.Xa;const ke=!oe;oe=new Un(oe||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||pl(oe,"https"),gl(oe),ke?gs(oe.toString(),$):ra(oe.toString(),$)}else wt(2);w.G=0,w.l&&w.l.sa(M),tc(w),Zl(w)}i.fb=function(w){w?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function tc(w){if(w.G=0,w.ka=[],w.l){const M=Wu(w.h);(M.length!=0||w.i.length!=0)&&(R(w.ka,M),R(w.ka,w.i),w.h.i.length=0,E(w.i),w.i.length=0),w.l.ra()}}function k(w,M,$){var oe=$ instanceof Un?ss($):new Un($);if(oe.g!="")M&&(oe.g=M+"."+oe.g),ml(oe,oe.s);else{var ke=l.location;oe=ke.protocol,M=M?M+"."+ke.hostname:ke.hostname,ke=+ke.port;var Be=new Un(null);oe&&pl(Be,oe),M&&(Be.g=M),ke&&ml(Be,ke),$&&(Be.l=$),oe=Be}return $=w.D,M=w.ya,$&&M&&ei(oe,$,M),ei(oe,"VER",w.la),xl(w,oe),oe}function Z(w,M,$){if(M&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=w.Ca&&!w.pa?new Rn(new yl({eb:$})):new Rn(w.pa),M.Ha(w.J),M}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function be(){}i=be.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function we(){}we.prototype.g=function(w,M){return new Re(w,M)};function Re(w,M){Dt.call(this),this.g=new _l(M),this.l=w,this.h=M&&M.messageUrlParams||null,w=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(w?w["X-WebChannel-Content-Type"]=M.messageContentType:w={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(w?w["X-WebChannel-Client-Profile"]=M.va:w={"X-WebChannel-Client-Profile":M.va}),this.g.S=w,(w=M&&M.Sb)&&!D(w)&&(this.g.m=w),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!D(M)&&(this.g.D=M,w=this.h,w!==null&&M in w&&(w=this.h,M in w&&delete w[M])),this.j=new bt(this)}C(Re,Dt),Re.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Re.prototype.close=function(){Po(this.g)},Re.prototype.o=function(w){var M=this.g;if(typeof w=="string"){var $={};$.__data__=w,w=$}else this.u&&($={},$.__data__=un(w),w=$);M.i.push(new Bh(M.Ya++,w)),M.G==3&&Zu(M)},Re.prototype.N=function(){this.g.l=null,delete this.j,Po(this.g),delete this.g,Re.aa.N.call(this)};function Ge(w){hr.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var M=w.__sm__;if(M){e:{for(const $ in M){w=$;break e}w=void 0}(this.i=w)&&(w=this.i,M=M!==null&&w in M?M[w]:void 0),this.data=M}else this.data=w}C(Ge,hr);function at(){hi.call(this),this.status=1}C(at,hi);function bt(w){this.g=w}C(bt,be),bt.prototype.ua=function(){dt(this.g,"a")},bt.prototype.ta=function(w){dt(this.g,new Ge(w))},bt.prototype.sa=function(w){dt(this.g,new at)},bt.prototype.ra=function(){dt(this.g,"b")},we.prototype.createWebChannel=we.prototype.g,Re.prototype.send=Re.prototype.o,Re.prototype.open=Re.prototype.m,Re.prototype.close=Re.prototype.close,iF=function(){return new we},nF=function(){return Yt()},tF=ut,vC={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jr.NO_ERROR=0,jr.TIMEOUT=8,jr.HTTP_ERROR=6,Mw=jr,Tr.COMPLETE="complete",eF=Tr,di.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,tb=di,Rn.prototype.listenOnce=Rn.prototype.L,Rn.prototype.getLastError=Rn.prototype.Ka,Rn.prototype.getLastErrorCode=Rn.prototype.Ba,Rn.prototype.getStatus=Rn.prototype.Z,Rn.prototype.getResponseJson=Rn.prototype.Oa,Rn.prototype.getResponseText=Rn.prototype.oa,Rn.prototype.send=Rn.prototype.ea,Rn.prototype.setWithCredentials=Rn.prototype.Ha,ZO=Rn}).apply(typeof jx<"u"?jx:typeof self<"u"?self:typeof window<"u"?window:{});const w4="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ta.UNAUTHENTICATED=new Ta(null),Ta.GOOGLE_CREDENTIALS=new Ta("google-credentials-uid"),Ta.FIRST_PARTY=new Ta("first-party-uid"),Ta.MOCK_USER=new Ta("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nv="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=new vN("@firebase/firestore");function k1(){return Rg.logLevel}function Ot(i,...e){if(Rg.logLevel<=qn.DEBUG){const t=e.map(IN);Rg.debug(`Firestore (${Nv}): ${i}`,...t)}}function Rh(i,...e){if(Rg.logLevel<=qn.ERROR){const t=e.map(IN);Rg.error(`Firestore (${Nv}): ${i}`,...t)}}function fv(i,...e){if(Rg.logLevel<=qn.WARN){const t=e.map(IN);Rg.warn(`Firestore (${Nv}): ${i}`,...t)}}function IN(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(i="Unexpected state"){const e=`FIRESTORE (${Nv}) INTERNAL ASSERTION FAILED: `+i;throw Rh(e),new Error(e)}function wi(i,e){i||hn()}function xn(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Dh{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ta.UNAUTHENTICATED))}shutdown(){}}class hY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fY{constructor(e){this.t=e,this.currentUser=Ta.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wi(this.o===void 0);let n=this.i;const r=u=>this.i!==n?(n=this.i,t(u)):Promise.resolve();let s=new Th;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Th,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{Ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Th)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(wi(typeof n.accessToken=="string"),new rF(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wi(e===null||typeof e=="string"),new Ta(e)}}class pY{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ta.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mY{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new pY(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ta.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gY{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yY{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){wi(this.o===void 0);const n=s=>{s.error!=null&&Ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Ot("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const r=s=>{Ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):Ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wi(typeof t.token=="string"),this.R=t.token,new gY(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vY(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=vY(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%e.length))}return n}}function ai(i,e){return i<e?-1:i>e?1:0}function pv(i,e,t){return i.length===e.length&&i.every((n,r)=>t(n,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Et(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Et(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Et(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Et(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ar(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ai(this.nanoseconds,e.nanoseconds):ai(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bn(e)}static min(){return new bn(new Ar(0,0))}static max(){return new bn(new Ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,t,n){t===void 0?t=0:t>e.length&&hn(),n===void 0?n=e.length-t:n>e.length-t&&hn(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Sb.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sb?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.get(r),a=t.get(r);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ki extends Sb{construct(e,t,n){return new Ki(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Et(tt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(r=>r.length>0))}return new Ki(t)}static emptyPath(){return new Ki([])}}const bY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ws extends Sb{construct(e,t,n){return new Ws(e,t,n)}static isValidIdentifier(e){return bY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ws.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ws(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(n.length===0)throw new Et(tt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new Et(tt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Et(tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(n+=l,r++):(s(),r++)}if(s(),a)throw new Et(tt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ws(t)}static emptyPath(){return new Ws([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.path=e}static fromPath(e){return new Ht(Ki.fromString(e))}static fromName(e){return new Ht(Ki.fromString(e).popFirst(5))}static empty(){return new Ht(Ki.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ki.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ki.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ht(new Ki(e.slice()))}}function _Y(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=bn.fromTimestamp(n===1e9?new Ar(t+1,0):new Ar(t,n));return new Cp(r,Ht.empty(),e)}function xY(i){return new Cp(i.readTime,i.key,-1)}class Cp{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Cp(bn.min(),Ht.empty(),-1)}static max(){return new Cp(bn.max(),Ht.empty(),-1)}}function wY(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Ht.comparator(i.documentKey,e.documentKey),t!==0?t:ai(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(i){if(i.code!==tt.FAILED_PRECONDITION||i.message!==AY)throw i;Ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&hn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new lt((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof lt?t:lt.resolve(t)}catch(t){return lt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):lt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):lt.reject(t)}static resolve(e){return new lt((t,n)=>{t(e)})}static reject(e){return new lt((t,n)=>{n(e)})}static waitFor(e){return new lt((t,n)=>{let r=0,s=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&t()},u=>n(u))}),a=!0,s===r&&t()})}static or(e){let t=lt.resolve(!1);for(const n of e)t=t.next(r=>r?lt.resolve(r):n());return t}static forEach(e,t){const n=[];return e.forEach((r,s)=>{n.push(t.call(this,r,s))}),this.waitFor(n)}static mapArray(e,t){return new lt((n,r)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const d=u;t(e[d]).next(f=>{a[d]=f,++l,l===s&&n(a)},f=>r(f))}})}static doWhile(e,t){return new lt((n,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):n()};s()})}}function TY(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function x2(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ie(n),this.se=n=>t.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}RN.oe=-1;function c5(i){return i==null}function fA(i){return i===0&&1/i==-1/0}function EY(i){return typeof i=="number"&&Number.isInteger(i)&&!fA(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ug(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function aF(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t){this.comparator=e,this.root=t||Ys.EMPTY}insert(e,t){return new dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ys.BLACK,null,null))}remove(e){return new dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ys.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qx(this.root,e,this.comparator,!1)}getReverseIterator(){return new qx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qx(this.root,e,this.comparator,!0)}}class qx{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ys{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=n??Ys.RED,this.left=r??Ys.EMPTY,this.right=s??Ys.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Ys(e??this.key,t??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ys.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Ys.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw hn();const e=this.left.check();if(e!==this.right.check())throw hn();return e+(this.isRed()?0:1)}}Ys.EMPTY=null,Ys.RED=!0,Ys.BLACK=!1;Ys.EMPTY=new class{constructor(){this.size=0}get key(){throw hn()}get value(){throw hn()}get color(){throw hn()}get left(){throw hn()}get right(){throw hn()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Ys(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.comparator=e,this.data=new dr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new S4(this.data.getIterator())}getIteratorFrom(e){return new S4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Zs)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zs(this.comparator);return t.data=e,t}}class S4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.fields=e,e.sort(Ws.comparator)}static empty(){return new ul([])}unionWith(e){let t=new Zs(Ws.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ul(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pv(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new oF("Invalid base64 string: "+s):s}}(e);return new ea(t)}static fromUint8Array(e){const t=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new ea(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ai(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ea.EMPTY_BYTE_STRING=new ea("");const CY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Np(i){if(wi(!!i),typeof i=="string"){let e=0;const t=CY.exec(i);if(wi(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Or(i.seconds),nanos:Or(i.nanos)}}function Or(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Lg(i){return typeof i=="string"?ea.fromBase64String(i):ea.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function PN(i){const e=i.mapValue.fields.__previous_value__;return LN(e)?PN(e):e}function Tb(i){const e=Np(i.mapValue.fields.__local_write_time__.timestampValue);return new Ar(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(e,t,n,r,s,a,l,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Eb{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Eb("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Eb&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x={mapValue:{}};function Pg(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?LN(i)?4:IY(i)?9007199254740991:kY(i)?10:11:hn()}function id(i,e){if(i===e)return!0;const t=Pg(i);if(t!==Pg(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Tb(i).isEqual(Tb(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Np(r.timestampValue),l=Np(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(r,s){return Lg(r.bytesValue).isEqual(Lg(s.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(r,s){return Or(r.geoPointValue.latitude)===Or(s.geoPointValue.latitude)&&Or(r.geoPointValue.longitude)===Or(s.geoPointValue.longitude)}(i,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Or(r.integerValue)===Or(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Or(r.doubleValue),l=Or(s.doubleValue);return a===l?fA(a)===fA(l):isNaN(a)&&isNaN(l)}return!1}(i,e);case 9:return pv(i.arrayValue.values||[],e.arrayValue.values||[],id);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(A4(a)!==A4(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!id(a[u],l[u])))return!1;return!0}(i,e);default:return hn()}}function Cb(i,e){return(i.values||[]).find(t=>id(t,e))!==void 0}function mv(i,e){if(i===e)return 0;const t=Pg(i),n=Pg(e);if(t!==n)return ai(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return ai(i.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Or(s.integerValue||s.doubleValue),u=Or(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(i,e);case 3:return T4(i.timestampValue,e.timestampValue);case 4:return T4(Tb(i),Tb(e));case 5:return ai(i.stringValue,e.stringValue);case 6:return function(s,a){const l=Lg(s),u=Lg(a);return l.compareTo(u)}(i.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=ai(l[d],u[d]);if(f!==0)return f}return ai(l.length,u.length)}(i.referenceValue,e.referenceValue);case 8:return function(s,a){const l=ai(Or(s.latitude),Or(a.latitude));return l!==0?l:ai(Or(s.longitude),Or(a.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return E4(i.arrayValue,e.arrayValue);case 10:return function(s,a){var l,u,d,f;const p=s.fields||{},y=a.fields||{},v=(l=p.value)===null||l===void 0?void 0:l.arrayValue,C=(u=y.value)===null||u===void 0?void 0:u.arrayValue,E=ai(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return E!==0?E:E4(v,C)}(i.mapValue,e.mapValue);case 11:return function(s,a){if(s===$x.mapValue&&a===$x.mapValue)return 0;if(s===$x.mapValue)return 1;if(a===$x.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const y=ai(u[p],f[p]);if(y!==0)return y;const v=mv(l[u[p]],d[f[p]]);if(v!==0)return v}return ai(u.length,f.length)}(i.mapValue,e.mapValue);default:throw hn()}}function T4(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ai(i,e);const t=Np(i),n=Np(e),r=ai(t.seconds,n.seconds);return r!==0?r:ai(t.nanos,n.nanos)}function E4(i,e){const t=i.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const s=mv(t[r],n[r]);if(s)return s}return ai(t.length,n.length)}function gv(i){return bC(i)}function bC(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const n=Np(t);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return Lg(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return Ht.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let n="[",r=!0;for(const s of t.values||[])r?r=!1:n+=",",n+=bC(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(t){const n=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const a of n)s?s=!1:r+=",",r+=`${a}:${bC(t.fields[a])}`;return r+"}"}(i.mapValue):hn()}function C4(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function _C(i){return!!i&&"integerValue"in i}function MN(i){return!!i&&"arrayValue"in i}function N4(i){return!!i&&"nullValue"in i}function k4(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Dw(i){return!!i&&"mapValue"in i}function kY(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ub(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ug(i.mapValue.fields,(t,n)=>e.mapValue.fields[t]=ub(n)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ub(i.arrayValue.values[t]);return e}return Object.assign({},i)}function IY(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.value=e}static empty(){return new _o({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Dw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ub(t)}setAll(e){let t=Ws.emptyPath(),n={},r=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){const u=this.getFieldsMap(t);this.applyChanges(u,n,r),n={},r=[],t=l.popLast()}a?n[l.lastSegment()]=ub(a):r.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Dw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return id(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Dw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ug(t,(r,s)=>e[r]=s);for(const r of n)delete e[r]}clone(){return new _o(ub(this.value))}}function lF(i){const e=[];return Ug(i.fields,(t,n)=>{const r=new Ws([t]);if(Dw(n)){const s=lF(n.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new ul(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t,n,r,s,a,l){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Ea(e,0,bn.min(),bn.min(),bn.min(),_o.empty(),0)}static newFoundDocument(e,t,n,r){return new Ea(e,1,t,bn.min(),n,r,0)}static newNoDocument(e,t){return new Ea(e,2,t,bn.min(),bn.min(),_o.empty(),0)}static newUnknownDocument(e,t){return new Ea(e,3,t,bn.min(),bn.min(),_o.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(bn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_o.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_o.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ea&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ea(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t){this.position=e,this.inclusive=t}}function I4(i,e,t){let n=0;for(let r=0;r<i.position.length;r++){const s=e[r],a=i.position[r];if(s.field.isKeyField()?n=Ht.comparator(Ht.fromName(a.referenceValue),t.key):n=mv(a,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function R4(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!id(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,t="asc"){this.field=e,this.dir=t}}function RY(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{}class ts extends uF{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new PY(e,t,n):t==="array-contains"?new OY(e,n):t==="in"?new FY(e,n):t==="not-in"?new VY(e,n):t==="array-contains-any"?new BY(e,n):new ts(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new MY(e,n):new DY(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(mv(t,this.value)):t!==null&&Pg(this.value)===Pg(t)&&this.matchesComparison(mv(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return hn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $u extends uF{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new $u(e,t)}matches(e){return cF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cF(i){return i.op==="and"}function dF(i){return LY(i)&&cF(i)}function LY(i){for(const e of i.filters)if(e instanceof $u)return!1;return!0}function xC(i){if(i instanceof ts)return i.field.canonicalString()+i.op.toString()+gv(i.value);if(dF(i))return i.filters.map(e=>xC(e)).join(",");{const e=i.filters.map(t=>xC(t)).join(",");return`${i.op}(${e})`}}function hF(i,e){return i instanceof ts?function(n,r){return r instanceof ts&&n.op===r.op&&n.field.isEqual(r.field)&&id(n.value,r.value)}(i,e):i instanceof $u?function(n,r){return r instanceof $u&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,a,l)=>s&&hF(a,r.filters[l]),!0):!1}(i,e):void hn()}function fF(i){return i instanceof ts?function(t){return`${t.field.canonicalString()} ${t.op} ${gv(t.value)}`}(i):i instanceof $u?function(t){return t.op.toString()+" {"+t.getFilters().map(fF).join(" ,")+"}"}(i):"Filter"}class PY extends ts{constructor(e,t,n){super(e,t,n),this.key=Ht.fromName(n.referenceValue)}matches(e){const t=Ht.comparator(e.key,this.key);return this.matchesComparison(t)}}class MY extends ts{constructor(e,t){super(e,"in",t),this.keys=pF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DY extends ts{constructor(e,t){super(e,"not-in",t),this.keys=pF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pF(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>Ht.fromName(n.referenceValue))}class OY extends ts{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return MN(t)&&Cb(t.arrayValue,this.value)}}class FY extends ts{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cb(this.value.arrayValue,t)}}class VY extends ts{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Cb(this.value.arrayValue,t)}}class BY extends ts{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!MN(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Cb(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(e,t=null,n=[],r=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function L4(i,e=null,t=[],n=[],r=null,s=null,a=null){return new UY(i,e,t,n,r,s,a)}function DN(i){const e=xn(i);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>xC(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),c5(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>gv(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>gv(n)).join(",")),e.ue=t}return e.ue}function ON(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!RY(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!hF(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!R4(i.startAt,e.startAt)&&R4(i.endAt,e.endAt)}function wC(i){return Ht.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t=null,n=[],r=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zY(i,e,t,n,r,s,a,l){return new kv(i,e,t,n,r,s,a,l)}function FN(i){return new kv(i)}function P4(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function mF(i){return i.collectionGroup!==null}function cb(i){const e=xn(i);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Zs(Ws.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Nb(s,n))}),t.has(Ws.keyField().canonicalString())||e.ce.push(new Nb(Ws.keyField(),n))}return e.ce}function Zc(i){const e=xn(i);return e.le||(e.le=jY(e,cb(i))),e.le}function jY(i,e){if(i.limitType==="F")return L4(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Nb(r.field,s)});const t=i.endAt?new pA(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new pA(i.startAt.position,i.startAt.inclusive):null;return L4(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function AC(i,e){const t=i.filters.concat([e]);return new kv(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function SC(i,e,t){return new kv(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function d5(i,e){return ON(Zc(i),Zc(e))&&i.limitType===e.limitType}function gF(i){return`${DN(Zc(i))}|lt:${i.limitType}`}function M0(i){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(r=>fF(r)).join(", ")}]`),c5(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>gv(r)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>gv(r)).join(",")),`Target(${n})`}(Zc(i))}; limitType=${i.limitType})`}function h5(i,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Ht.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,e)&&function(n,r){for(const s of cb(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(i,e)&&function(n,r){return!(n.startAt&&!function(a,l,u){const d=I4(a,l,u);return a.inclusive?d<=0:d<0}(n.startAt,cb(n),r)||n.endAt&&!function(a,l,u){const d=I4(a,l,u);return a.inclusive?d>=0:d>0}(n.endAt,cb(n),r))}(i,e)}function qY(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function yF(i){return(e,t)=>{let n=!1;for(const r of cb(i)){const s=$Y(r,e,t);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function $Y(i,e,t){const n=i.field.isKeyField()?Ht.comparator(e.key,t.key):function(s,a,l){const u=a.data.field(s),d=l.data.field(s);return u!==null&&d!==null?mv(u,d):hn()}(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return hn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ug(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return aF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HY=new dr(Ht.comparator);function Lh(){return HY}const vF=new dr(Ht.comparator);function nb(...i){let e=vF;for(const t of i)e=e.insert(t.key,t);return e}function bF(i){let e=vF;return i.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function mm(){return db()}function _F(){return db()}function db(){return new Iv(i=>i.toString(),(i,e)=>i.isEqual(e))}const GY=new dr(Ht.comparator),YY=new Zs(Ht.comparator);function Bn(...i){let e=YY;for(const t of i)e=e.add(t);return e}const KY=new Zs(ai);function WY(){return KY}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fA(e)?"-0":e}}function xF(i){return{integerValue:""+i}}function QY(i,e){return EY(e)?xF(e):VN(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(){this._=void 0}}function XY(i,e,t){return i instanceof kb?function(r,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&LN(s)&&(s=PN(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):i instanceof Ib?AF(i,e):i instanceof Rb?SF(i,e):function(r,s){const a=wF(r,s),l=M4(a)+M4(r.Pe);return _C(a)&&_C(r.Pe)?xF(l):VN(r.serializer,l)}(i,e)}function JY(i,e,t){return i instanceof Ib?AF(i,e):i instanceof Rb?SF(i,e):t}function wF(i,e){return i instanceof mA?function(n){return _C(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class kb extends f5{}class Ib extends f5{constructor(e){super(),this.elements=e}}function AF(i,e){const t=TF(e);for(const n of i.elements)t.some(r=>id(r,n))||t.push(n);return{arrayValue:{values:t}}}class Rb extends f5{constructor(e){super(),this.elements=e}}function SF(i,e){let t=TF(e);for(const n of i.elements)t=t.filter(r=>!id(r,n));return{arrayValue:{values:t}}}class mA extends f5{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function M4(i){return Or(i.integerValue||i.doubleValue)}function TF(i){return MN(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZY{constructor(e,t){this.field=e,this.transform=t}}function eK(i,e){return i.field.isEqual(e.field)&&function(n,r){return n instanceof Ib&&r instanceof Ib||n instanceof Rb&&r instanceof Rb?pv(n.elements,r.elements,id):n instanceof mA&&r instanceof mA?id(n.Pe,r.Pe):n instanceof kb&&r instanceof kb}(i.transform,e.transform)}class tK{constructor(e,t){this.version=e,this.transformResults=t}}class cl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cl}static exists(e){return new cl(void 0,e)}static updateTime(e){return new cl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ow(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class p5{}function EF(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new m5(i.key,cl.none()):new w2(i.key,i.data,cl.none());{const t=i.data,n=_o.empty();let r=new Zs(Ws.comparator);for(let s of e.fields)if(!r.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?n.delete(s):n.set(s,a),r=r.add(s)}return new Op(i.key,n,new ul(r.toArray()),cl.none())}}function nK(i,e,t){i instanceof w2?function(r,s,a){const l=r.value.clone(),u=O4(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(i,e,t):i instanceof Op?function(r,s,a){if(!Ow(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=O4(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(CF(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(i,e,t):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function hb(i,e,t,n){return i instanceof w2?function(s,a,l,u){if(!Ow(s.precondition,a))return l;const d=s.value.clone(),f=F4(s.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(i,e,t,n):i instanceof Op?function(s,a,l,u){if(!Ow(s.precondition,a))return l;const d=F4(s.fieldTransforms,u,a),f=a.data;return f.setAll(CF(s)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(i,e,t,n):function(s,a,l){return Ow(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(i,e,t)}function iK(i,e){let t=null;for(const n of i.fieldTransforms){const r=e.data.field(n.field),s=wF(n.transform,r||null);s!=null&&(t===null&&(t=_o.empty()),t.set(n.field,s))}return t||null}function D4(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&pv(n,r,(s,a)=>eK(s,a))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class w2 extends p5{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Op extends p5{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function CF(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}}),e}function O4(i,e,t){const n=new Map;wi(i.length===t.length);for(let r=0;r<t.length;r++){const s=i[r],a=s.transform,l=e.data.field(s.field);n.set(s.field,JY(a,l,t[r]))}return n}function F4(i,e,t){const n=new Map;for(const r of i){const s=r.transform,a=t.data.field(r.field);n.set(r.field,XY(s,a,e))}return n}class m5 extends p5{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rK extends p5{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&nK(s,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=hb(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=hb(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=_F();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=t.has(r.key)?null:l;const u=EF(a,l);u!==null&&n.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(bn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bn())}isEqual(e){return this.batchId===e.batchId&&pv(this.mutations,e.mutations,(t,n)=>D4(t,n))&&pv(this.baseMutations,e.baseMutations,(t,n)=>D4(t,n))}}class BN{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){wi(e.mutations.length===n.length);let r=function(){return GY}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,n[a].version);return new BN(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qr,Kn;function lK(i){switch(i){default:return hn();case tt.CANCELLED:case tt.UNKNOWN:case tt.DEADLINE_EXCEEDED:case tt.RESOURCE_EXHAUSTED:case tt.INTERNAL:case tt.UNAVAILABLE:case tt.UNAUTHENTICATED:return!1;case tt.INVALID_ARGUMENT:case tt.NOT_FOUND:case tt.ALREADY_EXISTS:case tt.PERMISSION_DENIED:case tt.FAILED_PRECONDITION:case tt.ABORTED:case tt.OUT_OF_RANGE:case tt.UNIMPLEMENTED:case tt.DATA_LOSS:return!0}}function NF(i){if(i===void 0)return Rh("GRPC error has no .code"),tt.UNKNOWN;switch(i){case Qr.OK:return tt.OK;case Qr.CANCELLED:return tt.CANCELLED;case Qr.UNKNOWN:return tt.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return tt.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return tt.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return tt.INTERNAL;case Qr.UNAVAILABLE:return tt.UNAVAILABLE;case Qr.UNAUTHENTICATED:return tt.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return tt.INVALID_ARGUMENT;case Qr.NOT_FOUND:return tt.NOT_FOUND;case Qr.ALREADY_EXISTS:return tt.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return tt.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return tt.FAILED_PRECONDITION;case Qr.ABORTED:return tt.ABORTED;case Qr.OUT_OF_RANGE:return tt.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return tt.UNIMPLEMENTED;case Qr.DATA_LOSS:return tt.DATA_LOSS;default:return hn()}}(Kn=Qr||(Qr={}))[Kn.OK=0]="OK",Kn[Kn.CANCELLED=1]="CANCELLED",Kn[Kn.UNKNOWN=2]="UNKNOWN",Kn[Kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kn[Kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kn[Kn.NOT_FOUND=5]="NOT_FOUND",Kn[Kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kn[Kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kn[Kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kn[Kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kn[Kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kn[Kn.ABORTED=10]="ABORTED",Kn[Kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kn[Kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kn[Kn.INTERNAL=13]="INTERNAL",Kn[Kn.UNAVAILABLE=14]="UNAVAILABLE",Kn[Kn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK=new Sg([4294967295,4294967295],0);function V4(i){const e=uK().encode(i),t=new JO;return t.update(e),new Uint8Array(t.digest())}function B4(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Sg([t,n],0),new Sg([r,s],0)]}class UN{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ib(`Invalid padding: ${t}`);if(n<0)throw new ib(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ib(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new ib(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Sg.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Sg.fromNumber(n)));return r.compare(cK)===1&&(r=new Sg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=V4(e),[n,r]=B4(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,r,s);if(!this.de(a))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new UN(s,r,t);return n.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const t=V4(e),[n,r]=B4(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,r,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ib extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,A2.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new g5(bn.min(),r,new dr(ai),Lh(),Bn())}}class A2{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new A2(n,t,Bn(),Bn(),Bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class kF{constructor(e,t){this.targetId=e,this.me=t}}class IF{constructor(e,t,n=ea.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class U4{constructor(){this.fe=0,this.ge=j4(),this.pe=ea.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Bn(),t=Bn(),n=Bn();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:hn()}}),new A2(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=j4()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,wi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dK{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lh(),this.qe=z4(),this.Qe=new dr(ai)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:hn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((n,r)=>{this.ze(r)&&t(r)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(wC(s))if(n===0){const a=new Ht(s.path);this.Ue(t,a,Ea.newNoDocument(a,bn.min()))}else wi(n===1);else{const a=this.Ye(t);if(a!==n){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let a,l;try{a=Lg(n).toUint8Array()}catch(u){if(u instanceof oF)return fv("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new UN(a,r,s)}catch(u){return fv(u instanceof ib?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(t,s,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((s,a)=>{const l=this.Je(a);if(l){if(s.current&&wC(l.target)){const u=new Ht(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Ea.newNoDocument(u,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let n=Bn();this.qe.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const r=new g5(e,t,this.Qe,this.ke,n);return this.ke=Lh(),this.qe=z4(),this.Qe=new dr(ai),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new U4,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Zs(ai),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Ot("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new U4),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function z4(){return new dr(Ht.comparator)}function j4(){return new dr(Ht.comparator)}const hK={asc:"ASCENDING",desc:"DESCENDING"},fK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pK={and:"AND",or:"OR"};class mK{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function TC(i,e){return i.useProto3Json||c5(e)?e:{value:e}}function gA(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RF(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function gK(i,e){return gA(i,e.toTimestamp())}function ed(i){return wi(!!i),bn.fromTimestamp(function(t){const n=Np(t);return new Ar(n.seconds,n.nanos)}(i))}function zN(i,e){return EC(i,e).canonicalString()}function EC(i,e){const t=function(r){return new Ki(["projects",r.projectId,"databases",r.database])}(i).child("documents");return e===void 0?t:t.child(e)}function LF(i){const e=Ki.fromString(i);return wi(FF(e)),e}function CC(i,e){return zN(i.databaseId,e.path)}function xT(i,e){const t=LF(e);if(t.get(1)!==i.databaseId.projectId)throw new Et(tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Et(tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ht(MF(t))}function PF(i,e){return zN(i.databaseId,e)}function yK(i){const e=LF(i);return e.length===4?Ki.emptyPath():MF(e)}function NC(i){return new Ki(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function MF(i){return wi(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function q4(i,e,t){return{name:CC(i,e),fields:t.value.mapValue.fields}}function vK(i,e){let t;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:hn()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(wi(f===void 0||typeof f=="string"),ea.fromBase64String(f||"")):(wi(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ea.fromUint8Array(f||new Uint8Array))}(i,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const f=d.code===void 0?tt.UNKNOWN:NF(d.code);return new Et(f,d.message||"")}(a);t=new IF(n,r,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=xT(i,n.document.name),s=ed(n.document.updateTime),a=n.document.createTime?ed(n.document.createTime):bn.min(),l=new _o({mapValue:{fields:n.document.fields}}),u=Ea.newFoundDocument(r,s,a,l),d=n.targetIds||[],f=n.removedTargetIds||[];t=new Fw(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=xT(i,n.document),s=n.readTime?ed(n.readTime):bn.min(),a=Ea.newNoDocument(r,s),l=n.removedTargetIds||[];t=new Fw([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=xT(i,n.document),s=n.removedTargetIds||[];t=new Fw([],s,r,null)}else{if(!("filter"in e))return hn();{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:s}=n,a=new oK(r,s),l=n.targetId;t=new kF(l,a)}}return t}function bK(i,e){let t;if(e instanceof w2)t={update:q4(i,e.key,e.value)};else if(e instanceof m5)t={delete:CC(i,e.key)};else if(e instanceof Op)t={update:q4(i,e.key,e.data),updateMask:NK(e.fieldMask)};else{if(!(e instanceof rK))return hn();t={verify:CC(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const l=a.transform;if(l instanceof kb)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ib)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Rb)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof mA)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw hn()}(0,n))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:gK(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:hn()}(i,e.precondition)),t}function _K(i,e){return i&&i.length>0?(wi(e!==void 0),i.map(t=>function(r,s){let a=r.updateTime?ed(r.updateTime):ed(s);return a.isEqual(bn.min())&&(a=ed(s)),new tK(a,r.transformResults||[])}(t,e))):[]}function xK(i,e){return{documents:[PF(i,e.path)]}}function wK(i,e){const t={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=PF(i,r);const s=function(d){if(d.length!==0)return OF($u.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(f=>function(y){return{field:D0(y.field),direction:TK(y.dir)}}(f))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=TC(i,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:r}}function AK(i){let e=yK(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){wi(n===1);const f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(p){const y=DF(p);return y instanceof $u&&dF(y)?y.getFilters():[y]}(t.where));let a=[];t.orderBy&&(a=function(p){return p.map(y=>function(C){return new Nb(O0(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(y))}(t.orderBy));let l=null;t.limit&&(l=function(p){let y;return y=typeof p=="object"?p.value:p,c5(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(p){const y=!!p.before,v=p.values||[];return new pA(v,y)}(t.startAt));let d=null;return t.endAt&&(d=function(p){const y=!p.before,v=p.values||[];return new pA(v,y)}(t.endAt)),zY(e,r,a,s,l,"F",u,d)}function SK(i,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return hn()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DF(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=O0(t.unaryFilter.field);return ts.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=O0(t.unaryFilter.field);return ts.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=O0(t.unaryFilter.field);return ts.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=O0(t.unaryFilter.field);return ts.create(a,"!=",{nullValue:"NULL_VALUE"});default:return hn()}}(i):i.fieldFilter!==void 0?function(t){return ts.create(O0(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return hn()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return $u.create(t.compositeFilter.filters.map(n=>DF(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return hn()}}(t.compositeFilter.op))}(i):hn()}function TK(i){return hK[i]}function EK(i){return fK[i]}function CK(i){return pK[i]}function D0(i){return{fieldPath:i.canonicalString()}}function O0(i){return Ws.fromServerFormat(i.fieldPath)}function OF(i){return i instanceof ts?function(t){if(t.op==="=="){if(k4(t.value))return{unaryFilter:{field:D0(t.field),op:"IS_NAN"}};if(N4(t.value))return{unaryFilter:{field:D0(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(k4(t.value))return{unaryFilter:{field:D0(t.field),op:"IS_NOT_NAN"}};if(N4(t.value))return{unaryFilter:{field:D0(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:D0(t.field),op:EK(t.op),value:t.value}}}(i):i instanceof $u?function(t){const n=t.getFilters().map(r=>OF(r));return n.length===1?n[0]:{compositeFilter:{op:CK(t.op),filters:n}}}(i):hn()}function NK(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FF(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t,n,r,s=bn.min(),a=bn.min(),l=ea.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new mp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kK{constructor(e){this.ct=e}}function IK(i){const e=AK({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?SC(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{constructor(){this.un=new LK}addToCollectionParentIndex(e,t){return this.un.add(t),lt.resolve()}getCollectionParents(e,t){return lt.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return lt.resolve()}deleteFieldIndex(e,t){return lt.resolve()}deleteAllFieldIndexes(e){return lt.resolve()}createTargetIndexes(e,t){return lt.resolve()}getDocumentsMatchingTarget(e,t){return lt.resolve(null)}getIndexType(e,t){return lt.resolve(0)}getFieldIndexes(e,t){return lt.resolve([])}getNextCollectionGroupToUpdate(e){return lt.resolve(null)}getMinOffset(e,t){return lt.resolve(Cp.min())}getMinOffsetFromCollectionGroup(e,t){return lt.resolve(Cp.min())}updateCollectionGroup(e,t,n){return lt.resolve()}updateIndexEntries(e,t){return lt.resolve()}}class LK{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Zs(Ki.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Zs(Ki.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new yv(0)}static kn(){return new yv(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(){this.changes=new Iv(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ea.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?lt.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(n!==null&&hb(n.mutation,r,ul.empty(),Ar.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Bn()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Bn()){const r=mm();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(s=>{let a=nb();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const n=mm();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Bn()))}populateOverlays(e,t,n){const r=[];return n.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,n,r){let s=Lh();const a=db(),l=function(){return db()}();return t.forEach((u,d)=>{const f=n.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof Op)?s=s.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),hb(f.mutation,d,f.mutation.getFieldMask(),Ar.now())):a.set(d.key,ul.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>a.set(d,f)),t.forEach((d,f)=>{var p;return l.set(d,new MK(f,(p=a.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,t){const n=db();let r=new dr((a,l)=>a-l),s=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=t.get(u);if(d===null)return;let f=n.get(u)||ul.empty();f=l.applyToLocalView(d,f),n.set(u,f);const p=(r.get(l.batchId)||Bn()).add(u);r=r.insert(l.batchId,p)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,p=_F();f.forEach(y=>{if(!s.has(y)){const v=EF(t.get(y),n.get(y));v!==null&&p.set(y,v),s=s.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return lt.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,r){return function(a){return Ht.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):lt.resolve(mm());let l=-1,u=s;return a.next(d=>lt.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?lt.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,Bn())).next(f=>({batchId:l,changes:bF(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ht(t)).next(n=>{let r=nb();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let a=nb();return this.indexManager.getCollectionParents(e,s).next(l=>lt.forEach(l,u=>{const d=function(p,y){return new kv(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,n,r).next(f=>{f.forEach((p,y)=>{a=a.insert(p,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(a=>{s.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,Ea.newInvalidDocument(f)))});let l=nb();return a.forEach((u,d)=>{const f=s.get(u);f!==void 0&&hb(f.mutation,d,ul.empty(),Ar.now()),h5(t,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return lt.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:ed(r.createTime)}}(t)),lt.resolve()}getNamedQuery(e,t){return lt.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:IK(r.bundledQuery),readTime:ed(r.readTime)}}(t)),lt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(){this.overlays=new dr(Ht.comparator),this.Ir=new Map}getOverlay(e,t){return lt.resolve(this.overlays.get(t))}getOverlays(e,t){const n=mm();return lt.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((r,s)=>{this.ht(e,t,s)}),lt.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),lt.resolve()}getOverlaysForCollection(e,t,n){const r=mm(),s=t.length+1,a=new Ht(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>n&&r.set(u.getKey(),u)}return lt.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new dr((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let f=s.get(d.largestBatchId);f===null&&(f=mm(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=mm(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=r)););return lt.resolve(l)}ht(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new aK(t,n));let s=this.Ir.get(t);s===void 0&&(s=Bn(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VK{constructor(){this.sessionToken=ea.EMPTY_BYTE_STRING}getSessionToken(e){return lt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,lt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.Tr=new Zs(Is.Er),this.dr=new Zs(Is.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Is(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Vr(new Is(e,t))}mr(e,t){e.forEach(n=>this.removeReference(n,t))}gr(e){const t=new Ht(new Ki([])),n=new Is(t,e),r=new Is(t,e+1),s=[];return this.dr.forEachInRange([n,r],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ht(new Ki([])),n=new Is(t,e),r=new Is(t,e+1);let s=Bn();return this.dr.forEachInRange([n,r],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new Is(e,0),n=this.Tr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Is{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ht.comparator(e.key,t.key)||ai(e.wr,t.wr)}static Ar(e,t){return ai(e.wr,t.wr)||Ht.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Zs(Is.Er)}checkEmpty(e){return lt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new sK(s,t,n,r);this.mutationQueue.push(a);for(const l of r)this.br=this.br.add(new Is(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return lt.resolve(a)}lookupMutationBatch(e,t){return lt.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return lt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Is(t,0),r=new Is(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],a=>{const l=this.Dr(a.wr);s.push(l)}),lt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Zs(ai);return t.forEach(r=>{const s=new Is(r,0),a=new Is(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],l=>{n=n.add(l.wr)})}),lt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Ht.isDocumentKey(s)||(s=s.child(""));const a=new Is(new Ht(s),0);let l=new Zs(ai);return this.br.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===r&&(l=l.add(u.wr)),!0)},a),lt.resolve(this.Cr(l))}Cr(e){const t=[];return e.forEach(n=>{const r=this.Dr(n);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){wi(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return lt.forEach(t.mutations,r=>{const s=new Is(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Is(t,0),r=this.br.firstAfterOrEqual(n);return lt.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,lt.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(e){this.Mr=e,this.docs=function(){return new dr(Ht.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,a=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return lt.resolve(n?n.document.mutableCopy():Ea.newInvalidDocument(t))}getEntries(e,t){let n=Lh();return t.forEach(r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():Ea.newInvalidDocument(r))}),lt.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Lh();const a=t.path,l=new Ht(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||wY(xY(f),n)<=0||(r.has(f.key)||h5(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return lt.resolve(s)}getAllFromCollectionGroup(e,t,n,r){hn()}Or(e,t){return lt.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new zK(this)}getSize(e){return lt.resolve(this.size)}}class zK extends PK{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),lt.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(e){this.persistence=e,this.Nr=new Iv(t=>DN(t),ON),this.lastRemoteSnapshotVersion=bn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new jN,this.targetCount=0,this.kr=yv.Bn()}forEachTarget(e,t){return this.Nr.forEach((n,r)=>t(r)),lt.resolve()}getLastRemoteSnapshotVersion(e){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),lt.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new yv(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,lt.resolve()}updateTargetData(e,t){return this.Kn(t),lt.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,lt.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=t&&n.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),lt.waitFor(s).next(()=>r)}getTargetCount(e){return lt.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return lt.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),lt.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),lt.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),lt.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return lt.resolve(n)}containsKey(e,t){return lt.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(e,t){this.qr={},this.overlays={},this.Qr=new RN(0),this.Kr=!1,this.Kr=!0,this.$r=new VK,this.referenceDelegate=e(this),this.Ur=new jK(this),this.indexManager=new RK,this.remoteDocumentCache=function(r){return new UK(r)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new kK(t),this.Gr=new OK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new FK,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new BK(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Ot("MemoryPersistence","Starting transaction:",e);const r=new $K(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return lt.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class $K extends SY{constructor(e){super(),this.currentSequenceNumber=e}}class qN{constructor(e){this.persistence=e,this.Jr=new jN,this.Yr=null}static Zr(e){return new qN(e)}get Xr(){if(this.Yr)return this.Yr;throw hn()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),lt.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),lt.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),lt.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.Xr,n=>{const r=Ht.fromPath(n);return this.ei(e,r).next(s=>{s||t.removeEntry(r,bn.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(n=>{n?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return lt.or([()=>lt.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Bn(),r=Bn();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new $N(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Nq()?8:TY(Na())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new HK;return this.Xi(e,t,a).next(l=>{if(s.result=l,this.zi)return this.es(e,t,a,l.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(k1()<=qn.DEBUG&&Ot("QueryEngine","SDK will not create cache indexes for query:",M0(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),lt.resolve()):(k1()<=qn.DEBUG&&Ot("QueryEngine","Query:",M0(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(k1()<=qn.DEBUG&&Ot("QueryEngine","The SDK decides to create cache indexes for query:",M0(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zc(t))):lt.resolve())}Yi(e,t){if(P4(t))return lt.resolve(null);let n=Zc(t);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=SC(t,null,"F"),n=Zc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=Bn(...s);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.ts(t,l);return this.ns(t,d,a,u.readTime)?this.Yi(e,SC(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,n,r){return P4(t)||r.isEqual(bn.min())?lt.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const a=this.ts(t,s);return this.ns(t,a,n,r)?lt.resolve(null):(k1()<=qn.DEBUG&&Ot("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),M0(t)),this.rs(e,a,t,_Y(r,-1)).next(l=>l))})}ts(e,t){let n=new Zs(yF(e));return t.forEach((r,s)=>{h5(e,s)&&(n=n.add(s))}),n}ns(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return k1()<=qn.DEBUG&&Ot("QueryEngine","Using full collection scan to execute query:",M0(t)),this.Ji.getDocumentsMatchingQuery(e,t,Cp.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YK{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new dr(ai),this._s=new Iv(s=>DN(s),ON),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DK(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function KK(i,e,t,n){return new YK(i,e,t,n)}async function VF(i,e){const t=xn(i);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],l=[];let u=Bn();for(const d of r){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(n,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:l}))})})}function WK(i,e){const t=xn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const p=d.batch,y=p.keys();let v=lt.resolve();return y.forEach(C=>{v=v.next(()=>f.getEntry(u,C)).next(E=>{const R=d.docVersions.get(C);wi(R!==null),E.version.compareTo(R)<0&&(p.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),f.addEntry(E)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=Bn();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(n,r))})}function BF(i){const e=xn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function QK(i,e){const t=xn(i),n=e.snapshotVersion;let r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;const l=[];e.targetChanges.forEach((f,p)=>{const y=r.get(p);if(!y)return;l.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,p)));let v=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(ea.EMPTY_BYTE_STRING,bn.min()).withLastLimboFreeSnapshotVersion(bn.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,n)),r=r.insert(p,v),function(E,R,I){return E.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(y,v,f)&&l.push(t.Ur.updateTargetData(s,v))});let u=Lh(),d=Bn();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(XK(s,a,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!n.isEqual(bn.min())){const f=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(f)}return lt.waitFor(l).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=r,s))}function XK(i,e,t){let n=Bn(),r=Bn();return t.forEach(s=>n=n.add(s)),e.getEntries(i,n).next(s=>{let a=Lh();return t.forEach((l,u)=>{const d=s.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(bn.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Ot("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:r}})}function JK(i,e){const t=xn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function ZK(i,e){const t=xn(i);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return t.Ur.getTargetData(n,e).next(s=>s?(r=s,lt.resolve(r)):t.Ur.allocateTargetId(n).next(a=>(r=new mp(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.Ur.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=t.os.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(n.targetId,n),t._s.set(e,n.targetId)),n})}async function kC(i,e,t){const n=xn(i),r=n.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!x2(a))throw a;Ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(r.target)}function $4(i,e,t){const n=xn(i);let r=bn.min(),s=Bn();return n.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const p=xn(u),y=p._s.get(f);return y!==void 0?lt.resolve(p.os.get(y)):p.Ur.getTargetData(d,f)}(n,a,Zc(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,t?r:bn.min(),t?s:Bn())).next(l=>(eW(n,qY(e),l),{documents:l,Ts:s})))}function eW(i,e,t){let n=i.us.get(e)||bn.min();t.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.us.set(e,n)}class H4{constructor(){this.activeTargetIds=WY()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tW{constructor(){this.so=new H4,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new H4,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hx=null;function wT(){return Hx===null?Hx=function(){return 268435456+Math.round(2147483648*Math.random())}():Hx++,"0x"+Hx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="WebChannelConnection";class sW extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,n,r,s,a){const l=wT(),u=this.xo(t,n.toUriEncodedString());Ot("RestConnection",`Sending RPC '${t}' ${l}:`,u,r);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(t,u,d,r).then(f=>(Ot("RestConnection",`Received RPC '${t}' ${l}: `,f),f),f=>{throw fv("RestConnection",`RPC '${t}' ${l} failed with error: `,f,"url: ",u,"request:",r),f})}Lo(t,n,r,s,a,l){return this.Mo(t,n,r,s,a)}Oo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nv}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>t[a]=s),r&&r.headers.forEach((s,a)=>t[a]=s)}xo(t,n){const r=iW[t];return`${this.Do}/v1/${n}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=wT();return new Promise((a,l)=>{const u=new ZO;u.setWithCredentials(!0),u.listenOnce(eF.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Mw.NO_ERROR:const f=u.getResponseJson();Ot(va,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Mw.TIMEOUT:Ot(va,`RPC '${e}' ${s} timed out`),l(new Et(tt.DEADLINE_EXCEEDED,"Request time out"));break;case Mw.HTTP_ERROR:const p=u.getStatus();if(Ot(va,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const C=function(R){const I=R.toLowerCase().replace(/_/g,"-");return Object.values(tt).indexOf(I)>=0?I:tt.UNKNOWN}(v.status);l(new Et(C,v.message))}else l(new Et(tt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Et(tt.UNAVAILABLE,"Connection failed."));break;default:hn()}}finally{Ot(va,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(r);Ot(va,`RPC '${e}' ${s} sending request:`,r),u.send(t,"POST",d,n,15)})}Bo(e,t,n){const r=wT(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=iF(),l=nF(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;const f=s.join("");Ot(va,`Creating RPC '${e}' stream ${r}: ${f}`,u);const p=a.createWebChannel(f,u);let y=!1,v=!1;const C=new rW({Io:R=>{v?Ot(va,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(y||(Ot(va,`Opening RPC '${e}' stream ${r} transport.`),p.open(),y=!0),Ot(va,`RPC '${e}' stream ${r} sending:`,R),p.send(R))},To:()=>p.close()}),E=(R,I,D)=>{R.listen(I,j=>{try{D(j)}catch(X){setTimeout(()=>{throw X},0)}})};return E(p,tb.EventType.OPEN,()=>{v||(Ot(va,`RPC '${e}' stream ${r} transport opened.`),C.yo())}),E(p,tb.EventType.CLOSE,()=>{v||(v=!0,Ot(va,`RPC '${e}' stream ${r} transport closed`),C.So())}),E(p,tb.EventType.ERROR,R=>{v||(v=!0,fv(va,`RPC '${e}' stream ${r} transport errored:`,R),C.So(new Et(tt.UNAVAILABLE,"The operation could not be completed")))}),E(p,tb.EventType.MESSAGE,R=>{var I;if(!v){const D=R.data[0];wi(!!D);const j=D,X=j.error||((I=j[0])===null||I===void 0?void 0:I.error);if(X){Ot(va,`RPC '${e}' stream ${r} received error:`,X);const W=X.status;let ue=function(V){const Y=Qr[V];if(Y!==void 0)return NF(Y)}(W),U=X.message;ue===void 0&&(ue=tt.INTERNAL,U="Unknown error status: "+W+" with message "+X.message),v=!0,C.So(new Et(ue,U)),p.close()}else Ot(va,`RPC '${e}' stream ${r} received:`,D),C.bo(D)}}),E(l,tF.STAT_EVENT,R=>{R.stat===vC.PROXY?Ot(va,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===vC.NOPROXY&&Ot(va,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function AT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(i){return new mK(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,t,n=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Ot("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,t,n,r,s,a,l,u){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new UF(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===tt.RESOURCE_EXHAUSTED?(Rh(t.toString()),Rh("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===tt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.Yo===t&&this.P_(n,r)},n=>{e(()=>{const r=new Et(tt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(r)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{n(()=>this.I_(r))}),this.stream.onMessage(r=>{n(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aW extends zF{constructor(e,t,n,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=vK(this.serializer,e),n=function(s){if(!("targetChange"in s))return bn.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?bn.min():a.readTime?ed(a.readTime):bn.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=NC(this.serializer),t.addTarget=function(s,a){let l;const u=a.target;if(l=wC(u)?{documents:xK(s,u)}:{query:wK(s,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=RF(s,a.resumeToken);const d=TC(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(bn.min())>0){l.readTime=gA(s,a.snapshotVersion.toTimestamp());const d=TC(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=SK(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=NC(this.serializer),t.removeTarget=e,this.a_(t)}}class oW extends zF{constructor(e,t,n,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return wi(!!e.streamToken),this.lastStreamToken=e.streamToken,wi(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){wi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=_K(e.writeResults,e.commitTime),n=ed(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=NC(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>bK(this.serializer,n))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Et(tt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,EC(t,n),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Et(tt.UNKNOWN,s.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,EC(t,n),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Et(tt.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class uW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Rh(t),this.D_=!1):Ot("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{n.enqueueAndForget(async()=>{zg(this)&&(Ot("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=xn(u);d.L_.add(4),await S2(d),d.q_.set("Unknown"),d.L_.delete(4),await v5(d)}(this))})}),this.q_=new uW(n,r)}}async function v5(i){if(zg(i))for(const e of i.B_)await e(!0)}async function S2(i){for(const e of i.B_)await e(!1)}function jF(i,e){const t=xn(i);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),KN(t)?YN(t):Rv(t).r_()&&GN(t,e))}function HN(i,e){const t=xn(i),n=Rv(t);t.N_.delete(e),n.r_()&&qF(t,e),t.N_.size===0&&(n.r_()?n.o_():zg(t)&&t.q_.set("Unknown"))}function GN(i,e){if(i.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(bn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rv(i).A_(e)}function qF(i,e){i.Q_.xe(e),Rv(i).R_(e)}function YN(i){i.Q_=new dK({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.N_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),Rv(i).start(),i.q_.v_()}function KN(i){return zg(i)&&!Rv(i).n_()&&i.N_.size>0}function zg(i){return xn(i).L_.size===0}function $F(i){i.Q_=void 0}async function dW(i){i.q_.set("Online")}async function hW(i){i.N_.forEach((e,t)=>{GN(i,e)})}async function fW(i,e){$F(i),KN(i)?(i.q_.M_(e),YN(i)):i.q_.set("Unknown")}async function pW(i,e,t){if(i.q_.set("Online"),e instanceof IF&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.N_.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.N_.delete(l),r.Q_.removeTarget(l))}(i,e)}catch(n){Ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await yA(i,n)}else if(e instanceof Fw?i.Q_.Ke(e):e instanceof kF?i.Q_.He(e):i.Q_.We(e),!t.isEqual(bn.min()))try{const n=await BF(i.localStore);t.compareTo(n)>=0&&await function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(ea.EMPTY_BYTE_STRING,f.snapshotVersion)),qF(s,u);const p=new mp(f.target,u,d,f.sequenceNumber);GN(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(i,t)}catch(n){Ot("RemoteStore","Failed to raise snapshot:",n),await yA(i,n)}}async function yA(i,e,t){if(!x2(e))throw e;i.L_.add(1),await S2(i),i.q_.set("Offline"),t||(t=()=>BF(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Ot("RemoteStore","Retrying IndexedDB access"),await t(),i.L_.delete(1),await v5(i)})}function HF(i,e){return e().catch(t=>yA(i,t,e))}async function b5(i){const e=xn(i),t=kp(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;mW(e);)try{const r=await JK(e.localStore,n);if(r===null){e.O_.length===0&&t.o_();break}n=r.batchId,gW(e,r)}catch(r){await yA(e,r)}GF(e)&&YF(e)}function mW(i){return zg(i)&&i.O_.length<10}function gW(i,e){i.O_.push(e);const t=kp(i);t.r_()&&t.V_&&t.m_(e.mutations)}function GF(i){return zg(i)&&!kp(i).n_()&&i.O_.length>0}function YF(i){kp(i).start()}async function yW(i){kp(i).p_()}async function vW(i){const e=kp(i);for(const t of i.O_)e.m_(t.mutations)}async function bW(i,e,t){const n=i.O_.shift(),r=BN.from(n,e,t);await HF(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),await b5(i)}async function _W(i,e){e&&kp(i).V_&&await async function(n,r){if(function(a){return lK(a)&&a!==tt.ABORTED}(r.code)){const s=n.O_.shift();kp(n).s_(),await HF(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await b5(n)}}(i,e),GF(i)&&YF(i)}async function Y4(i,e){const t=xn(i);t.asyncQueue.verifyOperationInProgress(),Ot("RemoteStore","RemoteStore received new credentials");const n=zg(t);t.L_.add(3),await S2(t),n&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await v5(t)}async function xW(i,e){const t=xn(i);e?(t.L_.delete(2),await v5(t)):e||(t.L_.add(2),await S2(t),t.q_.set("Unknown"))}function Rv(i){return i.K_||(i.K_=function(t,n,r){const s=xn(t);return s.w_(),new aW(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Eo:dW.bind(null,i),Ro:hW.bind(null,i),mo:fW.bind(null,i),d_:pW.bind(null,i)}),i.B_.push(async e=>{e?(i.K_.s_(),KN(i)?YN(i):i.q_.set("Unknown")):(await i.K_.stop(),$F(i))})),i.K_}function kp(i){return i.U_||(i.U_=function(t,n,r){const s=xn(t);return s.w_(),new oW(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:yW.bind(null,i),mo:_W.bind(null,i),f_:vW.bind(null,i),g_:bW.bind(null,i)}),i.B_.push(async e=>{e?(i.U_.s_(),await b5(i)):(await i.U_.stop(),i.O_.length>0&&(Ot("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))})),i.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Th,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const a=Date.now()+n,l=new WN(e,t,a,r,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(tt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function QN(i,e){if(Rh("AsyncQueue",`${e}: ${i}`),x2(i))return new Et(tt.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ht.comparator(t.key,n.key):(t,n)=>Ht.comparator(t.key,n.key),this.keyedMap=nb(),this.sortedSet=new dr(this.comparator)}static emptySet(e){return new ey(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ey)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ey;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.W_=new dr(Ht.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(t,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(t):e.type===1&&n.type===2?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):hn():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class vv{constructor(e,t,n,r,s,a,l,u,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,r,s){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new vv(e,t,ey.emptySet(t),a,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&d5(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class AW{constructor(){this.queries=W4(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,n){const r=xn(t),s=r.queries;r.queries=W4(),s.forEach((a,l)=>{for(const u of l.j_)u.onError(n)})})(this,new Et(tt.ABORTED,"Firestore shutting down"))}}function W4(){return new Iv(i=>gF(i),d5)}async function KF(i,e){const t=xn(i);let n=3;const r=e.query;let s=t.queries.get(r);s?!s.H_()&&e.J_()&&(n=2):(s=new wW,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await t.onListen(r,!0);break;case 1:s.z_=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(a){const l=QN(a,`Initialization of query '${M0(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&XN(t)}async function WF(i,e){const t=xn(i),n=e.query;let r=3;const s=t.queries.get(n);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function SW(i,e){const t=xn(i);let n=!1;for(const r of e){const s=r.query,a=t.queries.get(s);if(a){for(const l of a.j_)l.X_(r)&&(n=!0);a.z_=r}}n&&XN(t)}function TW(i,e,t){const n=xn(i),r=n.queries.get(e);if(r)for(const s of r.j_)s.onError(t);n.queries.delete(e)}function XN(i){i.Y_.forEach(e=>{e.next()})}var IC,Q4;(Q4=IC||(IC={})).ea="default",Q4.Cache="cache";class QF{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new vv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const n=t!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=vv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==IC.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.key=e}}class JF{constructor(e){this.key=e}}class EW{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Bn(),this.mutatedKeys=Bn(),this.Aa=yF(e),this.Ra=new ey(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new K4,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,p)=>{const y=r.get(f),v=h5(this.query,p)?p:null,C=!!y&&this.mutatedKeys.has(y.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let R=!1;y&&v?y.data.isEqual(v.data)?C!==E&&(n.track({type:3,doc:v}),R=!0):this.ga(y,v)||(n.track({type:2,doc:v}),R=!0,(u&&this.Aa(v,u)>0||d&&this.Aa(v,d)<0)&&(l=!0)):!y&&v?(n.track({type:0,doc:v}),R=!0):y&&!v&&(n.track({type:1,doc:y}),R=!0,(u||d)&&(l=!0)),R&&(v?(a=a.add(v),s=E?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),n.track({type:1,doc:f})}return{Ra:a,fa:n,ns:l,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,p)=>function(v,C){const E=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hn()}};return E(v)-E(C)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(n),r=r!=null&&r;const l=t&&!r?this.ya():[],u=this.da.size===0&&this.current&&!r?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new vv(this.query,e.Ra,s,a,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new K4,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Bn(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const t=[];return e.forEach(n=>{this.da.has(n)||t.push(new JF(n))}),this.da.forEach(n=>{e.has(n)||t.push(new XF(n))}),t}ba(e){this.Ta=e.Ts,this.da=Bn();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return vv.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class CW{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class NW{constructor(e){this.key=e,this.va=!1}}class kW{constructor(e,t,n,r,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Iv(l=>gF(l),d5),this.Ma=new Map,this.xa=new Set,this.Oa=new dr(Ht.comparator),this.Na=new Map,this.La=new jN,this.Ba={},this.ka=new Map,this.qa=yv.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function IW(i,e,t=!0){const n=r8(i);let r;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await ZF(n,e,t,!0),r}async function RW(i,e){const t=r8(i);await ZF(t,e,!0,!1)}async function ZF(i,e,t,n){const r=await ZK(i.localStore,Zc(e)),s=r.targetId,a=i.sharedClientState.addLocalQueryTarget(s,t);let l;return n&&(l=await LW(i,e,s,a==="current",r.resumeToken)),i.isPrimaryClient&&t&&jF(i.remoteStore,r),l}async function LW(i,e,t,n,r){i.Ka=(p,y,v)=>async function(E,R,I,D){let j=R.view.ma(I);j.ns&&(j=await $4(E.localStore,R.query,!1).then(({documents:U})=>R.view.ma(U,j)));const X=D&&D.targetChanges.get(R.targetId),W=D&&D.targetMismatches.get(R.targetId)!=null,ue=R.view.applyChanges(j,E.isPrimaryClient,X,W);return J4(E,R.targetId,ue.wa),ue.snapshot}(i,p,y,v);const s=await $4(i.localStore,e,!0),a=new EW(e,s.Ts),l=a.ma(s.documents),u=A2.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",r),d=a.applyChanges(l,i.isPrimaryClient,u);J4(i,t,d.wa);const f=new CW(e,t,a);return i.Fa.set(e,f),i.Ma.has(t)?i.Ma.get(t).push(e):i.Ma.set(t,[e]),d.snapshot}async function PW(i,e,t){const n=xn(i),r=n.Fa.get(e),s=n.Ma.get(r.targetId);if(s.length>1)return n.Ma.set(r.targetId,s.filter(a=>!d5(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await kC(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),t&&HN(n.remoteStore,r.targetId),RC(n,r.targetId)}).catch(_2)):(RC(n,r.targetId),await kC(n.localStore,r.targetId,!0))}async function MW(i,e){const t=xn(i),n=t.Fa.get(e),r=t.Ma.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),HN(t.remoteStore,n.targetId))}async function DW(i,e,t){const n=jW(i);try{const r=await function(a,l){const u=xn(a),d=Ar.now(),f=l.reduce((v,C)=>v.add(C.key),Bn());let p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=Lh(),E=Bn();return u.cs.getEntries(v,f).next(R=>{C=R,C.forEach((I,D)=>{D.isValidDocument()||(E=E.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,C)).next(R=>{p=R;const I=[];for(const D of l){const j=iK(D,p.get(D.key).overlayedDocument);j!=null&&I.push(new Op(D.key,j,lF(j.value.mapValue),cl.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,I,l)}).next(R=>{y=R;const I=R.applyToLocalDocumentSet(p,E);return u.documentOverlayCache.saveOverlays(v,R.batchId,I)})}).then(()=>({batchId:y.batchId,changes:bF(p)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new dr(ai)),d=d.insert(l,u),a.Ba[a.currentUser.toKey()]=d}(n,r.batchId,t),await T2(n,r.changes),await b5(n.remoteStore)}catch(r){const s=QN(r,"Failed to persist write");t.reject(s)}}async function e8(i,e){const t=xn(i);try{const n=await QK(t.localStore,e);e.targetChanges.forEach((r,s)=>{const a=t.Na.get(s);a&&(wi(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?wi(a.va):r.removedDocuments.size>0&&(wi(a.va),a.va=!1))}),await T2(t,n,e)}catch(n){await _2(n)}}function X4(i,e,t){const n=xn(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.Fa.forEach((s,a)=>{const l=a.view.Z_(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=xn(a);u.onlineState=l;let d=!1;u.queries.forEach((f,p)=>{for(const y of p.j_)y.Z_(l)&&(d=!0)}),d&&XN(u)}(n.eventManager,e),r.length&&n.Ca.d_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function OW(i,e,t){const n=xn(i);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.Na.get(e),s=r&&r.key;if(s){let a=new dr(Ht.comparator);a=a.insert(s,Ea.newNoDocument(s,bn.min()));const l=Bn().add(s),u=new g5(bn.min(),new Map,new dr(ai),a,l);await e8(n,u),n.Oa=n.Oa.remove(s),n.Na.delete(e),JN(n)}else await kC(n.localStore,e,!1).then(()=>RC(n,e,t)).catch(_2)}async function FW(i,e){const t=xn(i),n=e.batch.batchId;try{const r=await WK(t.localStore,e);n8(t,n,null),t8(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await T2(t,r)}catch(r){await _2(r)}}async function VW(i,e,t){const n=xn(i);try{const r=await function(a,l){const u=xn(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(wi(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(n.localStore,e);n8(n,e,t),t8(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await T2(n,r)}catch(r){await _2(r)}}function t8(i,e){(i.ka.get(e)||[]).forEach(t=>{t.resolve()}),i.ka.delete(e)}function n8(i,e,t){const n=xn(i);let r=n.Ba[n.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),n.Ba[n.currentUser.toKey()]=r}}function RC(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.Ma.get(e))i.Fa.delete(n),t&&i.Ca.$a(n,t);i.Ma.delete(e),i.isPrimaryClient&&i.La.gr(e).forEach(n=>{i.La.containsKey(n)||i8(i,n)})}function i8(i,e){i.xa.delete(e.path.canonicalString());const t=i.Oa.get(e);t!==null&&(HN(i.remoteStore,t),i.Oa=i.Oa.remove(e),i.Na.delete(t),JN(i))}function J4(i,e,t){for(const n of t)n instanceof XF?(i.La.addReference(n.key,e),BW(i,n)):n instanceof JF?(Ot("SyncEngine","Document no longer in limbo: "+n.key),i.La.removeReference(n.key,e),i.La.containsKey(n.key)||i8(i,n.key)):hn()}function BW(i,e){const t=e.key,n=t.path.canonicalString();i.Oa.get(t)||i.xa.has(n)||(Ot("SyncEngine","New document in limbo: "+t),i.xa.add(n),JN(i))}function JN(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){const e=i.xa.values().next().value;i.xa.delete(e);const t=new Ht(Ki.fromString(e)),n=i.qa.next();i.Na.set(n,new NW(t)),i.Oa=i.Oa.insert(t,n),jF(i.remoteStore,new mp(Zc(FN(t.path)),n,"TargetPurposeLimboResolution",RN.oe))}}async function T2(i,e,t){const n=xn(i),r=[],s=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((l,u)=>{a.push(n.Ka(u,e,t).then(d=>{var f;if((d||t)&&n.isPrimaryClient){const p=d?!d.fromCache:(f=t==null?void 0:t.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){r.push(d);const p=$N.Wi(u.targetId,d);s.push(p)}}))}),await Promise.all(a),n.Ca.d_(r),await async function(u,d){const f=xn(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>lt.forEach(d,y=>lt.forEach(y.$i,v=>f.persistence.referenceDelegate.addReference(p,y.targetId,v)).next(()=>lt.forEach(y.Ui,v=>f.persistence.referenceDelegate.removeReference(p,y.targetId,v)))))}catch(p){if(!x2(p))throw p;Ot("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const y=p.targetId;if(!p.fromCache){const v=f.os.get(y),C=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(C);f.os=f.os.insert(y,E)}}}(n.localStore,s))}async function UW(i,e){const t=xn(i);if(!t.currentUser.isEqual(e)){Ot("SyncEngine","User change. New user:",e.toKey());const n=await VF(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new Et(tt.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await T2(t,n.hs)}}function zW(i,e){const t=xn(i),n=t.Na.get(e);if(n&&n.va)return Bn().add(n.key);{let r=Bn();const s=t.Ma.get(e);if(!s)return r;for(const a of s){const l=t.Fa.get(a);r=r.unionWith(l.view.Va)}return r}}function r8(i){const e=xn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=e8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OW.bind(null,e),e.Ca.d_=SW.bind(null,e.eventManager),e.Ca.$a=TW.bind(null,e.eventManager),e}function jW(i){const e=xn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VW.bind(null,e),e}class vA{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=y5(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return KK(this.persistence,new GK,e.initialUser,this.serializer)}Ga(e){return new qK(qN.Zr,this.serializer)}Wa(e){return new tW}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vA.provider={build:()=>new vA};class LC{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>X4(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=UW.bind(null,this.syncEngine),await xW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new AW}()}createDatastore(e){const t=y5(e.databaseInfo.databaseId),n=function(s){return new sW(s)}(e.databaseInfo);return function(s,a,l,u){return new lW(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,r,s,a,l){return new cW(n,r,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,t=>X4(this.syncEngine,t,0),function(){return G4.D()?new G4:new nW}())}createSyncEngine(e,t){return function(r,s,a,l,u,d,f){const p=new kW(r,s,a,l,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const s=xn(r);Ot("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await S2(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}LC.provider={build:()=>new LC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Rh("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ta.UNAUTHENTICATED,this.clientId=sF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async a=>{Ot("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Ot("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Th;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=QN(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ST(i,e){i.asyncQueue.verifyOperationInProgress(),Ot("FirestoreClient","Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener(async r=>{n.isEqual(r)||(await VF(e.localStore,r),n=r)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Z4(i,e){i.asyncQueue.verifyOperationInProgress();const t=await $W(i);Ot("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(n=>Y4(e.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>Y4(e.remoteStore,r)),i._onlineComponents=e}async function $W(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ot("FirestoreClient","Using user provided OfflineComponentProvider");try{await ST(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===tt.FAILED_PRECONDITION||r.code===tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;fv("Error using user provided cache. Falling back to memory cache: "+t),await ST(i,new vA)}}else Ot("FirestoreClient","Using default OfflineComponentProvider"),await ST(i,new vA);return i._offlineComponents}async function a8(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ot("FirestoreClient","Using user provided OnlineComponentProvider"),await Z4(i,i._uninitializedComponentsProvider._online)):(Ot("FirestoreClient","Using default OnlineComponentProvider"),await Z4(i,new LC))),i._onlineComponents}function HW(i){return a8(i).then(e=>e.syncEngine)}async function o8(i){const e=await a8(i),t=e.eventManager;return t.onListen=IW.bind(null,e.syncEngine),t.onUnlisten=PW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MW.bind(null,e.syncEngine),t}function GW(i,e,t={}){const n=new Th;return i.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,d){const f=new s8({next:y=>{f.Za(),a.enqueueAndForget(()=>WF(s,p));const v=y.docs.has(l);!v&&y.fromCache?d.reject(new Et(tt.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&y.fromCache&&u&&u.source==="server"?d.reject(new Et(tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),p=new QF(FN(l.path),f,{includeMetadataChanges:!0,_a:!0});return KF(s,p)}(await o8(i),i.asyncQueue,e,t,n)),n.promise}function YW(i,e,t={}){const n=new Th;return i.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,d){const f=new s8({next:y=>{f.Za(),a.enqueueAndForget(()=>WF(s,p)),y.fromCache&&u.source==="server"?d.reject(new Et(tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),p=new QF(l,f,{includeMetadataChanges:!0,_a:!0});return KF(s,p)}(await o8(i),i.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(i,e,t){if(!t)throw new Et(tt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function KW(i,e,t,n){if(e===!0&&n===!0)throw new Et(tt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function tL(i){if(!Ht.isDocumentKey(i))throw new Et(tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function nL(i){if(Ht.isDocumentKey(i))throw new Et(tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function _5(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":hn()}function Ip(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Et(tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_5(i);throw new Et(tt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Et(tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Et(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l8((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Et(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Et(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Et(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class x5{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iL({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Et(tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iL(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new dY;switch(n.type){case"firstParty":return new mY(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Et(tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=eL.get(t);n&&(Ot("ComponentProvider","Removing Datastore"),eL.delete(t),n.terminate())}(this),Promise.resolve()}}function WW(i,e,t,n={}){var r;const s=(i=Ip(i,x5))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&fv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),n.mockUserToken){let l,u;if(typeof n.mockUserToken=="string")l=n.mockUserToken,u=Ta.MOCK_USER;else{l=xq(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new Et(tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ta(d)}i._authCredentials=new hY(new rF(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new jg(this.firestore,e,this._query)}}class dl{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _p(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dl(this.firestore,e,this._key)}}class _p extends jg{constructor(e,t,n){super(e,t,FN(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dl(this.firestore,null,new Ht(e))}withConverter(e){return new _p(this.firestore,e,this._path)}}function E2(i,e,...t){if(i=is(i),u8("collection","path",e),i instanceof x5){const n=Ki.fromString(e,...t);return nL(n),new _p(i,null,n)}{if(!(i instanceof dl||i instanceof _p))throw new Et(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Ki.fromString(e,...t));return nL(n),new _p(i.firestore,null,n)}}function qg(i,e,...t){if(i=is(i),arguments.length===1&&(e=sF.newId()),u8("doc","path",e),i instanceof x5){const n=Ki.fromString(e,...t);return tL(n),new dl(i,null,new Ht(n))}{if(!(i instanceof dl||i instanceof _p))throw new Et(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Ki.fromString(e,...t));return tL(n),new dl(i.firestore,i instanceof _p?i.converter:null,new Ht(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new UF(this,"async_queue_retry"),this.Vu=()=>{const n=AT();n&&Ot("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const t=AT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=AT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Th;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!x2(e))throw e;Ot("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(n);throw Rh("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.du=!1,n))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=WN.createAndSchedule(this,e,t,n,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&hn()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Lv extends x5{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new rL,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rL(e),this._firestoreClient=void 0,await e}}}function QW(i,e){const t=typeof i=="object"?i:mO(),n=typeof i=="string"?i:"(default)",r=_N(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=bq("firestore");s&&WW(r,...s)}return r}function w5(i){if(i._terminated)throw new Et(tt.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||XW(i),i._firestoreClient}function XW(i){var e,t,n;const r=i._freezeSettings(),s=function(l,u,d,f){return new NY(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,l8(f.experimentalLongPollingOptions),f.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,r);i._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),i._firestoreClient=new qW(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bv(ea.fromBase64String(e))}catch(t){throw new Et(tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bv(ea.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Et(tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ws(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Et(tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Et(tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ai(this._lat,e._lat)||ai(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JW=/^__.*__$/;class ZW{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Op(e,this.data,this.fieldMask,t,this.fieldTransforms):new w2(e,this.data,t,this.fieldTransforms)}}class c8{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Op(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function d8(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hn()}}class tk{constructor(e,t,n,r,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new tk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bA(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(d8(this.Cu)&&JW.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class eQ{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||y5(e)}Qu(e,t,n,r=!1){return new tk({Cu:e,methodName:t,qu:n,path:Ws.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nk(i){const e=i._freezeSettings(),t=y5(i._databaseId);return new eQ(i._databaseId,!!e.ignoreUndefinedProperties,t)}function h8(i,e,t,n,r,s={}){const a=i.Qu(s.merge||s.mergeFields?2:0,e,t,r);rk("Data must be an object, but it was:",a,n);const l=f8(n,a);let u,d;if(s.merge)u=new ul(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const y=PC(e,p,t);if(!a.contains(y))throw new Et(tt.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);m8(f,y)||f.push(y)}u=new ul(f),d=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=a.fieldTransforms;return new ZW(new _o(l),u,d)}class T5 extends S5{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T5}}class ik extends S5{_toFieldTransform(e){return new ZY(e.path,new kb)}isEqual(e){return e instanceof ik}}function tQ(i,e,t,n){const r=i.Qu(1,e,t);rk("Data must be an object, but it was:",r,n);const s=[],a=_o.empty();Ug(n,(u,d)=>{const f=sk(e,u,t);d=is(d);const p=r.Nu(f);if(d instanceof T5)s.push(f);else{const y=C2(d,p);y!=null&&(s.push(f),a.set(f,y))}});const l=new ul(s);return new c8(a,l,r.fieldTransforms)}function nQ(i,e,t,n,r,s){const a=i.Qu(1,e,t),l=[PC(e,n,t)],u=[r];if(s.length%2!=0)throw new Et(tt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)l.push(PC(e,s[y])),u.push(s[y+1]);const d=[],f=_o.empty();for(let y=l.length-1;y>=0;--y)if(!m8(d,l[y])){const v=l[y];let C=u[y];C=is(C);const E=a.Nu(v);if(C instanceof T5)d.push(v);else{const R=C2(C,E);R!=null&&(d.push(v),f.set(v,R))}}const p=new ul(d);return new c8(f,p,a.fieldTransforms)}function iQ(i,e,t,n=!1){return C2(t,i.Qu(n?4:3,e))}function C2(i,e){if(p8(i=is(i)))return rk("Unsupported field value:",e,i),f8(i,e);if(i instanceof S5)return function(n,r){if(!d8(r.Cu))throw r.Bu(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,r){const s=[];let a=0;for(const l of n){let u=C2(l,r.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(i,e)}return function(n,r){if((n=is(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return QY(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Ar.fromDate(n);return{timestampValue:gA(r.serializer,s)}}if(n instanceof Ar){const s=new Ar(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:gA(r.serializer,s)}}if(n instanceof ZN)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof bv)return{bytesValue:RF(r.serializer,n._byteString)};if(n instanceof dl){const s=r.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:zN(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof ek)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return VN(l.serializer,u)})}}}}}}(n,r);throw r.Bu(`Unsupported field value: ${_5(n)}`)}(i,e)}function f8(i,e){const t={};return aF(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ug(i,(n,r)=>{const s=C2(r,e.Mu(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function p8(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ar||i instanceof ZN||i instanceof bv||i instanceof dl||i instanceof S5||i instanceof ek)}function rk(i,e,t){if(!p8(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const n=_5(t);throw n==="an object"?e.Bu(i+" a custom object"):e.Bu(i+" "+n)}}function PC(i,e,t){if((e=is(e))instanceof A5)return e._internalPath;if(typeof e=="string")return sk(i,e);throw bA("Field path arguments must be of type string or ",i,!1,void 0,t)}const rQ=new RegExp("[~\\*/\\[\\]]");function sk(i,e,t){if(e.search(rQ)>=0)throw bA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new A5(...e.split("."))._internalPath}catch{throw bA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function bA(i,e,t,n,r){const s=n&&!n.isEmpty(),a=r!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${n}`),a&&(u+=` in document ${r}`),u+=")"),new Et(tt.INVALID_ARGUMENT,l+i+u)}function m8(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dl(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(E5("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sQ extends g8{data(){return super.data()}}function E5(i,e){return typeof e=="string"?sk(i,e):e instanceof A5?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aQ(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Et(tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ak{}class y8 extends ak{}function ok(i,e,...t){let n=[];e instanceof ak&&n.push(e),n=n.concat(t),function(s){const a=s.filter(u=>u instanceof uk).length,l=s.filter(u=>u instanceof C5).length;if(a>1||a>0&&l>0)throw new Et(tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const r of n)i=r._apply(i);return i}class C5 extends y8{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new C5(e,t,n)}_apply(e){const t=this._parse(e);return v8(e._query,t),new jg(e.firestore,e.converter,AC(e._query,t))}_parse(e){const t=nk(e.firestore);return function(s,a,l,u,d,f,p){let y;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Et(tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){aL(p,f);const v=[];for(const C of p)v.push(sL(u,s,C));y={arrayValue:{values:v}}}else y=sL(u,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||aL(p,f),y=iQ(l,a,p,f==="in"||f==="not-in");return ts.create(d,f,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function lk(i,e,t){const n=e,r=E5("where",i);return C5._create(r,n,t)}class uk extends ak{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uk(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:$u.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)v8(a,u),a=AC(a,u)}(e._query,t),new jg(e.firestore,e.converter,AC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ck extends y8{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ck(e,t)}_apply(e){const t=function(r,s,a){if(r.startAt!==null)throw new Et(tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Et(tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nb(s,a)}(e._query,this._field,this._direction);return new jg(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new kv(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function dk(i,e="asc"){const t=e,n=E5("orderBy",i);return ck._create(n,t)}function sL(i,e,t){if(typeof(t=is(t))=="string"){if(t==="")throw new Et(tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mF(e)&&t.indexOf("/")!==-1)throw new Et(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Ki.fromString(t));if(!Ht.isDocumentKey(n))throw new Et(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return C4(i,new Ht(n))}if(t instanceof dl)return C4(i,t._key);throw new Et(tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_5(t)}.`)}function aL(i,e){if(!Array.isArray(i)||i.length===0)throw new Et(tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function v8(i,e){const t=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(i.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Et(tt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Et(tt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class oQ{convertValue(e,t="none"){switch(Pg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Or(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw hn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ug(e,(r,s)=>{n[r]=this.convertValue(s,t)}),n}convertVectorValue(e){var t,n,r;const s=(r=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(a=>Or(a.doubleValue));return new ek(s)}convertGeoPoint(e){return new ZN(Or(e.latitude),Or(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=PN(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Tb(e));default:return null}}convertTimestamp(e){const t=Np(e);return new Ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ki.fromString(e);wi(FF(n));const r=new Eb(n.get(1),n.get(3)),s=new Ht(n.popFirst(5));return r.isEqual(t)||Rh(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(i,e,t){let n;return n=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _8 extends g8{constructor(e,t,n,r,s,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(E5("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Vw extends _8{data(e={}){return super.data(e)}}class lQ{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new rb(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Vw(this._firestore,this._userDataWriter,n.key,n,new rb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Et(tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new Vw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new rb(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Vw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new rb(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:uQ(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uQ(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(i){i=Ip(i,dl);const e=Ip(i.firestore,Lv);return GW(w5(e),i._key).then(t=>cQ(e,i,t))}class x8 extends oQ{constructor(e){super(),this.firestore=e}convertBytes(e){return new bv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dl(this.firestore,null,t)}}function hk(i){i=Ip(i,jg);const e=Ip(i.firestore,Lv),t=w5(e),n=new x8(e);return aQ(i._query),YW(t,i._query).then(r=>new lQ(e,n,i,r))}function fk(i){return pk(Ip(i.firestore,Lv),[new m5(i._key,cl.none())])}function w8(i,e){const t=Ip(i.firestore,Lv),n=qg(i),r=b8(i.converter,e);return pk(t,[h8(nk(i.firestore),"addDoc",n._key,r,i.converter!==null,{}).toMutation(n._key,cl.exists(!1))]).then(()=>n)}function pk(i,e){return function(n,r){const s=new Th;return n.asyncQueue.enqueueAndForget(async()=>DW(await HW(n),r,s)),s.promise}(w5(i),e)}function cQ(i,e,t){const n=t.docs.get(e._key),r=new x8(i);return new _8(i,r,e._key,n,new rb(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nk(e)}set(e,t,n){this._verifyNotCommitted();const r=TT(e,this._firestore),s=b8(r.converter,t,n),a=h8(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,n);return this._mutations.push(a.toMutation(r._key,cl.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const s=TT(e,this._firestore);let a;return a=typeof(t=is(t))=="string"||t instanceof A5?nQ(this._dataReader,"WriteBatch.update",s._key,t,n,r):tQ(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,cl.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=TT(e,this._firestore);return this._mutations=this._mutations.concat(new m5(t._key,cl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function TT(i,e){if((i=is(i)).firestore!==e)throw new Et(tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function Lb(){return new ik("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(i){return w5(i=Ip(i,Lv)),new dQ(i,e=>pk(i,e))}(function(e,t=!0){(function(r){Nv=r})(Ev),dv(new Ng("firestore",(n,{instanceIdentifier:r,options:s})=>{const a=n.getProvider("app").getImmediate(),l=new Lv(new fY(n.getProvider("auth-internal")),new yY(n.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Et(tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eb(d.options.projectId,f)}(a,r),a);return s=Object.assign({useFetchStreams:t},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),bp(w4,"4.7.3",e),bp(w4,"4.7.3","esm2017")})();const hQ={apiKey:"AIzaSyC_735vq8jM3ahjTzSOspNCG_yIlAEMhw0",authDomain:"ss-g-5e4d4.firebaseapp.com",projectId:"ss-g-5e4d4",storageBucket:"ss-g-5e4d4.firebasestorage.app",messagingSenderId:"1066930277028",appId:"1:1066930277028:web:29128a8dde4219f2857431",measurementId:"G-QM3K1N1KPY"},A8=pO(hQ),k2=oY(A8),wo=QW(A8),fQ=i=>WH(k2,e=>{if(e){const{uid:t,email:n,displayName:r}=e;i({uid:t,email:n,displayName:r})}else i(null)}),pQ=async(i,e)=>{const t=await $H(k2,i,e),{uid:n,email:r,displayName:s}=t.user;return{uid:n,email:r,displayName:s}},mQ=async(i,e,t)=>{const n=await qH(k2,i,e);t&&n.user&&await GH(n.user,{displayName:t});const{uid:r,email:s,displayName:a}=n.user;return{uid:r,email:s,displayName:a||t}},S8=async()=>{await QH(k2)},gQ=async i=>{await jH(k2,i)},yQ=({onLoginSuccess:i,navigateTo:e,setAuthLoading:t,setAuthError:n,theme:r})=>{const[s,a]=qe.useState(""),[l,u]=qe.useState(""),d=n5(r),f=async p=>{p.preventDefault(),t(!0),n(null);try{await pQ(s,l),i()}catch(y){console.error("Login failed:",y);let v="Giriş başarısız oldu. Lütfen bilgilerinizi kontrol edin.";y.code==="auth/user-not-found"||y.code==="auth/wrong-password"||y.code==="auth/invalid-credential"?v="E-posta veya şifre hatalı.":y.code==="auth/invalid-email"?v="Geçersiz e-posta formatı.":y.code==="auth/too-many-requests"&&(v="Çok fazla başarısız giriş denemesi. Lütfen daha sonra tekrar deneyin."),n(v)}finally{t(!1)}};return T.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 py-12 ${d.bg.tertiary}`,children:T.jsxs("div",{className:`w-full max-w-md p-8 rounded-xl shadow-2xl space-y-8 ${d.bg.card}`,children:[T.jsxs("div",{children:[T.jsx("div",{className:"flex justify-center mb-4",children:T.jsx("div",{className:"p-3 bg-gradient-to-tr from-purple-600 to-blue-500 rounded-lg",children:T.jsx("i",{className:"fas fa-brain text-4xl text-white"})})}),T.jsx("h2",{className:`text-center text-2xl sm:text-3xl font-extrabold ${r==="dark"?"text-white":"text-gray-900"}`,children:"QuizMaster'a Giriş Yapın"}),T.jsxs("p",{className:`mt-2 text-center text-sm ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:["Hesabınız yok mu?"," ",T.jsx("button",{onClick:()=>e("signup"),className:`font-medium ${r==="dark"?"text-primary-400 hover:text-primary-300":"text-primary-600 hover:text-primary-500"}`,children:"Kayıt Olun"})]})]}),T.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[T.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"E-posta Adresi"}),T.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-3 border rounded-t-md focus:outline-none focus:z-10 sm:text-sm ${r==="dark"?"border-secondary-600 placeholder-gray-400 text-white bg-secondary-700 focus:ring-primary-400 focus:border-primary-400":"border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"E-posta Adresi",value:s,onChange:p=>a(p.target.value)})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"password",className:"sr-only",children:"Şifre"}),T.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-3 border rounded-b-md focus:outline-none focus:z-10 sm:text-sm ${r==="dark"?"border-secondary-600 placeholder-gray-400 text-white bg-secondary-700 focus:ring-primary-400 focus:border-primary-400":"border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"Şifre",value:l,onChange:p=>u(p.target.value)})]})]}),T.jsx("div",{className:"flex items-center justify-between",children:T.jsx("div",{className:"text-sm",children:T.jsx("button",{onClick:()=>e("forgot_password"),type:"button",className:`font-medium ${r==="dark"?"text-primary-400 hover:text-primary-300":"text-primary-600 hover:text-primary-500"}`,children:"Şifrenizi mi unuttunuz?"})})}),T.jsx("div",{children:T.jsx("button",{type:"submit",className:`group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${r==="dark"?"bg-primary-500 hover:bg-primary-600 focus:ring-primary-500 focus:ring-offset-secondary-800":"bg-primary-600 hover:bg-primary-700 focus:ring-primary-500"}`,children:"Giriş Yap"})})]})]})})},vQ=({onSignupSuccess:i,navigateTo:e,setAuthLoading:t,setAuthError:n,theme:r})=>{const[s,a]=qe.useState(""),[l,u]=qe.useState(""),[d,f]=qe.useState(""),[p,y]=qe.useState(""),v=async E=>{if(E.preventDefault(),l!==d){n("Şifreler eşleşmiyor.");return}t(!0),n(null);try{await mQ(s,l,p),i()}catch(R){console.error("Signup failed:",R);let I="Kayıt başarısız oldu. Lütfen tekrar deneyin.";R.code==="auth/email-already-in-use"?I="Bu e-posta adresi zaten kullanımda.":R.code==="auth/invalid-email"?I="Geçersiz e-posta formatı.":R.code==="auth/weak-password"&&(I="Şifre çok zayıf. Lütfen en az 6 karakter kullanın."),n(I)}finally{t(!1)}},C=n5(r);return T.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 py-8 sm:py-12 ${C.bg.tertiary}`,children:T.jsxs("div",{className:`w-full max-w-md p-6 sm:p-8 rounded-xl shadow-2xl space-y-6 sm:space-y-8 ${C.bg.card}`,children:[T.jsxs("div",{children:[T.jsx("div",{className:"flex justify-center mb-4",children:T.jsx("div",{className:"p-3 bg-gradient-to-tr from-purple-600 to-blue-500 rounded-lg",children:T.jsx("i",{className:"fas fa-brain text-3xl sm:text-4xl text-white"})})}),T.jsx("h2",{className:`text-center text-2xl sm:text-3xl font-extrabold ${r==="dark"?"text-white":"text-gray-900"}`,children:"Yeni Hesap Oluşturun"}),T.jsxs("p",{className:`mt-2 text-center text-sm ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:["Zaten hesabınız var mı?"," ",T.jsx("button",{onClick:()=>e("login"),className:`font-medium touch-target ${r==="dark"?"text-primary-400 hover:text-primary-300":"text-primary-600 hover:text-primary-500"}`,children:"Giriş Yapın"})]})]}),T.jsxs("form",{className:"mt-6 sm:mt-8 space-y-6",onSubmit:v,children:[T.jsxs("div",{className:"rounded-md shadow-sm space-y-0",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"Görünen Ad (İsteğe Bağlı)"}),T.jsx("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",className:`appearance-none rounded-none relative block w-full px-3 py-3 sm:py-3 border ${r==="dark"?"border-secondary-600 placeholder-gray-400 text-white bg-secondary-700 focus:ring-primary-400 focus:border-primary-400":"border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:ring-primary-500 focus:border-primary-500"} rounded-t-md focus:outline-none focus:z-10 text-base sm:text-sm touch-target`,placeholder:"Görünen Ad (İsteğe Bağlı)",value:p,onChange:E=>y(E.target.value)})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"email-address-signup",className:"sr-only",children:"E-posta Adresi"}),T.jsx("input",{id:"email-address-signup",name:"email",type:"email",autoComplete:"email",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-3 sm:py-3 border-t-0 border ${r==="dark"?"border-secondary-600 placeholder-gray-400 text-white bg-secondary-700 focus:ring-primary-400 focus:border-primary-400":"border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:ring-primary-500 focus:border-primary-500"} focus:outline-none focus:z-10 text-base sm:text-sm touch-target`,placeholder:"E-posta Adresi",value:s,onChange:E=>a(E.target.value)})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"password-signup",className:"sr-only",children:"Şifre"}),T.jsx("input",{id:"password-signup",name:"password",type:"password",autoComplete:"new-password",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-3 sm:py-3 border-t-0 border ${r==="dark"?"border-secondary-600 placeholder-gray-400 text-white bg-secondary-700 focus:ring-primary-400 focus:border-primary-400":"border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:ring-primary-500 focus:border-primary-500"} focus:outline-none focus:z-10 text-base sm:text-sm touch-target`,placeholder:"Şifre (en az 6 karakter)",value:l,onChange:E=>u(E.target.value)})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"confirm-password-signup",className:"sr-only",children:"Şifreyi Onayla"}),T.jsx("input",{id:"confirm-password-signup",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-3 sm:py-3 border-t-0 border ${r==="dark"?"border-secondary-600 placeholder-gray-400 text-white bg-secondary-700 focus:ring-primary-400 focus:border-primary-400":"border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:ring-primary-500 focus:border-primary-500"} rounded-b-md focus:outline-none focus:z-10 text-base sm:text-sm touch-target`,placeholder:"Şifreyi Onayla",value:d,onChange:E=>f(E.target.value)})]})]}),T.jsx("div",{children:T.jsx("button",{type:"submit",className:`group relative w-full flex justify-center py-3 px-4 border border-transparent text-base sm:text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 touch-target ${r==="dark"?"bg-primary-500 hover:bg-primary-600 focus:ring-primary-500 focus:ring-offset-secondary-800":"bg-primary-600 hover:bg-primary-700 focus:ring-primary-500"}`,children:"Kayıt Ol"})})]})]})})},bQ=({navigateTo:i,setAuthLoading:e,setAuthMessage:t,theme:n})=>{const[r,s]=qe.useState(""),a=async l=>{l.preventDefault(),e(!0),t(null);try{await gQ(r),t({type:"success",text:"Şifre sıfırlama e-postası gönderildi. Lütfen gelen kutunuzu kontrol edin."})}catch(u){console.error("Password reset failed:",u);let d="Şifre sıfırlama e-postası gönderilemedi.";u.code==="auth/user-not-found"?d="Bu e-posta adresi ile kayıtlı bir kullanıcı bulunamadı.":u.code==="auth/invalid-email"&&(d="Geçersiz e-posta formatı."),t({type:"error",text:d})}finally{e(!1)}};return T.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 py-8 sm:py-12 ${n==="dark"?"bg-secondary-900":"bg-gray-100"}`,children:T.jsxs("div",{className:`w-full max-w-md p-6 sm:p-8 rounded-xl shadow-2xl space-y-6 sm:space-y-8 ${n==="dark"?"bg-secondary-800":"bg-white"}`,children:[T.jsxs("div",{children:[T.jsx("div",{className:"flex justify-center mb-4",children:T.jsx("div",{className:"p-3 bg-gradient-to-tr from-purple-600 to-blue-500 rounded-lg",children:T.jsx("i",{className:"fas fa-brain text-3xl sm:text-4xl text-white"})})}),T.jsx("h2",{className:`text-center text-2xl sm:text-3xl font-extrabold ${n==="dark"?"text-white":"text-gray-900"}`,children:"Şifrenizi mi Unuttunuz?"}),T.jsx("p",{className:`mt-2 text-center text-sm ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:"Şifrenizi sıfırlamak için kayıtlı e-posta adresinizi girin."})]}),T.jsxs("form",{className:"mt-6 sm:mt-8 space-y-6",onSubmit:a,children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"email-address-reset",className:"sr-only",children:"E-posta Adresi"}),T.jsx("input",{id:"email-address-reset",name:"email",type:"email",autoComplete:"email",required:!0,className:`appearance-none rounded-md relative block w-full px-3 py-3 border text-base sm:text-sm focus:outline-none focus:z-10 touch-target ${n==="dark"?"border-secondary-600 placeholder-gray-400 text-white bg-secondary-700 focus:ring-primary-400 focus:border-primary-400":"border-gray-300 placeholder-gray-500 text-gray-900 bg-white focus:ring-primary-500 focus:border-primary-500"}`,placeholder:"E-posta Adresi",value:r,onChange:l=>s(l.target.value)})]}),T.jsx("div",{children:T.jsx("button",{type:"submit",className:`group relative w-full flex justify-center py-3 px-4 border border-transparent text-base sm:text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 touch-target ${n==="dark"?"bg-primary-500 hover:bg-primary-600 focus:ring-primary-500 focus:ring-offset-secondary-800":"bg-primary-600 hover:bg-primary-700 focus:ring-primary-500"}`,children:"Sıfırlama Bağlantısı Gönder"})})]}),T.jsx("div",{className:"text-sm text-center",children:T.jsx("button",{onClick:()=>i("login"),className:`font-medium touch-target ${n==="dark"?"text-primary-400 hover:text-primary-300":"text-primary-600 hover:text-primary-500"}`,children:"Giriş sayfasına dön"})})]})})},_Q=({currentUser:i,onLogout:e,onBack:t,setAuthLoading:n,setAuthError:r,theme:s})=>{const[a,l]=qe.useState(!1),u=async()=>{l(!0),n(!0),r(null);try{await S8(),e()}catch(f){console.error("Logout failed:",f),r("Çıkış yapılamadı. Lütfen tekrar deneyin.")}finally{n(!1),l(!1)}},d=(f,p)=>{if(f){const y=f.split(" ");return y.length>1?`${y[0][0]}${y[y.length-1][0]}`.toUpperCase():f.substring(0,2).toUpperCase()}return p?p.substring(0,2).toUpperCase():"U"};return i?T.jsxs("div",{className:"min-h-full max-w-4xl mx-auto p-4 sm:p-6 space-y-4 sm:space-y-6",children:[T.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[T.jsxs("div",{className:"flex-grow",children:[T.jsx("h1",{className:`text-2xl sm:text-3xl font-bold ${s==="dark"?"text-white":"text-gray-900"}`,children:"Profilim"}),T.jsx("p",{className:`mt-1 text-sm sm:text-base ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Hesap bilgilerinizi görüntüleyin ve yönetin"})]}),t&&T.jsxs("button",{onClick:t,className:`inline-flex items-center px-3 sm:px-4 py-2 transition-colors self-start sm:self-auto text-sm sm:text-base touch-target ${s==="dark"?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[T.jsx("i",{className:"fas fa-arrow-left mr-1 sm:mr-2"}),"Geri"]})]}),T.jsxs("div",{className:`rounded-2xl shadow-xl border overflow-hidden ${s==="dark"?"bg-secondary-800 border-secondary-700":"bg-white border-gray-200"}`,children:[T.jsxs("div",{className:"bg-gradient-to-r from-primary-500 via-purple-500 to-pink-500 px-4 sm:px-8 py-8 sm:py-12 text-center",children:[T.jsxs("div",{className:"relative inline-block",children:[T.jsx("div",{className:"w-20 sm:w-24 h-20 sm:h-24 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-white text-xl sm:text-2xl font-bold shadow-lg",children:d(i.displayName,i.email)}),T.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 sm:w-6 h-5 sm:h-6 bg-green-400 border-2 sm:border-3 border-white rounded-full"})]}),T.jsx("h2",{className:"mt-3 sm:mt-4 text-xl sm:text-2xl font-bold text-white",children:i.displayName||"Kullanıcı"}),T.jsx("p",{className:"text-white/80 text-xs sm:text-sm mt-1",children:"Aktif"})]}),T.jsxs("div",{className:"p-4 sm:p-8 space-y-4 sm:space-y-6",children:[T.jsxs("div",{children:[T.jsxs("h3",{className:`text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center ${s==="dark"?"text-white":"text-gray-900"}`,children:[T.jsx("i",{className:"fas fa-user mr-2 text-primary-500"}),"Kişisel Bilgiler"]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[T.jsxs("div",{className:"space-y-1.5 sm:space-y-1",children:[T.jsx("label",{className:`text-xs sm:text-sm font-medium ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Görünen Ad"}),T.jsx("div",{className:`p-3 rounded-lg ${s==="dark"?"bg-secondary-700":"bg-gray-50"}`,children:T.jsx("p",{className:`text-sm sm:text-base ${s==="dark"?"text-white":"text-gray-900"}`,children:i.displayName||"Belirtilmemiş"})})]}),T.jsxs("div",{className:"space-y-1.5 sm:space-y-1",children:[T.jsx("label",{className:`text-xs sm:text-sm font-medium ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"E-posta Adresi"}),T.jsx("div",{className:`p-3 rounded-lg ${s==="dark"?"bg-secondary-700":"bg-gray-50"}`,children:T.jsx("p",{className:`text-sm sm:text-base break-all ${s==="dark"?"text-white":"text-gray-900"}`,children:i.email})})]})]})]}),T.jsx("div",{className:`pt-4 sm:pt-6 border-t ${s==="dark"?"border-secondary-700":"border-gray-200"}`,children:T.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[T.jsxs("button",{disabled:!0,className:`flex-1 inline-flex items-center justify-center px-4 sm:px-6 py-3 rounded-lg font-medium cursor-not-allowed text-sm sm:text-base touch-target ${s==="dark"?"bg-secondary-700 text-gray-500":"bg-gray-100 text-gray-400"}`,children:[T.jsx("i",{className:"fas fa-edit mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Profili Düzenle (Yakında)"}),T.jsx("span",{className:"sm:hidden",children:"Düzenle (Yakında)"})]}),T.jsx("button",{onClick:u,disabled:a,className:`inline-flex items-center justify-center px-4 sm:px-6 py-3 font-medium rounded-lg transition-all duration-200 text-sm sm:text-base touch-target ${a?"bg-gray-400 cursor-not-allowed":"bg-red-500 hover:bg-red-600 hover:shadow-lg"} text-white`,children:a?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Çıkış Yapılıyor..."}),T.jsx("span",{className:"sm:hidden",children:"Çıkış..."})]}):T.jsxs(T.Fragment,{children:[T.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),T.jsx("span",{className:"hidden sm:inline",children:"Oturumu Kapat"}),T.jsx("span",{className:"sm:hidden",children:"Çıkış"})]})})]})})]})]})]}):T.jsx("div",{className:"min-h-full flex flex-col items-center justify-center p-4 sm:p-8",children:T.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[T.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto ${s==="dark"?"bg-red-900/30":"bg-red-100"}`,children:T.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-xl"})}),T.jsx("h2",{className:`text-lg sm:text-xl font-semibold ${s==="dark"?"text-white":"text-gray-900"}`,children:"Kullanıcı Bulunamadı"}),T.jsx("p",{className:`text-sm sm:text-base ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Kullanıcı bilgileri yüklenemedi veya oturum açılmamış."}),t&&T.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors touch-target",children:[T.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Ana Sayfaya Dön"]})]})})},oL="aiQuizAppSettings",xQ=i=>{const[e,t]=qe.useState(null),[n,r]=qe.useState(!0);qe.useEffect(()=>{if(!i)return;r(!0);const a=i.appSettingsDefaults,l={defaultTimerEnabled:a.defaultTimerEnabled,secondsPerQuestion:a.secondsPerQuestion,numOptionsPerQuestion:a.numOptionsPerQuestion,theme:a.theme==="light"||a.theme==="dark"?a.theme:"light"};let u={...l};try{const d=localStorage.getItem(oL);if(d){const f=JSON.parse(d);u={defaultTimerEnabled:typeof f.defaultTimerEnabled=="boolean"?f.defaultTimerEnabled:l.defaultTimerEnabled,secondsPerQuestion:typeof f.secondsPerQuestion=="number"&&f.secondsPerQuestion>0?f.secondsPerQuestion:l.secondsPerQuestion,numOptionsPerQuestion:typeof f.numOptionsPerQuestion=="number"&&f.numOptionsPerQuestion>=2?f.numOptionsPerQuestion:l.numOptionsPerQuestion,theme:f.theme==="light"||f.theme==="dark"?f.theme:l.theme}}}catch(d){console.error("Error loading app settings from localStorage:",d)}t(u),r(!1)},[i]),qe.useEffect(()=>{if(!e)return;const a=document.documentElement;e.theme==="light"?(a.classList.remove("dark"),a.style.setProperty("--scrollbar-track-color","#e2e8f0"),a.style.setProperty("--scrollbar-thumb-color","#94a3b8"),a.style.setProperty("--scrollbar-thumb-hover-color","#64748b")):(a.classList.add("dark"),a.style.setProperty("--scrollbar-track-color","#334155"),a.style.setProperty("--scrollbar-thumb-color","#64748b"),a.style.setProperty("--scrollbar-thumb-hover-color","#94a3b8"))},[e==null?void 0:e.theme]);const s=qe.useCallback(a=>{if(!i||!e)return;const l={defaultTimerEnabled:typeof a.defaultTimerEnabled=="boolean"?a.defaultTimerEnabled:e.defaultTimerEnabled,secondsPerQuestion:typeof a.secondsPerQuestion=="number"&&a.secondsPerQuestion>=10&&a.secondsPerQuestion<=600?a.secondsPerQuestion:e.secondsPerQuestion,numOptionsPerQuestion:typeof a.numOptionsPerQuestion=="number"&&a.numOptionsPerQuestion>=2&&a.numOptionsPerQuestion<=6?a.numOptionsPerQuestion:e.numOptionsPerQuestion,theme:a.theme==="light"||a.theme==="dark"?a.theme:e.theme};t(l);try{localStorage.setItem(oL,JSON.stringify(l))}catch(u){console.error("Error saving app settings to localStorage:",u)}},[e,i]);return{appSettings:e,updateAppSettings:s,isLoading:n,theme:e==null?void 0:e.theme}},N5="quizzes",k5="learningObjectives",gk="courses",I5=i=>{const e={...i};return e.createdAt instanceof Ar&&(e.createdAt=e.createdAt.toMillis()),e.updatedAt instanceof Ar&&(e.updatedAt=e.updatedAt.toMillis()),e.savedAt instanceof Ar&&(e.savedAt=e.savedAt.toMillis()),e},T8=async i=>{const e=await N2(i);return e.exists()?I5({id:e.id,...e.data()}):null},wQ=async(i,e)=>{if(i.courseId===void 0)throw console.error("addQuizToDB called with undefined courseId.",i),new Error("Course ID is undefined. Cannot save quiz.");const t=await w8(E2(wo,N5),{...i,userId:e,savedAt:Lb()});return T8(t)},Gx=async i=>{const e=ok(E2(wo,N5),lk("userId","==",i),dk("savedAt","desc"));return(await hk(e)).docs.map(n=>I5({id:n.id,...n.data()}))},AQ=async(i,e)=>{const t=qg(wo,N5,i),n=await N2(t);if(n.exists()&&n.data().userId===e)await fk(t);else throw new Error("Quiz not found or permission denied.")},SQ=async(i,e)=>{if(i.length===0)return;const t=mk(wo);i.forEach(n=>{if(n.userId!==e){console.warn(`Skipping quiz update for ${n.id} as it does not belong to user ${e}`);return}const r=qg(wo,N5,n.id),{id:s,...a}=n;t.update(r,{...a,updatedAt:Lb()})}),await t.commit()},TQ=async(i,e)=>{if(i.length===0)return;const t=mk(wo);i.forEach(n=>{if(n.userId!==e){console.warn(`Skipping LO update for ${n.id} as it does not belong to user ${e}`);return}const r=qg(wo,k5,n.id),{id:s,...a}=n,l={...a,userId:e,updatedAt:Lb()};typeof n.createdAt!="number"&&(l.createdAt=Lb()),t.set(r,l,{merge:!0})}),await t.commit()},I1=async i=>{const e=ok(E2(wo,k5),lk("userId","==",i),dk("updatedAt","desc"));return(await hk(e)).docs.map(n=>I5({id:n.id,...n.data()}))},EQ=async(i,e)=>{try{const t=qg(wo,k5,i),n=await N2(t);if(!n.exists())return!1;if(n.data().userId!==e)throw new Error("Bu hedefi silme yetkiniz yok.");return await fk(t),!0}catch(t){throw console.error("Error deleting learning objective:",t),t}},CQ=async(i,e)=>{try{if(i.length===0)return!0;const t=mk(wo);for(const n of i){const r=qg(wo,k5,n),s=await N2(r);if(s.exists())if(s.data().userId===e)t.delete(r);else throw new Error(`Hedef "${n}" için silme yetkiniz yok.`)}return await t.commit(),!0}catch(t){throw console.error("Error deleting learning objectives in batch:",t),t}},NQ=async(i,e)=>{const t=await w8(E2(wo,gk),{...i,userId:e,createdAt:Lb()});return T8(t)},kQ=async i=>{const e=ok(E2(wo,gk),lk("userId","==",i),dk("createdAt","desc"));return(await hk(e)).docs.map(n=>I5({id:n.id,...n.data()}))},IQ=async(i,e)=>{const t=qg(wo,gk,i),n=await N2(t);if(n.exists()&&n.data().userId===e)await fk(t);else throw new Error("Course not found or permission denied.")},RQ=(i,e,t)=>{const[n,r]=qe.useState([]),[s,a]=qe.useState(null),[l,u]=qe.useState([]),[d,f]=qe.useState([]),[p,y]=qe.useState([]),[v,C]=qe.useState(null),[E,R]=qe.useState(!0),I=qe.useCallback(async()=>{if(!i){r([]),u([]),y([]),f([]),R(!1);return}R(!0);try{const[F,B,H]=await Promise.all([Gx(i.uid),I1(i.uid),kQ(i.uid)]);r(F),u(B),y(H)}catch(F){console.error("Başlangıç verileri Firestore'dan yüklenirken hata:",F),e(F,!0)}finally{R(!1)}},[i,e]);qe.useEffect(()=>{I()},[I]);const D=qe.useCallback(()=>{if(!t||!i||E)return;const F=n,B=l,H=p,fe=[{userId:i.uid,id:"ach1",title:"İlk Adım",description:"İlk sınavınızı başarıyla tamamladınız!",icon:"fas fa-flag-checkered",isUnlocked:F.length>0,unlockedDate:F.length>0?Date.now():void 0,category:"Sınavlar"},{userId:i.uid,id:"ach2",title:"Kitap Kurdu",description:"Bir PDF'ten sınav oluşturdunuz.",icon:"fas fa-book-reader",isUnlocked:F.some(Q=>Q.pdfName),unlockedDate:F.some(Q=>Q.pdfName)?Date.now():void 0,category:"Sınavlar"},{userId:i.uid,id:"ach3",title:"Yüksek Skorer",description:"Bir sınavda %90 veya üzeri başarı elde ettiniz.",icon:"fas fa-star",isUnlocked:F.some(Q=>Q.totalQuestions>0&&Q.score/Q.totalQuestions*100>=90),unlockedDate:F.some(Q=>Q.totalQuestions>0&&Q.score/Q.totalQuestions*100>=90)?Date.now():void 0,category:"Performans"},{userId:i.uid,id:"ach4",title:"Kişisel Yolculuk",description:"İlk kişiselleştirilmiş sınavınızı oluşturdunuz.",icon:"fas fa-user-graduate",isUnlocked:F.some(Q=>Q.quizType==="Kişiselleştirilmiş Sınav"),unlockedDate:F.some(Q=>Q.quizType==="Kişiselleştirilmiş Sınav")?Date.now():void 0,category:"Sınavlar"},{userId:i.uid,id:"ach5",title:"Hedef Avcısı",description:'Bir öğrenme hedefini "Başarılı" statüsüne getirdiniz.',icon:"fas fa-bullseye-arrow",isUnlocked:B.some(Q=>Q.status==="success"),unlockedDate:B.some(Q=>Q.status==="success")?Date.now():void 0,category:"Öğrenme"},{userId:i.uid,id:"ach6",title:"Sınav Maratoncusu",description:"Toplam 5 sınav tamamladınız.",icon:"fas fa-running",isUnlocked:F.length>=5,unlockedDate:F.length>=5?Date.now():void 0,category:"Sınavlar",progress:{current:Math.min(F.length,5),target:5}},{userId:i.uid,id:"ach7",title:"Ders Kaşifi",description:"İlk dersinizi oluşturdunuz.",icon:"fas fa-chalkboard-teacher",isUnlocked:H.length>0,unlockedDate:H.length>0?Date.now():void 0,category:"Öğrenme"}];f(fe)},[n,l,p,t,i,E]);qe.useEffect(()=>{D()},[D]);const j=qe.useCallback(async F=>{if(!i){e("Yeni ders oluşturmak için giriş yapmalısınız.");return}if(!F.trim()){e("Ders adı boş olamaz.");return}const B={name:F.trim()};try{const H=await NQ(B,i.uid);return H&&y(fe=>[H,...fe].sort((Q,ce)=>ce.createdAt-Q.createdAt)),H}catch(H){e(H,!0);return}},[i,e]),X=qe.useCallback(async F=>{if(!(!i||F.length===0))try{await SQ(F.map(H=>({...H,userId:i.uid})),i.uid);const B=await Gx(i.uid);r(B)}catch(B){e(B,!0)}},[i,e]),W=qe.useCallback(async F=>{if(!(!i||F.length===0))try{await TQ(F.map(H=>({...H,userId:i.uid})),i.uid);const B=await I1(i.uid);u(B)}catch(B){console.error("Öğrenme hedefleri Firestore'da güncellenirken hata:",B),e(`Öğrenme hedefleri güncellenemedi: ${B.message}`,!0)}},[i,e]),ue=qe.useCallback(async F=>{if(!i){e("Ders silmek için giriş yapmalısınız.");return}if(window.confirm("Bu dersi silmek istediğinize emin misiniz? Bu dersle ilişkili sınavlar ve öğrenme hedefleri artık bu dersle ilişkilendirilmeyecektir (ancak veriler silinmeyecektir).")){R(!0);try{const H=(await Gx(i.uid)).filter(Te=>Te.courseId===F).map(Te=>({...Te,courseId:void 0,courseName:void 0,userId:i.uid}));H.length>0&&await X(H);const Q=(await I1(i.uid)).filter(Te=>Te.courseId===F).map(Te=>({...Te,courseId:void 0,courseName:void 0,userId:i.uid}));Q.length>0&&await W(Q),await IQ(F,i.uid),y(Te=>Te.filter(re=>re.id!==F));const ce=await Gx(i.uid);r(ce);const ge=await I1(i.uid);u(ge)}catch(B){e(B,!0)}finally{R(!1)}}},[i,e,X,W]),U=qe.useCallback(async(F,B,H,fe,Q,ce,ge,Te,re,xe)=>{if(!i)return e("Sınav sonuçlarını kaydetmek için giriş yapmalısınız."),!1;const q=F.reduce((ye,Ae)=>B[Ae.id]===Ae.correctAnswerIndex?ye+1:ye,0),ee=ce?p.find(ye=>ye.id===ce):void 0,he={questions:F,userAnswers:B,score:q,totalQuestions:F.length,quizType:fe==="personalized"?"Kişiselleştirilmiş Sınav":"Hızlı Sınav",courseId:(ee==null?void 0:ee.id)||"default-course",courseName:(ee==null?void 0:ee.name)||"Genel",difficulty:ge,isTimerEnabled:Te,...H&&{pdfName:H},...fe==="personalized"&&Q&&{personalizedQuizType:Q}};let me;Te?me={...he,totalTimeAllocated:re*xe}:me=he;try{const ye=await wQ(me,i.uid);return ye&&ye.id&&typeof ye.savedAt=="number"?(r(Ae=>Ae.find(Me=>Me.id===ye.id)?Ae.map(Me=>Me.id===ye.id?ye:Me).sort((Me,nt)=>nt.savedAt-Me.savedAt):[ye,...Ae].sort((Me,nt)=>nt.savedAt-Me.savedAt)),!0):(console.error("Sınav kaydedildikten sonra Firestore'dan alınırken bir sorun oluştu veya eksik veri döndü.",ye),e(new Error("Sınav kaydedildi ancak veriler tam olarak alınamadı. Liste güncellenmemiş olabilir."),!0),!1)}catch(ye){return console.error("Sınav sonucu Firestore'a kaydedilirken hata:",ye),e(new Error(`Sınav sonuçları kaydedilemedi: ${ye.message}`),!0),!1}},[i,e,p]),P=qe.useCallback(async F=>{if(!i){e("Sınav silmek için giriş yapmalısınız.");return}if(window.confirm("Bu sınav sonucunu kalıcı olarak silmek istediğinize emin misiniz?"))try{await AQ(F,i.uid),r(B=>B.filter(H=>H.id!==F))}catch(B){e(new Error(`Sınav Firestore'dan silinirken bir hata oluştu: ${B.message}`),!0)}},[i,e]),V=qe.useCallback(()=>{a(null),C(null)},[]),Y=qe.useCallback(async F=>{if(!i)return e("Öğrenme hedeflerini silmek için giriş yapmalısınız."),!1;if(F.length===0)return!0;R(!0);try{F.length===1?await EQ(F[0],i.uid):await CQ(F,i.uid);const B=await I1(i.uid);return u(B),!0}catch(B){return console.error("Öğrenme hedefleri silinirken hata:",B),e(B,!0),!1}finally{R(!1)}},[i,e]),O=qe.useCallback(async F=>Y([F]),[Y]);return{allSavedQuizzes:n,learningObjectives:l,allCourses:p,achievements:d,selectedQuizForViewing:s,currentViewingCourseForLO:v,isLoadingData:E,loadInitialData:I,addCourse:j,deleteCourse:ue,saveQuizResult:U,viewQuizFromList:a,deleteQuizFromList:P,addOrUpdateLOs:W,deleteLearningObjectives:Y,deleteSingleLearningObjective:O,updateMultipleQuizzes:X,resetPersistentDataSelectionState:V,setSelectedQuizForViewingState:a,setCurrentViewingCourseForLOState:C}};var oi;(function(i){i.assertEqual=r=>{};function e(r){}i.assertIs=e;function t(r){throw new Error}i.assertNever=t,i.arrayToEnum=r=>{const s={};for(const a of r)s[a]=a;return s},i.getValidEnumValues=r=>{const s=i.objectKeys(r).filter(l=>typeof r[r[l]]!="number"),a={};for(const l of s)a[l]=r[l];return i.objectValues(a)},i.objectValues=r=>i.objectKeys(r).map(function(s){return r[s]}),i.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&s.push(a);return s},i.find=(r,s)=>{for(const a of r)if(s(a))return a},i.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function n(r,s=" | "){return r.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}i.joinValues=n,i.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(oi||(oi={}));var lL;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(lL||(lL={}));const Mt=oi.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Tf=i=>{switch(typeof i){case"undefined":return Mt.undefined;case"string":return Mt.string;case"number":return Number.isNaN(i)?Mt.nan:Mt.number;case"boolean":return Mt.boolean;case"function":return Mt.function;case"bigint":return Mt.bigint;case"symbol":return Mt.symbol;case"object":return Array.isArray(i)?Mt.array:i===null?Mt.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?Mt.promise:typeof Map<"u"&&i instanceof Map?Mt.map:typeof Set<"u"&&i instanceof Set?Mt.set:typeof Date<"u"&&i instanceof Date?Mt.date:Mt.object;default:return Mt.unknown}},ft=oi.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ph extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(s){return s.message},n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(r);else if(a.code==="invalid_return_type")r(a.returnTypeError);else if(a.code==="invalid_arguments")r(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let l=n,u=0;for(;u<a.path.length;){const d=a.path[u];u===a.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(t(a))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return r(this),n}static assert(e){if(!(e instanceof Ph))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,oi.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Ph.create=i=>new Ph(i);const MC=(i,e)=>{let t;switch(i.code){case ft.invalid_type:i.received===Mt.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case ft.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,oi.jsonStringifyReplacer)}`;break;case ft.unrecognized_keys:t=`Unrecognized key(s) in object: ${oi.joinValues(i.keys,", ")}`;break;case ft.invalid_union:t="Invalid input";break;case ft.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${oi.joinValues(i.options)}`;break;case ft.invalid_enum_value:t=`Invalid enum value. Expected ${oi.joinValues(i.options)}, received '${i.received}'`;break;case ft.invalid_arguments:t="Invalid function arguments";break;case ft.invalid_return_type:t="Invalid function return type";break;case ft.invalid_date:t="Invalid date";break;case ft.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:oi.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case ft.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case ft.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case ft.custom:t="Invalid input";break;case ft.invalid_intersection_types:t="Intersection results could not be merged";break;case ft.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case ft.not_finite:t="Number must be finite";break;default:t=e.defaultError,oi.assertNever(i)}return{message:t}};let LQ=MC;function PQ(){return LQ}const MQ=i=>{const{data:e,path:t,errorMaps:n,issueData:r}=i,s=[...t,...r.path||[]],a={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let l="";const u=n.filter(d=>!!d).slice().reverse();for(const d of u)l=d(a,{data:e,defaultError:l}).message;return{...r,path:s,message:l}};function Tt(i,e){const t=PQ(),n=MQ({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===MC?void 0:MC].filter(r=>!!r)});i.common.issues.push(n)}class Ka{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if(r.status==="aborted")return mn;r.status==="dirty"&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const s=await r.key,a=await r.value;n.push({key:s,value:a})}return Ka.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:s,value:a}=r;if(s.status==="aborted"||a.status==="aborted")return mn;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||r.alwaysSet)&&(n[s.value]=a.value)}return{status:e.value,value:n}}}const mn=Object.freeze({status:"aborted"}),sb=i=>({status:"dirty",value:i}),Yl=i=>({status:"valid",value:i}),uL=i=>i.status==="aborted",cL=i=>i.status==="dirty",_v=i=>i.status==="valid",_A=i=>typeof Promise<"u"&&i instanceof Promise;var Ft;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ft||(Ft={}));class rd{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const dL=(i,e)=>{if(_v(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ph(i.common.issues);return this._error=t,this._error}}};function Cn(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:r}=i;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(a,l)=>{const{message:u}=i;return a.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:u??t??l.defaultError}},description:r}}class $n{get description(){return this._def.description}_getType(e){return Tf(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Tf(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ka,ctx:{common:e.parent.common,data:e.data,parsedType:Tf(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(_A(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tf(e)},r=this._parseSync({data:e,path:n.path,parent:n});return dL(n,r)}"~validate"(e){var n,r;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tf(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:t});return _v(s)?{value:s.value}:{issues:t.common.issues}}catch(s){(r=(n=s==null?void 0:s.message)==null?void 0:n.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(s=>_v(s)?{value:s.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tf(e)},r=this._parse({data:e,path:n.path,parent:n}),s=await(_A(r)?r:Promise.resolve(r));return dL(n,s)}refine(e,t){const n=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,s)=>{const a=e(r),l=()=>s.addIssue({code:ft.custom,...n(r)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,t){return this._refinement((n,r)=>e(n)?!0:(r.addIssue(typeof t=="function"?t(n,r):t),!1))}_refinement(e){return new Av({schema:this,typeName:fn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return xp.create(this,this._def)}nullable(){return Sv.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return td.create(this)}promise(){return TA.create(this,this._def)}or(e){return wA.create([this,e],this._def)}and(e){return AA.create(this,e,this._def)}transform(e){return new Av({...Cn(this._def),schema:this,typeName:fn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new VC({...Cn(this._def),innerType:this,defaultValue:t,typeName:fn.ZodDefault})}brand(){return new iX({typeName:fn.ZodBranded,type:this,...Cn(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new BC({...Cn(this._def),innerType:this,catchValue:t,typeName:fn.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return yk.create(this,e)}readonly(){return UC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const DQ=/^c[^\s-]{8,}$/i,OQ=/^[0-9a-z]+$/,FQ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,VQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,BQ=/^[a-z0-9_-]{21}$/i,UQ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,zQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,jQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,qQ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ET;const $Q=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,HQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,GQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,YQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,KQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,WQ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,E8="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",QQ=new RegExp(`^${E8}$`);function C8(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function XQ(i){return new RegExp(`^${C8(i)}$`)}function JQ(i){let e=`${E8}T${C8(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ZQ(i,e){return!!((e==="v4"||!e)&&$Q.test(i)||(e==="v6"||!e)&&GQ.test(i))}function eX(i,e){if(!UQ.test(i))return!1;try{const[t]=i.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(n));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function tX(i,e){return!!((e==="v4"||!e)&&HQ.test(i)||(e==="v6"||!e)&&YQ.test(i))}class Yc extends $n{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Mt.string){const s=this._getOrReturnCtx(e);return Tt(s,{code:ft.invalid_type,expected:Mt.string,received:s.parsedType}),mn}const n=new Ka;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),Tt(r,{code:ft.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),Tt(r,{code:ft.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,l=e.data.length<s.value;(a||l)&&(r=this._getOrReturnCtx(e,r),a?Tt(r,{code:ft.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&Tt(r,{code:ft.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")jQ.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"email",code:ft.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")ET||(ET=new RegExp(qQ,"u")),ET.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"emoji",code:ft.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")VQ.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"uuid",code:ft.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")BQ.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"nanoid",code:ft.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")DQ.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"cuid",code:ft.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")OQ.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"cuid2",code:ft.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")FQ.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"ulid",code:ft.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),Tt(r,{validation:"url",code:ft.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"regex",code:ft.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),Tt(r,{code:ft.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),Tt(r,{code:ft.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),Tt(r,{code:ft.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?JQ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{code:ft.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?QQ.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{code:ft.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?XQ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{code:ft.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?zQ.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"duration",code:ft.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?ZQ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"ip",code:ft.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?eX(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"jwt",code:ft.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?tX(e.data,s.version)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"cidr",code:ft.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?KQ.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"base64",code:ft.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?WQ.test(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{validation:"base64url",code:ft.invalid_string,message:s.message}),n.dirty()):oi.assertNever(s);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(r=>e.test(r),{validation:t,code:ft.invalid_string,...Ft.errToObj(n)})}_addCheck(e){return new Yc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ft.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ft.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ft.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ft.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ft.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ft.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ft.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ft.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ft.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ft.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ft.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ft.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ft.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ft.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ft.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ft.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ft.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ft.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ft.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ft.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ft.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ft.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ft.errToObj(t)})}nonempty(e){return this.min(1,Ft.errToObj(e))}trim(){return new Yc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Yc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Yc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Yc.create=i=>new Yc({checks:[],typeName:fn.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...Cn(i)});function nX(i,e){const t=(i.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,r=t>n?t:n,s=Number.parseInt(i.toFixed(r).replace(".","")),a=Number.parseInt(e.toFixed(r).replace(".",""));return s%a/10**r}class Mg extends $n{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Mt.number){const s=this._getOrReturnCtx(e);return Tt(s,{code:ft.invalid_type,expected:Mt.number,received:s.parsedType}),mn}let n;const r=new Ka;for(const s of this._def.checks)s.kind==="int"?oi.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Tt(n,{code:ft.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Tt(n,{code:ft.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Tt(n,{code:ft.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?nX(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),Tt(n,{code:ft.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Tt(n,{code:ft.not_finite,message:s.message}),r.dirty()):oi.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ft.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ft.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ft.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ft.toString(t))}setLimit(e,t,n,r){return new Mg({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ft.toString(r)}]})}_addCheck(e){return new Mg({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ft.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ft.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ft.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ft.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ft.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ft.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&oi.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Mg.create=i=>new Mg({checks:[],typeName:fn.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...Cn(i)});class Dg extends $n{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Mt.bigint)return this._getInvalidInput(e);let n;const r=new Ka;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Tt(n,{code:ft.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Tt(n,{code:ft.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Tt(n,{code:ft.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):oi.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Tt(t,{code:ft.invalid_type,expected:Mt.bigint,received:t.parsedType}),mn}gte(e,t){return this.setLimit("min",e,!0,Ft.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ft.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ft.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ft.toString(t))}setLimit(e,t,n,r){return new Dg({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ft.toString(r)}]})}_addCheck(e){return new Dg({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ft.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ft.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Dg.create=i=>new Dg({checks:[],typeName:fn.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...Cn(i)});class xA extends $n{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Mt.boolean){const n=this._getOrReturnCtx(e);return Tt(n,{code:ft.invalid_type,expected:Mt.boolean,received:n.parsedType}),mn}return Yl(e.data)}}xA.create=i=>new xA({typeName:fn.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...Cn(i)});class xv extends $n{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Mt.date){const s=this._getOrReturnCtx(e);return Tt(s,{code:ft.invalid_type,expected:Mt.date,received:s.parsedType}),mn}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Tt(s,{code:ft.invalid_date}),mn}const n=new Ka;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),Tt(r,{code:ft.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),Tt(r,{code:ft.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):oi.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new xv({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ft.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ft.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}xv.create=i=>new xv({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:fn.ZodDate,...Cn(i)});class hL extends $n{_parse(e){if(this._getType(e)!==Mt.symbol){const n=this._getOrReturnCtx(e);return Tt(n,{code:ft.invalid_type,expected:Mt.symbol,received:n.parsedType}),mn}return Yl(e.data)}}hL.create=i=>new hL({typeName:fn.ZodSymbol,...Cn(i)});class fL extends $n{_parse(e){if(this._getType(e)!==Mt.undefined){const n=this._getOrReturnCtx(e);return Tt(n,{code:ft.invalid_type,expected:Mt.undefined,received:n.parsedType}),mn}return Yl(e.data)}}fL.create=i=>new fL({typeName:fn.ZodUndefined,...Cn(i)});class pL extends $n{_parse(e){if(this._getType(e)!==Mt.null){const n=this._getOrReturnCtx(e);return Tt(n,{code:ft.invalid_type,expected:Mt.null,received:n.parsedType}),mn}return Yl(e.data)}}pL.create=i=>new pL({typeName:fn.ZodNull,...Cn(i)});class mL extends $n{constructor(){super(...arguments),this._any=!0}_parse(e){return Yl(e.data)}}mL.create=i=>new mL({typeName:fn.ZodAny,...Cn(i)});class DC extends $n{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Yl(e.data)}}DC.create=i=>new DC({typeName:fn.ZodUnknown,...Cn(i)});class Rp extends $n{_parse(e){const t=this._getOrReturnCtx(e);return Tt(t,{code:ft.invalid_type,expected:Mt.never,received:t.parsedType}),mn}}Rp.create=i=>new Rp({typeName:fn.ZodNever,...Cn(i)});class gL extends $n{_parse(e){if(this._getType(e)!==Mt.undefined){const n=this._getOrReturnCtx(e);return Tt(n,{code:ft.invalid_type,expected:Mt.void,received:n.parsedType}),mn}return Yl(e.data)}}gL.create=i=>new gL({typeName:fn.ZodVoid,...Cn(i)});class td extends $n{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==Mt.array)return Tt(t,{code:ft.invalid_type,expected:Mt.array,received:t.parsedType}),mn;if(r.exactLength!==null){const a=t.data.length>r.exactLength.value,l=t.data.length<r.exactLength.value;(a||l)&&(Tt(t,{code:a?ft.too_big:ft.too_small,minimum:l?r.exactLength.value:void 0,maximum:a?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(Tt(t,{code:ft.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(Tt(t,{code:ft.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((a,l)=>r.type._parseAsync(new rd(t,a,t.path,l)))).then(a=>Ka.mergeArray(n,a));const s=[...t.data].map((a,l)=>r.type._parseSync(new rd(t,a,t.path,l)));return Ka.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new td({...this._def,minLength:{value:e,message:Ft.toString(t)}})}max(e,t){return new td({...this._def,maxLength:{value:e,message:Ft.toString(t)}})}length(e,t){return new td({...this._def,exactLength:{value:e,message:Ft.toString(t)}})}nonempty(e){return this.min(1,e)}}td.create=(i,e)=>new td({type:i,minLength:null,maxLength:null,exactLength:null,typeName:fn.ZodArray,...Cn(e)});function F0(i){if(i instanceof Xr){const e={};for(const t in i.shape){const n=i.shape[t];e[t]=xp.create(F0(n))}return new Xr({...i._def,shape:()=>e})}else return i instanceof td?new td({...i._def,type:F0(i.element)}):i instanceof xp?xp.create(F0(i.unwrap())):i instanceof Sv?Sv.create(F0(i.unwrap())):i instanceof Og?Og.create(i.items.map(e=>F0(e))):i}class Xr extends $n{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=oi.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Mt.object){const d=this._getOrReturnCtx(e);return Tt(d,{code:ft.invalid_type,expected:Mt.object,received:d.parsedType}),mn}const{status:n,ctx:r}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Rp&&this._def.unknownKeys==="strip"))for(const d in r.data)a.includes(d)||l.push(d);const u=[];for(const d of a){const f=s[d],p=r.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new rd(r,p,r.path,d)),alwaysSet:d in r.data})}if(this._def.catchall instanceof Rp){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of l)u.push({key:{status:"valid",value:f},value:{status:"valid",value:r.data[f]}});else if(d==="strict")l.length>0&&(Tt(r,{code:ft.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of l){const p=r.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new rd(r,p,r.path,f)),alwaysSet:f in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of u){const p=await f.key,y=await f.value;d.push({key:p,value:y,alwaysSet:f.alwaysSet})}return d}).then(d=>Ka.mergeObjectSync(n,d)):Ka.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return Ft.errToObj,new Xr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,a;const r=((a=(s=this._def).errorMap)==null?void 0:a.call(s,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:Ft.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new Xr({...this._def,unknownKeys:"strip"})}passthrough(){return new Xr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Xr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Xr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fn.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Xr({...this._def,catchall:e})}pick(e){const t={};for(const n of oi.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new Xr({...this._def,shape:()=>t})}omit(e){const t={};for(const n of oi.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new Xr({...this._def,shape:()=>t})}deepPartial(){return F0(this)}partial(e){const t={};for(const n of oi.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new Xr({...this._def,shape:()=>t})}required(e){const t={};for(const n of oi.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof xp;)s=s._def.innerType;t[n]=s}return new Xr({...this._def,shape:()=>t})}keyof(){return N8(oi.objectKeys(this.shape))}}Xr.create=(i,e)=>new Xr({shape:()=>i,unknownKeys:"strip",catchall:Rp.create(),typeName:fn.ZodObject,...Cn(e)});Xr.strictCreate=(i,e)=>new Xr({shape:()=>i,unknownKeys:"strict",catchall:Rp.create(),typeName:fn.ZodObject,...Cn(e)});Xr.lazycreate=(i,e)=>new Xr({shape:i,unknownKeys:"strip",catchall:Rp.create(),typeName:fn.ZodObject,...Cn(e)});class wA extends $n{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function r(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const a=s.map(l=>new Ph(l.ctx.common.issues));return Tt(t,{code:ft.invalid_union,unionErrors:a}),mn}if(t.common.async)return Promise.all(n.map(async s=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(r);{let s;const a=[];for(const u of n){const d={...t,common:{...t.common,issues:[]},parent:null},f=u._parseSync({data:t.data,path:t.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!s&&(s={result:f,ctx:d}),d.common.issues.length&&a.push(d.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const l=a.map(u=>new Ph(u));return Tt(t,{code:ft.invalid_union,unionErrors:l}),mn}}get options(){return this._def.options}}wA.create=(i,e)=>new wA({options:i,typeName:fn.ZodUnion,...Cn(e)});function OC(i,e){const t=Tf(i),n=Tf(e);if(i===e)return{valid:!0,data:i};if(t===Mt.object&&n===Mt.object){const r=oi.objectKeys(e),s=oi.objectKeys(i).filter(l=>r.indexOf(l)!==-1),a={...i,...e};for(const l of s){const u=OC(i[l],e[l]);if(!u.valid)return{valid:!1};a[l]=u.data}return{valid:!0,data:a}}else if(t===Mt.array&&n===Mt.array){if(i.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<i.length;s++){const a=i[s],l=e[s],u=OC(a,l);if(!u.valid)return{valid:!1};r.push(u.data)}return{valid:!0,data:r}}else return t===Mt.date&&n===Mt.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class AA extends $n{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(s,a)=>{if(uL(s)||uL(a))return mn;const l=OC(s.value,a.value);return l.valid?((cL(s)||cL(a))&&t.dirty(),{status:t.value,value:l.data}):(Tt(n,{code:ft.invalid_intersection_types}),mn)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>r(s,a)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}AA.create=(i,e,t)=>new AA({left:i,right:e,typeName:fn.ZodIntersection,...Cn(t)});class Og extends $n{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Mt.array)return Tt(n,{code:ft.invalid_type,expected:Mt.array,received:n.parsedType}),mn;if(n.data.length<this._def.items.length)return Tt(n,{code:ft.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mn;!this._def.rest&&n.data.length>this._def.items.length&&(Tt(n,{code:ft.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...n.data].map((a,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new rd(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>Ka.mergeArray(t,a)):Ka.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Og({...this._def,rest:e})}}Og.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Og({items:i,typeName:fn.ZodTuple,rest:null,...Cn(e)})};class SA extends $n{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Mt.object)return Tt(n,{code:ft.invalid_type,expected:Mt.object,received:n.parsedType}),mn;const r=[],s=this._def.keyType,a=this._def.valueType;for(const l in n.data)r.push({key:s._parse(new rd(n,l,n.path,l)),value:a._parse(new rd(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Ka.mergeObjectAsync(t,r):Ka.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof $n?new SA({keyType:e,valueType:t,typeName:fn.ZodRecord,...Cn(n)}):new SA({keyType:Yc.create(),valueType:e,typeName:fn.ZodRecord,...Cn(t)})}}class yL extends $n{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Mt.map)return Tt(n,{code:ft.invalid_type,expected:Mt.map,received:n.parsedType}),mn;const r=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([l,u],d)=>({key:r._parse(new rd(n,l,n.path,[d,"key"])),value:s._parse(new rd(n,u,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of a){const d=await u.key,f=await u.value;if(d.status==="aborted"||f.status==="aborted")return mn;(d.status==="dirty"||f.status==="dirty")&&t.dirty(),l.set(d.value,f.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const u of a){const d=u.key,f=u.value;if(d.status==="aborted"||f.status==="aborted")return mn;(d.status==="dirty"||f.status==="dirty")&&t.dirty(),l.set(d.value,f.value)}return{status:t.value,value:l}}}}yL.create=(i,e,t)=>new yL({valueType:e,keyType:i,typeName:fn.ZodMap,...Cn(t)});class Pb extends $n{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Mt.set)return Tt(n,{code:ft.invalid_type,expected:Mt.set,received:n.parsedType}),mn;const r=this._def;r.minSize!==null&&n.data.size<r.minSize.value&&(Tt(n,{code:ft.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&n.data.size>r.maxSize.value&&(Tt(n,{code:ft.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const s=this._def.valueType;function a(u){const d=new Set;for(const f of u){if(f.status==="aborted")return mn;f.status==="dirty"&&t.dirty(),d.add(f.value)}return{status:t.value,value:d}}const l=[...n.data.values()].map((u,d)=>s._parse(new rd(n,u,n.path,d)));return n.common.async?Promise.all(l).then(u=>a(u)):a(l)}min(e,t){return new Pb({...this._def,minSize:{value:e,message:Ft.toString(t)}})}max(e,t){return new Pb({...this._def,maxSize:{value:e,message:Ft.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Pb.create=(i,e)=>new Pb({valueType:i,minSize:null,maxSize:null,typeName:fn.ZodSet,...Cn(e)});class FC extends $n{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}FC.create=(i,e)=>new FC({getter:i,typeName:fn.ZodLazy,...Cn(e)});class vL extends $n{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Tt(t,{received:t.data,code:ft.invalid_literal,expected:this._def.value}),mn}return{status:"valid",value:e.data}}get value(){return this._def.value}}vL.create=(i,e)=>new vL({value:i,typeName:fn.ZodLiteral,...Cn(e)});function N8(i,e){return new wv({values:i,typeName:fn.ZodEnum,...Cn(e)})}class wv extends $n{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return Tt(t,{expected:oi.joinValues(n),received:t.parsedType,code:ft.invalid_type}),mn}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Tt(t,{received:t.data,code:ft.invalid_enum_value,options:n}),mn}return Yl(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return wv.create(e,{...this._def,...t})}exclude(e,t=this._def){return wv.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}wv.create=N8;class bL extends $n{_parse(e){const t=oi.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Mt.string&&n.parsedType!==Mt.number){const r=oi.objectValues(t);return Tt(n,{expected:oi.joinValues(r),received:n.parsedType,code:ft.invalid_type}),mn}if(this._cache||(this._cache=new Set(oi.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=oi.objectValues(t);return Tt(n,{received:n.data,code:ft.invalid_enum_value,options:r}),mn}return Yl(e.data)}get enum(){return this._def.values}}bL.create=(i,e)=>new bL({values:i,typeName:fn.ZodNativeEnum,...Cn(e)});class TA extends $n{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Mt.promise&&t.common.async===!1)return Tt(t,{code:ft.invalid_type,expected:Mt.promise,received:t.parsedType}),mn;const n=t.parsedType===Mt.promise?t.data:Promise.resolve(t.data);return Yl(n.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}TA.create=(i,e)=>new TA({type:i,typeName:fn.ZodPromise,...Cn(e)});class Av extends $n{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:a=>{Tt(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const a=r.transform(n.data,s);if(n.common.async)return Promise.resolve(a).then(async l=>{if(t.value==="aborted")return mn;const u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?mn:u.status==="dirty"||t.value==="dirty"?sb(u.value):u});{if(t.value==="aborted")return mn;const l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?mn:l.status==="dirty"||t.value==="dirty"?sb(l.value):l}}if(r.type==="refinement"){const a=l=>{const u=r.refinement(l,s);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?mn:(l.status==="dirty"&&t.dirty(),a(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?mn:(l.status==="dirty"&&t.dirty(),a(l.value).then(()=>({status:t.value,value:l.value}))))}if(r.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!_v(a))return mn;const l=r.transform(a.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>_v(a)?Promise.resolve(r.transform(a.value,s)).then(l=>({status:t.value,value:l})):mn);oi.assertNever(r)}}Av.create=(i,e,t)=>new Av({schema:i,typeName:fn.ZodEffects,effect:e,...Cn(t)});Av.createWithPreprocess=(i,e,t)=>new Av({schema:e,effect:{type:"preprocess",transform:i},typeName:fn.ZodEffects,...Cn(t)});class xp extends $n{_parse(e){return this._getType(e)===Mt.undefined?Yl(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}xp.create=(i,e)=>new xp({innerType:i,typeName:fn.ZodOptional,...Cn(e)});class Sv extends $n{_parse(e){return this._getType(e)===Mt.null?Yl(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Sv.create=(i,e)=>new Sv({innerType:i,typeName:fn.ZodNullable,...Cn(e)});class VC extends $n{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Mt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}VC.create=(i,e)=>new VC({innerType:i,typeName:fn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Cn(e)});class BC extends $n{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return _A(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ph(n.common.issues)},input:n.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Ph(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}BC.create=(i,e)=>new BC({innerType:i,typeName:fn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Cn(e)});class _L extends $n{_parse(e){if(this._getType(e)!==Mt.nan){const n=this._getOrReturnCtx(e);return Tt(n,{code:ft.invalid_type,expected:Mt.nan,received:n.parsedType}),mn}return{status:"valid",value:e.data}}}_L.create=i=>new _L({typeName:fn.ZodNaN,...Cn(i)});class iX extends $n{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class yk extends $n{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?mn:s.status==="dirty"?(t.dirty(),sb(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const r=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?mn:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:n.path,parent:n})}}static create(e,t){return new yk({in:e,out:t,typeName:fn.ZodPipeline})}}class UC extends $n{_parse(e){const t=this._def.innerType._parse(e),n=r=>(_v(r)&&(r.value=Object.freeze(r.value)),r);return _A(t)?t.then(r=>n(r)):n(t)}unwrap(){return this._def.innerType}}UC.create=(i,e)=>new UC({innerType:i,typeName:fn.ZodReadonly,...Cn(e)});var fn;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(fn||(fn={}));const am=Yc.create,xL=Mg.create;Dg.create;const rX=xA.create;xv.create;const wL=DC.create;Rp.create;const ab=td.create,sX=Xr.create,aX=wA.create;AA.create;Og.create;const oX=SA.create,lX=FC.create,uX=wv.create;TA.create;xp.create;Sv.create;const w0={string:i=>Yc.create({...i,coerce:!0}),number:i=>Mg.create({...i,coerce:!0}),boolean:i=>xA.create({...i,coerce:!0}),bigint:i=>Dg.create({...i,coerce:!0}),date:i=>xv.create({...i,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let cX,dX;function hX(){return{geminiUrl:cX,vertexUrl:dX}}function fX(i,e,t){var n,r,s;if(!(!((n=i.httpOptions)===null||n===void 0)&&n.baseUrl)){const a=hX();return i.vertexai?(r=a.vertexUrl)!==null&&r!==void 0?r:e:(s=a.geminiUrl)!==null&&s!==void 0?s:t}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pv{}function sn(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(n,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function _(i,e,t){for(let s=0;s<e.length-1;s++){const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(!(l in i))if(Array.isArray(t))i[l]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(i[l])){const u=i[l];if(Array.isArray(t))for(let d=0;d<u.length;d++){const f=u[d];_(f,e.slice(s+1),t[d])}else for(const d of u)_(d,e.slice(s+1),t)}return}else if(a.endsWith("[0]")){const l=a.slice(0,-3);l in i||(i[l]=[{}]);const u=i[l];_(u[0],e.slice(s+1),t);return}(!i[a]||typeof i[a]!="object")&&(i[a]={}),i=i[a]}const n=e[e.length-1],r=i[n];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else i[n]=t}function b(i,e){try{if(e.length===1&&e[0]==="_self")return i;for(let t=0;t<e.length;t++){if(typeof i!="object"||i===null)return;const n=e[t];if(n.endsWith("[]")){const r=n.slice(0,-2);if(r in i){const s=i[r];return Array.isArray(s)?s.map(a=>b(a,e.slice(t+1))):void 0}else return}else i=i[n]}return i}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var AL;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(AL||(AL={}));var SL;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(SL||(SL={}));var Kc;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Kc||(Kc={}));var TL;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(TL||(TL={}));var EL;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(EL||(EL={}));var CL;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(CL||(CL={}));var NL;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(NL||(NL={}));var kL;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(kL||(kL={}));var IL;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(IL||(IL={}));var RL;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(RL||(RL={}));var LL;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(LL||(LL={}));var PL;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(PL||(PL={}));var ML;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ML||(ML={}));var EA;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(EA||(EA={}));var DL;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(DL||(DL={}));var zC;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zC||(zC={}));var OL;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(OL||(OL={}));var FL;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(FL||(FL={}));var VL;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(VL||(VL={}));var BL;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(BL||(BL={}));var UL;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(UL||(UL={}));var zL;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(zL||(zL={}));var jL;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(jL||(jL={}));var qL;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(qL||(qL={}));var $L;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})($L||($L={}));var HL;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(HL||(HL={}));var GL;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(GL||(GL={}));var YL;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(YL||(YL={}));var KL;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(KL||(KL={}));var WL;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(WL||(WL={}));var QL;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(QL||(QL={}));var XL;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(XL||(XL={}));var JL;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(JL||(JL={}));var ZL;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ZL||(ZL={}));var eP;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(eP||(eP={}));var tP;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(tP||(tP={}));var nP;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(nP||(nP={}));var iP;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(iP||(iP={}));var q0;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(q0||(q0={}));class R1{get text(){var e,t,n,r,s,a,l,u;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const y of(u=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[v,C]of Object.entries(y))v!=="text"&&v!=="thought"&&(C!==null||C!==void 0)&&p.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;f=!0,d+=y.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,t,n,r,s,a,l,u;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(u=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[y,v]of Object.entries(p))y!=="inlineData"&&(v!==null||v!==void 0)&&f.push(y);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,t,n,r,s,a,l,u;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(u=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,t,n,r,s,a,l,u,d;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(u=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,t,n,r,s,a,l,u,d;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(u=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class rP{}class sP{}class pX{}class mX{}class aP{}class oP{}class lP{}class gX{}class uP{}class cP{}class dP{}class yX{}class jC{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class vX{}class bX{}class _X{get text(){var e,t,n;let r="",s=!1;const a=[];for(const l of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[u,d]of Object.entries(l))u!=="text"&&u!=="thought"&&d!==null&&a.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,r+=l.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,t,n;let r="";const s=[];for(const a of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[l,u]of Object.entries(a))l!=="inlineData"&&u!==null&&s.push(l);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class xX{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ji(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function k8(i,e){const t=ji(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function I8(i,e){return Array.isArray(e)?e.map(t=>CA(i,t)):[CA(i,e)]}function CA(i,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function wX(i,e){const t=CA(i,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function AX(i,e){const t=CA(i,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function hP(i,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function R8(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>hP(i,t)):[hP(i,e)]}function qC(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function fP(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function pP(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Ha(i,e){if(e==null)throw new Error("ContentUnion is required");return qC(e)?e:{role:"user",parts:R8(i,e)}}function L8(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=Ha(i,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const t=Ha(i,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Ha(i,t)):[Ha(i,e)]}function zu(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(fP(e)||pP(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ha(i,e)]}const t=[],n=[],r=qC(e[0]);for(const s of e){const a=qC(s);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)t.push(s);else{if(fP(s)||pP(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||t.push({role:"user",parts:R8(i,n)}),t}const SX=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),mP=uX(["string","number","integer","object","array","boolean","null"]),TX=aX([mP,ab(mP)]);function EX(i=!0){const e=lX(()=>{const t=sX({type:TX.optional(),format:am().optional(),title:am().optional(),description:am().optional(),default:wL().optional(),items:e.optional(),minItems:w0.string().optional(),maxItems:w0.string().optional(),enum:ab(wL()).optional(),properties:oX(am(),e).optional(),required:ab(am()).optional(),minProperties:w0.string().optional(),maxProperties:w0.string().optional(),propertyOrdering:ab(am()).optional(),minimum:xL().optional(),maximum:xL().optional(),minLength:w0.string().optional(),maxLength:w0.string().optional(),pattern:am().optional(),anyOf:ab(e).optional(),additionalProperties:rX().optional()});return i?t.strict():t});return e}function CX(i,e){i.includes("null")&&(e.nullable=!0);const t=i.filter(n=>n!=="null");if(t.length===1)e.type=Object.values(Kc).includes(t[0].toUpperCase())?t[0].toUpperCase():Kc.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.values(Kc).includes(n.toUpperCase())?n.toUpperCase():Kc.TYPE_UNSPECIFIED})}}function ty(i){const e={},t=["items"],n=["anyOf"],r=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=i.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,i=s[1]):s[1].type==="null"&&(e.nullable=!0,i=s[0])),i.type instanceof Array&&CX(i.type,e);for(const[a,l]of Object.entries(i))if(l!=null)if(a=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Kc).includes(l.toUpperCase())?l.toUpperCase():Kc.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=ty(l);else if(n.includes(a)){const u=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}u.push(ty(d))}e[a]=u}else if(r.includes(a)){const u={};for(const[d,f]of Object.entries(l))u[d]=ty(f);e[a]=u}else{if(a==="additionalProperties")continue;e[a]=l}return e}function NA(i,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=EX().parse(e);return ty(t)}else return ty(e)}function P8(i,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function vk(i,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function I2(i,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=NA(i,t.parameters)),t.response&&(t.response=NA(i,t.response));return e}function R2(i,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function NX(i,e,t,n=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===n;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:r?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Fp(i,e){if(typeof e!="string")throw new Error("name must be a string");return NX(i,e,"cachedContents")}function M8(i,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Fh(i,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function kX(i){return i!=null&&typeof i=="object"&&"name"in i}function IX(i){return i!=null&&typeof i=="object"&&"video"in i}function RX(i){return i!=null&&typeof i=="object"&&"uri"in i}function D8(i,e){var t;let n;if(kX(e)&&(n=e.name),!(RX(e)&&(n=e.uri,n===void 0))&&!(IX(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function O8(i,e){let t;return i.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function F8(i,e){for(const t of["models","tunedModels","publisherModels"])if(LX(e,t))return e[t];return[]}function LX(i,e){return i!==null&&typeof i=="object"&&e in i}function PX(i,e={}){const t=i,n={name:t.name,description:t.description,parameters:ty(R5(t.inputSchema))};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function MX(i,e={}){const t=[],n=new Set;for(const r of i){const s=r.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);const a=PX(r,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function DX(i){const e=[];for(const t of i)e.push(R5(t));return e}function OX(i){const e={};for(const[t,n]of Object.entries(i)){const r=n;e[t]=R5(r)}return e}function R5(i){const e=new Set(["items"]),t=new Set(["anyOf"]),n=new Set(["properties"]),r={};for(const[s,a]of Object.entries(i))if(e.has(s))r[s]=R5(a);else if(t.has(s))r[s]=DX(a);else if(n.has(s))r[s]=OX(a);else if(s==="type"){const l=a.toUpperCase();r[s]=Object.values(Kc).includes(l)?l:Kc.TYPE_UNSPECIFIED}else SX.has(s)&&(r[s]=a);return r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FX(i,e){const t={},n=b(e,["fps"]);n!=null&&_(t,["fps"],n);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function VX(i,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["data"]);n!=null&&_(t,["data"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function BX(i,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["fileUri"]);n!=null&&_(t,["fileUri"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function UX(i,e){const t={},n=b(e,["videoMetadata"]);n!=null&&_(t,["videoMetadata"],FX(i,n));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],VX(i,s));const a=b(e,["fileData"]);a!=null&&_(t,["fileData"],BX(i,a));const l=b(e,["thoughtSignature"]);l!=null&&_(t,["thoughtSignature"],l);const u=b(e,["codeExecutionResult"]);u!=null&&_(t,["codeExecutionResult"],u);const d=b(e,["executableCode"]);d!=null&&_(t,["executableCode"],d);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const y=b(e,["text"]);return y!=null&&_(t,["text"],y),t}function gP(i,e){const t={},n=b(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>UX(i,a))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function zX(i,e){const t={},n=b(e,["behavior"]);n!=null&&_(t,["behavior"],n);const r=b(e,["description"]);r!=null&&_(t,["description"],r);const s=b(e,["name"]);s!=null&&_(t,["name"],s);const a=b(e,["parameters"]);a!=null&&_(t,["parameters"],a);const l=b(e,["response"]);return l!=null&&_(t,["response"],l),t}function jX(i,e){const t={},n=b(e,["startTime"]);n!=null&&_(t,["startTime"],n);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function qX(i,e){const t={},n=b(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],jX(i,n)),t}function $X(i,e){const t={},n=b(e,["mode"]);n!=null&&_(t,["mode"],n);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function HX(i,e){const t={},n=b(e,["dynamicRetrievalConfig"]);return n!=null&&_(t,["dynamicRetrievalConfig"],$X(i,n)),t}function GX(){return{}}function YX(i,e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>zX(i,d))),_(t,["functionDeclarations"],u)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearch"]);r!=null&&_(t,["googleSearch"],qX(i,r));const s=b(e,["googleSearchRetrieval"]);if(s!=null&&_(t,["googleSearchRetrieval"],HX(i,s)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&_(t,["urlContext"],GX());const l=b(e,["codeExecution"]);return l!=null&&_(t,["codeExecution"],l),t}function KX(i,e){const t={},n=b(e,["mode"]);n!=null&&_(t,["mode"],n);const r=b(e,["allowedFunctionNames"]);return r!=null&&_(t,["allowedFunctionNames"],r),t}function WX(i,e){const t={},n=b(e,["latitude"]);n!=null&&_(t,["latitude"],n);const r=b(e,["longitude"]);return r!=null&&_(t,["longitude"],r),t}function QX(i,e){const t={},n=b(e,["latLng"]);n!=null&&_(t,["latLng"],WX(i,n));const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function XX(i,e){const t={},n=b(e,["functionCallingConfig"]);n!=null&&_(t,["functionCallingConfig"],KX(i,n));const r=b(e,["retrievalConfig"]);return r!=null&&_(t,["retrievalConfig"],QX(i,r)),t}function JX(i,e,t){const n={},r=b(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const s=b(e,["expireTime"]);t!==void 0&&s!=null&&_(t,["expireTime"],s);const a=b(e,["displayName"]);t!==void 0&&a!=null&&_(t,["displayName"],a);const l=b(e,["contents"]);if(t!==void 0&&l!=null){let p=zu(i,l);Array.isArray(p)&&(p=p.map(y=>gP(i,y))),_(t,["contents"],p)}const u=b(e,["systemInstruction"]);t!==void 0&&u!=null&&_(t,["systemInstruction"],gP(i,Ha(i,u)));const d=b(e,["tools"]);if(t!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(y=>YX(i,y))),_(t,["tools"],p)}const f=b(e,["toolConfig"]);if(t!==void 0&&f!=null&&_(t,["toolConfig"],XX(i,f)),b(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function ZX(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["model"],k8(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],JX(i,r,t)),t}function eJ(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["_url","name"],Fp(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function tJ(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["_url","name"],Fp(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function nJ(i,e,t){const n={},r=b(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const s=b(e,["expireTime"]);return t!==void 0&&s!=null&&_(t,["expireTime"],s),n}function iJ(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["_url","name"],Fp(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],nJ(i,r,t)),t}function rJ(i,e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);return t!==void 0&&s!=null&&_(t,["_query","pageToken"],s),n}function sJ(i,e){const t={},n=b(e,["config"]);return n!=null&&_(t,["config"],rJ(i,n,t)),t}function aJ(i,e){const t={},n=b(e,["fps"]);n!=null&&_(t,["fps"],n);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function oJ(i,e){const t={},n=b(e,["displayName"]);n!=null&&_(t,["displayName"],n);const r=b(e,["data"]);r!=null&&_(t,["data"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function lJ(i,e){const t={},n=b(e,["displayName"]);n!=null&&_(t,["displayName"],n);const r=b(e,["fileUri"]);r!=null&&_(t,["fileUri"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function uJ(i,e){const t={},n=b(e,["videoMetadata"]);n!=null&&_(t,["videoMetadata"],aJ(i,n));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],oJ(i,s));const a=b(e,["fileData"]);a!=null&&_(t,["fileData"],lJ(i,a));const l=b(e,["thoughtSignature"]);l!=null&&_(t,["thoughtSignature"],l);const u=b(e,["codeExecutionResult"]);u!=null&&_(t,["codeExecutionResult"],u);const d=b(e,["executableCode"]);d!=null&&_(t,["executableCode"],d);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const y=b(e,["text"]);return y!=null&&_(t,["text"],y),t}function yP(i,e){const t={},n=b(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>uJ(i,a))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function cJ(i,e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(e,["description"]);n!=null&&_(t,["description"],n);const r=b(e,["name"]);r!=null&&_(t,["name"],r);const s=b(e,["parameters"]);s!=null&&_(t,["parameters"],s);const a=b(e,["response"]);return a!=null&&_(t,["response"],a),t}function dJ(i,e){const t={},n=b(e,["startTime"]);n!=null&&_(t,["startTime"],n);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function hJ(i,e){const t={},n=b(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],dJ(i,n)),t}function fJ(i,e){const t={},n=b(e,["mode"]);n!=null&&_(t,["mode"],n);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function pJ(i,e){const t={},n=b(e,["dynamicRetrievalConfig"]);return n!=null&&_(t,["dynamicRetrievalConfig"],fJ(i,n)),t}function mJ(){return{}}function gJ(i,e){const t={},n=b(e,["apiKeyString"]);return n!=null&&_(t,["apiKeyString"],n),t}function yJ(i,e){const t={},n=b(e,["apiKeyConfig"]);n!=null&&_(t,["apiKeyConfig"],gJ(i,n));const r=b(e,["authType"]);r!=null&&_(t,["authType"],r);const s=b(e,["googleServiceAccountConfig"]);s!=null&&_(t,["googleServiceAccountConfig"],s);const a=b(e,["httpBasicAuthConfig"]);a!=null&&_(t,["httpBasicAuthConfig"],a);const l=b(e,["oauthConfig"]);l!=null&&_(t,["oauthConfig"],l);const u=b(e,["oidcConfig"]);return u!=null&&_(t,["oidcConfig"],u),t}function vJ(i,e){const t={},n=b(e,["authConfig"]);return n!=null&&_(t,["authConfig"],yJ(i,n)),t}function bJ(){return{}}function _J(i,e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>cJ(i,y))),_(t,["functionDeclarations"],p)}const r=b(e,["retrieval"]);r!=null&&_(t,["retrieval"],r);const s=b(e,["googleSearch"]);s!=null&&_(t,["googleSearch"],hJ(i,s));const a=b(e,["googleSearchRetrieval"]);a!=null&&_(t,["googleSearchRetrieval"],pJ(i,a)),b(e,["enterpriseWebSearch"])!=null&&_(t,["enterpriseWebSearch"],mJ());const u=b(e,["googleMaps"]);u!=null&&_(t,["googleMaps"],vJ(i,u)),b(e,["urlContext"])!=null&&_(t,["urlContext"],bJ());const f=b(e,["codeExecution"]);return f!=null&&_(t,["codeExecution"],f),t}function xJ(i,e){const t={},n=b(e,["mode"]);n!=null&&_(t,["mode"],n);const r=b(e,["allowedFunctionNames"]);return r!=null&&_(t,["allowedFunctionNames"],r),t}function wJ(i,e){const t={},n=b(e,["latitude"]);n!=null&&_(t,["latitude"],n);const r=b(e,["longitude"]);return r!=null&&_(t,["longitude"],r),t}function AJ(i,e){const t={},n=b(e,["latLng"]);n!=null&&_(t,["latLng"],wJ(i,n));const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function SJ(i,e){const t={},n=b(e,["functionCallingConfig"]);n!=null&&_(t,["functionCallingConfig"],xJ(i,n));const r=b(e,["retrievalConfig"]);return r!=null&&_(t,["retrievalConfig"],AJ(i,r)),t}function TJ(i,e,t){const n={},r=b(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const s=b(e,["expireTime"]);t!==void 0&&s!=null&&_(t,["expireTime"],s);const a=b(e,["displayName"]);t!==void 0&&a!=null&&_(t,["displayName"],a);const l=b(e,["contents"]);if(t!==void 0&&l!=null){let y=zu(i,l);Array.isArray(y)&&(y=y.map(v=>yP(i,v))),_(t,["contents"],y)}const u=b(e,["systemInstruction"]);t!==void 0&&u!=null&&_(t,["systemInstruction"],yP(i,Ha(i,u)));const d=b(e,["tools"]);if(t!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>_J(i,v))),_(t,["tools"],y)}const f=b(e,["toolConfig"]);t!==void 0&&f!=null&&_(t,["toolConfig"],SJ(i,f));const p=b(e,["kmsKeyName"]);return t!==void 0&&p!=null&&_(t,["encryption_spec","kmsKeyName"],p),n}function EJ(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["model"],k8(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],TJ(i,r,t)),t}function CJ(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["_url","name"],Fp(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function NJ(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["_url","name"],Fp(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function kJ(i,e,t){const n={},r=b(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const s=b(e,["expireTime"]);return t!==void 0&&s!=null&&_(t,["expireTime"],s),n}function IJ(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["_url","name"],Fp(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],kJ(i,r,t)),t}function RJ(i,e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);return t!==void 0&&s!=null&&_(t,["_query","pageToken"],s),n}function LJ(i,e){const t={},n=b(e,["config"]);return n!=null&&_(t,["config"],RJ(i,n,t)),t}function Bw(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["model"]);s!=null&&_(t,["model"],s);const a=b(e,["createTime"]);a!=null&&_(t,["createTime"],a);const l=b(e,["updateTime"]);l!=null&&_(t,["updateTime"],l);const u=b(e,["expireTime"]);u!=null&&_(t,["expireTime"],u);const d=b(e,["usageMetadata"]);return d!=null&&_(t,["usageMetadata"],d),t}function PJ(){return{}}function MJ(i,e){const t={},n=b(e,["nextPageToken"]);n!=null&&_(t,["nextPageToken"],n);const r=b(e,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Bw(i,a))),_(t,["cachedContents"],s)}return t}function Uw(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["model"]);s!=null&&_(t,["model"],s);const a=b(e,["createTime"]);a!=null&&_(t,["createTime"],a);const l=b(e,["updateTime"]);l!=null&&_(t,["updateTime"],l);const u=b(e,["expireTime"]);u!=null&&_(t,["expireTime"],u);const d=b(e,["usageMetadata"]);return d!=null&&_(t,["usageMetadata"],d),t}function DJ(){return{}}function OJ(i,e){const t={},n=b(e,["nextPageToken"]);n!=null&&_(t,["nextPageToken"],n);const r=b(e,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Uw(i,a))),_(t,["cachedContents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Tv;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Tv||(Tv={}));class L5{constructor(e,t,n,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,r)}init(e,t,n){var r,s;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};n?typeof n=="object"?a=Object.assign({},n):a=n:a={config:{}},a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FJ extends Pv{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new L5(Tv.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=EJ(this.apiClient,e);return l=sn("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>Uw(this.apiClient,f))}else{const d=ZX(this.apiClient,e);return l=sn("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>Bw(this.apiClient,f))}}async get(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=CJ(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>Uw(this.apiClient,f))}else{const d=eJ(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>Bw(this.apiClient,f))}}async delete(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=NJ(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(()=>{const f=DJ(),p=new cP;return Object.assign(p,f),p})}else{const d=tJ(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(()=>{const f=PJ(),p=new cP;return Object.assign(p,f),p})}}async update(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=IJ(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>Uw(this.apiClient,f))}else{const d=iJ(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>Bw(this.apiClient,f))}}async listInternal(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=LJ(this.apiClient,e);return l=sn("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=OJ(this.apiClient,f),y=new dP;return Object.assign(y,p),y})}else{const d=sJ(this.apiClient,e);return l=sn("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>{const p=MJ(this.apiClient,f),y=new dP;return Object.assign(y,p),y})}}}function vP(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yi(i){return this instanceof Yi?(this.v=i,this):new Yi(i)}function ny(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(v){return function(C){return Promise.resolve(C).then(v,p)}}function l(v,C){n[v]&&(r[v]=function(E){return new Promise(function(R,I){s.push([v,E,R,I])>1||u(v,E)})},C&&(r[v]=C(r[v])))}function u(v,C){try{d(n[v](C))}catch(E){y(s[0][3],E)}}function d(v){v.value instanceof Yi?Promise.resolve(v.value.v).then(f,p):y(s[0][2],v)}function f(v){u("next",v)}function p(v){u("throw",v)}function y(v,C){v(C),s.shift(),s.length&&u(s[0][0],s[0][1])}}function fb(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof vP=="function"?vP(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(a){return new Promise(function(l,u){a=i[s](a),r(l,u,a.done,a.value)})}}function r(s,a,l,u){Promise.resolve(u).then(function(d){s({value:d,done:l})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VJ(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:V8(t)}function V8(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function BJ(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bP(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let n=0;for(;n<t;)if(i[n].role==="user")e.push(i[n]),n++;else{const r=[];let s=!0;for(;n<t&&i[n].role==="model";)r.push(i[n]),s&&!V8(i[n])&&(s=!1),n++;s?e.push(...r):e.pop()}return e}class UJ{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new zJ(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class zJ{constructor(e,t,n,r={},s=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),BJ(s)}async sendMessage(e){var t;await this.sendPromise;const n=Ha(this.apiClient,e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var s,a,l;const u=await r,d=(a=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,f=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let y=[];f!=null&&(y=(l=f.slice(p))!==null&&l!==void 0?l:[]);const v=d?[d]:[];this.recordHistory(n,v,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const n=Ha(this.apiClient,e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,n)}getHistory(e=!1){const t=e?bP(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,r;return ny(this,arguments,function*(){var a,l,u,d;const f=[];try{for(var p=!0,y=fb(e),v;v=yield Yi(y.next()),a=v.done,!a;p=!0){d=v.value,p=!1;const C=d;if(VJ(C)){const E=(r=(n=C.candidates)===null||n===void 0?void 0:n[0])===null||r===void 0?void 0:r.content;E!==void 0&&f.push(E)}yield yield Yi(C)}}catch(C){l={error:C}}finally{try{!p&&!a&&(u=y.return)&&(yield Yi(u.call(y)))}finally{if(l)throw l.error}}this.recordHistory(t,f)})}recordHistory(e,t,n){let r=[];t.length>0&&t.every(s=>s.role!==void 0)?r=t:r.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...bP(n)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jJ(i,e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);return t!==void 0&&s!=null&&_(t,["_query","pageToken"],s),n}function qJ(i,e){const t={},n=b(e,["config"]);return n!=null&&_(t,["config"],jJ(i,n,t)),t}function $J(i,e){const t={},n=b(e,["details"]);n!=null&&_(t,["details"],n);const r=b(e,["message"]);r!=null&&_(t,["message"],r);const s=b(e,["code"]);return s!=null&&_(t,["code"],s),t}function HJ(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["mimeType"]);s!=null&&_(t,["mimeType"],s);const a=b(e,["sizeBytes"]);a!=null&&_(t,["sizeBytes"],a);const l=b(e,["createTime"]);l!=null&&_(t,["createTime"],l);const u=b(e,["expirationTime"]);u!=null&&_(t,["expirationTime"],u);const d=b(e,["updateTime"]);d!=null&&_(t,["updateTime"],d);const f=b(e,["sha256Hash"]);f!=null&&_(t,["sha256Hash"],f);const p=b(e,["uri"]);p!=null&&_(t,["uri"],p);const y=b(e,["downloadUri"]);y!=null&&_(t,["downloadUri"],y);const v=b(e,["state"]);v!=null&&_(t,["state"],v);const C=b(e,["source"]);C!=null&&_(t,["source"],C);const E=b(e,["videoMetadata"]);E!=null&&_(t,["videoMetadata"],E);const R=b(e,["error"]);return R!=null&&_(t,["error"],$J(i,R)),t}function GJ(i,e){const t={},n=b(e,["file"]);n!=null&&_(t,["file"],HJ(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function YJ(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["_url","file"],D8(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function KJ(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["_url","file"],D8(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function WJ(i,e){const t={},n=b(e,["details"]);n!=null&&_(t,["details"],n);const r=b(e,["message"]);r!=null&&_(t,["message"],r);const s=b(e,["code"]);return s!=null&&_(t,["code"],s),t}function $C(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["mimeType"]);s!=null&&_(t,["mimeType"],s);const a=b(e,["sizeBytes"]);a!=null&&_(t,["sizeBytes"],a);const l=b(e,["createTime"]);l!=null&&_(t,["createTime"],l);const u=b(e,["expirationTime"]);u!=null&&_(t,["expirationTime"],u);const d=b(e,["updateTime"]);d!=null&&_(t,["updateTime"],d);const f=b(e,["sha256Hash"]);f!=null&&_(t,["sha256Hash"],f);const p=b(e,["uri"]);p!=null&&_(t,["uri"],p);const y=b(e,["downloadUri"]);y!=null&&_(t,["downloadUri"],y);const v=b(e,["state"]);v!=null&&_(t,["state"],v);const C=b(e,["source"]);C!=null&&_(t,["source"],C);const E=b(e,["videoMetadata"]);E!=null&&_(t,["videoMetadata"],E);const R=b(e,["error"]);return R!=null&&_(t,["error"],WJ(i,R)),t}function QJ(i,e){const t={},n=b(e,["nextPageToken"]);n!=null&&_(t,["nextPageToken"],n);const r=b(e,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>$C(i,a))),_(t,["files"],s)}return t}function XJ(){return{}}function JJ(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZJ extends Pv{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new L5(Tv.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>$C(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=qJ(this.apiClient,e);return s=sn("files",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),r.then(u=>{const d=QJ(this.apiClient,u),f=new yX;return Object.assign(f,d),f})}}async createInternal(e){var t,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=GJ(this.apiClient,e);return s=sn("upload/v1beta/files",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),r.then(()=>{const u=XJ(),d=new vX;return Object.assign(d,u),d})}}async get(e){var t,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=YJ(this.apiClient,e);return s=sn("files/{file}",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),r.then(u=>$C(this.apiClient,u))}}async delete(e){var t,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=KJ(this.apiClient,e);return s=sn("files/{file}",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),r.then(()=>{const u=JJ(),d=new bX;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eZ(i,e){const t={},n=b(e,["voiceName"]);return n!=null&&_(t,["voiceName"],n),t}function tZ(i,e){const t={},n=b(e,["voiceName"]);return n!=null&&_(t,["voiceName"],n),t}function B8(i,e){const t={},n=b(e,["prebuiltVoiceConfig"]);return n!=null&&_(t,["prebuiltVoiceConfig"],eZ(i,n)),t}function nZ(i,e){const t={},n=b(e,["prebuiltVoiceConfig"]);return n!=null&&_(t,["prebuiltVoiceConfig"],tZ(i,n)),t}function iZ(i,e){const t={},n=b(e,["speaker"]);n!=null&&_(t,["speaker"],n);const r=b(e,["voiceConfig"]);return r!=null&&_(t,["voiceConfig"],B8(i,r)),t}function rZ(i,e){const t={},n=b(e,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>iZ(i,s))),_(t,["speakerVoiceConfigs"],r)}return t}function sZ(i,e){const t={},n=b(e,["voiceConfig"]);n!=null&&_(t,["voiceConfig"],B8(i,n));const r=b(e,["multiSpeakerVoiceConfig"]);r!=null&&_(t,["multiSpeakerVoiceConfig"],rZ(i,r));const s=b(e,["languageCode"]);return s!=null&&_(t,["languageCode"],s),t}function aZ(i,e){const t={},n=b(e,["voiceConfig"]);if(n!=null&&_(t,["voiceConfig"],nZ(i,n)),b(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function oZ(i,e){const t={},n=b(e,["fps"]);n!=null&&_(t,["fps"],n);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function lZ(i,e){const t={},n=b(e,["fps"]);n!=null&&_(t,["fps"],n);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function uZ(i,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["data"]);n!=null&&_(t,["data"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function cZ(i,e){const t={},n=b(e,["displayName"]);n!=null&&_(t,["displayName"],n);const r=b(e,["data"]);r!=null&&_(t,["data"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function dZ(i,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["fileUri"]);n!=null&&_(t,["fileUri"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function hZ(i,e){const t={},n=b(e,["displayName"]);n!=null&&_(t,["displayName"],n);const r=b(e,["fileUri"]);r!=null&&_(t,["fileUri"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function fZ(i,e){const t={},n=b(e,["videoMetadata"]);n!=null&&_(t,["videoMetadata"],oZ(i,n));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],uZ(i,s));const a=b(e,["fileData"]);a!=null&&_(t,["fileData"],dZ(i,a));const l=b(e,["thoughtSignature"]);l!=null&&_(t,["thoughtSignature"],l);const u=b(e,["codeExecutionResult"]);u!=null&&_(t,["codeExecutionResult"],u);const d=b(e,["executableCode"]);d!=null&&_(t,["executableCode"],d);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const y=b(e,["text"]);return y!=null&&_(t,["text"],y),t}function pZ(i,e){const t={},n=b(e,["videoMetadata"]);n!=null&&_(t,["videoMetadata"],lZ(i,n));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],cZ(i,s));const a=b(e,["fileData"]);a!=null&&_(t,["fileData"],hZ(i,a));const l=b(e,["thoughtSignature"]);l!=null&&_(t,["thoughtSignature"],l);const u=b(e,["codeExecutionResult"]);u!=null&&_(t,["codeExecutionResult"],u);const d=b(e,["executableCode"]);d!=null&&_(t,["executableCode"],d);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const y=b(e,["text"]);return y!=null&&_(t,["text"],y),t}function mZ(i,e){const t={},n=b(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>fZ(i,a))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function gZ(i,e){const t={},n=b(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>pZ(i,a))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function yZ(i,e){const t={},n=b(e,["behavior"]);n!=null&&_(t,["behavior"],n);const r=b(e,["description"]);r!=null&&_(t,["description"],r);const s=b(e,["name"]);s!=null&&_(t,["name"],s);const a=b(e,["parameters"]);a!=null&&_(t,["parameters"],a);const l=b(e,["response"]);return l!=null&&_(t,["response"],l),t}function vZ(i,e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(e,["description"]);n!=null&&_(t,["description"],n);const r=b(e,["name"]);r!=null&&_(t,["name"],r);const s=b(e,["parameters"]);s!=null&&_(t,["parameters"],s);const a=b(e,["response"]);return a!=null&&_(t,["response"],a),t}function bZ(i,e){const t={},n=b(e,["startTime"]);n!=null&&_(t,["startTime"],n);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function _Z(i,e){const t={},n=b(e,["startTime"]);n!=null&&_(t,["startTime"],n);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function xZ(i,e){const t={},n=b(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],bZ(i,n)),t}function wZ(i,e){const t={},n=b(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],_Z(i,n)),t}function AZ(i,e){const t={},n=b(e,["mode"]);n!=null&&_(t,["mode"],n);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function SZ(i,e){const t={},n=b(e,["mode"]);n!=null&&_(t,["mode"],n);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function TZ(i,e){const t={},n=b(e,["dynamicRetrievalConfig"]);return n!=null&&_(t,["dynamicRetrievalConfig"],AZ(i,n)),t}function EZ(i,e){const t={},n=b(e,["dynamicRetrievalConfig"]);return n!=null&&_(t,["dynamicRetrievalConfig"],SZ(i,n)),t}function CZ(){return{}}function NZ(i,e){const t={},n=b(e,["apiKeyString"]);return n!=null&&_(t,["apiKeyString"],n),t}function kZ(i,e){const t={},n=b(e,["apiKeyConfig"]);n!=null&&_(t,["apiKeyConfig"],NZ(i,n));const r=b(e,["authType"]);r!=null&&_(t,["authType"],r);const s=b(e,["googleServiceAccountConfig"]);s!=null&&_(t,["googleServiceAccountConfig"],s);const a=b(e,["httpBasicAuthConfig"]);a!=null&&_(t,["httpBasicAuthConfig"],a);const l=b(e,["oauthConfig"]);l!=null&&_(t,["oauthConfig"],l);const u=b(e,["oidcConfig"]);return u!=null&&_(t,["oidcConfig"],u),t}function IZ(i,e){const t={},n=b(e,["authConfig"]);return n!=null&&_(t,["authConfig"],kZ(i,n)),t}function RZ(){return{}}function LZ(){return{}}function PZ(i,e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>yZ(i,d))),_(t,["functionDeclarations"],u)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearch"]);r!=null&&_(t,["googleSearch"],xZ(i,r));const s=b(e,["googleSearchRetrieval"]);if(s!=null&&_(t,["googleSearchRetrieval"],TZ(i,s)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&_(t,["urlContext"],RZ());const l=b(e,["codeExecution"]);return l!=null&&_(t,["codeExecution"],l),t}function MZ(i,e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>vZ(i,y))),_(t,["functionDeclarations"],p)}const r=b(e,["retrieval"]);r!=null&&_(t,["retrieval"],r);const s=b(e,["googleSearch"]);s!=null&&_(t,["googleSearch"],wZ(i,s));const a=b(e,["googleSearchRetrieval"]);a!=null&&_(t,["googleSearchRetrieval"],EZ(i,a)),b(e,["enterpriseWebSearch"])!=null&&_(t,["enterpriseWebSearch"],CZ());const u=b(e,["googleMaps"]);u!=null&&_(t,["googleMaps"],IZ(i,u)),b(e,["urlContext"])!=null&&_(t,["urlContext"],LZ());const f=b(e,["codeExecution"]);return f!=null&&_(t,["codeExecution"],f),t}function DZ(i,e){const t={},n=b(e,["handle"]);if(n!=null&&_(t,["handle"],n),b(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function OZ(i,e){const t={},n=b(e,["handle"]);n!=null&&_(t,["handle"],n);const r=b(e,["transparent"]);return r!=null&&_(t,["transparent"],r),t}function _P(){return{}}function xP(){return{}}function FZ(i,e){const t={},n=b(e,["disabled"]);n!=null&&_(t,["disabled"],n);const r=b(e,["startOfSpeechSensitivity"]);r!=null&&_(t,["startOfSpeechSensitivity"],r);const s=b(e,["endOfSpeechSensitivity"]);s!=null&&_(t,["endOfSpeechSensitivity"],s);const a=b(e,["prefixPaddingMs"]);a!=null&&_(t,["prefixPaddingMs"],a);const l=b(e,["silenceDurationMs"]);return l!=null&&_(t,["silenceDurationMs"],l),t}function VZ(i,e){const t={},n=b(e,["disabled"]);n!=null&&_(t,["disabled"],n);const r=b(e,["startOfSpeechSensitivity"]);r!=null&&_(t,["startOfSpeechSensitivity"],r);const s=b(e,["endOfSpeechSensitivity"]);s!=null&&_(t,["endOfSpeechSensitivity"],s);const a=b(e,["prefixPaddingMs"]);a!=null&&_(t,["prefixPaddingMs"],a);const l=b(e,["silenceDurationMs"]);return l!=null&&_(t,["silenceDurationMs"],l),t}function BZ(i,e){const t={},n=b(e,["automaticActivityDetection"]);n!=null&&_(t,["automaticActivityDetection"],FZ(i,n));const r=b(e,["activityHandling"]);r!=null&&_(t,["activityHandling"],r);const s=b(e,["turnCoverage"]);return s!=null&&_(t,["turnCoverage"],s),t}function UZ(i,e){const t={},n=b(e,["automaticActivityDetection"]);n!=null&&_(t,["automaticActivityDetection"],VZ(i,n));const r=b(e,["activityHandling"]);r!=null&&_(t,["activityHandling"],r);const s=b(e,["turnCoverage"]);return s!=null&&_(t,["turnCoverage"],s),t}function zZ(i,e){const t={},n=b(e,["targetTokens"]);return n!=null&&_(t,["targetTokens"],n),t}function jZ(i,e){const t={},n=b(e,["targetTokens"]);return n!=null&&_(t,["targetTokens"],n),t}function qZ(i,e){const t={},n=b(e,["triggerTokens"]);n!=null&&_(t,["triggerTokens"],n);const r=b(e,["slidingWindow"]);return r!=null&&_(t,["slidingWindow"],zZ(i,r)),t}function $Z(i,e){const t={},n=b(e,["triggerTokens"]);n!=null&&_(t,["triggerTokens"],n);const r=b(e,["slidingWindow"]);return r!=null&&_(t,["slidingWindow"],jZ(i,r)),t}function HZ(i,e){const t={},n=b(e,["proactiveAudio"]);return n!=null&&_(t,["proactiveAudio"],n),t}function GZ(i,e){const t={},n=b(e,["proactiveAudio"]);return n!=null&&_(t,["proactiveAudio"],n),t}function YZ(i,e,t){const n={},r=b(e,["generationConfig"]);t!==void 0&&r!=null&&_(t,["setup","generationConfig"],r);const s=b(e,["responseModalities"]);t!==void 0&&s!=null&&_(t,["setup","generationConfig","responseModalities"],s);const a=b(e,["temperature"]);t!==void 0&&a!=null&&_(t,["setup","generationConfig","temperature"],a);const l=b(e,["topP"]);t!==void 0&&l!=null&&_(t,["setup","generationConfig","topP"],l);const u=b(e,["topK"]);t!==void 0&&u!=null&&_(t,["setup","generationConfig","topK"],u);const d=b(e,["maxOutputTokens"]);t!==void 0&&d!=null&&_(t,["setup","generationConfig","maxOutputTokens"],d);const f=b(e,["mediaResolution"]);t!==void 0&&f!=null&&_(t,["setup","generationConfig","mediaResolution"],f);const p=b(e,["seed"]);t!==void 0&&p!=null&&_(t,["setup","generationConfig","seed"],p);const y=b(e,["speechConfig"]);t!==void 0&&y!=null&&_(t,["setup","generationConfig","speechConfig"],sZ(i,vk(i,y)));const v=b(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&_(t,["setup","generationConfig","enableAffectiveDialog"],v);const C=b(e,["systemInstruction"]);t!==void 0&&C!=null&&_(t,["setup","systemInstruction"],mZ(i,Ha(i,C)));const E=b(e,["tools"]);if(t!==void 0&&E!=null){let ue=R2(i,E);Array.isArray(ue)&&(ue=ue.map(U=>PZ(i,I2(i,U)))),_(t,["setup","tools"],ue)}const R=b(e,["sessionResumption"]);t!==void 0&&R!=null&&_(t,["setup","sessionResumption"],DZ(i,R));const I=b(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&_(t,["setup","inputAudioTranscription"],_P());const D=b(e,["outputAudioTranscription"]);t!==void 0&&D!=null&&_(t,["setup","outputAudioTranscription"],_P());const j=b(e,["realtimeInputConfig"]);t!==void 0&&j!=null&&_(t,["setup","realtimeInputConfig"],BZ(i,j));const X=b(e,["contextWindowCompression"]);t!==void 0&&X!=null&&_(t,["setup","contextWindowCompression"],qZ(i,X));const W=b(e,["proactivity"]);return t!==void 0&&W!=null&&_(t,["setup","proactivity"],HZ(i,W)),n}function KZ(i,e,t){const n={},r=b(e,["generationConfig"]);t!==void 0&&r!=null&&_(t,["setup","generationConfig"],r);const s=b(e,["responseModalities"]);t!==void 0&&s!=null&&_(t,["setup","generationConfig","responseModalities"],s);const a=b(e,["temperature"]);t!==void 0&&a!=null&&_(t,["setup","generationConfig","temperature"],a);const l=b(e,["topP"]);t!==void 0&&l!=null&&_(t,["setup","generationConfig","topP"],l);const u=b(e,["topK"]);t!==void 0&&u!=null&&_(t,["setup","generationConfig","topK"],u);const d=b(e,["maxOutputTokens"]);t!==void 0&&d!=null&&_(t,["setup","generationConfig","maxOutputTokens"],d);const f=b(e,["mediaResolution"]);t!==void 0&&f!=null&&_(t,["setup","generationConfig","mediaResolution"],f);const p=b(e,["seed"]);t!==void 0&&p!=null&&_(t,["setup","generationConfig","seed"],p);const y=b(e,["speechConfig"]);t!==void 0&&y!=null&&_(t,["setup","generationConfig","speechConfig"],aZ(i,vk(i,y)));const v=b(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&_(t,["setup","generationConfig","enableAffectiveDialog"],v);const C=b(e,["systemInstruction"]);t!==void 0&&C!=null&&_(t,["setup","systemInstruction"],gZ(i,Ha(i,C)));const E=b(e,["tools"]);if(t!==void 0&&E!=null){let ue=R2(i,E);Array.isArray(ue)&&(ue=ue.map(U=>MZ(i,I2(i,U)))),_(t,["setup","tools"],ue)}const R=b(e,["sessionResumption"]);t!==void 0&&R!=null&&_(t,["setup","sessionResumption"],OZ(i,R));const I=b(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&_(t,["setup","inputAudioTranscription"],xP());const D=b(e,["outputAudioTranscription"]);t!==void 0&&D!=null&&_(t,["setup","outputAudioTranscription"],xP());const j=b(e,["realtimeInputConfig"]);t!==void 0&&j!=null&&_(t,["setup","realtimeInputConfig"],UZ(i,j));const X=b(e,["contextWindowCompression"]);t!==void 0&&X!=null&&_(t,["setup","contextWindowCompression"],$Z(i,X));const W=b(e,["proactivity"]);return t!==void 0&&W!=null&&_(t,["setup","proactivity"],GZ(i,W)),n}function WZ(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["setup","model"],ji(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],YZ(i,r,t)),t}function QZ(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["setup","model"],ji(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],KZ(i,r,t)),t}function XZ(){return{}}function JZ(){return{}}function ZZ(){return{}}function eee(){return{}}function tee(i,e){const t={},n=b(e,["media"]);n!=null&&_(t,["mediaChunks"],I8(i,n));const r=b(e,["audio"]);r!=null&&_(t,["audio"],AX(i,r));const s=b(e,["audioStreamEnd"]);s!=null&&_(t,["audioStreamEnd"],s);const a=b(e,["video"]);a!=null&&_(t,["video"],wX(i,a));const l=b(e,["text"]);return l!=null&&_(t,["text"],l),b(e,["activityStart"])!=null&&_(t,["activityStart"],XZ()),b(e,["activityEnd"])!=null&&_(t,["activityEnd"],ZZ()),t}function nee(i,e){const t={},n=b(e,["media"]);if(n!=null&&_(t,["mediaChunks"],I8(i,n)),b(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const r=b(e,["audioStreamEnd"]);if(r!=null&&_(t,["audioStreamEnd"],r),b(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(b(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return b(e,["activityStart"])!=null&&_(t,["activityStart"],JZ()),b(e,["activityEnd"])!=null&&_(t,["activityEnd"],eee()),t}function U8(i,e){const t={},n=b(e,["text"]);n!=null&&_(t,["text"],n);const r=b(e,["weight"]);return r!=null&&_(t,["weight"],r),t}function iee(i,e){const t={},n=b(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>U8(i,s))),_(t,["weightedPrompts"],r)}return t}function z8(i,e){const t={},n=b(e,["temperature"]);n!=null&&_(t,["temperature"],n);const r=b(e,["topK"]);r!=null&&_(t,["topK"],r);const s=b(e,["seed"]);s!=null&&_(t,["seed"],s);const a=b(e,["guidance"]);a!=null&&_(t,["guidance"],a);const l=b(e,["bpm"]);l!=null&&_(t,["bpm"],l);const u=b(e,["density"]);u!=null&&_(t,["density"],u);const d=b(e,["brightness"]);d!=null&&_(t,["brightness"],d);const f=b(e,["scale"]);f!=null&&_(t,["scale"],f);const p=b(e,["muteBass"]);p!=null&&_(t,["muteBass"],p);const y=b(e,["muteDrums"]);y!=null&&_(t,["muteDrums"],y);const v=b(e,["onlyBassAndDrums"]);return v!=null&&_(t,["onlyBassAndDrums"],v),t}function ree(i,e){const t={},n=b(e,["musicGenerationConfig"]);return n!=null&&_(t,["musicGenerationConfig"],z8(i,n)),t}function j8(i,e){const t={},n=b(e,["model"]);return n!=null&&_(t,["model"],n),t}function q8(i,e){const t={},n=b(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>U8(i,s))),_(t,["weightedPrompts"],r)}return t}function HC(i,e){const t={},n=b(e,["setup"]);n!=null&&_(t,["setup"],j8(i,n));const r=b(e,["clientContent"]);r!=null&&_(t,["clientContent"],q8(i,r));const s=b(e,["musicGenerationConfig"]);s!=null&&_(t,["musicGenerationConfig"],z8(i,s));const a=b(e,["playbackControl"]);return a!=null&&_(t,["playbackControl"],a),t}function see(){return{}}function aee(){return{}}function oee(i,e){const t={},n=b(e,["fps"]);n!=null&&_(t,["fps"],n);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function lee(i,e){const t={},n=b(e,["fps"]);n!=null&&_(t,["fps"],n);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function uee(i,e){const t={},n=b(e,["data"]);n!=null&&_(t,["data"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function cee(i,e){const t={},n=b(e,["displayName"]);n!=null&&_(t,["displayName"],n);const r=b(e,["data"]);r!=null&&_(t,["data"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function dee(i,e){const t={},n=b(e,["fileUri"]);n!=null&&_(t,["fileUri"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function hee(i,e){const t={},n=b(e,["displayName"]);n!=null&&_(t,["displayName"],n);const r=b(e,["fileUri"]);r!=null&&_(t,["fileUri"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function fee(i,e){const t={},n=b(e,["videoMetadata"]);n!=null&&_(t,["videoMetadata"],oee(i,n));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],uee(i,s));const a=b(e,["fileData"]);a!=null&&_(t,["fileData"],dee(i,a));const l=b(e,["thoughtSignature"]);l!=null&&_(t,["thoughtSignature"],l);const u=b(e,["codeExecutionResult"]);u!=null&&_(t,["codeExecutionResult"],u);const d=b(e,["executableCode"]);d!=null&&_(t,["executableCode"],d);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const y=b(e,["text"]);return y!=null&&_(t,["text"],y),t}function pee(i,e){const t={},n=b(e,["videoMetadata"]);n!=null&&_(t,["videoMetadata"],lee(i,n));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],cee(i,s));const a=b(e,["fileData"]);a!=null&&_(t,["fileData"],hee(i,a));const l=b(e,["thoughtSignature"]);l!=null&&_(t,["thoughtSignature"],l);const u=b(e,["codeExecutionResult"]);u!=null&&_(t,["codeExecutionResult"],u);const d=b(e,["executableCode"]);d!=null&&_(t,["executableCode"],d);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const y=b(e,["text"]);return y!=null&&_(t,["text"],y),t}function mee(i,e){const t={},n=b(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>fee(i,a))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function gee(i,e){const t={},n=b(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>pee(i,a))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function wP(i,e){const t={},n=b(e,["text"]);n!=null&&_(t,["text"],n);const r=b(e,["finished"]);return r!=null&&_(t,["finished"],r),t}function AP(i,e){const t={},n=b(e,["text"]);n!=null&&_(t,["text"],n);const r=b(e,["finished"]);return r!=null&&_(t,["finished"],r),t}function yee(i,e){const t={},n=b(e,["retrievedUrl"]);n!=null&&_(t,["retrievedUrl"],n);const r=b(e,["urlRetrievalStatus"]);return r!=null&&_(t,["urlRetrievalStatus"],r),t}function vee(i,e){const t={},n=b(e,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>yee(i,s))),_(t,["urlMetadata"],r)}return t}function bee(i,e){const t={},n=b(e,["modelTurn"]);n!=null&&_(t,["modelTurn"],mee(i,n));const r=b(e,["turnComplete"]);r!=null&&_(t,["turnComplete"],r);const s=b(e,["interrupted"]);s!=null&&_(t,["interrupted"],s);const a=b(e,["groundingMetadata"]);a!=null&&_(t,["groundingMetadata"],a);const l=b(e,["generationComplete"]);l!=null&&_(t,["generationComplete"],l);const u=b(e,["inputTranscription"]);u!=null&&_(t,["inputTranscription"],wP(i,u));const d=b(e,["outputTranscription"]);d!=null&&_(t,["outputTranscription"],wP(i,d));const f=b(e,["urlContextMetadata"]);return f!=null&&_(t,["urlContextMetadata"],vee(i,f)),t}function _ee(i,e){const t={},n=b(e,["modelTurn"]);n!=null&&_(t,["modelTurn"],gee(i,n));const r=b(e,["turnComplete"]);r!=null&&_(t,["turnComplete"],r);const s=b(e,["interrupted"]);s!=null&&_(t,["interrupted"],s);const a=b(e,["groundingMetadata"]);a!=null&&_(t,["groundingMetadata"],a);const l=b(e,["generationComplete"]);l!=null&&_(t,["generationComplete"],l);const u=b(e,["inputTranscription"]);u!=null&&_(t,["inputTranscription"],AP(i,u));const d=b(e,["outputTranscription"]);return d!=null&&_(t,["outputTranscription"],AP(i,d)),t}function xee(i,e){const t={},n=b(e,["id"]);n!=null&&_(t,["id"],n);const r=b(e,["args"]);r!=null&&_(t,["args"],r);const s=b(e,["name"]);return s!=null&&_(t,["name"],s),t}function wee(i,e){const t={},n=b(e,["args"]);n!=null&&_(t,["args"],n);const r=b(e,["name"]);return r!=null&&_(t,["name"],r),t}function Aee(i,e){const t={},n=b(e,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>xee(i,s))),_(t,["functionCalls"],r)}return t}function See(i,e){const t={},n=b(e,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>wee(i,s))),_(t,["functionCalls"],r)}return t}function Tee(i,e){const t={},n=b(e,["ids"]);return n!=null&&_(t,["ids"],n),t}function Eee(i,e){const t={},n=b(e,["ids"]);return n!=null&&_(t,["ids"],n),t}function Yx(i,e){const t={},n=b(e,["modality"]);n!=null&&_(t,["modality"],n);const r=b(e,["tokenCount"]);return r!=null&&_(t,["tokenCount"],r),t}function Kx(i,e){const t={},n=b(e,["modality"]);n!=null&&_(t,["modality"],n);const r=b(e,["tokenCount"]);return r!=null&&_(t,["tokenCount"],r),t}function Cee(i,e){const t={},n=b(e,["promptTokenCount"]);n!=null&&_(t,["promptTokenCount"],n);const r=b(e,["cachedContentTokenCount"]);r!=null&&_(t,["cachedContentTokenCount"],r);const s=b(e,["responseTokenCount"]);s!=null&&_(t,["responseTokenCount"],s);const a=b(e,["toolUsePromptTokenCount"]);a!=null&&_(t,["toolUsePromptTokenCount"],a);const l=b(e,["thoughtsTokenCount"]);l!=null&&_(t,["thoughtsTokenCount"],l);const u=b(e,["totalTokenCount"]);u!=null&&_(t,["totalTokenCount"],u);const d=b(e,["promptTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(C=>Yx(i,C))),_(t,["promptTokensDetails"],v)}const f=b(e,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(C=>Yx(i,C))),_(t,["cacheTokensDetails"],v)}const p=b(e,["responseTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(C=>Yx(i,C))),_(t,["responseTokensDetails"],v)}const y=b(e,["toolUsePromptTokensDetails"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(C=>Yx(i,C))),_(t,["toolUsePromptTokensDetails"],v)}return t}function Nee(i,e){const t={},n=b(e,["promptTokenCount"]);n!=null&&_(t,["promptTokenCount"],n);const r=b(e,["cachedContentTokenCount"]);r!=null&&_(t,["cachedContentTokenCount"],r);const s=b(e,["candidatesTokenCount"]);s!=null&&_(t,["responseTokenCount"],s);const a=b(e,["toolUsePromptTokenCount"]);a!=null&&_(t,["toolUsePromptTokenCount"],a);const l=b(e,["thoughtsTokenCount"]);l!=null&&_(t,["thoughtsTokenCount"],l);const u=b(e,["totalTokenCount"]);u!=null&&_(t,["totalTokenCount"],u);const d=b(e,["promptTokensDetails"]);if(d!=null){let C=d;Array.isArray(C)&&(C=C.map(E=>Kx(i,E))),_(t,["promptTokensDetails"],C)}const f=b(e,["cacheTokensDetails"]);if(f!=null){let C=f;Array.isArray(C)&&(C=C.map(E=>Kx(i,E))),_(t,["cacheTokensDetails"],C)}const p=b(e,["candidatesTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(E=>Kx(i,E))),_(t,["responseTokensDetails"],C)}const y=b(e,["toolUsePromptTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(E=>Kx(i,E))),_(t,["toolUsePromptTokensDetails"],C)}const v=b(e,["trafficType"]);return v!=null&&_(t,["trafficType"],v),t}function kee(i,e){const t={},n=b(e,["timeLeft"]);return n!=null&&_(t,["timeLeft"],n),t}function Iee(i,e){const t={},n=b(e,["timeLeft"]);return n!=null&&_(t,["timeLeft"],n),t}function Ree(i,e){const t={},n=b(e,["newHandle"]);n!=null&&_(t,["newHandle"],n);const r=b(e,["resumable"]);r!=null&&_(t,["resumable"],r);const s=b(e,["lastConsumedClientMessageIndex"]);return s!=null&&_(t,["lastConsumedClientMessageIndex"],s),t}function Lee(i,e){const t={},n=b(e,["newHandle"]);n!=null&&_(t,["newHandle"],n);const r=b(e,["resumable"]);r!=null&&_(t,["resumable"],r);const s=b(e,["lastConsumedClientMessageIndex"]);return s!=null&&_(t,["lastConsumedClientMessageIndex"],s),t}function Pee(i,e){const t={};b(e,["setupComplete"])!=null&&_(t,["setupComplete"],see());const r=b(e,["serverContent"]);r!=null&&_(t,["serverContent"],bee(i,r));const s=b(e,["toolCall"]);s!=null&&_(t,["toolCall"],Aee(i,s));const a=b(e,["toolCallCancellation"]);a!=null&&_(t,["toolCallCancellation"],Tee(i,a));const l=b(e,["usageMetadata"]);l!=null&&_(t,["usageMetadata"],Cee(i,l));const u=b(e,["goAway"]);u!=null&&_(t,["goAway"],kee(i,u));const d=b(e,["sessionResumptionUpdate"]);return d!=null&&_(t,["sessionResumptionUpdate"],Ree(i,d)),t}function Mee(i,e){const t={};b(e,["setupComplete"])!=null&&_(t,["setupComplete"],aee());const r=b(e,["serverContent"]);r!=null&&_(t,["serverContent"],_ee(i,r));const s=b(e,["toolCall"]);s!=null&&_(t,["toolCall"],See(i,s));const a=b(e,["toolCallCancellation"]);a!=null&&_(t,["toolCallCancellation"],Eee(i,a));const l=b(e,["usageMetadata"]);l!=null&&_(t,["usageMetadata"],Nee(i,l));const u=b(e,["goAway"]);u!=null&&_(t,["goAway"],Iee(i,u));const d=b(e,["sessionResumptionUpdate"]);return d!=null&&_(t,["sessionResumptionUpdate"],Lee(i,d)),t}function Dee(){return{}}function Oee(i,e){const t={},n=b(e,["text"]);n!=null&&_(t,["text"],n);const r=b(e,["weight"]);return r!=null&&_(t,["weight"],r),t}function Fee(i,e){const t={},n=b(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Oee(i,s))),_(t,["weightedPrompts"],r)}return t}function Vee(i,e){const t={},n=b(e,["temperature"]);n!=null&&_(t,["temperature"],n);const r=b(e,["topK"]);r!=null&&_(t,["topK"],r);const s=b(e,["seed"]);s!=null&&_(t,["seed"],s);const a=b(e,["guidance"]);a!=null&&_(t,["guidance"],a);const l=b(e,["bpm"]);l!=null&&_(t,["bpm"],l);const u=b(e,["density"]);u!=null&&_(t,["density"],u);const d=b(e,["brightness"]);d!=null&&_(t,["brightness"],d);const f=b(e,["scale"]);f!=null&&_(t,["scale"],f);const p=b(e,["muteBass"]);p!=null&&_(t,["muteBass"],p);const y=b(e,["muteDrums"]);y!=null&&_(t,["muteDrums"],y);const v=b(e,["onlyBassAndDrums"]);return v!=null&&_(t,["onlyBassAndDrums"],v),t}function Bee(i,e){const t={},n=b(e,["clientContent"]);n!=null&&_(t,["clientContent"],Fee(i,n));const r=b(e,["musicGenerationConfig"]);return r!=null&&_(t,["musicGenerationConfig"],Vee(i,r)),t}function Uee(i,e){const t={},n=b(e,["data"]);n!=null&&_(t,["data"],n);const r=b(e,["mimeType"]);r!=null&&_(t,["mimeType"],r);const s=b(e,["sourceMetadata"]);return s!=null&&_(t,["sourceMetadata"],Bee(i,s)),t}function zee(i,e){const t={},n=b(e,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Uee(i,s))),_(t,["audioChunks"],r)}return t}function jee(i,e){const t={},n=b(e,["text"]);n!=null&&_(t,["text"],n);const r=b(e,["filteredReason"]);return r!=null&&_(t,["filteredReason"],r),t}function qee(i,e){const t={};b(e,["setupComplete"])!=null&&_(t,["setupComplete"],Dee());const r=b(e,["serverContent"]);r!=null&&_(t,["serverContent"],zee(i,r));const s=b(e,["filteredPrompt"]);return s!=null&&_(t,["filteredPrompt"],jee(i,s)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $ee(i,e){const t={},n=b(e,["fps"]);n!=null&&_(t,["fps"],n);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function Hee(i,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["data"]);n!=null&&_(t,["data"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function Gee(i,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["fileUri"]);n!=null&&_(t,["fileUri"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function Yee(i,e){const t={},n=b(e,["videoMetadata"]);n!=null&&_(t,["videoMetadata"],$ee(i,n));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],Hee(i,s));const a=b(e,["fileData"]);a!=null&&_(t,["fileData"],Gee(i,a));const l=b(e,["thoughtSignature"]);l!=null&&_(t,["thoughtSignature"],l);const u=b(e,["codeExecutionResult"]);u!=null&&_(t,["codeExecutionResult"],u);const d=b(e,["executableCode"]);d!=null&&_(t,["executableCode"],d);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const y=b(e,["text"]);return y!=null&&_(t,["text"],y),t}function P5(i,e){const t={},n=b(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Yee(i,a))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function Kee(i,e){const t={},n=b(e,["anyOf"]);n!=null&&_(t,["anyOf"],n);const r=b(e,["default"]);r!=null&&_(t,["default"],r);const s=b(e,["description"]);s!=null&&_(t,["description"],s);const a=b(e,["enum"]);a!=null&&_(t,["enum"],a);const l=b(e,["example"]);l!=null&&_(t,["example"],l);const u=b(e,["format"]);u!=null&&_(t,["format"],u);const d=b(e,["items"]);d!=null&&_(t,["items"],d);const f=b(e,["maxItems"]);f!=null&&_(t,["maxItems"],f);const p=b(e,["maxLength"]);p!=null&&_(t,["maxLength"],p);const y=b(e,["maxProperties"]);y!=null&&_(t,["maxProperties"],y);const v=b(e,["maximum"]);v!=null&&_(t,["maximum"],v);const C=b(e,["minItems"]);C!=null&&_(t,["minItems"],C);const E=b(e,["minLength"]);E!=null&&_(t,["minLength"],E);const R=b(e,["minProperties"]);R!=null&&_(t,["minProperties"],R);const I=b(e,["minimum"]);I!=null&&_(t,["minimum"],I);const D=b(e,["nullable"]);D!=null&&_(t,["nullable"],D);const j=b(e,["pattern"]);j!=null&&_(t,["pattern"],j);const X=b(e,["properties"]);X!=null&&_(t,["properties"],X);const W=b(e,["propertyOrdering"]);W!=null&&_(t,["propertyOrdering"],W);const ue=b(e,["required"]);ue!=null&&_(t,["required"],ue);const U=b(e,["title"]);U!=null&&_(t,["title"],U);const P=b(e,["type"]);return P!=null&&_(t,["type"],P),t}function Wee(i,e){const t={};if(b(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=b(e,["category"]);n!=null&&_(t,["category"],n);const r=b(e,["threshold"]);return r!=null&&_(t,["threshold"],r),t}function Qee(i,e){const t={},n=b(e,["behavior"]);n!=null&&_(t,["behavior"],n);const r=b(e,["description"]);r!=null&&_(t,["description"],r);const s=b(e,["name"]);s!=null&&_(t,["name"],s);const a=b(e,["parameters"]);a!=null&&_(t,["parameters"],a);const l=b(e,["response"]);return l!=null&&_(t,["response"],l),t}function Xee(i,e){const t={},n=b(e,["startTime"]);n!=null&&_(t,["startTime"],n);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function Jee(i,e){const t={},n=b(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],Xee(i,n)),t}function Zee(i,e){const t={},n=b(e,["mode"]);n!=null&&_(t,["mode"],n);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function ete(i,e){const t={},n=b(e,["dynamicRetrievalConfig"]);return n!=null&&_(t,["dynamicRetrievalConfig"],Zee(i,n)),t}function tte(){return{}}function nte(i,e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>Qee(i,d))),_(t,["functionDeclarations"],u)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearch"]);r!=null&&_(t,["googleSearch"],Jee(i,r));const s=b(e,["googleSearchRetrieval"]);if(s!=null&&_(t,["googleSearchRetrieval"],ete(i,s)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&_(t,["urlContext"],tte());const l=b(e,["codeExecution"]);return l!=null&&_(t,["codeExecution"],l),t}function ite(i,e){const t={},n=b(e,["mode"]);n!=null&&_(t,["mode"],n);const r=b(e,["allowedFunctionNames"]);return r!=null&&_(t,["allowedFunctionNames"],r),t}function rte(i,e){const t={},n=b(e,["latitude"]);n!=null&&_(t,["latitude"],n);const r=b(e,["longitude"]);return r!=null&&_(t,["longitude"],r),t}function ste(i,e){const t={},n=b(e,["latLng"]);n!=null&&_(t,["latLng"],rte(i,n));const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function ate(i,e){const t={},n=b(e,["functionCallingConfig"]);n!=null&&_(t,["functionCallingConfig"],ite(i,n));const r=b(e,["retrievalConfig"]);return r!=null&&_(t,["retrievalConfig"],ste(i,r)),t}function ote(i,e){const t={},n=b(e,["voiceName"]);return n!=null&&_(t,["voiceName"],n),t}function $8(i,e){const t={},n=b(e,["prebuiltVoiceConfig"]);return n!=null&&_(t,["prebuiltVoiceConfig"],ote(i,n)),t}function lte(i,e){const t={},n=b(e,["speaker"]);n!=null&&_(t,["speaker"],n);const r=b(e,["voiceConfig"]);return r!=null&&_(t,["voiceConfig"],$8(i,r)),t}function ute(i,e){const t={},n=b(e,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>lte(i,s))),_(t,["speakerVoiceConfigs"],r)}return t}function cte(i,e){const t={},n=b(e,["voiceConfig"]);n!=null&&_(t,["voiceConfig"],$8(i,n));const r=b(e,["multiSpeakerVoiceConfig"]);r!=null&&_(t,["multiSpeakerVoiceConfig"],ute(i,r));const s=b(e,["languageCode"]);return s!=null&&_(t,["languageCode"],s),t}function dte(i,e){const t={},n=b(e,["includeThoughts"]);n!=null&&_(t,["includeThoughts"],n);const r=b(e,["thinkingBudget"]);return r!=null&&_(t,["thinkingBudget"],r),t}function hte(i,e,t){const n={},r=b(e,["systemInstruction"]);t!==void 0&&r!=null&&_(t,["systemInstruction"],P5(i,Ha(i,r)));const s=b(e,["temperature"]);s!=null&&_(n,["temperature"],s);const a=b(e,["topP"]);a!=null&&_(n,["topP"],a);const l=b(e,["topK"]);l!=null&&_(n,["topK"],l);const u=b(e,["candidateCount"]);u!=null&&_(n,["candidateCount"],u);const d=b(e,["maxOutputTokens"]);d!=null&&_(n,["maxOutputTokens"],d);const f=b(e,["stopSequences"]);f!=null&&_(n,["stopSequences"],f);const p=b(e,["responseLogprobs"]);p!=null&&_(n,["responseLogprobs"],p);const y=b(e,["logprobs"]);y!=null&&_(n,["logprobs"],y);const v=b(e,["presencePenalty"]);v!=null&&_(n,["presencePenalty"],v);const C=b(e,["frequencyPenalty"]);C!=null&&_(n,["frequencyPenalty"],C);const E=b(e,["seed"]);E!=null&&_(n,["seed"],E);const R=b(e,["responseMimeType"]);R!=null&&_(n,["responseMimeType"],R);const I=b(e,["responseSchema"]);if(I!=null&&_(n,["responseSchema"],Kee(i,NA(i,I))),b(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=b(e,["safetySettings"]);if(t!==void 0&&D!=null){let Y=D;Array.isArray(Y)&&(Y=Y.map(O=>Wee(i,O))),_(t,["safetySettings"],Y)}const j=b(e,["tools"]);if(t!==void 0&&j!=null){let Y=R2(i,j);Array.isArray(Y)&&(Y=Y.map(O=>nte(i,I2(i,O)))),_(t,["tools"],Y)}const X=b(e,["toolConfig"]);if(t!==void 0&&X!=null&&_(t,["toolConfig"],ate(i,X)),b(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=b(e,["cachedContent"]);t!==void 0&&W!=null&&_(t,["cachedContent"],Fp(i,W));const ue=b(e,["responseModalities"]);ue!=null&&_(n,["responseModalities"],ue);const U=b(e,["mediaResolution"]);U!=null&&_(n,["mediaResolution"],U);const P=b(e,["speechConfig"]);if(P!=null&&_(n,["speechConfig"],cte(i,P8(i,P))),b(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=b(e,["thinkingConfig"]);return V!=null&&_(n,["thinkingConfig"],dte(i,V)),n}function SP(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["contents"]);if(r!=null){let a=zu(i,r);Array.isArray(a)&&(a=a.map(l=>P5(i,l))),_(t,["contents"],a)}const s=b(e,["config"]);return s!=null&&_(t,["generationConfig"],hte(i,s,t)),t}function fte(i,e,t){const n={},r=b(e,["taskType"]);t!==void 0&&r!=null&&_(t,["requests[]","taskType"],r);const s=b(e,["title"]);t!==void 0&&s!=null&&_(t,["requests[]","title"],s);const a=b(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&_(t,["requests[]","outputDimensionality"],a),b(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function pte(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["contents"]);r!=null&&_(t,["requests[]","content"],L8(i,r));const s=b(e,["config"]);s!=null&&_(t,["config"],fte(i,s,t));const a=b(e,["model"]);return a!==void 0&&_(t,["requests[]","model"],ji(i,a)),t}function mte(i,e,t){const n={};if(b(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=b(e,["numberOfImages"]);t!==void 0&&r!=null&&_(t,["parameters","sampleCount"],r);const s=b(e,["aspectRatio"]);t!==void 0&&s!=null&&_(t,["parameters","aspectRatio"],s);const a=b(e,["guidanceScale"]);if(t!==void 0&&a!=null&&_(t,["parameters","guidanceScale"],a),b(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=b(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&_(t,["parameters","safetySetting"],l);const u=b(e,["personGeneration"]);t!==void 0&&u!=null&&_(t,["parameters","personGeneration"],u);const d=b(e,["includeSafetyAttributes"]);t!==void 0&&d!=null&&_(t,["parameters","includeSafetyAttributes"],d);const f=b(e,["includeRaiReason"]);t!==void 0&&f!=null&&_(t,["parameters","includeRaiReason"],f);const p=b(e,["language"]);t!==void 0&&p!=null&&_(t,["parameters","language"],p);const y=b(e,["outputMimeType"]);t!==void 0&&y!=null&&_(t,["parameters","outputOptions","mimeType"],y);const v=b(e,["outputCompressionQuality"]);if(t!==void 0&&v!=null&&_(t,["parameters","outputOptions","compressionQuality"],v),b(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(b(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function gte(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=b(e,["config"]);return s!=null&&_(t,["config"],mte(i,s,t)),t}function yte(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","name"],ji(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function vte(i,e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);t!==void 0&&s!=null&&_(t,["_query","pageToken"],s);const a=b(e,["filter"]);t!==void 0&&a!=null&&_(t,["_query","filter"],a);const l=b(e,["queryBase"]);return t!==void 0&&l!=null&&_(t,["_url","models_url"],O8(i,l)),n}function bte(i,e){const t={},n=b(e,["config"]);return n!=null&&_(t,["config"],vte(i,n,t)),t}function _te(i,e,t){const n={},r=b(e,["displayName"]);t!==void 0&&r!=null&&_(t,["displayName"],r);const s=b(e,["description"]);t!==void 0&&s!=null&&_(t,["description"],s);const a=b(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&_(t,["defaultCheckpointId"],a),n}function xte(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","name"],ji(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],_te(i,r,t)),t}function wte(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","name"],ji(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function Ate(i,e){const t={};if(b(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(b(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(b(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Ste(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["contents"]);if(r!=null){let a=zu(i,r);Array.isArray(a)&&(a=a.map(l=>P5(i,l))),_(t,["contents"],a)}const s=b(e,["config"]);return s!=null&&_(t,["config"],Ate(i,s)),t}function Tte(i,e){const t={};if(b(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=b(e,["imageBytes"]);n!=null&&_(t,["bytesBase64Encoded"],Fh(i,n));const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function Ete(i,e,t){const n={},r=b(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&_(t,["parameters","sampleCount"],r),b(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=b(e,["durationSeconds"]);if(t!==void 0&&s!=null&&_(t,["parameters","durationSeconds"],s),b(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=b(e,["aspectRatio"]);if(t!==void 0&&a!=null&&_(t,["parameters","aspectRatio"],a),b(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=b(e,["personGeneration"]);if(t!==void 0&&l!=null&&_(t,["parameters","personGeneration"],l),b(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=b(e,["negativePrompt"]);t!==void 0&&u!=null&&_(t,["parameters","negativePrompt"],u);const d=b(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&_(t,["parameters","enhancePrompt"],d),b(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(b(e,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");return n}function Cte(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=b(e,["image"]);if(s!=null&&_(t,["instances[0]","image"],Tte(i,s)),b(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=b(e,["config"]);return a!=null&&_(t,["config"],Ete(i,a,t)),t}function Nte(i,e){const t={},n=b(e,["fps"]);n!=null&&_(t,["fps"],n);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function kte(i,e){const t={},n=b(e,["displayName"]);n!=null&&_(t,["displayName"],n);const r=b(e,["data"]);r!=null&&_(t,["data"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function Ite(i,e){const t={},n=b(e,["displayName"]);n!=null&&_(t,["displayName"],n);const r=b(e,["fileUri"]);r!=null&&_(t,["fileUri"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function Rte(i,e){const t={},n=b(e,["videoMetadata"]);n!=null&&_(t,["videoMetadata"],Nte(i,n));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],kte(i,s));const a=b(e,["fileData"]);a!=null&&_(t,["fileData"],Ite(i,a));const l=b(e,["thoughtSignature"]);l!=null&&_(t,["thoughtSignature"],l);const u=b(e,["codeExecutionResult"]);u!=null&&_(t,["codeExecutionResult"],u);const d=b(e,["executableCode"]);d!=null&&_(t,["executableCode"],d);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const y=b(e,["text"]);return y!=null&&_(t,["text"],y),t}function Mv(i,e){const t={},n=b(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Rte(i,a))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function Lte(i,e){const t={},n=b(e,["anyOf"]);n!=null&&_(t,["anyOf"],n);const r=b(e,["default"]);r!=null&&_(t,["default"],r);const s=b(e,["description"]);s!=null&&_(t,["description"],s);const a=b(e,["enum"]);a!=null&&_(t,["enum"],a);const l=b(e,["example"]);l!=null&&_(t,["example"],l);const u=b(e,["format"]);u!=null&&_(t,["format"],u);const d=b(e,["items"]);d!=null&&_(t,["items"],d);const f=b(e,["maxItems"]);f!=null&&_(t,["maxItems"],f);const p=b(e,["maxLength"]);p!=null&&_(t,["maxLength"],p);const y=b(e,["maxProperties"]);y!=null&&_(t,["maxProperties"],y);const v=b(e,["maximum"]);v!=null&&_(t,["maximum"],v);const C=b(e,["minItems"]);C!=null&&_(t,["minItems"],C);const E=b(e,["minLength"]);E!=null&&_(t,["minLength"],E);const R=b(e,["minProperties"]);R!=null&&_(t,["minProperties"],R);const I=b(e,["minimum"]);I!=null&&_(t,["minimum"],I);const D=b(e,["nullable"]);D!=null&&_(t,["nullable"],D);const j=b(e,["pattern"]);j!=null&&_(t,["pattern"],j);const X=b(e,["properties"]);X!=null&&_(t,["properties"],X);const W=b(e,["propertyOrdering"]);W!=null&&_(t,["propertyOrdering"],W);const ue=b(e,["required"]);ue!=null&&_(t,["required"],ue);const U=b(e,["title"]);U!=null&&_(t,["title"],U);const P=b(e,["type"]);return P!=null&&_(t,["type"],P),t}function Pte(i,e){const t={},n=b(e,["featureSelectionPreference"]);return n!=null&&_(t,["featureSelectionPreference"],n),t}function Mte(i,e){const t={},n=b(e,["method"]);n!=null&&_(t,["method"],n);const r=b(e,["category"]);r!=null&&_(t,["category"],r);const s=b(e,["threshold"]);return s!=null&&_(t,["threshold"],s),t}function Dte(i,e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(e,["description"]);n!=null&&_(t,["description"],n);const r=b(e,["name"]);r!=null&&_(t,["name"],r);const s=b(e,["parameters"]);s!=null&&_(t,["parameters"],s);const a=b(e,["response"]);return a!=null&&_(t,["response"],a),t}function Ote(i,e){const t={},n=b(e,["startTime"]);n!=null&&_(t,["startTime"],n);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function Fte(i,e){const t={},n=b(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],Ote(i,n)),t}function Vte(i,e){const t={},n=b(e,["mode"]);n!=null&&_(t,["mode"],n);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function Bte(i,e){const t={},n=b(e,["dynamicRetrievalConfig"]);return n!=null&&_(t,["dynamicRetrievalConfig"],Vte(i,n)),t}function Ute(){return{}}function zte(i,e){const t={},n=b(e,["apiKeyString"]);return n!=null&&_(t,["apiKeyString"],n),t}function jte(i,e){const t={},n=b(e,["apiKeyConfig"]);n!=null&&_(t,["apiKeyConfig"],zte(i,n));const r=b(e,["authType"]);r!=null&&_(t,["authType"],r);const s=b(e,["googleServiceAccountConfig"]);s!=null&&_(t,["googleServiceAccountConfig"],s);const a=b(e,["httpBasicAuthConfig"]);a!=null&&_(t,["httpBasicAuthConfig"],a);const l=b(e,["oauthConfig"]);l!=null&&_(t,["oauthConfig"],l);const u=b(e,["oidcConfig"]);return u!=null&&_(t,["oidcConfig"],u),t}function qte(i,e){const t={},n=b(e,["authConfig"]);return n!=null&&_(t,["authConfig"],jte(i,n)),t}function $te(){return{}}function H8(i,e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>Dte(i,y))),_(t,["functionDeclarations"],p)}const r=b(e,["retrieval"]);r!=null&&_(t,["retrieval"],r);const s=b(e,["googleSearch"]);s!=null&&_(t,["googleSearch"],Fte(i,s));const a=b(e,["googleSearchRetrieval"]);a!=null&&_(t,["googleSearchRetrieval"],Bte(i,a)),b(e,["enterpriseWebSearch"])!=null&&_(t,["enterpriseWebSearch"],Ute());const u=b(e,["googleMaps"]);u!=null&&_(t,["googleMaps"],qte(i,u)),b(e,["urlContext"])!=null&&_(t,["urlContext"],$te());const f=b(e,["codeExecution"]);return f!=null&&_(t,["codeExecution"],f),t}function Hte(i,e){const t={},n=b(e,["mode"]);n!=null&&_(t,["mode"],n);const r=b(e,["allowedFunctionNames"]);return r!=null&&_(t,["allowedFunctionNames"],r),t}function Gte(i,e){const t={},n=b(e,["latitude"]);n!=null&&_(t,["latitude"],n);const r=b(e,["longitude"]);return r!=null&&_(t,["longitude"],r),t}function Yte(i,e){const t={},n=b(e,["latLng"]);n!=null&&_(t,["latLng"],Gte(i,n));const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function Kte(i,e){const t={},n=b(e,["functionCallingConfig"]);n!=null&&_(t,["functionCallingConfig"],Hte(i,n));const r=b(e,["retrievalConfig"]);return r!=null&&_(t,["retrievalConfig"],Yte(i,r)),t}function Wte(i,e){const t={},n=b(e,["voiceName"]);return n!=null&&_(t,["voiceName"],n),t}function Qte(i,e){const t={},n=b(e,["prebuiltVoiceConfig"]);return n!=null&&_(t,["prebuiltVoiceConfig"],Wte(i,n)),t}function Xte(i,e){const t={},n=b(e,["voiceConfig"]);if(n!=null&&_(t,["voiceConfig"],Qte(i,n)),b(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function Jte(i,e){const t={},n=b(e,["includeThoughts"]);n!=null&&_(t,["includeThoughts"],n);const r=b(e,["thinkingBudget"]);return r!=null&&_(t,["thinkingBudget"],r),t}function Zte(i,e,t){const n={},r=b(e,["systemInstruction"]);t!==void 0&&r!=null&&_(t,["systemInstruction"],Mv(i,Ha(i,r)));const s=b(e,["temperature"]);s!=null&&_(n,["temperature"],s);const a=b(e,["topP"]);a!=null&&_(n,["topP"],a);const l=b(e,["topK"]);l!=null&&_(n,["topK"],l);const u=b(e,["candidateCount"]);u!=null&&_(n,["candidateCount"],u);const d=b(e,["maxOutputTokens"]);d!=null&&_(n,["maxOutputTokens"],d);const f=b(e,["stopSequences"]);f!=null&&_(n,["stopSequences"],f);const p=b(e,["responseLogprobs"]);p!=null&&_(n,["responseLogprobs"],p);const y=b(e,["logprobs"]);y!=null&&_(n,["logprobs"],y);const v=b(e,["presencePenalty"]);v!=null&&_(n,["presencePenalty"],v);const C=b(e,["frequencyPenalty"]);C!=null&&_(n,["frequencyPenalty"],C);const E=b(e,["seed"]);E!=null&&_(n,["seed"],E);const R=b(e,["responseMimeType"]);R!=null&&_(n,["responseMimeType"],R);const I=b(e,["responseSchema"]);I!=null&&_(n,["responseSchema"],Lte(i,NA(i,I)));const D=b(e,["routingConfig"]);D!=null&&_(n,["routingConfig"],D);const j=b(e,["modelSelectionConfig"]);j!=null&&_(n,["modelConfig"],Pte(i,j));const X=b(e,["safetySettings"]);if(t!==void 0&&X!=null){let H=X;Array.isArray(H)&&(H=H.map(fe=>Mte(i,fe))),_(t,["safetySettings"],H)}const W=b(e,["tools"]);if(t!==void 0&&W!=null){let H=R2(i,W);Array.isArray(H)&&(H=H.map(fe=>H8(i,I2(i,fe)))),_(t,["tools"],H)}const ue=b(e,["toolConfig"]);t!==void 0&&ue!=null&&_(t,["toolConfig"],Kte(i,ue));const U=b(e,["labels"]);t!==void 0&&U!=null&&_(t,["labels"],U);const P=b(e,["cachedContent"]);t!==void 0&&P!=null&&_(t,["cachedContent"],Fp(i,P));const V=b(e,["responseModalities"]);V!=null&&_(n,["responseModalities"],V);const Y=b(e,["mediaResolution"]);Y!=null&&_(n,["mediaResolution"],Y);const O=b(e,["speechConfig"]);O!=null&&_(n,["speechConfig"],Xte(i,P8(i,O)));const F=b(e,["audioTimestamp"]);F!=null&&_(n,["audioTimestamp"],F);const B=b(e,["thinkingConfig"]);return B!=null&&_(n,["thinkingConfig"],Jte(i,B)),n}function TP(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["contents"]);if(r!=null){let a=zu(i,r);Array.isArray(a)&&(a=a.map(l=>Mv(i,l))),_(t,["contents"],a)}const s=b(e,["config"]);return s!=null&&_(t,["generationConfig"],Zte(i,s,t)),t}function ene(i,e,t){const n={},r=b(e,["taskType"]);t!==void 0&&r!=null&&_(t,["instances[]","task_type"],r);const s=b(e,["title"]);t!==void 0&&s!=null&&_(t,["instances[]","title"],s);const a=b(e,["outputDimensionality"]);t!==void 0&&a!=null&&_(t,["parameters","outputDimensionality"],a);const l=b(e,["mimeType"]);t!==void 0&&l!=null&&_(t,["instances[]","mimeType"],l);const u=b(e,["autoTruncate"]);return t!==void 0&&u!=null&&_(t,["parameters","autoTruncate"],u),n}function tne(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["contents"]);r!=null&&_(t,["instances[]","content"],L8(i,r));const s=b(e,["config"]);return s!=null&&_(t,["config"],ene(i,s,t)),t}function nne(i,e,t){const n={},r=b(e,["outputGcsUri"]);t!==void 0&&r!=null&&_(t,["parameters","storageUri"],r);const s=b(e,["negativePrompt"]);t!==void 0&&s!=null&&_(t,["parameters","negativePrompt"],s);const a=b(e,["numberOfImages"]);t!==void 0&&a!=null&&_(t,["parameters","sampleCount"],a);const l=b(e,["aspectRatio"]);t!==void 0&&l!=null&&_(t,["parameters","aspectRatio"],l);const u=b(e,["guidanceScale"]);t!==void 0&&u!=null&&_(t,["parameters","guidanceScale"],u);const d=b(e,["seed"]);t!==void 0&&d!=null&&_(t,["parameters","seed"],d);const f=b(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&_(t,["parameters","safetySetting"],f);const p=b(e,["personGeneration"]);t!==void 0&&p!=null&&_(t,["parameters","personGeneration"],p);const y=b(e,["includeSafetyAttributes"]);t!==void 0&&y!=null&&_(t,["parameters","includeSafetyAttributes"],y);const v=b(e,["includeRaiReason"]);t!==void 0&&v!=null&&_(t,["parameters","includeRaiReason"],v);const C=b(e,["language"]);t!==void 0&&C!=null&&_(t,["parameters","language"],C);const E=b(e,["outputMimeType"]);t!==void 0&&E!=null&&_(t,["parameters","outputOptions","mimeType"],E);const R=b(e,["outputCompressionQuality"]);t!==void 0&&R!=null&&_(t,["parameters","outputOptions","compressionQuality"],R);const I=b(e,["addWatermark"]);t!==void 0&&I!=null&&_(t,["parameters","addWatermark"],I);const D=b(e,["enhancePrompt"]);return t!==void 0&&D!=null&&_(t,["parameters","enhancePrompt"],D),n}function ine(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=b(e,["config"]);return s!=null&&_(t,["config"],nne(i,s,t)),t}function M5(i,e){const t={},n=b(e,["gcsUri"]);n!=null&&_(t,["gcsUri"],n);const r=b(e,["imageBytes"]);r!=null&&_(t,["bytesBase64Encoded"],Fh(i,r));const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function rne(i,e){const t={},n=b(e,["maskMode"]);n!=null&&_(t,["maskMode"],n);const r=b(e,["segmentationClasses"]);r!=null&&_(t,["maskClasses"],r);const s=b(e,["maskDilation"]);return s!=null&&_(t,["dilation"],s),t}function sne(i,e){const t={},n=b(e,["controlType"]);n!=null&&_(t,["controlType"],n);const r=b(e,["enableControlImageComputation"]);return r!=null&&_(t,["computeControl"],r),t}function ane(i,e){const t={},n=b(e,["styleDescription"]);return n!=null&&_(t,["styleDescription"],n),t}function one(i,e){const t={},n=b(e,["subjectType"]);n!=null&&_(t,["subjectType"],n);const r=b(e,["subjectDescription"]);return r!=null&&_(t,["subjectDescription"],r),t}function lne(i,e){const t={},n=b(e,["referenceImage"]);n!=null&&_(t,["referenceImage"],M5(i,n));const r=b(e,["referenceId"]);r!=null&&_(t,["referenceId"],r);const s=b(e,["referenceType"]);s!=null&&_(t,["referenceType"],s);const a=b(e,["maskImageConfig"]);a!=null&&_(t,["maskImageConfig"],rne(i,a));const l=b(e,["controlImageConfig"]);l!=null&&_(t,["controlImageConfig"],sne(i,l));const u=b(e,["styleImageConfig"]);u!=null&&_(t,["styleImageConfig"],ane(i,u));const d=b(e,["subjectImageConfig"]);return d!=null&&_(t,["subjectImageConfig"],one(i,d)),t}function une(i,e,t){const n={},r=b(e,["outputGcsUri"]);t!==void 0&&r!=null&&_(t,["parameters","storageUri"],r);const s=b(e,["negativePrompt"]);t!==void 0&&s!=null&&_(t,["parameters","negativePrompt"],s);const a=b(e,["numberOfImages"]);t!==void 0&&a!=null&&_(t,["parameters","sampleCount"],a);const l=b(e,["aspectRatio"]);t!==void 0&&l!=null&&_(t,["parameters","aspectRatio"],l);const u=b(e,["guidanceScale"]);t!==void 0&&u!=null&&_(t,["parameters","guidanceScale"],u);const d=b(e,["seed"]);t!==void 0&&d!=null&&_(t,["parameters","seed"],d);const f=b(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&_(t,["parameters","safetySetting"],f);const p=b(e,["personGeneration"]);t!==void 0&&p!=null&&_(t,["parameters","personGeneration"],p);const y=b(e,["includeSafetyAttributes"]);t!==void 0&&y!=null&&_(t,["parameters","includeSafetyAttributes"],y);const v=b(e,["includeRaiReason"]);t!==void 0&&v!=null&&_(t,["parameters","includeRaiReason"],v);const C=b(e,["language"]);t!==void 0&&C!=null&&_(t,["parameters","language"],C);const E=b(e,["outputMimeType"]);t!==void 0&&E!=null&&_(t,["parameters","outputOptions","mimeType"],E);const R=b(e,["outputCompressionQuality"]);t!==void 0&&R!=null&&_(t,["parameters","outputOptions","compressionQuality"],R);const I=b(e,["editMode"]);t!==void 0&&I!=null&&_(t,["parameters","editMode"],I);const D=b(e,["baseSteps"]);return t!==void 0&&D!=null&&_(t,["parameters","editConfig","baseSteps"],D),n}function cne(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=b(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>lne(i,u))),_(t,["instances[0]","referenceImages"],l)}const a=b(e,["config"]);return a!=null&&_(t,["config"],une(i,a,t)),t}function dne(i,e,t){const n={},r=b(e,["includeRaiReason"]);t!==void 0&&r!=null&&_(t,["parameters","includeRaiReason"],r);const s=b(e,["outputMimeType"]);t!==void 0&&s!=null&&_(t,["parameters","outputOptions","mimeType"],s);const a=b(e,["outputCompressionQuality"]);t!==void 0&&a!=null&&_(t,["parameters","outputOptions","compressionQuality"],a);const l=b(e,["numberOfImages"]);t!==void 0&&l!=null&&_(t,["parameters","sampleCount"],l);const u=b(e,["mode"]);return t!==void 0&&u!=null&&_(t,["parameters","mode"],u),n}function hne(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["image"]);r!=null&&_(t,["instances[0]","image"],M5(i,r));const s=b(e,["upscaleFactor"]);s!=null&&_(t,["parameters","upscaleConfig","upscaleFactor"],s);const a=b(e,["config"]);return a!=null&&_(t,["config"],dne(i,a,t)),t}function fne(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","name"],ji(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function pne(i,e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);t!==void 0&&s!=null&&_(t,["_query","pageToken"],s);const a=b(e,["filter"]);t!==void 0&&a!=null&&_(t,["_query","filter"],a);const l=b(e,["queryBase"]);return t!==void 0&&l!=null&&_(t,["_url","models_url"],O8(i,l)),n}function mne(i,e){const t={},n=b(e,["config"]);return n!=null&&_(t,["config"],pne(i,n,t)),t}function gne(i,e,t){const n={},r=b(e,["displayName"]);t!==void 0&&r!=null&&_(t,["displayName"],r);const s=b(e,["description"]);t!==void 0&&s!=null&&_(t,["description"],s);const a=b(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&_(t,["defaultCheckpointId"],a),n}function yne(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],gne(i,r,t)),t}function vne(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","name"],ji(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function bne(i,e,t){const n={},r=b(e,["systemInstruction"]);t!==void 0&&r!=null&&_(t,["systemInstruction"],Mv(i,Ha(i,r)));const s=b(e,["tools"]);if(t!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>H8(i,u))),_(t,["tools"],l)}const a=b(e,["generationConfig"]);return t!==void 0&&a!=null&&_(t,["generationConfig"],a),n}function _ne(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["contents"]);if(r!=null){let a=zu(i,r);Array.isArray(a)&&(a=a.map(l=>Mv(i,l))),_(t,["contents"],a)}const s=b(e,["config"]);return s!=null&&_(t,["config"],bne(i,s,t)),t}function xne(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["contents"]);if(r!=null){let a=zu(i,r);Array.isArray(a)&&(a=a.map(l=>Mv(i,l))),_(t,["contents"],a)}const s=b(e,["config"]);return s!=null&&_(t,["config"],s),t}function wne(i,e){const t={},n=b(e,["uri"]);n!=null&&_(t,["gcsUri"],n);const r=b(e,["videoBytes"]);r!=null&&_(t,["bytesBase64Encoded"],Fh(i,r));const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function Ane(i,e,t){const n={},r=b(e,["numberOfVideos"]);t!==void 0&&r!=null&&_(t,["parameters","sampleCount"],r);const s=b(e,["outputGcsUri"]);t!==void 0&&s!=null&&_(t,["parameters","storageUri"],s);const a=b(e,["fps"]);t!==void 0&&a!=null&&_(t,["parameters","fps"],a);const l=b(e,["durationSeconds"]);t!==void 0&&l!=null&&_(t,["parameters","durationSeconds"],l);const u=b(e,["seed"]);t!==void 0&&u!=null&&_(t,["parameters","seed"],u);const d=b(e,["aspectRatio"]);t!==void 0&&d!=null&&_(t,["parameters","aspectRatio"],d);const f=b(e,["resolution"]);t!==void 0&&f!=null&&_(t,["parameters","resolution"],f);const p=b(e,["personGeneration"]);t!==void 0&&p!=null&&_(t,["parameters","personGeneration"],p);const y=b(e,["pubsubTopic"]);t!==void 0&&y!=null&&_(t,["parameters","pubsubTopic"],y);const v=b(e,["negativePrompt"]);t!==void 0&&v!=null&&_(t,["parameters","negativePrompt"],v);const C=b(e,["enhancePrompt"]);t!==void 0&&C!=null&&_(t,["parameters","enhancePrompt"],C);const E=b(e,["generateAudio"]);t!==void 0&&E!=null&&_(t,["parameters","generateAudio"],E);const R=b(e,["lastFrame"]);return t!==void 0&&R!=null&&_(t,["instances[0]","lastFrame"],M5(i,R)),n}function Sne(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["_url","model"],ji(i,n));const r=b(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=b(e,["image"]);s!=null&&_(t,["instances[0]","image"],M5(i,s));const a=b(e,["video"]);a!=null&&_(t,["instances[0]","video"],wne(i,a));const l=b(e,["config"]);return l!=null&&_(t,["config"],Ane(i,l,t)),t}function Tne(i,e){const t={},n=b(e,["fps"]);n!=null&&_(t,["fps"],n);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function Ene(i,e){const t={},n=b(e,["data"]);n!=null&&_(t,["data"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function Cne(i,e){const t={},n=b(e,["fileUri"]);n!=null&&_(t,["fileUri"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function Nne(i,e){const t={},n=b(e,["videoMetadata"]);n!=null&&_(t,["videoMetadata"],Tne(i,n));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],Ene(i,s));const a=b(e,["fileData"]);a!=null&&_(t,["fileData"],Cne(i,a));const l=b(e,["thoughtSignature"]);l!=null&&_(t,["thoughtSignature"],l);const u=b(e,["codeExecutionResult"]);u!=null&&_(t,["codeExecutionResult"],u);const d=b(e,["executableCode"]);d!=null&&_(t,["executableCode"],d);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const y=b(e,["text"]);return y!=null&&_(t,["text"],y),t}function kne(i,e){const t={},n=b(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Nne(i,a))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function Ine(i,e){const t={},n=b(e,["citationSources"]);return n!=null&&_(t,["citations"],n),t}function Rne(i,e){const t={},n=b(e,["retrievedUrl"]);n!=null&&_(t,["retrievedUrl"],n);const r=b(e,["urlRetrievalStatus"]);return r!=null&&_(t,["urlRetrievalStatus"],r),t}function Lne(i,e){const t={},n=b(e,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Rne(i,s))),_(t,["urlMetadata"],r)}return t}function Pne(i,e){const t={},n=b(e,["content"]);n!=null&&_(t,["content"],kne(i,n));const r=b(e,["citationMetadata"]);r!=null&&_(t,["citationMetadata"],Ine(i,r));const s=b(e,["tokenCount"]);s!=null&&_(t,["tokenCount"],s);const a=b(e,["finishReason"]);a!=null&&_(t,["finishReason"],a);const l=b(e,["urlContextMetadata"]);l!=null&&_(t,["urlContextMetadata"],Lne(i,l));const u=b(e,["avgLogprobs"]);u!=null&&_(t,["avgLogprobs"],u);const d=b(e,["groundingMetadata"]);d!=null&&_(t,["groundingMetadata"],d);const f=b(e,["index"]);f!=null&&_(t,["index"],f);const p=b(e,["logprobsResult"]);p!=null&&_(t,["logprobsResult"],p);const y=b(e,["safetyRatings"]);return y!=null&&_(t,["safetyRatings"],y),t}function EP(i,e){const t={},n=b(e,["candidates"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Pne(i,u))),_(t,["candidates"],l)}const r=b(e,["modelVersion"]);r!=null&&_(t,["modelVersion"],r);const s=b(e,["promptFeedback"]);s!=null&&_(t,["promptFeedback"],s);const a=b(e,["usageMetadata"]);return a!=null&&_(t,["usageMetadata"],a),t}function Mne(i,e){const t={},n=b(e,["values"]);return n!=null&&_(t,["values"],n),t}function Dne(){return{}}function One(i,e){const t={},n=b(e,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Mne(i,a))),_(t,["embeddings"],s)}return b(e,["metadata"])!=null&&_(t,["metadata"],Dne()),t}function Fne(i,e){const t={},n=b(e,["bytesBase64Encoded"]);n!=null&&_(t,["imageBytes"],Fh(i,n));const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function G8(i,e){const t={},n=b(e,["safetyAttributes","categories"]);n!=null&&_(t,["categories"],n);const r=b(e,["safetyAttributes","scores"]);r!=null&&_(t,["scores"],r);const s=b(e,["contentType"]);return s!=null&&_(t,["contentType"],s),t}function Vne(i,e){const t={},n=b(e,["_self"]);n!=null&&_(t,["image"],Fne(i,n));const r=b(e,["raiFilteredReason"]);r!=null&&_(t,["raiFilteredReason"],r);const s=b(e,["_self"]);return s!=null&&_(t,["safetyAttributes"],G8(i,s)),t}function Bne(i,e){const t={},n=b(e,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Vne(i,a))),_(t,["generatedImages"],s)}const r=b(e,["positivePromptSafetyAttributes"]);return r!=null&&_(t,["positivePromptSafetyAttributes"],G8(i,r)),t}function Une(i,e){const t={},n=b(e,["baseModel"]);n!=null&&_(t,["baseModel"],n);const r=b(e,["createTime"]);r!=null&&_(t,["createTime"],r);const s=b(e,["updateTime"]);return s!=null&&_(t,["updateTime"],s),t}function GC(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["description"]);s!=null&&_(t,["description"],s);const a=b(e,["version"]);a!=null&&_(t,["version"],a);const l=b(e,["_self"]);l!=null&&_(t,["tunedModelInfo"],Une(i,l));const u=b(e,["inputTokenLimit"]);u!=null&&_(t,["inputTokenLimit"],u);const d=b(e,["outputTokenLimit"]);d!=null&&_(t,["outputTokenLimit"],d);const f=b(e,["supportedGenerationMethods"]);return f!=null&&_(t,["supportedActions"],f),t}function zne(i,e){const t={},n=b(e,["nextPageToken"]);n!=null&&_(t,["nextPageToken"],n);const r=b(e,["_self"]);if(r!=null){let s=F8(i,r);Array.isArray(s)&&(s=s.map(a=>GC(i,a))),_(t,["models"],s)}return t}function jne(){return{}}function qne(i,e){const t={},n=b(e,["totalTokens"]);n!=null&&_(t,["totalTokens"],n);const r=b(e,["cachedContentTokenCount"]);return r!=null&&_(t,["cachedContentTokenCount"],r),t}function $ne(i,e){const t={},n=b(e,["video","uri"]);n!=null&&_(t,["uri"],n);const r=b(e,["video","encodedVideo"]);r!=null&&_(t,["videoBytes"],Fh(i,r));const s=b(e,["encoding"]);return s!=null&&_(t,["mimeType"],s),t}function Hne(i,e){const t={},n=b(e,["_self"]);return n!=null&&_(t,["video"],$ne(i,n)),t}function Gne(i,e){const t={},n=b(e,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Hne(i,l))),_(t,["generatedVideos"],a)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const s=b(e,["raiMediaFilteredReasons"]);return s!=null&&_(t,["raiMediaFilteredReasons"],s),t}function Yne(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["metadata"]);r!=null&&_(t,["metadata"],r);const s=b(e,["done"]);s!=null&&_(t,["done"],s);const a=b(e,["error"]);a!=null&&_(t,["error"],a);const l=b(e,["response","generateVideoResponse"]);return l!=null&&_(t,["response"],Gne(i,l)),t}function Kne(i,e){const t={},n=b(e,["fps"]);n!=null&&_(t,["fps"],n);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function Wne(i,e){const t={},n=b(e,["displayName"]);n!=null&&_(t,["displayName"],n);const r=b(e,["data"]);r!=null&&_(t,["data"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function Qne(i,e){const t={},n=b(e,["displayName"]);n!=null&&_(t,["displayName"],n);const r=b(e,["fileUri"]);r!=null&&_(t,["fileUri"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function Xne(i,e){const t={},n=b(e,["videoMetadata"]);n!=null&&_(t,["videoMetadata"],Kne(i,n));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],Wne(i,s));const a=b(e,["fileData"]);a!=null&&_(t,["fileData"],Qne(i,a));const l=b(e,["thoughtSignature"]);l!=null&&_(t,["thoughtSignature"],l);const u=b(e,["codeExecutionResult"]);u!=null&&_(t,["codeExecutionResult"],u);const d=b(e,["executableCode"]);d!=null&&_(t,["executableCode"],d);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const y=b(e,["text"]);return y!=null&&_(t,["text"],y),t}function Jne(i,e){const t={},n=b(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Xne(i,a))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function Zne(i,e){const t={},n=b(e,["citations"]);return n!=null&&_(t,["citations"],n),t}function eie(i,e){const t={},n=b(e,["retrievedUrl"]);n!=null&&_(t,["retrievedUrl"],n);const r=b(e,["urlRetrievalStatus"]);return r!=null&&_(t,["urlRetrievalStatus"],r),t}function tie(i,e){const t={},n=b(e,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>eie(i,s))),_(t,["urlMetadata"],r)}return t}function nie(i,e){const t={},n=b(e,["content"]);n!=null&&_(t,["content"],Jne(i,n));const r=b(e,["citationMetadata"]);r!=null&&_(t,["citationMetadata"],Zne(i,r));const s=b(e,["finishMessage"]);s!=null&&_(t,["finishMessage"],s);const a=b(e,["finishReason"]);a!=null&&_(t,["finishReason"],a);const l=b(e,["urlContextMetadata"]);l!=null&&_(t,["urlContextMetadata"],tie(i,l));const u=b(e,["avgLogprobs"]);u!=null&&_(t,["avgLogprobs"],u);const d=b(e,["groundingMetadata"]);d!=null&&_(t,["groundingMetadata"],d);const f=b(e,["index"]);f!=null&&_(t,["index"],f);const p=b(e,["logprobsResult"]);p!=null&&_(t,["logprobsResult"],p);const y=b(e,["safetyRatings"]);return y!=null&&_(t,["safetyRatings"],y),t}function CP(i,e){const t={},n=b(e,["candidates"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>nie(i,f))),_(t,["candidates"],d)}const r=b(e,["createTime"]);r!=null&&_(t,["createTime"],r);const s=b(e,["responseId"]);s!=null&&_(t,["responseId"],s);const a=b(e,["modelVersion"]);a!=null&&_(t,["modelVersion"],a);const l=b(e,["promptFeedback"]);l!=null&&_(t,["promptFeedback"],l);const u=b(e,["usageMetadata"]);return u!=null&&_(t,["usageMetadata"],u),t}function iie(i,e){const t={},n=b(e,["truncated"]);n!=null&&_(t,["truncated"],n);const r=b(e,["token_count"]);return r!=null&&_(t,["tokenCount"],r),t}function rie(i,e){const t={},n=b(e,["values"]);n!=null&&_(t,["values"],n);const r=b(e,["statistics"]);return r!=null&&_(t,["statistics"],iie(i,r)),t}function sie(i,e){const t={},n=b(e,["billableCharacterCount"]);return n!=null&&_(t,["billableCharacterCount"],n),t}function aie(i,e){const t={},n=b(e,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>rie(i,a))),_(t,["embeddings"],s)}const r=b(e,["metadata"]);return r!=null&&_(t,["metadata"],sie(i,r)),t}function oie(i,e){const t={},n=b(e,["gcsUri"]);n!=null&&_(t,["gcsUri"],n);const r=b(e,["bytesBase64Encoded"]);r!=null&&_(t,["imageBytes"],Fh(i,r));const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function Y8(i,e){const t={},n=b(e,["safetyAttributes","categories"]);n!=null&&_(t,["categories"],n);const r=b(e,["safetyAttributes","scores"]);r!=null&&_(t,["scores"],r);const s=b(e,["contentType"]);return s!=null&&_(t,["contentType"],s),t}function bk(i,e){const t={},n=b(e,["_self"]);n!=null&&_(t,["image"],oie(i,n));const r=b(e,["raiFilteredReason"]);r!=null&&_(t,["raiFilteredReason"],r);const s=b(e,["_self"]);s!=null&&_(t,["safetyAttributes"],Y8(i,s));const a=b(e,["prompt"]);return a!=null&&_(t,["enhancedPrompt"],a),t}function lie(i,e){const t={},n=b(e,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>bk(i,a))),_(t,["generatedImages"],s)}const r=b(e,["positivePromptSafetyAttributes"]);return r!=null&&_(t,["positivePromptSafetyAttributes"],Y8(i,r)),t}function uie(i,e){const t={},n=b(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>bk(i,s))),_(t,["generatedImages"],r)}return t}function cie(i,e){const t={},n=b(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>bk(i,s))),_(t,["generatedImages"],r)}return t}function die(i,e){const t={},n=b(e,["endpoint"]);n!=null&&_(t,["name"],n);const r=b(e,["deployedModelId"]);return r!=null&&_(t,["deployedModelId"],r),t}function hie(i,e){const t={},n=b(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&_(t,["baseModel"],n);const r=b(e,["createTime"]);r!=null&&_(t,["createTime"],r);const s=b(e,["updateTime"]);return s!=null&&_(t,["updateTime"],s),t}function fie(i,e){const t={},n=b(e,["checkpointId"]);n!=null&&_(t,["checkpointId"],n);const r=b(e,["epoch"]);r!=null&&_(t,["epoch"],r);const s=b(e,["step"]);return s!=null&&_(t,["step"],s),t}function YC(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["description"]);s!=null&&_(t,["description"],s);const a=b(e,["versionId"]);a!=null&&_(t,["version"],a);const l=b(e,["deployedModels"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(v=>die(i,v))),_(t,["endpoints"],y)}const u=b(e,["labels"]);u!=null&&_(t,["labels"],u);const d=b(e,["_self"]);d!=null&&_(t,["tunedModelInfo"],hie(i,d));const f=b(e,["defaultCheckpointId"]);f!=null&&_(t,["defaultCheckpointId"],f);const p=b(e,["checkpoints"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(v=>fie(i,v))),_(t,["checkpoints"],y)}return t}function pie(i,e){const t={},n=b(e,["nextPageToken"]);n!=null&&_(t,["nextPageToken"],n);const r=b(e,["_self"]);if(r!=null){let s=F8(i,r);Array.isArray(s)&&(s=s.map(a=>YC(i,a))),_(t,["models"],s)}return t}function mie(){return{}}function gie(i,e){const t={},n=b(e,["totalTokens"]);return n!=null&&_(t,["totalTokens"],n),t}function yie(i,e){const t={},n=b(e,["tokensInfo"]);return n!=null&&_(t,["tokensInfo"],n),t}function vie(i,e){const t={},n=b(e,["gcsUri"]);n!=null&&_(t,["uri"],n);const r=b(e,["bytesBase64Encoded"]);r!=null&&_(t,["videoBytes"],Fh(i,r));const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function bie(i,e){const t={},n=b(e,["_self"]);return n!=null&&_(t,["video"],vie(i,n)),t}function _ie(i,e){const t={},n=b(e,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>bie(i,l))),_(t,["generatedVideos"],a)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const s=b(e,["raiMediaFilteredReasons"]);return s!=null&&_(t,["raiMediaFilteredReasons"],s),t}function xie(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["metadata"]);r!=null&&_(t,["metadata"],r);const s=b(e,["done"]);s!=null&&_(t,["done"],s);const a=b(e,["error"]);a!=null&&_(t,["error"],a);const l=b(e,["response"]);return l!=null&&_(t,["response"],_ie(i,l)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wie="Content-Type",Aie="X-Server-Timeout",Sie="User-Agent",KC="x-goog-api-client",Tie="1.5.1",Eie=`google-genai-sdk/${Tie}`,Cie="v1beta1",Nie="v1beta",NP=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class K8 extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class WC extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class kie{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Cie,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Nie,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const r=[this.getRequestUrlInternal(t)];return n&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[a,l]of Object.entries(e.queryParams))r.searchParams.append(a,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,t,e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(t))typeof s=="object"?n[r]=Object.assign(Object.assign({},n[r]),s):s!==void 0&&(n[r]=s);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,t,e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const r=new AbortController,s=r.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>r.abort(),t.timeout),n&&n.addEventListener("abort",()=>{r.abort()}),e.signal=s}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async r=>(await kP(r),new jC(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async r=>(await kP(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return ny(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:l,value:u}=yield Yi(r.read());if(l){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(u);try{const p=JSON.parse(d);if("error"in p){const y=JSON.parse(JSON.stringify(p.error)),v=y.status,C=y.code,E=`got status: ${v}. ${JSON.stringify(p)}`;if(C>=400&&C<500)throw new K8(E);if(C>=500&&C<600)throw new WC(E)}}catch(p){const y=p;if(y.name==="ClientError"||y.name==="ServerError")throw p}a+=d;let f=a.match(NP);for(;f;){const p=f[1];try{const y=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Yi(new jC(y)),a=a.slice(f[0].length),f=a.match(NP)}catch(y){throw new Error(`exception parsing stream chunk ${p}. ${y}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=Eie+" "+this.clientOptions.userAgentExtra;return e[Sie]=t,e[KC]=t,e[wie]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,r]of Object.entries(e.headers))t.append(n,r);e.timeout&&e.timeout>0&&t.append(Aie,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,a=await s.stat(e);r.sizeBytes=String(a.size);const l=(n=t==null?void 0:t.mimeType)!==null&&n!==void 0?n:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const u=await this.fetchUploadUrl(r,t);return s.upload(e,u,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var n;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},a=await this.request({path:sn("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:r});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(n=a==null?void 0:a.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function kP(i){var e;if(i===void 0)throw new WC("response is undefined");if(!i.ok){const t=i.status,n=i.statusText;let r;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await i.json():r={error:{message:await i.text(),code:i.status,status:i.statusText}};const s=`got status: ${t} ${n}. ${JSON.stringify(r)}`;throw t>=400&&t<500?new K8(s):t>=500&&t<600?new WC(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iie="mcp_used/unknown";function W8(i){for(const e of i)if(_k(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Q8(i){var e;const t=(e=i[KC])!==null&&e!==void 0?e:"";i[KC]=(t+` ${Iie}`).trimStart()}function Rie(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>_k(r)))!==null&&n!==void 0?n:!1}function Lie(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!_k(r)))!==null&&n!==void 0?n:!1}function _k(i){return i!==null&&typeof i=="object"&&i instanceof xk}function Pie(i,e=100){return ny(this,arguments,function*(){let n,r=0;for(;r<e;){const s=yield Yi(i.listTools({cursor:n}));for(const a of s.tools)yield yield Yi(a),r++;if(!s.nextCursor)break;n=s.nextCursor}})}class xk{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new xk(e,t)}async initialize(){var e,t,n,r;if(this.mcpTools.length>0)return;const s={},a=[];for(const f of this.mcpClients)try{for(var l=!0,u=(t=void 0,fb(Pie(f))),d;d=await u.next(),e=d.done,!e;l=!0){r=d.value,l=!1;const p=r;a.push(p);const y=p.name;if(s[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);s[y]=f}}catch(p){t={error:p}}finally{try{!l&&!e&&(n=u.return)&&await n.call(u)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),MX(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[n.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const a=await r.callTool({name:n.name,arguments:n.args},void 0,s);t.push({functionResponse:{name:n.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Mie(i,e,t){const n=new xX;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const s=qee(i,r);Object.assign(n,s),e(n)}class Die{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=Vie(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const f=new Promise(j=>{d=j}),p=e.callbacks,y=function(){d({})},v=this.apiClient,C={onopen:y,onmessage:j=>{Mie(v,p.onmessage,j)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(j){},onclose:(n=p==null?void 0:p.onclose)!==null&&n!==void 0?n:function(j){}},E=this.webSocketFactory.create(u,Fie(a),C);E.connect(),await f;const R=ji(this.apiClient,e.model),I=j8(this.apiClient,{model:R}),D=HC(this.apiClient,{setup:I});return E.send(JSON.stringify(D)),new Oie(E,this.apiClient)}}class Oie{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=iee(this.apiClient,e),n=q8(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=ree(this.apiClient,e),n=HC(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const t=HC(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(q0.PLAY)}pause(){this.sendPlaybackControl(q0.PAUSE)}stop(){this.sendPlaybackControl(q0.STOP)}resetContext(){this.sendPlaybackControl(q0.RESET_CONTEXT)}close(){this.conn.close()}}function Fie(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function Vie(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bie="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Uie(i,e,t){const n=new _X;let r;if(t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),i.isVertexAI()){const s=Mee(i,r);Object.assign(n,s)}else{const s=Pee(i,r);Object.assign(n,s)}e(n)}class zie{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new Die(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,r,s,a,l;const u=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&W8(e.config.tools)&&Q8(p);const y=Hie(p);if(this.apiClient.isVertexAI())f=`${u}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y);else{const V=this.apiClient.getApiKey();let Y="BidiGenerateContent",O="key";V!=null&&V.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),Y="BidiGenerateContentConstrained",O="access_token"),f=`${u}/ws/google.ai.generativelanguage.${d}.GenerativeService.${Y}?${O}=${V}`}let v=()=>{};const C=new Promise(V=>{v=V}),E=e.callbacks,R=function(){var V;(V=E==null?void 0:E.onopen)===null||V===void 0||V.call(E),v({})},I=this.apiClient,D={onopen:R,onmessage:V=>{Uie(I,E.onmessage,V)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(V){},onclose:(n=E==null?void 0:E.onclose)!==null&&n!==void 0?n:function(V){}},j=this.webSocketFactory.create(f,$ie(y),D);j.connect(),await C;let X=ji(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&X.startsWith("publishers/")){const V=this.apiClient.getProject(),Y=this.apiClient.getLocation();X=`projects/${V}/locations/${Y}/`+X}let W={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[EA.AUDIO]}:e.config.responseModalities=[EA.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(l=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[],U=[];for(const V of ue)if(this.isCallableTool(V)){const Y=V;U.push(await Y.tool())}else U.push(V);U.length>0&&(e.config.tools=U);const P={model:X,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=QZ(this.apiClient,P):W=WZ(this.apiClient,P),delete W.config,j.send(JSON.stringify(W)),new qie(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const jie={turnComplete:!0};class qie{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=zu(e,t.turns),e.isVertexAI()?n=n.map(r=>Mv(e,r)):n=n.map(r=>P5(e,r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Bie)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},jie),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:nee(this.apiClient,e)}:t={realtimeInput:tee(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function $ie(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function Hie(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IP=10;function RP(i){var e,t,n;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(t=i==null?void 0:i.tools)!==null&&t!==void 0?t:[])if(zw(a)){r=!0;break}if(!r)return!0;const s=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function zw(i){return"callTool"in i&&typeof i.callTool=="function"}function LP(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gie extends Pv{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,r,s,a,l;const u=await this.processParamsForMcpUsage(t);if(!Rie(t)||RP(t.config))return await this.generateContentInternal(u);if(Lie(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,f;const p=zu(this.apiClient,u.contents),y=(s=(r=(n=u.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:IP;let v=0;for(;v<y&&(d=await this.generateContentInternal(u),!(!d.functionCalls||d.functionCalls.length===0));){const C=d.candidates[0].content,E=[];for(const R of(l=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[])if(zw(R)){const D=await R.callTool(d.functionCalls);E.push(...D)}v++,f={role:"user",parts:E},u.contents=zu(this.apiClient,u.contents),u.contents.push(C),u.contents.push(f),LP(u.config)&&(p.push(C),p.push(f))}return LP(u.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async t=>{if(RP(t.config)){const n=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var r;let s;const a=[];if(n!=null&&n.generatedImages)for(const u of n.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((r=u==null?void 0:u.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=u==null?void 0:u.safetyAttributes:a.push(u);let l;return s?l={generatedImages:a,positivePromptSafetyAttributes:s}:l={generatedImages:a},l}),this.list=async t=>{var n;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((n=a.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new L5(Tv.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(a),a)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(e){var t,n,r;const s=(t=e.config)===null||t===void 0?void 0:t.tools;if(!s)return e;const a=await Promise.all(s.map(async u=>zw(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(l.config.tools=a,e.config&&e.config.tools&&W8(e.config.tools)){const u=(r=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},u);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Q8(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var t,n,r;const s=new Map;for(const a of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(zw(a)){const l=a,u=await l.tool();for(const d of(r=u.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,l)}}return s}async processAfcStream(e){var t,n,r;const s=(r=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&r!==void 0?r:IP;let a=!1,l=0;const u=await this.initAfcToolsMap(e);return function(d,f,p){var y,v;return ny(this,arguments,function*(){for(var C,E,R,I;l<s;){a&&(l++,a=!1);const W=yield Yi(d.processParamsForMcpUsage(p)),ue=yield Yi(d.generateContentStreamInternal(W)),U=[],P=[];try{for(var D=!0,j=(E=void 0,fb(ue)),X;X=yield Yi(j.next()),C=X.done,!C;D=!0){I=X.value,D=!1;const V=I;if(yield yield Yi(V),V.candidates&&(!((y=V.candidates[0])===null||y===void 0)&&y.content)){P.push(V.candidates[0].content);for(const Y of(v=V.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(l<s&&Y.functionCall){if(!Y.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(Y.functionCall.name)){const O=yield Yi(f.get(Y.functionCall.name).callTool([Y.functionCall]));U.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${Y.functionCall.name}`)}}}}catch(V){E={error:V}}finally{try{!D&&!C&&(R=j.return)&&(yield Yi(R.call(j)))}finally{if(E)throw E.error}}if(U.length>0){a=!0;const V=new R1;V.candidates=[{content:{role:"user",parts:U}}],yield yield Yi(V);const Y=[];Y.push(...P),Y.push({role:"user",parts:U});const O=zu(d.apiClient,p.contents).concat(Y);p.contents=O}else break}})}(this,u,e)}async generateContentInternal(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=TP(this.apiClient,e);return l=sn("{model}:generateContent",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=CP(this.apiClient,f),y=new R1;return Object.assign(y,p),y})}else{const d=SP(this.apiClient,e);return l=sn("{model}:generateContent",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>{const p=EP(this.apiClient,f),y=new R1;return Object.assign(y,p),y})}}async generateContentStreamInternal(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=TP(this.apiClient,e);l=sn("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return a=f.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),a.then(function(p){return ny(this,arguments,function*(){var y,v,C,E;try{for(var R=!0,I=fb(p),D;D=yield Yi(I.next()),y=D.done,!y;R=!0){E=D.value,R=!1;const X=CP(f,yield Yi(E.json())),W=new R1;Object.assign(W,X),yield yield Yi(W)}}catch(j){v={error:j}}finally{try{!R&&!y&&(C=I.return)&&(yield Yi(C.call(I)))}finally{if(v)throw v.error}}})})}else{const d=SP(this.apiClient,e);l=sn("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return a=f.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(p){return ny(this,arguments,function*(){var y,v,C,E;try{for(var R=!0,I=fb(p),D;D=yield Yi(I.next()),y=D.done,!y;R=!0){E=D.value,R=!1;const X=EP(f,yield Yi(E.json())),W=new R1;Object.assign(W,X),yield yield Yi(W)}}catch(j){v={error:j}}finally{try{!R&&!y&&(C=I.return)&&(yield Yi(C.call(I)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=tne(this.apiClient,e);return l=sn("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=aie(this.apiClient,f),y=new rP;return Object.assign(y,p),y})}else{const d=pte(this.apiClient,e);return l=sn("{model}:batchEmbedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>{const p=One(this.apiClient,f),y=new rP;return Object.assign(y,p),y})}}async generateImagesInternal(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=ine(this.apiClient,e);return l=sn("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=lie(this.apiClient,f),y=new sP;return Object.assign(y,p),y})}else{const d=gte(this.apiClient,e);return l=sn("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Bne(this.apiClient,f),y=new sP;return Object.assign(y,p),y})}}async editImageInternal(e){var t,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=cne(this.apiClient,e);return s=sn("{model}:predict",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),r.then(u=>{const d=uie(this.apiClient,u),f=new pX;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=hne(this.apiClient,e);return s=sn("{model}:predict",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),r.then(u=>{const d=cie(this.apiClient,u),f=new mX;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=fne(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>YC(this.apiClient,f))}else{const d=yte(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>GC(this.apiClient,f))}}async listInternal(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=mne(this.apiClient,e);return l=sn("{models_url}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=pie(this.apiClient,f),y=new aP;return Object.assign(y,p),y})}else{const d=bte(this.apiClient,e);return l=sn("{models_url}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>{const p=zne(this.apiClient,f),y=new aP;return Object.assign(y,p),y})}}async update(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=yne(this.apiClient,e);return l=sn("{model}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>YC(this.apiClient,f))}else{const d=xte(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>GC(this.apiClient,f))}}async delete(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=vne(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(()=>{const f=mie(),p=new oP;return Object.assign(p,f),p})}else{const d=wte(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(()=>{const f=jne(),p=new oP;return Object.assign(p,f),p})}}async countTokens(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=_ne(this.apiClient,e);return l=sn("{model}:countTokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=gie(this.apiClient,f),y=new lP;return Object.assign(y,p),y})}else{const d=Ste(this.apiClient,e);return l=sn("{model}:countTokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>{const p=qne(this.apiClient,f),y=new lP;return Object.assign(y,p),y})}}async computeTokens(e){var t,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=xne(this.apiClient,e);return s=sn("{model}:computeTokens",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),r.then(u=>{const d=yie(this.apiClient,u),f=new gX;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=Sne(this.apiClient,e);return l=sn("{model}:predictLongRunning",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>xie(this.apiClient,f))}else{const d=Cte(this.apiClient,e);return l=sn("{model}:predictLongRunning",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>Yne(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yie(i,e){const t={},n=b(e,["operationName"]);n!=null&&_(t,["_url","operationName"],n);const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function Kie(i,e){const t={},n=b(e,["operationName"]);n!=null&&_(t,["_url","operationName"],n);const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function Wie(i,e){const t={},n=b(e,["operationName"]);n!=null&&_(t,["operationName"],n);const r=b(e,["resourceName"]);r!=null&&_(t,["_url","resourceName"],r);const s=b(e,["config"]);return s!=null&&_(t,["config"],s),t}function Qie(i,e){const t={},n=b(e,["video","uri"]);n!=null&&_(t,["uri"],n);const r=b(e,["video","encodedVideo"]);r!=null&&_(t,["videoBytes"],Fh(i,r));const s=b(e,["encoding"]);return s!=null&&_(t,["mimeType"],s),t}function Xie(i,e){const t={},n=b(e,["_self"]);return n!=null&&_(t,["video"],Qie(i,n)),t}function Jie(i,e){const t={},n=b(e,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Xie(i,l))),_(t,["generatedVideos"],a)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const s=b(e,["raiMediaFilteredReasons"]);return s!=null&&_(t,["raiMediaFilteredReasons"],s),t}function Zie(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["metadata"]);r!=null&&_(t,["metadata"],r);const s=b(e,["done"]);s!=null&&_(t,["done"],s);const a=b(e,["error"]);a!=null&&_(t,["error"],a);const l=b(e,["response","generateVideoResponse"]);return l!=null&&_(t,["response"],Jie(i,l)),t}function ere(i,e){const t={},n=b(e,["gcsUri"]);n!=null&&_(t,["uri"],n);const r=b(e,["bytesBase64Encoded"]);r!=null&&_(t,["videoBytes"],Fh(i,r));const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function tre(i,e){const t={},n=b(e,["_self"]);return n!=null&&_(t,["video"],ere(i,n)),t}function nre(i,e){const t={},n=b(e,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>tre(i,l))),_(t,["generatedVideos"],a)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const s=b(e,["raiMediaFilteredReasons"]);return s!=null&&_(t,["raiMediaFilteredReasons"],s),t}function PP(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["metadata"]);r!=null&&_(t,["metadata"],r);const s=b(e,["done"]);s!=null&&_(t,["done"],s);const a=b(e,["error"]);a!=null&&_(t,["error"],a);const l=b(e,["response"]);return l!=null&&_(t,["response"],nre(i,l)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ire extends Pv{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let s;return n&&"httpOptions"in n&&(s=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=Kie(this.apiClient,e);return l=sn("{operationName}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>PP(this.apiClient,f))}else{const d=Yie(this.apiClient,e);return l=sn("{operationName}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>Zie(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var t,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=Wie(this.apiClient,e);return s=sn("{resourceName}:fetchPredictOperation",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),r.then(u=>PP(this.apiClient,u))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rre(i,e){const t={},n=b(e,["voiceName"]);return n!=null&&_(t,["voiceName"],n),t}function X8(i,e){const t={},n=b(e,["prebuiltVoiceConfig"]);return n!=null&&_(t,["prebuiltVoiceConfig"],rre(i,n)),t}function sre(i,e){const t={},n=b(e,["speaker"]);n!=null&&_(t,["speaker"],n);const r=b(e,["voiceConfig"]);return r!=null&&_(t,["voiceConfig"],X8(i,r)),t}function are(i,e){const t={},n=b(e,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>sre(i,s))),_(t,["speakerVoiceConfigs"],r)}return t}function ore(i,e){const t={},n=b(e,["voiceConfig"]);n!=null&&_(t,["voiceConfig"],X8(i,n));const r=b(e,["multiSpeakerVoiceConfig"]);r!=null&&_(t,["multiSpeakerVoiceConfig"],are(i,r));const s=b(e,["languageCode"]);return s!=null&&_(t,["languageCode"],s),t}function lre(i,e){const t={},n=b(e,["fps"]);n!=null&&_(t,["fps"],n);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function ure(i,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["data"]);n!=null&&_(t,["data"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function cre(i,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(e,["fileUri"]);n!=null&&_(t,["fileUri"],n);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function dre(i,e){const t={},n=b(e,["videoMetadata"]);n!=null&&_(t,["videoMetadata"],lre(i,n));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],ure(i,s));const a=b(e,["fileData"]);a!=null&&_(t,["fileData"],cre(i,a));const l=b(e,["thoughtSignature"]);l!=null&&_(t,["thoughtSignature"],l);const u=b(e,["codeExecutionResult"]);u!=null&&_(t,["codeExecutionResult"],u);const d=b(e,["executableCode"]);d!=null&&_(t,["executableCode"],d);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const y=b(e,["text"]);return y!=null&&_(t,["text"],y),t}function hre(i,e){const t={},n=b(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>dre(i,a))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function fre(i,e){const t={},n=b(e,["behavior"]);n!=null&&_(t,["behavior"],n);const r=b(e,["description"]);r!=null&&_(t,["description"],r);const s=b(e,["name"]);s!=null&&_(t,["name"],s);const a=b(e,["parameters"]);a!=null&&_(t,["parameters"],a);const l=b(e,["response"]);return l!=null&&_(t,["response"],l),t}function pre(i,e){const t={},n=b(e,["startTime"]);n!=null&&_(t,["startTime"],n);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function mre(i,e){const t={},n=b(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],pre(i,n)),t}function gre(i,e){const t={},n=b(e,["mode"]);n!=null&&_(t,["mode"],n);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function yre(i,e){const t={},n=b(e,["dynamicRetrievalConfig"]);return n!=null&&_(t,["dynamicRetrievalConfig"],gre(i,n)),t}function vre(){return{}}function bre(i,e){const t={},n=b(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>fre(i,d))),_(t,["functionDeclarations"],u)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearch"]);r!=null&&_(t,["googleSearch"],mre(i,r));const s=b(e,["googleSearchRetrieval"]);if(s!=null&&_(t,["googleSearchRetrieval"],yre(i,s)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&_(t,["urlContext"],vre());const l=b(e,["codeExecution"]);return l!=null&&_(t,["codeExecution"],l),t}function _re(i,e){const t={},n=b(e,["handle"]);if(n!=null&&_(t,["handle"],n),b(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function MP(){return{}}function xre(i,e){const t={},n=b(e,["disabled"]);n!=null&&_(t,["disabled"],n);const r=b(e,["startOfSpeechSensitivity"]);r!=null&&_(t,["startOfSpeechSensitivity"],r);const s=b(e,["endOfSpeechSensitivity"]);s!=null&&_(t,["endOfSpeechSensitivity"],s);const a=b(e,["prefixPaddingMs"]);a!=null&&_(t,["prefixPaddingMs"],a);const l=b(e,["silenceDurationMs"]);return l!=null&&_(t,["silenceDurationMs"],l),t}function wre(i,e){const t={},n=b(e,["automaticActivityDetection"]);n!=null&&_(t,["automaticActivityDetection"],xre(i,n));const r=b(e,["activityHandling"]);r!=null&&_(t,["activityHandling"],r);const s=b(e,["turnCoverage"]);return s!=null&&_(t,["turnCoverage"],s),t}function Are(i,e){const t={},n=b(e,["targetTokens"]);return n!=null&&_(t,["targetTokens"],n),t}function Sre(i,e){const t={},n=b(e,["triggerTokens"]);n!=null&&_(t,["triggerTokens"],n);const r=b(e,["slidingWindow"]);return r!=null&&_(t,["slidingWindow"],Are(i,r)),t}function Tre(i,e){const t={},n=b(e,["proactiveAudio"]);return n!=null&&_(t,["proactiveAudio"],n),t}function Ere(i,e,t){const n={},r=b(e,["generationConfig"]);t!==void 0&&r!=null&&_(t,["setup","generationConfig"],r);const s=b(e,["responseModalities"]);t!==void 0&&s!=null&&_(t,["setup","generationConfig","responseModalities"],s);const a=b(e,["temperature"]);t!==void 0&&a!=null&&_(t,["setup","generationConfig","temperature"],a);const l=b(e,["topP"]);t!==void 0&&l!=null&&_(t,["setup","generationConfig","topP"],l);const u=b(e,["topK"]);t!==void 0&&u!=null&&_(t,["setup","generationConfig","topK"],u);const d=b(e,["maxOutputTokens"]);t!==void 0&&d!=null&&_(t,["setup","generationConfig","maxOutputTokens"],d);const f=b(e,["mediaResolution"]);t!==void 0&&f!=null&&_(t,["setup","generationConfig","mediaResolution"],f);const p=b(e,["seed"]);t!==void 0&&p!=null&&_(t,["setup","generationConfig","seed"],p);const y=b(e,["speechConfig"]);t!==void 0&&y!=null&&_(t,["setup","generationConfig","speechConfig"],ore(i,vk(i,y)));const v=b(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&_(t,["setup","generationConfig","enableAffectiveDialog"],v);const C=b(e,["systemInstruction"]);t!==void 0&&C!=null&&_(t,["setup","systemInstruction"],hre(i,Ha(i,C)));const E=b(e,["tools"]);if(t!==void 0&&E!=null){let ue=R2(i,E);Array.isArray(ue)&&(ue=ue.map(U=>bre(i,I2(i,U)))),_(t,["setup","tools"],ue)}const R=b(e,["sessionResumption"]);t!==void 0&&R!=null&&_(t,["setup","sessionResumption"],_re(i,R));const I=b(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&_(t,["setup","inputAudioTranscription"],MP());const D=b(e,["outputAudioTranscription"]);t!==void 0&&D!=null&&_(t,["setup","outputAudioTranscription"],MP());const j=b(e,["realtimeInputConfig"]);t!==void 0&&j!=null&&_(t,["setup","realtimeInputConfig"],wre(i,j));const X=b(e,["contextWindowCompression"]);t!==void 0&&X!=null&&_(t,["setup","contextWindowCompression"],Sre(i,X));const W=b(e,["proactivity"]);return t!==void 0&&W!=null&&_(t,["setup","proactivity"],Tre(i,W)),n}function Cre(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["setup","model"],ji(i,n));const r=b(e,["config"]);return r!=null&&_(t,["config"],Ere(i,r,t)),t}function Nre(i,e,t){const n={},r=b(e,["expireTime"]);t!==void 0&&r!=null&&_(t,["expireTime"],r);const s=b(e,["newSessionExpireTime"]);t!==void 0&&s!=null&&_(t,["newSessionExpireTime"],s);const a=b(e,["uses"]);t!==void 0&&a!=null&&_(t,["uses"],a);const l=b(e,["liveConnectConstraints"]);t!==void 0&&l!=null&&_(t,["bidiGenerateContentSetup"],Cre(i,l));const u=b(e,["lockAdditionalFields"]);return t!==void 0&&u!=null&&_(t,["fieldMask"],u),n}function kre(i,e){const t={},n=b(e,["config"]);return n!=null&&_(t,["config"],Nre(i,n,t)),t}function Ire(i,e){const t={},n=b(e,["name"]);return n!=null&&_(t,["name"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rre(i){const e=[];for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const n=i[t];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const r=Object.keys(n).map(s=>`${t}.${s}`);e.push(...r)}else e.push(t)}return e.join(",")}function Lre(i,e){let t=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const s=n.setup;typeof s=="object"&&s!==null?(i.bidiGenerateContentSetup=s,t=s):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const r=i.fieldMask;if(t){const s=Rre(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?i.fieldMask=s:delete i.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];r.length>0&&(l=r.map(d=>a.includes(d)?`generationConfig.${d}`:d));const u=[];s&&u.push(s),l.length>0&&u.push(...l),u.length>0?i.fieldMask=u.join(","):delete i.fieldMask}else delete i.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?i.fieldMask=r.join(","):delete i.fieldMask;return i}class Pre extends Pv{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=kre(this.apiClient,e);s=sn("auth_tokens",l._url),a=l._query,delete l.config,delete l._url,delete l._query;const u=Lre(l,e.config);return r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),r.then(d=>Ire(this.apiClient,d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mre(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["_url","name"],n);const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function Dre(i,e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);t!==void 0&&s!=null&&_(t,["_query","pageToken"],s);const a=b(e,["filter"]);return t!==void 0&&a!=null&&_(t,["_query","filter"],a),n}function Ore(i,e){const t={},n=b(e,["config"]);return n!=null&&_(t,["config"],Dre(i,n,t)),t}function Fre(i,e){const t={},n=b(e,["textInput"]);n!=null&&_(t,["textInput"],n);const r=b(e,["output"]);return r!=null&&_(t,["output"],r),t}function Vre(i,e){const t={};if(b(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=b(e,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Fre(i,s))),_(t,["examples","examples"],r)}return t}function Bre(i,e,t){const n={};if(b(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=b(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&_(t,["displayName"],r),b(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=b(e,["epochCount"]);t!==void 0&&s!=null&&_(t,["tuningTask","hyperparameters","epochCount"],s);const a=b(e,["learningRateMultiplier"]);if(a!=null&&_(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),b(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(b(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=b(e,["batchSize"]);t!==void 0&&l!=null&&_(t,["tuningTask","hyperparameters","batchSize"],l);const u=b(e,["learningRate"]);return t!==void 0&&u!=null&&_(t,["tuningTask","hyperparameters","learningRate"],u),n}function Ure(i,e){const t={},n=b(e,["baseModel"]);n!=null&&_(t,["baseModel"],n);const r=b(e,["trainingDataset"]);r!=null&&_(t,["tuningTask","trainingData"],Vre(i,r));const s=b(e,["config"]);return s!=null&&_(t,["config"],Bre(i,s,t)),t}function zre(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["_url","name"],n);const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function jre(i,e,t){const n={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);t!==void 0&&s!=null&&_(t,["_query","pageToken"],s);const a=b(e,["filter"]);return t!==void 0&&a!=null&&_(t,["_query","filter"],a),n}function qre(i,e){const t={},n=b(e,["config"]);return n!=null&&_(t,["config"],jre(i,n,t)),t}function $re(i,e,t){const n={},r=b(e,["gcsUri"]);if(t!==void 0&&r!=null&&_(t,["supervisedTuningSpec","trainingDatasetUri"],r),b(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Hre(i,e){const t={},n=b(e,["gcsUri"]);return n!=null&&_(t,["validationDatasetUri"],n),t}function Gre(i,e,t){const n={},r=b(e,["validationDataset"]);t!==void 0&&r!=null&&_(t,["supervisedTuningSpec"],Hre(i,r));const s=b(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&_(t,["tunedModelDisplayName"],s);const a=b(e,["description"]);t!==void 0&&a!=null&&_(t,["description"],a);const l=b(e,["epochCount"]);t!==void 0&&l!=null&&_(t,["supervisedTuningSpec","hyperParameters","epochCount"],l);const u=b(e,["learningRateMultiplier"]);t!==void 0&&u!=null&&_(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const d=b(e,["exportLastCheckpointOnly"]);t!==void 0&&d!=null&&_(t,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const f=b(e,["adapterSize"]);if(t!==void 0&&f!=null&&_(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),b(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(b(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function Yre(i,e){const t={},n=b(e,["baseModel"]);n!=null&&_(t,["baseModel"],n);const r=b(e,["trainingDataset"]);r!=null&&_(t,["supervisedTuningSpec","trainingDatasetUri"],$re(i,r,t));const s=b(e,["config"]);return s!=null&&_(t,["config"],Gre(i,s,t)),t}function Kre(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["model"],n);const r=b(e,["name"]);return r!=null&&_(t,["endpoint"],r),t}function J8(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["state"]);r!=null&&_(t,["state"],M8(i,r));const s=b(e,["createTime"]);s!=null&&_(t,["createTime"],s);const a=b(e,["tuningTask","startTime"]);a!=null&&_(t,["startTime"],a);const l=b(e,["tuningTask","completeTime"]);l!=null&&_(t,["endTime"],l);const u=b(e,["updateTime"]);u!=null&&_(t,["updateTime"],u);const d=b(e,["description"]);d!=null&&_(t,["description"],d);const f=b(e,["baseModel"]);f!=null&&_(t,["baseModel"],f);const p=b(e,["_self"]);p!=null&&_(t,["tunedModel"],Kre(i,p));const y=b(e,["distillationSpec"]);y!=null&&_(t,["distillationSpec"],y);const v=b(e,["experiment"]);v!=null&&_(t,["experiment"],v);const C=b(e,["labels"]);C!=null&&_(t,["labels"],C);const E=b(e,["pipelineJob"]);E!=null&&_(t,["pipelineJob"],E);const R=b(e,["serviceAccount"]);R!=null&&_(t,["serviceAccount"],R);const I=b(e,["tunedModelDisplayName"]);return I!=null&&_(t,["tunedModelDisplayName"],I),t}function Wre(i,e){const t={},n=b(e,["nextPageToken"]);n!=null&&_(t,["nextPageToken"],n);const r=b(e,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>J8(i,a))),_(t,["tuningJobs"],s)}return t}function Qre(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["metadata"]);r!=null&&_(t,["metadata"],r);const s=b(e,["done"]);s!=null&&_(t,["done"],s);const a=b(e,["error"]);return a!=null&&_(t,["error"],a),t}function Xre(i,e){const t={},n=b(e,["checkpointId"]);n!=null&&_(t,["checkpointId"],n);const r=b(e,["epoch"]);r!=null&&_(t,["epoch"],r);const s=b(e,["step"]);s!=null&&_(t,["step"],s);const a=b(e,["endpoint"]);return a!=null&&_(t,["endpoint"],a),t}function Jre(i,e){const t={},n=b(e,["model"]);n!=null&&_(t,["model"],n);const r=b(e,["endpoint"]);r!=null&&_(t,["endpoint"],r);const s=b(e,["checkpoints"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Xre(i,l))),_(t,["checkpoints"],a)}return t}function QC(i,e){const t={},n=b(e,["name"]);n!=null&&_(t,["name"],n);const r=b(e,["state"]);r!=null&&_(t,["state"],M8(i,r));const s=b(e,["createTime"]);s!=null&&_(t,["createTime"],s);const a=b(e,["startTime"]);a!=null&&_(t,["startTime"],a);const l=b(e,["endTime"]);l!=null&&_(t,["endTime"],l);const u=b(e,["updateTime"]);u!=null&&_(t,["updateTime"],u);const d=b(e,["error"]);d!=null&&_(t,["error"],d);const f=b(e,["description"]);f!=null&&_(t,["description"],f);const p=b(e,["baseModel"]);p!=null&&_(t,["baseModel"],p);const y=b(e,["tunedModel"]);y!=null&&_(t,["tunedModel"],Jre(i,y));const v=b(e,["supervisedTuningSpec"]);v!=null&&_(t,["supervisedTuningSpec"],v);const C=b(e,["tuningDataStats"]);C!=null&&_(t,["tuningDataStats"],C);const E=b(e,["encryptionSpec"]);E!=null&&_(t,["encryptionSpec"],E);const R=b(e,["partnerModelTuningSpec"]);R!=null&&_(t,["partnerModelTuningSpec"],R);const I=b(e,["distillationSpec"]);I!=null&&_(t,["distillationSpec"],I);const D=b(e,["experiment"]);D!=null&&_(t,["experiment"],D);const j=b(e,["labels"]);j!=null&&_(t,["labels"],j);const X=b(e,["pipelineJob"]);X!=null&&_(t,["pipelineJob"],X);const W=b(e,["serviceAccount"]);W!=null&&_(t,["serviceAccount"],W);const ue=b(e,["tunedModelDisplayName"]);return ue!=null&&_(t,["tunedModelDisplayName"],ue),t}function Zre(i,e){const t={},n=b(e,["nextPageToken"]);n!=null&&_(t,["nextPageToken"],n);const r=b(e,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>QC(i,a))),_(t,["tuningJobs"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ese extends Pv{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new L5(Tv.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const n=await this.tuneMldevInternal(t);let r="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?r=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(r=n.name.split("/operations/")[0]),{name:r,state:zC.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=zre(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>QC(this.apiClient,f))}else{const d=Mre(this.apiClient,e);return l=sn("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>J8(this.apiClient,f))}}async listInternal(e){var t,n,r,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const d=qre(this.apiClient,e);return l=sn("tuningJobs",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Zre(this.apiClient,f),y=new uP;return Object.assign(y,p),y})}else{const d=Ore(this.apiClient,e);return l=sn("tunedModels",d._url),u=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Wre(this.apiClient,f),y=new uP;return Object.assign(y,p),y})}}async tuneInternal(e){var t,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=Yre(this.apiClient,e);return s=sn("tuningJobs",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),r.then(u=>QC(this.apiClient,u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Ure(this.apiClient,e);return s=sn("tunedModels",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),r.then(u=>Qre(this.apiClient,u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tse{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const nse=1024*1024*8,ise=3,rse=1e3,sse=2,CT="x-goog-upload-status";async function ase(i,e,t){var n,r,s;let a=0,l=0,u=new jC(new Response),d="upload";for(a=i.size;l<a;){const p=Math.min(nse,a-l),y=i.slice(l,l+p);l+p>=a&&(d+=", finalize");let v=0,C=rse;for(;v<ise&&(u=await t.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((n=u==null?void 0:u.headers)===null||n===void 0)&&n[CT]));)v++,await lse(C),C=C*sse;if(l+=p,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[CT])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(u==null?void 0:u.json());if(((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[CT])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function ose(i){return{size:i.size,type:i.type}}function lse(i){return new Promise(e=>setTimeout(e,i))}class use{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ase(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ose(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cse{create(e,t,n){return new dse(e,t,n)}}class dse{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DP="x-goog-api-key";class hse{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(DP)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(DP,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fse="gl-node/";class pse{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=fX(e,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const r=new hse(this.apiKey);this.apiClient=new kie({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:fse+"web",uploader:new use,downloader:new tse}),this.models=new Gie(this.apiClient),this.live=new zie(this.apiClient,r,new cse),this.chats=new UJ(this.models,this.apiClient),this.caches=new FJ(this.apiClient),this.files=new ZJ(this.apiClient),this.operations=new ire(this.apiClient),this.authTokens=new Pre(this.apiClient),this.tunings=new ese(this.apiClient)}}const mse="AIzaSyCIYYYDSYB_QN00OgoRPQgXR2cUUWCzRmw",Z8=new pse({apiKey:mse}),e7=async i=>{try{const e=await fetch(i);if(!e.ok)throw new Error(`Prompt dosyası yüklenemedi: ${i}, Durum: ${e.status}`);return await e.text()}catch(e){throw console.error(`Prompt dosyası '${i}' yüklenirken ağ hatası:`,e),new Error(`Prompt dosyası yüklenirken hata oluştu: ${i}. Tarayıcı konsolunu kontrol edin.`)}},gse=async(i,e)=>{var u;const t=WA(),n=i.substring(0,t.maxPdfTextLength),r="/ai-quiz/identify_conceptual_subtopics_prompt.txt";let s;try{s=await e7(r)}catch(d){throw d instanceof Error?(console.error("Alt konu belirleme prompt şablonu yüklenemedi:",d.message),new Error(`Alt konu belirleme prompt şablonu yüklenemedi: ${d.message}`)):new Error("Alt konu belirleme prompt şablonu yüklenirken bilinmeyen bir hata oluştu.")}const a=e||"verilen belge";let l=s.replace("{{documentContext}}",a).replace("{{textSnippet}}",n);try{const f=((u=(await Z8.models.generateContent({model:t.gemini.textModel,contents:l,config:{temperature:t.gemini.identifySubtopics.temperature,thinkingConfig:{thinkingBudget:t.gemini.identifySubtopics.thinkingBudget}}})).text)==null?void 0:u.trim())||"";if(f==="Konu tespit edilemedi.")return{newSubtopics:[],confirmedExistingSubtopics:[]};const p=f.split(`
`),y=[],v=/^(?:\*\s*)?(?:\s*\d+(?:\.\d+)*\.\s+)?(.*?)(?:\s*\((?:s\.|Bölüm)\s*[\w\d\s.-]+?\))?\s*$/;for(const E of p){const R=E.trim();if(R){const I=R.match(v);if(I&&I[1]){const D=I[1].trim();D&&y.push(D)}}}const C=t.quizDefaults.maxSubtopicsPerDocument||10;return y.length>C&&(console.log(`Alt konu sayısı ${y.length}, maksimum ${C} ile sınırlandırılıyor`),y.splice(C)),{newSubtopics:y,confirmedExistingSubtopics:[]}}catch(d){throw console.error("Error identifying subtopics with Gemini:",d),d instanceof Error?d.message.includes("API key not valid")?new Error("Geçersiz Gemini API Anahtarı. Lütfen API anahtarınızı kontrol edin."):new Error(`Alt konular belirlenirken bir Gemini API hatası oluştu: ${d.message}`):new Error("Alt konular belirlenirken bilinmeyen bir hata oluştu.")}},yse=async(i,e,t,n,r,s,a)=>{var j,X,W,ue;const l=WA(),u=l.quizDefaults.minQuestionsPerSubtopic;let d="",f="Her soru için, sorunun metinden hangi ana alt konuya ait olduğunu belirten bir 'subtopic' alanı ekleyin. Eğer belirgin bir alt konu yoksa bu alanı boş bırakabilirsiniz.",p=`Sınavda ${e} soru bulunsun.`,y="",v="",C=i?"Lütfen sağlanan metne dayanarak çoktan seçmeli bir sınav oluşturun.":"Lütfen aşağıda belirtilen alt konulara dayanarak çoktan seçmeli bir sınav oluşturun.";if(s)switch(s){case"Kolay":y="Sorular temel kavramları ve tanımları sormalıdır. Basit ve anlaşılır bir dil kullanın.";break;case"Orta":y="Sorular, kavramların anlaşılmasını ve uygulanmasını gerektirmelidir. Senaryo tabanlı veya karşılaştırmalı sorular olabilir.";break;case"Zor":y="Sorular, derinlemesine analiz, sentez veya değerlendirme gerektirmelidir. Karmaşık senaryolar, istisnalar veya çoklu kavramların entegrasyonunu içerebilir.";break}if(r==="personalized"){if(a==="weak_topics"){if(v="Bu, kullanıcının zayıf olduğu konulara odaklanan bir sınavdır.",n&&n.length>0)d=`Sınav YALNIZCA şu alt konulara odaklanmalıdır: ${n.join(", ")}. Bu konulardaki temel eksiklikleri gidermeye yönelik sorular oluşturun.`,f="Her soru için, sorunun bu ZAYIF alt konulardan hangisine ait olduğunu belirten bir 'subtopic' alanı ekleyin. Bu alan DOĞRUDAN seçilen alt konulardan biri olmalıdır.",i||(C="Lütfen kullanıcının zayıf olduğu aşağıdaki alt konulara dayanarak çoktan seçmeli bir sınav oluşturun.");else if(d="Kullanıcının zayıf konuları bulunamadı. Genel sorular oluşturun.",!i)throw new Error("Zayıf konular sınavı için ne zayıf konu ne de metin sağlanmadı.")}else if(a==="new_topics"){if(v="Bu, belgedeki yeni konulara odaklanan bir sınavdır.",n&&n.length>0?(d=`Sınav YALNIZCA şu YENİ alt konulara odaklanmalıdır: ${n.join(", ")}. Bu yeni konuların anlaşılmasını test eden sorular oluşturun.`,f="Her soru için, sorunun bu YENİ alt konulardan hangisine ait olduğunu belirten bir 'subtopic' alanı ekleyin. Bu alan DOĞRUDAN seçilen alt konulardan biri olmalıdır."):d="Belgeden yeni alt konu belirlenemedi. Lütfen metnin genelinden sorular oluşturun.",!i)throw new Error("Yeni konular sınavı için metin sağlanmadı.")}else if(a==="comprehensive"){if(v="Bu kapsamlı bir sınavdır. Hem kullanıcının zayıf olduğu konuları hem de belgedeki yeni konuları içermelidir.",n&&n.length>0?(d=`Sınav, kullanıcının zayıf olduğu konuları ve belgedeki yeni konuları kapsamalıdır. Odaklanılacak konular şunlardır: ${n.join(", ")}. Mümkünse zayıf konulara öncelik verin.`,f="Her soru için, sorunun bu KAPSAMLI alt konulardan hangisine ait olduğunu belirten bir 'subtopic' alanı ekleyin. Bu alan DOĞRUDAN seçilen alt konulardan biri olmalıdır."):d="Kapsamlı sınav için konu belirlenemedi. Lütfen metnin genelinden sorular oluşturun.",!i)throw new Error("Kapsamlı sınav için metin sağlanmadı.")}else v="Bu kişiselleştirilmiş bir sınavdır. Lütfen metnin farklı zorluk seviyelerini ve önemli kavramlarını kapsayan, düşündürücü ve kapsamlı sorular oluşturmaya çalışın. Sorular, kullanıcının konuyu derinlemesine anlamasını teşvik etmelidir.",n&&n.length>0&&(d=`Sınav YALNIZCA şu alt konulara odaklanmalıdır: ${n.join(", ")}.`,f="Her soru için, sorunun bu seçilmiş alt konulardan hangisine ait olduğunu belirten bir 'subtopic' alanı ekleyin. Bu alan DOĞRUDAN seçilen alt konulardan biri olmalıdır.");n&&n.length>0&&r==="personalized"&&(p=`Toplam ${e} soru oluşturun. Bu soruları SEÇİLEN ALT KONULAR (${n.join(", ")}) arasında dağıtın. Her bir seçili alt konu için en az ${u} soru bulunmalıdır. Kalan soruları bu seçili alt konular arasında adil bir şekilde dağıtın.`)}else if(n&&n.length>0&&(d=`Sınav YALNIZCA şu alt konulara odaklanmalıdır: ${n.join(", ")}.`,f="Her soru için, sorunun bu seçilmiş alt konulardan hangisine ait olduğunu belirten bir 'subtopic' alanı ekleyin. Bu alan DOĞRUDAN seçilen alt konulardan biri olmalıdır.",p=`Toplam ${e} soru oluşturun. Bu soruları SEÇİLEN ALT KONULAR (${n.join(", ")}) arasında dağıtın. Her bir seçili alt konu için en az ${u} soru bulunmalıdır. Kalan soruları bu seçili alt konular arasında adil bir şekilde dağıtın.`),!i)throw new Error("Hızlı sınav için metin sağlanmadı.");let E;try{E=await e7("/ai-quiz/generate_quiz_prompt_template.txt")}catch(U){throw U instanceof Error?(console.error("Sınav oluşturma prompt şablonu yüklenemedi:",U.message),new Error(`Sınav oluşturma prompt şablonu yüklenemedi: ${U.message}`)):new Error("Sınav oluşturma prompt şablonu yüklenirken bilinmeyen bir hata oluştu.")}const R=y?y+`
`:"",I=i?`Sağlanan metin (yalnızca bu metni ve belirtilen alt konuları kullanın):
---
${i.substring(0,l.maxPdfTextLength)}
---`:a==="weak_topics"&&n&&n.length>0?`Lütfen soruları yalnızca şu alt konulara dayandırın: ${n.join(", ")}.`:"",D=E.replace("{{basePromptText}}",C).replace("{{difficultyInstructionSection}}",R).replace("{{personalizationInstruction}}",v).replace("{{promptFocusInstruction}}",d).replace("{{questionDistributionInstruction}}",p).replace("{{numOptions}}",String(t)).replace("{{subtopicGuidance}}",f).replace("{{mainTextContent}}",I);try{const U=await Z8.models.generateContent({model:l.gemini.textModel,contents:D,config:{responseMimeType:l.gemini.generateQuiz.responseMimeType,temperature:r==="personalized"?l.gemini.generateQuiz.personalizedTemperature:l.gemini.generateQuiz.defaultTemperature,thinkingConfig:{thinkingBudget:l.gemini.generateQuiz.thinkingBudget}}});let P=((j=U.text)==null?void 0:j.trim())||"";if(console.log("Gemini Model Response Length:",P.length),console.log("Gemini Model Response Preview:",P.substring(0,200)+"..."),!P)throw new Error("Gemini'den boş yanıt alındı. Model metnin özünü yakalayamadığı için soru oluşturamayabilir.");const V=/^```(?:json)?\s*\n?(.*?)\n?\s*```$/s,Y=P.match(V);Y&&Y[1]&&(P=Y[1].trim());let O;try{O=JSON.parse(P)}catch(H){throw console.error("JSON Parse Error:",H),console.error("Raw JSON String:",P),new Error("Gemini'den alınan yanıt geçerli JSON formatında değil. Model beklenmedik bir format döndürmüş olabilir.")}if(!Array.isArray(O))throw console.error("Response is not an array:",typeof O,O),new Error("Gemini yanıtı beklenen dizi formatında değil. Model farklı bir yapı döndürmüş.");if(O.length===0)throw console.warn("Gemini sıfır soru döndürdü. Prompt veya metin içeriği yetersiz olabilir."),new Error("Model hiç soru oluşturamadı. Metin içeriği yetersiz olabilir veya seçilen konular çok spesifik olabilir.");const F=[];if(O.forEach((H,fe)=>{vse(H,t)||F.push(`Soru ${fe+1}: ${bse(H,t)}`)}),F.length>0)throw console.error("Question validation errors:",F),new Error(`Oluşturulan sorularda format hataları var:
${F.join(`
`)}`);if(r==="personalized"&&n&&n.length>0){const H=O.filter(fe=>fe.subtopic&&!n.includes(fe.subtopic));H.length>0&&console.warn("Model seçilen alt konular dışında konular döndürdü:",H.map(fe=>fe.subtopic))}return{questions:O.map((H,fe)=>({...H,id:H.id||`q-${Date.now()}-${fe}`,subtopic:H.subtopic||void 0})),groundingChunks:(ue=(W=(X=U.candidates)==null?void 0:X[0])==null?void 0:W.groundingMetadata)==null?void 0:ue.groundingChunks}}catch(U){throw console.error("Error generating quiz with Gemini:",U),U instanceof Error?U.message.includes("API key not valid")?new Error("Geçersiz Gemini API Anahtarı. Lütfen API anahtarınızı kontrol edin."):new Error(`Sınav oluşturulurken bir Gemini API hatası oluştu: ${U.message}`):new Error("Sınav oluşturulurken bilinmeyen bir hata oluştu.")}},vse=(i,e)=>typeof i=="object"&&i!==null&&typeof i.question=="string"&&Array.isArray(i.options)&&i.options.every(t=>typeof t=="string")&&i.options.length===e&&typeof i.correctAnswerIndex=="number"&&i.correctAnswerIndex>=0&&i.correctAnswerIndex<i.options.length&&(typeof i.subtopic=="string"||typeof i.subtopic>"u"),bse=(i,e)=>typeof i!="object"||i===null?"Soru nesnesi geçersiz":typeof i.question!="string"?"Soru metni eksik veya geçersiz":Array.isArray(i.options)?i.options.length!==e?`Beklenen seçenek sayısı ${e}, alınan ${i.options.length}`:i.options.every(t=>typeof t=="string")?typeof i.correctAnswerIndex!="number"?"Doğru cevap indeksi sayı formatında değil":i.correctAnswerIndex<0||i.correctAnswerIndex>=i.options.length?"Doğru cevap indeksi geçersiz aralıkta":"Bilinmeyen validasyon hatası":"Bazı seçenekler metin formatında değil":"Seçenekler dizi formatında değil",Us=[];for(let i=0;i<256;++i)Us.push((i+256).toString(16).slice(1));function _se(i,e=0){return(Us[i[e+0]]+Us[i[e+1]]+Us[i[e+2]]+Us[i[e+3]]+"-"+Us[i[e+4]]+Us[i[e+5]]+"-"+Us[i[e+6]]+Us[i[e+7]]+"-"+Us[i[e+8]]+Us[i[e+9]]+"-"+Us[i[e+10]]+Us[i[e+11]]+Us[i[e+12]]+Us[i[e+13]]+Us[i[e+14]]+Us[i[e+15]]).toLowerCase()}let NT;const xse=new Uint8Array(16);function wse(){if(!NT){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");NT=crypto.getRandomValues.bind(crypto)}return NT(xse)}const Ase=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),OP={randomUUID:Ase};function FP(i,e,t){var r;if(OP.randomUUID&&!i)return OP.randomUUID();i=i||{};const n=i.random??((r=i.rng)==null?void 0:r.call(i))??wse();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,_se(n)}const Sse=(i,e,t,n,r,s,a,l,u)=>{const[d,f]=qe.useState(null),[p,y]=qe.useState(null),[v,C]=qe.useState(null),[E,R]=qe.useState(null),[I,D]=qe.useState((e==null?void 0:e.quizDefaults.defaultNumQuestions)||6),[j,X]=qe.useState("Orta"),[W,ue]=qe.useState(!1),[U,P]=qe.useState(null),[V,Y]=qe.useState(null),[O,F]=qe.useState(null),[B,H]=qe.useState(null),[fe,Q]=qe.useState(null),[ce,ge]=qe.useState(null),[Te,re]=qe.useState(!1),xe=He=>{a(He),re(!1)},q=qe.useCallback(()=>{f(null),y(null),C(null),R(null),P(null),Y(null),F(null),H(null),Q(null),ge(null),e&&D(e.quizDefaults.defaultNumQuestions),X("Orta"),t&&ue(t.defaultTimerEnabled),re(!1)},[e,t]),ee=qe.useCallback((He,Ye)=>{ge(He),Ye(d==="personalized"?"selecting_personalized_quiz_type":"initial")},[d]),he=qe.useCallback(async(He,Ye,Xe)=>{if(!i){a("Ders oluşturmak için giriş yapmalısınız.");return}if(!He.trim()){a("Ders adı boş olamaz.");return}const pt=await Ye(He);pt&&(ge(pt.id),d==="personalized"?Xe("selecting_personalized_quiz_type"):(a("Hızlı sınav modunda yeni ders oluşturulmamalıydı."),Xe("initial")))},[a,d,i]),me=qe.useCallback((He,Ye,Xe)=>{y(He);const pt=r.find(Ve=>Ve.id===ce&&Ve.userId===(i==null?void 0:i.uid));if(!i){a("Bu işlem için giriş yapmalısınız."),Ye("login");return}if(!pt&&He!==null){a("Lütfen önce bir ders seçin."),Ye("selecting_course_for_quiz");return}if(C(null),R(null),P(null),Y(null),F(null),Xe(!0),He==="weak_topics"&&pt){const ve=n.filter(ct=>ct.courseId===pt.id&&ct.userId===i.uid&&(ct.status==="failure"||ct.status==="intermediate"||ct.status==="pending")).map(ct=>ct.name);P(ve),Y([]),F(ve),Xe(!1),Ye("selecting_subtopics")}else Xe(!1),Ye("initial")},[ce,r,n,a,i]),ye=qe.useCallback(async(He,Ye,Xe,pt)=>{if(!e){xe("Uygulama yapılandırması yüklenemedi.");return}if(d==="personalized"&&!i){xe("Kişiselleştirilmiş sınav için giriş yapmanız gerekmektedir.");return}C(He),R(Ye),pt(!0),Xe("identifying_subtopics");const Ve=ce&&i?r.find(ve=>ve.id===ce&&ve.userId===i.uid):void 0;try{const{newSubtopics:ve}=await gse(He,Ye);if(d==="personalized"&&(p==="new_topics"||p==="comprehensive")&&Ye&&Ve&&i){const mt=[],it=new Map(n.filter(st=>st.sourcePdfName===Ye&&st.courseId===(Ve==null?void 0:Ve.id)&&st.userId===i.uid).map(st=>[st.name,st]));ve.forEach(st=>{if(!it.has(st)){const yt={id:FP(),userId:i.uid,name:st,status:"pending",sourcePdfName:Ye,createdAt:Date.now(),updatedAt:Date.now(),courseId:Ve.id,courseName:Ve.name};mt.push(yt)}}),mt.length>0&&await s(mt)}const ct=ve;ct.length>0?(P(ct),Y([]),F(ct),Xe("selecting_subtopics")):(P(null),Y(null),F(null),Xe("preferences_setup"))}catch(ve){xe(ve.message)}finally{pt(!1)}},[e,i,ce,r,d,p,n,s]),Ae=qe.useCallback((He,Ye,Xe)=>{F(He),Ye("preferences_setup"),Xe(!1)},[]),Ie=qe.useCallback((He,Ye)=>{F(null),He("preferences_setup"),Ye(!1)},[]),Me=qe.useCallback(async(He,Ye,Xe,pt,Ve)=>{if(!e||!t){xe("Yapılandırma yüklenemedi.");return}if(d==="personalized"&&!i){xe("Kişiselleştirilmiş sınav için giriş yapmanız gerekmektedir.");return}if(!v&&!(d==="personalized"&&p==="weak_topics")){xe("PDF metni bulunamadı. Lütfen tekrar deneyin.");return}D(He),X(Ye),ue(Xe),Ve(!0),pt("generating_quiz");let ve=O||[];if(d==="personalized"&&ce&&i){if(p==="weak_topics")ve=O||U||[];else if(p==="comprehensive"){const ct=n.filter(mt=>mt.courseId===ce&&mt.userId===i.uid&&(mt.status==="failure"||mt.status==="intermediate"||mt.status==="pending")).map(mt=>mt.name);ve=Array.from(new Set([...ct,...O||[]]))}}try{const ct=await yse(v,He,t.numOptionsPerQuestion,ve.length>0?ve:void 0,d||"quick",Ye,d==="personalized"&&p||void 0);if(ct.questions.length===0){xe("Sınav oluşturulamadı. Model hiç soru üretemedi. Lütfen ayarlarınızı veya kaynak metni/konuları kontrol edin."),pt("preferences_setup"),Ve(!1);return}H(ct.questions),pt("quiz_active")}catch(ct){xe(ct.message),pt("preferences_setup")}finally{Ve(!1)}},[e,t,i,v,d,p,O,U,n,ce]),nt=qe.useCallback(async He=>{if(Q(He),d==="personalized"&&!i){xe("Kişiselleştirilmiş sınav için kullanıcı girişi gereklidir.");return}const Ye=ce&&i?r.find(Xe=>Xe.id===ce&&Xe.userId===i.uid):void 0;if(d==="personalized"&&B&&Ye&&i){const Xe=[],pt={};B.forEach(ve=>{ve.subtopic&&(pt[ve.subtopic]||(pt[ve.subtopic]={correct:0,total:0}),pt[ve.subtopic].total++,He[ve.id]===ve.correctAnswerIndex&&pt[ve.subtopic].correct++)});const Ve=p==="weak_topics"?`Zayıf Konular (${Ye.name})`:E;Object.keys(pt).forEach(ve=>{const ct=n.find(st=>st.name===ve&&st.courseId===Ye.id&&st.userId===i.uid&&(p==="weak_topics"||st.sourcePdfName===Ve)),mt=pt[ve];let it=(ct==null?void 0:ct.status)||"pending";if(mt&&mt.total>0){const st=mt.correct/mt.total*100;st>=90?it="success":st<50?it="failure":it="intermediate"}else ct&&ct.status==="pending"&&(it="intermediate");if(ct)(ct.status!==it||!ct.userId)&&Xe.push({...ct,userId:i.uid,status:it,updatedAt:Date.now()});else if(Ve){const st=FP();Xe.push({id:st,userId:i.uid,name:ve,status:it,sourcePdfName:Ve,createdAt:Date.now(),updatedAt:Date.now(),courseId:Ye.id,courseName:Ye.name})}}),Xe.length>0&&await s(Xe)}l("quiz_completed")},[i,ce,r,d,B,p,E,n,s,l,xe]);return{currentQuizMode:d,currentPersonalizedQuizType:p,extractedPdfText:v,currentPdfName:E,numQuizQuestions:I,selectedDifficulty:j,isTimerEnabledForQuiz:W,identifiedNewSubtopics:U,confirmedExistingSubtopics:V,selectedSubtopics:O,currentQuizQuestions:B,currentUserAnswers:fe,currentSelectedCourseId:ce,isLoading:Te,setQuizWorkflowLoading:re,setQuizWorkflowError:xe,handleCourseSelectedForQuiz:ee,handleNewCourseCreatedForQuiz:he,handlePersonalizedQuizTypeSelected:me,handlePdfTextExtracted:ye,handleSubtopicsSelected:Ae,handleCancelSubtopicSelection:Ie,handlePreferencesSubmit:Me,handleQuizSubmitAndUpdateLOs:nt,resetQuizWorkflowState:q,setCurrentQuizModeState:f,setExtractedPdfTextState:C,setCurrentPdfNameState:R,setIdentifiedNewSubtopicsState:P,setConfirmedExistingSubtopicsState:Y,setSelectedSubtopicsState:F,setCurrentQuizQuestionsState:H,setCurrentUserAnswersState:Q,setCurrentSelectedCourseIdState:ge}},Tse=()=>{const[i,e]=qe.useState("dashboard_main"),[t,n]=qe.useState(!1),[r,s]=qe.useState(null),[a,l]=qe.useState(!1),[u,d]=qe.useState(null),[f,p]=qe.useState(!0),[y,v]=qe.useState(null),[C,E]=qe.useState(!0),[R,I]=qe.useState(null),[D,j]=qe.useState(null),[X,W]=qe.useState(null),[ue,U]=qe.useState(null),[P,V]=qe.useState(null),[Y,O]=qe.useState(null),F=qe.useRef(i);qe.useEffect(()=>{F.current=i},[i]),qe.useEffect(()=>fQ(xe=>{v(xe),E(!1)}),[]);const B=qe.useCallback((re,xe=!1)=>{const q=re instanceof Error?re.message:re;q&&q.trim()&&console.error("AppRouter Hata:",q,re);let ee=q;q.includes("Firebase:")?ee=`Bir Firebase hatası oluştu: ${q}. Lütfen internet bağlantınızı kontrol edin veya daha sonra tekrar deneyin.`:xe&&(ee=`Veri işlemi sırasında bir hata oluştu: ${q}. Lütfen internet bağlantınızı kontrol edin ve tekrar deneyin.`),ee&&ee.trim()&&(s(ee),e("error")),n(!1),E(!1)},[]),H=qe.useCallback(()=>{s(null)},[]),fe=qe.useCallback(re=>{F.current==="error"&&re!=="error"&&H(),["login","signup","forgot_password"].includes(re)||(I(null),j(null)),n(!1),e(re)},[H]),Q=qe.useCallback((re,xe,q=!0)=>{re(),xe(),W(null),U(null),V(null),O(null),s(null),I(null),j(null),n(!1),q&&fe("dashboard_main")},[fe,y]),ce=qe.useCallback((re,xe,q,ee,he,me)=>{if(!u||!me){B("Uygulama yapılandırması henüz hazır değil.");return}if(re==="personalized"&&!y){B("Kişiselleştirilmiş sınavlar için giriş yapmanız gerekmektedir."),fe("login");return}Q(xe,q,!1),W(re),ee(re),he(me.defaultTimerEnabled),fe(re==="personalized"?"selecting_course_for_quiz":"initial")},[u,y,B,Q,fe]),ge=qe.useCallback(()=>{l(re=>!re)},[]),Te=qe.useCallback(async(re,xe)=>{p(!0);try{const q=await re();return d(q),q}catch(q){console.error("Ana uygulama yapılandırması yüklenemedi (useAppRouter):",q);const ee=xe();return d(ee),ee}finally{p(!1)}},[]);return{appState:i,isLoading:t,errorMessage:r,isSidebarCollapsed:a,currentUser:y,authLoading:C,authError:R,authMessage:D,currentQuizModeForFlow:X,currentPersonalizedQuizTypeForFlow:ue,currentSelectedCourseIdForFlow:P,currentViewingCourseForLOForFlow:Y,navigateTo:fe,setLoading:n,setError:B,clearError:H,toggleSidebar:ge,startQuizFlow:ce,resetAppToDashboard:Q,appConfig:u,configLoading:f,setAppConfigValue:d,setConfigLoadingStatus:p,initializeConfig:Te,setAuthLoadingState:E,setAuthErrorState:I,setAuthMessageState:j,setCurrentSelectedCourseIdForFlowState:V,setCurrentPersonalizedQuizTypeForFlowState:U,setCurrentViewingCourseForLOForFlowState:O}},Ese=()=>{const{appState:i,isLoading:e,errorMessage:t,isSidebarCollapsed:n,currentUser:r,authLoading:s,authError:a,authMessage:l,navigateTo:u,setLoading:d,setError:f,toggleSidebar:p,startQuizFlow:y,resetAppToDashboard:v,appConfig:C,configLoading:E,initializeConfig:R,setAuthLoadingState:I,setAuthErrorState:D,setAuthMessageState:j,setCurrentPersonalizedQuizTypeForFlowState:X}=Tse(),{appSettings:W,updateAppSettings:ue,isLoading:U,theme:P}=xQ(C),{allSavedQuizzes:V,learningObjectives:Y,allCourses:O,achievements:F,selectedQuizForViewing:B,currentViewingCourseForLO:H,isLoadingData:fe,addCourse:Q,deleteCourse:ce,saveQuizResult:ge,deleteQuizFromList:Te,addOrUpdateLOs:re,deleteLearningObjectives:xe,resetPersistentDataSelectionState:q,setSelectedQuizForViewingState:ee,setCurrentViewingCourseForLOState:he}=RQ(r,f,C),{currentQuizMode:me,currentPersonalizedQuizType:ye,extractedPdfText:Ae,currentPdfName:Ie,numQuizQuestions:Me,selectedDifficulty:nt,isTimerEnabledForQuiz:He,identifiedNewSubtopics:Ye,confirmedExistingSubtopics:Xe,selectedSubtopics:pt,currentQuizQuestions:Ve,currentUserAnswers:ve,currentSelectedCourseId:ct,isLoading:mt,handleCourseSelectedForQuiz:it,handleNewCourseCreatedForQuiz:st,handlePersonalizedQuizTypeSelected:gt,handlePdfTextExtracted:yt,handleSubtopicsSelected:It,handleCancelSubtopicSelection:Gt,handlePreferencesSubmit:nn,handleQuizSubmitAndUpdateLOs:Dt,resetQuizWorkflowState:dt,setCurrentQuizModeState:pn,setCurrentSelectedCourseIdState:Ct,setCurrentUserAnswersState:gn}=Sse(r,C,W,Y,O,re,f,u);qe.useEffect(()=>{R(FB,WA)},[R]);const xt=qe.useMemo(()=>{const ut=me==="personalized"?ye==="weak_topics"?["course_selection","personalized_quiz_type_selection","subtopic_selection","preferences"]:["course_selection","personalized_quiz_type_selection","file_upload","subtopic_selection","preferences"]:["file_upload","subtopic_selection","preferences"];let on=ut.findIndex(Yt=>i==="initial"&&(Yt==="file_upload"||me==="personalized"&&Yt==="course_selection")||i==="selecting_course_for_quiz"&&Yt==="course_selection"||i==="selecting_personalized_quiz_type"&&Yt==="personalized_quiz_type_selection"||i==="selecting_subtopics"&&Yt==="subtopic_selection"||i==="preferences_setup"&&Yt==="preferences"||i==="generating_quiz"&&Yt==="preferences");return on===-1&&(i==="parsing_pdf"||i==="identifying_subtopics")&&(on=ut.findIndex(Yt=>Yt==="file_upload"),me==="personalized"&&ut.includes("course_selection")&&(on=ut.findIndex(Yt=>Yt==="course_selection"))),on===-1&&i==="generating_quiz"&&(on=ut.length-1),ut.length>0?(on+1)/ut.length*100:0},[i,me,ye]),Fi=e||U||fe||mt||E||s,ln=qe.useCallback(ut=>{if(!W){f("Uygulama ayarları henüz yüklenmedi.");return}y(ut,dt,q,pn,Sr,W)},[y,dt,q,pn,W,f]),Sr=qe.useCallback(ut=>{},[]),un=qe.useCallback(()=>{switch(i){case"selecting_subtopics":u(me==="personalized"&&ye==="weak_topics"?"selecting_personalized_quiz_type":"initial");break;case"preferences_setup":Ye&&Ye.length>0?u("selecting_subtopics"):u(me==="personalized"&&ye==="weak_topics"?"selecting_personalized_quiz_type":Ae?"initial":me==="personalized"?"selecting_personalized_quiz_type":"initial");break;case"quiz_active":u("preferences_setup");break;case"quiz_completed":u(r?"dashboard_main":"login");break;case"viewing_specific_saved_result":u("viewing_quiz_list");break;case"viewing_course_learning_objectives":u("viewing_courses_list");break;case"selecting_personalized_quiz_type":u("selecting_course_for_quiz");break;case"selecting_course_for_quiz":v(dt,q);break;default:v(dt,q)}},[i,u,v,dt,q,me,ye,Ye,Ae,r]),Wn=qe.useCallback(async()=>{if(!Ve||!ve||!W||!r){f("Sınav sonuçları kaydedilemedi: Gerekli veriler eksik.");return}d(!0);const ut=await ge(Ve,ve,Ie,me||"quick",ye,ct,nt,He,Me,W.secondsPerQuestion);d(!1),ut&&(j({type:"success",text:"Sınav sonuçları başarıyla kaydedildi!"}),v(dt,q))},[Ve,ve,Ie,me,ye,ct,nt,He,Me,W,ge,v,dt,q,r,f,d,j]),zr=qe.useCallback(()=>{u("login")},[u]),In=qe.useCallback(async ut=>{if(!r){f("Bu işlem için giriş yapmalısınız.");return}await Te(ut),j({type:"success",text:"Sınav sonucu silindi."}),v(dt,q)},[Te,v,dt,q,r,f,j]),ta=qe.useCallback(ut=>{d(ut),!ut&&i==="parsing_pdf"||ut&&u("parsing_pdf")},[d,i,u]),di=[{icon:"fas fa-bolt",title:"Hızlı Sınav",description:"Bir PDF belgesi yükleyin ve metin içeriğinden anında rastgele bir sınav oluşturun. Hızlı bilgi kontrolü için idealdir.",buttonText:"Hızlı Sınav Oluştur",buttonIcon:"fas fa-arrow-right",buttonGradientClasses:"bg-gradient-to-r from-cyan-500 to-blue-600",onClick:()=>ln("quick")},{icon:"fas fa-user-graduate",tag:{text:"",colorClass:v3(P,"pink").colorClass,bgColorClass:v3(P,"pink").bgColorClass},title:"Kişiselleştirilmiş Sınav",description:"Öğrenme hedeflerinize, zayıf olduğunuz konulara veya belgedeki yeni konulara odaklanan özel sınavlar oluşturun. Gelişiminizi takip edin.",buttonText:"Kişisel Sınav Oluştur",buttonIcon:"fas fa-arrow-right",buttonGradientClasses:"bg-gradient-to-r from-pink-500 to-fuchsia-600",premium:!0,onClick:()=>ln("personalized")}],qi=async()=>{I(!0);try{await S8(),v(dt,q,!0)}catch(ut){f("Çıkış yapılamadı: "+ut.message)}finally{I(!1)}},hr=qe.useCallback(()=>{r?u("viewing_quiz_list"):v(dt,q)},[r,u,v,dt,q]),hi=()=>{if(s||E||!W&&i!=="error")return T.jsx("div",{className:"flex items-center justify-center h-screen",children:T.jsx(R0,{text:"Uygulama yükleniyor..."})});if(t&&i==="error")return T.jsx(N1,{message:t,onRetry:()=>v(dt,q)});if(!r&&(i==="login"||i==="signup"||i==="forgot_password"||i==="auth_loading")){if(s&&i==="auth_loading")return T.jsx("div",{className:"flex items-center justify-center h-screen",children:T.jsx(R0,{text:"Oturum durumu kontrol ediliyor..."})});if(i==="login")return T.jsx(yQ,{onLoginSuccess:()=>u("dashboard_main"),navigateTo:Yt=>u(Yt),setAuthLoading:I,setAuthError:D,theme:P});if(i==="signup")return T.jsx(vQ,{onSignupSuccess:()=>u("dashboard_main"),navigateTo:Yt=>u(Yt),setAuthLoading:I,setAuthError:D,theme:P});if(i==="forgot_password")return T.jsx(bQ,{navigateTo:Yt=>u(Yt),setAuthLoading:I,setAuthMessage:j,theme:P})}if(U||fe||!C&&!t)return T.jsxs("div",{className:`flex h-screen ${P==="dark"?"bg-secondary-900":"bg-gray-100"}`,children:[!E&&T.jsx(q3,{appState:i,isCollapsed:n,onToggleCollapse:p,onNavigateToDashboard:()=>v(dt,q),onNavigateToQuizList:()=>u("viewing_quiz_list"),onNavigateToLearningObjectives:()=>{he(null),u("viewing_learning_objectives")},onNavigateToPerformanceAnalysis:()=>u("viewing_performance_analysis"),onNavigateToAchievements:()=>u("viewing_achievements"),onNavigateToCourses:()=>u("viewing_courses_list"),onNavigateToSettings:()=>u("viewing_settings"),currentUser:r,onNavigateToProfile:()=>u("profile"),onNavigateToLogin:()=>u("login"),onLogout:qi,theme:P}),T.jsx("main",{className:"flex-grow overflow-y-auto flex items-center justify-center",children:T.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:T.jsx(R0,{text:"Veriler yükleniyor..."})})})]});if(!C||!W)return T.jsx(N1,{message:"Uygulama yapılandırması yüklenemedi. Lütfen sayfayı yenileyin.",onRetry:()=>window.location.reload()});let ut;switch(i){case"initial":case"parsing_pdf":case"identifying_subtopics":case"selecting_subtopics":case"preferences_setup":case"generating_quiz":case"selecting_course_for_quiz":case"selecting_personalized_quiz_type":let Yt;i==="initial"?Yt=me==="personalized"&&ye!=="weak_topics"?"file_upload":me==="personalized"?"course_selection":"file_upload":i==="selecting_course_for_quiz"?Yt="course_selection":i==="selecting_personalized_quiz_type"?Yt="personalized_quiz_type_selection":i==="selecting_subtopics"?Yt="subtopic_selection":i==="preferences_setup"?Yt="preferences":i==="generating_quiz"?Yt="generating":Yt="file_upload",i==="initial"&&me==="personalized"&&!ct?Yt="course_selection":i==="initial"&&me==="personalized"&&ct&&!ye?Yt="personalized_quiz_type_selection":i==="initial"&&me==="personalized"&&ye==="weak_topics"&&(Yt="subtopic_selection");let Fn;i==="initial"||i==="parsing_pdf"||i==="identifying_subtopics"?me==="personalized"?ct?ye?ye==="weak_topics"?(Fn=T.jsx(b3,{newSubtopics:Ye||[],confirmedExistingSubtopics:Xe||[],onConfirm:Vt=>It(Vt,u,d),onCancel:()=>Gt(u,d),isLoading:mt&&(i==="identifying_subtopics"||i==="parsing_pdf"),selectionContext:"weak_topics",theme:P}),Yt="subtopic_selection"):(Fn=T.jsx(g3,{onPdfTextExtracted:(Vt,Li)=>yt(Vt,Li,u,d),onProcessingStateChange:ta,onError:Vt=>f(Vt),theme:P}),Yt="file_upload"):(Fn=T.jsx(H3,{learningObjectives:Y,currentCourseId:ct,onQuizTypeSelected:Vt=>{X(Vt),gt(Vt,u,d)},onBack:un,theme:P}),Yt="personalized_quiz_type_selection"):(Fn=T.jsx($3,{courses:O,onCourseSelected:Vt=>{Ct(Vt),it(Vt,u)},onNewCourseCreated:async Vt=>{const Li=await Q(Vt);Li&&(Ct(Li.id),st(Vt,Q,u))},onCancel:()=>v(dt,q),theme:P}),Yt="course_selection"):(Fn=T.jsx(g3,{onPdfTextExtracted:(Vt,Li)=>yt(Vt,Li,u,d),onProcessingStateChange:ta,onError:Vt=>f(Vt),theme:P}),Yt="file_upload"):i==="selecting_course_for_quiz"?Fn=T.jsx($3,{courses:O,onCourseSelected:Vt=>{Ct(Vt),it(Vt,u)},onNewCourseCreated:async Vt=>{const Li=await Q(Vt);Li&&(Ct(Li.id),st(Vt,Q,u))},onCancel:()=>v(dt,q),theme:P}):i==="selecting_personalized_quiz_type"?Fn=T.jsx(H3,{learningObjectives:Y,currentCourseId:ct,onQuizTypeSelected:Vt=>{X(Vt),gt(Vt,u,d)},onBack:un,theme:P}):i==="selecting_subtopics"?Fn=T.jsx(b3,{newSubtopics:Ye||[],confirmedExistingSubtopics:Xe||[],onConfirm:Vt=>It(Vt,u,d),onCancel:()=>Gt(u,d),isLoading:mt,selectionContext:ye==="weak_topics"?"weak_topics":"pdf_scan",theme:P}):i==="preferences_setup"?Fn=T.jsx(Pz,{onSubmit:(Vt,Li,wt)=>nn(Vt,Li,wt,u,d),onBack:un,initialNumQuestions:Me,initialDifficulty:nt,initialTimerEnabled:He,defaultSecondsPerQuestion:W.secondsPerQuestion,selectedSubtopicsCount:(pt==null?void 0:pt.length)||0,hasIdentifiedSubtopics:!!(Ye&&Ye.length>0)||ye==="weak_topics"&&!!Ye,currentQuizMode:me,currentPersonalizedQuizType:ye,quizDefaults:C.quizDefaults,theme:P}):i==="generating_quiz"&&(Fn=T.jsx(R0,{text:"Sınavınız oluşturuluyor, lütfen bekleyin..."})),ut=T.jsx(qj,{currentStageKey:Yt,progress:xt,onBack:i!=="generating_quiz"?un:void 0,quizMode:me||void 0,currentPersonalizedQuizType:ye,children:Fn});break;case"quiz_active":Ve?ut=T.jsx(Mj,{questions:Ve,onSubmitQuiz:Vt=>{gn(Vt),Dt(Vt)},onCancel:()=>v(dt,q),isTimerEnabled:He,totalTimeInSeconds:He?Me*W.secondsPerQuestion:0,pdfSourceFilename:Ie||void 0,theme:P}):(f("Sınav soruları yüklenemedi."),ut=T.jsx(N1,{message:"Sınav soruları yüklenemedi.",onRetry:un}));break;case"quiz_completed":!Ve||!ve?(f("Sınav sonuçları görüntülenemedi: Gerekli veriler eksik."),ut=T.jsx(N1,{message:"Sınav sonuçları görüntülenemedi.",onRetry:un})):ut=T.jsx(z3,{questions:Ve,userAnswers:ve,onRestart:()=>v(dt,q),onFinish:hr,onSaveResult:r?Wn:void 0,onLoginToSave:r?void 0:zr,isUserLoggedIn:!!r,theme:P});break;case"dashboard_main":ut=T.jsx(nq,{features:di,onStartQuizFlow:ln,theme:P});break;case"viewing_quiz_list":ut=T.jsx(Yj,{savedQuizzes:V,onViewQuiz:Vt=>{ee(Vt),u("viewing_specific_saved_result")},onAddNewQuiz:()=>ln("quick"),onAddNewPersonalizedQuiz:()=>ln("personalized"),theme:P});break;case"viewing_specific_saved_result":B?ut=T.jsx(z3,{questions:B.questions,userAnswers:B.userAnswers,onRestart:()=>v(dt,q),onFinish:hr,isViewingSaved:!0,pdfName:B.pdfName,savedAt:B.savedAt,quizId:B.id,onDeleteSpecificResult:In,isUserLoggedIn:!!r,theme:P}):(f("Kaydedilmiş sınav sonucu bulunamadı."),ut=T.jsx(N1,{message:"Kaydedilmiş sınav sonucu bulunamadı.",onRetry:()=>u("viewing_quiz_list")}));break;case"viewing_learning_objectives":case"viewing_course_learning_objectives":ut=T.jsx(Wj,{objectives:Y,allCourses:O,filterByCourse:i==="viewing_course_learning_objectives"?H:null,onBack:i==="viewing_course_learning_objectives"?()=>u("viewing_courses_list"):()=>v(dt,q),onDeleteObjectives:xe,theme:P||"light"});break;case"viewing_performance_analysis":ut=T.jsx(Jj,{savedQuizzes:V,allCourses:O,learningObjectives:Y,onBack:()=>v(dt,q),theme:P||"light"});break;case"viewing_achievements":ut=T.jsx(Zj,{achievements:F,onBack:()=>v(dt,q),theme:P});break;case"viewing_courses_list":ut=T.jsx(oq,{courses:O,learningObjectives:Y,onAddCourse:Q,onDeleteCourse:ce,onViewCourseLOs:Vt=>{he(Vt),u("viewing_course_learning_objectives")},onBack:()=>v(dt,q),theme:P});break;case"viewing_settings":ut=T.jsx(dq,{currentSettings:W,onSaveSettings:ue,onBack:()=>v(dt,q),appConfigDefaults:C.appSettingsDefaults,theme:P});break;case"profile":ut=T.jsx(_Q,{currentUser:r,onLogout:qi,onBack:()=>v(dt,q),setAuthLoading:I,setAuthError:D,theme:P});break;default:ut=T.jsxs("div",{className:"text-center",children:["Beklenmeyen durum: ",i]})}let on=null;return a&&(i==="login"||i==="signup")&&(on=T.jsxs("div",{className:`fixed top-5 right-5 px-4 py-3 rounded-md shadow-lg z-[100000] border ${y3(P,"error")}`,role:"alert",children:[T.jsx("strong",{className:"font-bold",children:"Hata!"}),T.jsx("span",{className:"block sm:inline ml-2",children:a}),T.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-3 py-2",onClick:()=>D(null),children:T.jsx("i",{className:"fas fa-times cursor-pointer"})})]})),l&&(i==="login"||i==="forgot_password"||i==="dashboard_main"||i==="quiz_completed"||i==="viewing_quiz_list")&&(on=T.jsxs("div",{className:`fixed top-5 right-5 px-4 py-3 rounded-md shadow-lg z-[100000] border ${y3(P,l.type==="success"?"success":"error")}`,role:"alert",children:[T.jsx("strong",{className:"font-bold",children:l.type==="success"?"Başarılı!":"Bilgi"}),T.jsx("span",{className:"block sm:inline ml-2",children:l.text}),T.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-3 py-2",onClick:()=>j(null),children:T.jsx("i",{className:"fas fa-times cursor-pointer"})})]})),T.jsxs("div",{className:`flex h-screen font-sans overflow-hidden ${P==="dark"?"bg-secondary-900":"bg-gray-100"}`,children:[on,!["login","signup","forgot_password","auth_loading"].includes(i)&&T.jsx(sq,{isOpen:!n,onClick:p,theme:P}),!["login","signup","forgot_password","auth_loading"].includes(i)&&T.jsx(q3,{appState:i,isCollapsed:n,onToggleCollapse:p,onNavigateToDashboard:()=>v(dt,q),onNavigateToQuizList:()=>u("viewing_quiz_list"),onNavigateToLearningObjectives:()=>{he(null),u("viewing_learning_objectives")},onNavigateToPerformanceAnalysis:()=>u("viewing_performance_analysis"),onNavigateToAchievements:()=>u("viewing_achievements"),onNavigateToCourses:()=>u("viewing_courses_list"),onNavigateToSettings:()=>u("viewing_settings"),currentUser:r,onNavigateToProfile:()=>u("profile"),onNavigateToLogin:()=>u("login"),onLogout:qi,theme:P}),T.jsx("main",{className:`flex-grow overflow-y-auto transition-all duration-300 ease-in-out ${["login","signup","forgot_password","auth_loading"].includes(i)?"ml-0":`ml-0 lg:ml-${n?"20":"72"}`} ${["login","signup","forgot_password","auth_loading"].includes(i)?"":"pt-16 lg:pt-0"}`,children:T.jsx("div",{className:"min-h-full p-3 sm:p-4 lg:p-6 xl:p-8",children:Fi&&i!=="error"&&!a&&!l?T.jsx(R0,{text:"Yükleniyor..."}):ut})})]})};return T.jsx($j,{onReset:()=>v(dt,q),children:hi()})},t7=document.getElementById("root");if(!t7)throw new Error("Root element 'root' not found in the document.");const Cse=gV.createRoot(t7);Cse.render(T.jsx(Oi.StrictMode,{children:T.jsx(Ese,{})}));export{xi as _,kse as c,BP as g};
